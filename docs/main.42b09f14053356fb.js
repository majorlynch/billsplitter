"use strict";(self.webpackChunkbillsplitter=self.webpackChunkbillsplitter||[]).push([[792],{443:($o,ni,st)=>{st.d(ni,{$:()=>Uu,A:()=>ve,G:()=>Gt,K:()=>rs,L:()=>Id,N:()=>vo,P:()=>T_,R:()=>w_,U:()=>we,V:()=>Di,W:()=>Dd,X:()=>Ym,Y:()=>Df,Z:()=>Sf,_:()=>xd,a:()=>v_,a0:()=>nI,a1:()=>fi,a2:()=>n_,a3:()=>Pd,a4:()=>XV,a5:()=>Hl,a6:()=>r_,a7:()=>Mf,a8:()=>Fn,a9:()=>s_,aA:()=>fa,aB:()=>dn,aC:()=>pe,aD:()=>Qf,aE:()=>le,aF:()=>qt,aG:()=>Kf,aH:()=>_D,aI:()=>l2,aJ:()=>nt,aN:()=>qu,aQ:()=>Vu,aa:()=>iI,ab:()=>sI,ac:()=>oI,ad:()=>a_,ae:()=>eD,af:()=>aI,ag:()=>tD,ah:()=>nD,ak:()=>iD,al:()=>sD,am:()=>oD,ap:()=>ZS,aq:()=>lI,as:()=>Wl,at:()=>Wu,au:()=>$n,av:()=>yo,aw:()=>Cf,ax:()=>kt,ay:()=>ec,az:()=>Ju,b:()=>pI,c:()=>r2,d:()=>s2,e:()=>i2,f:()=>Ps,g:()=>vD,h:()=>yD,i:()=>Dn,j:()=>Ko,k:()=>To,l:()=>Sr,m:()=>DD,o:()=>V_,p:()=>bn,r:()=>Mi,s:()=>Hf,u:()=>zf});var b=st(467),De=st(979),$=st(401),$e=st(398),Qn=st(635),gn=st(779);const bn={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},ve={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Gt=function Ge(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Nr=function bt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},zt=new $.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),It=new $e.Vy("@firebase/auth");function ar(v,...h){It.logLevel<=$e.$b.ERROR&&It.error(`Auth (${De.SDK_VERSION}): ${v}`,...h)}function kt(v,...h){throw lr(v,...h)}function dn(v,...h){return lr(v,...h)}function di(v,h,g){const C=Object.assign(Object.assign({},Nr()),{[h]:g});return new $.FA("auth","Firebase",C).create(h,{appName:v.name})}function rn(v){return di(v,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function pt(v,h,g){if(!(h instanceof g))throw g.name!==h.constructor.name&&kt(v,"argument-error"),di(v,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function lr(v,...h){if("string"!=typeof v){const g=h[0],C=[...h.slice(1)];return C[0]&&(C[0].appName=v.name),v._errorFactory.create(g,...C)}return zt.create(v,...h)}function pe(v,h,...g){if(!v)throw lr(h,...g)}function Jn(v){const h="INTERNAL ASSERTION FAILED: "+v;throw ar(h),new Error(h)}function $n(v,h){v||Jn(h)}function Si(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function es(){return"http:"===po()||"https:"===po()}function po(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class zs{constructor(h,g){this.shortDelay=h,this.longDelay=g,$n(g>h,"Short delay should be less than long delay!"),this.isMobile=(0,$.jZ)()||(0,$.lV)()}get(){return function Or(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(es()||(0,$.sr)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Cs(v,h){$n(v.emulator,"Emulator should always be set here");const{url:g}=v.emulator;return h?`${g}${h.startsWith("/")?h.slice(1):h}`:g}class oa{static initialize(h,g,C){this.fetchImpl=h,g&&(this.headersImpl=g),C&&(this.responseImpl=C)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Jn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Jn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Jn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ie={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},ae=new zs(3e4,6e4);function te(v,h){return v.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:v.tenantId}):h}function ne(v,h,g,C){return me.apply(this,arguments)}function me(){return(me=(0,b.A)(function*(v,h,g,C,S={}){return Ee(v,S,(0,b.A)(function*(){let k={},Q={};C&&("GET"===h?Q=C:k={body:JSON.stringify(C)});const re=(0,$.Am)(Object.assign({key:v.config.apiKey},Q)).slice(1),ge=yield v._getAdditionalHeaders();ge["Content-Type"]="application/json",v.languageCode&&(ge["X-Firebase-Locale"]=v.languageCode);const Se=Object.assign({method:h,headers:ge},k);return(0,$.c1)()||(Se.referrerPolicy="no-referrer"),oa.fetch()(at(v,v.config.apiHost,g,re),Se)}))})).apply(this,arguments)}function Ee(v,h,g){return qe.apply(this,arguments)}function qe(){return(qe=(0,b.A)(function*(v,h,g){v._canInitEmulator=!1;const C=Object.assign(Object.assign({},ie),h);try{const S=new kn(v),k=yield Promise.race([g(),S.promise]);S.clearNetworkTimeout();const Q=yield k.json();if("needConfirmation"in Q)throw Fr(v,"account-exists-with-different-credential",Q);if(k.ok&&!("errorMessage"in Q))return Q;{const re=k.ok?Q.errorMessage:Q.error.message,[ge,Se]=re.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ge)throw Fr(v,"credential-already-in-use",Q);if("EMAIL_EXISTS"===ge)throw Fr(v,"email-already-in-use",Q);if("USER_DISABLED"===ge)throw Fr(v,"user-disabled",Q);const He=C[ge]||ge.toLowerCase().replace(/[_\s]+/g,"-");if(Se)throw di(v,He,Se);kt(v,He)}}catch(S){if(S instanceof $.g)throw S;kt(v,"network-request-failed",{message:String(S)})}})).apply(this,arguments)}function wt(v,h,g,C){return An.apply(this,arguments)}function An(){return(An=(0,b.A)(function*(v,h,g,C,S={}){const k=yield ne(v,h,g,C,S);return"mfaPendingCredential"in k&&kt(v,"multi-factor-auth-required",{_serverResponse:k}),k})).apply(this,arguments)}function at(v,h,g,C){const S=`${h}${g}?${C}`;return v.config.emulator?Cs(v.config,S):`${v.config.apiScheme}://${S}`}function Qe(v){switch(v){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class kn{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((g,C)=>{this.timer=setTimeout(()=>C(dn(this.auth,"network-request-failed")),ae.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Fr(v,h,g){const C={appName:v.name};g.email&&(C.email=g.email),g.phoneNumber&&(C.phoneNumber=g.phoneNumber);const S=dn(v,h,C);return S.customData._tokenResponse=g,S}function Ot(v){return void 0!==v&&void 0!==v.getResponse}function Lt(v){return void 0!==v&&void 0!==v.enterprise}class br{constructor(h){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===h.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=h.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=h.recaptchaEnforcementState}getProviderEnforcementState(h){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const g of this.recaptchaEnforcementState)if(g.provider&&g.provider===h)return Qe(g.enforcementState);return null}isProviderEnabled(h){return"ENFORCE"===this.getProviderEnforcementState(h)||"AUDIT"===this.getProviderEnforcementState(h)}}function ri(){return(ri=(0,b.A)(function*(v){return(yield ne(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function On(v,h){return hi.apply(this,arguments)}function hi(){return(hi=(0,b.A)(function*(v,h){return ne(v,"GET","/v2/recaptchaConfig",te(v,h))})).apply(this,arguments)}function go(){return(go=(0,b.A)(function*(v,h){return ne(v,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function zi(){return(zi=(0,b.A)(function*(v,h){return ne(v,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Wa(v,h){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,b.A)(function*(v,h){return ne(v,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function yr(v){if(v)try{const h=new Date(Number(v));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function mo(){return(mo=(0,b.A)(function*(v,h=!1){const g=(0,$.Ku)(v),C=yield g.getIdToken(h),S=Is(C);pe(S&&S.exp&&S.auth_time&&S.iat,g.auth,"internal-error");const k="object"==typeof S.firebase?S.firebase:void 0,Q=k?.sign_in_provider;return{claims:S,token:C,authTime:yr(ts(S.auth_time)),issuedAtTime:yr(ts(S.iat)),expirationTime:yr(ts(S.exp)),signInProvider:Q||null,signInSecondFactor:k?.sign_in_second_factor||null}})).apply(this,arguments)}function ts(v){return 1e3*Number(v)}function Is(v){const[h,g,C]=v.split(".");if(void 0===h||void 0===g||void 0===C)return ar("JWT malformed, contained fewer than 3 sections"),null;try{const S=(0,$.u)(g);return S?JSON.parse(S):(ar("Failed to decode base64 JWT payload"),null)}catch(S){return ar("Caught error parsing JWT payload as JSON",S?.toString()),null}}function Ws(v){const h=Is(v);return pe(h,"internal-error"),pe(typeof h.exp<"u","internal-error"),pe(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}function sn(v,h){return ns.apply(this,arguments)}function ns(){return(ns=(0,b.A)(function*(v,h,g=!1){if(g)return h;try{return yield h}catch(C){throw C instanceof $.g&&function ua({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}(C)&&v.auth.currentUser===v&&(yield v.auth.signOut()),C}})).apply(this,arguments)}class ca{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var g;if(h){const C=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),C}{this.errorBackoff=3e4;const S=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(h=!1){var g=this;if(!this.isRunning)return;const C=this.getInterval(h);this.timerId=setTimeout((0,b.A)(function*(){yield g.iteration()}),C)}iteration(){var h=this;return(0,b.A)(function*(){try{yield h.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g?.code&&h.schedule(!0))}h.schedule()})()}}class Cn{constructor(h,g){this.createdAt=h,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=yr(this.lastLoginAt),this.creationTime=yr(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ii(v){return si.apply(this,arguments)}function si(){return(si=(0,b.A)(function*(v){var h;const g=v.auth,C=yield v.getIdToken(),S=yield sn(v,Wa(g,{idToken:C}));pe(S?.users.length,g,"internal-error");const k=S.users[0];v._notifyReloadListener(k);const Q=null!==(h=k.providerUserInfo)&&void 0!==h&&h.length?da(k.providerUserInfo):[],re=function an(v,h){return[...v.filter(C=>!h.some(S=>S.providerId===C.providerId)),...h]}(v.providerData,Q),He=!!v.isAnonymous&&!(v.email&&k.passwordHash||re?.length),ze={uid:k.localId,displayName:k.displayName||null,photoURL:k.photoUrl||null,email:k.email||null,emailVerified:k.emailVerified||!1,phoneNumber:k.phoneNumber||null,tenantId:k.tenantId||null,providerData:re,metadata:new Cn(k.createdAt,k.lastLoginAt),isAnonymous:He};Object.assign(v,ze)})).apply(this,arguments)}function _o(){return(_o=(0,b.A)(function*(v){const h=(0,$.Ku)(v);yield ii(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function da(v){return v.map(h=>{var{providerId:g}=h,C=(0,Qn.Tt)(h,["providerId"]);return{providerId:g,uid:C.rawId||"",displayName:C.displayName||null,email:C.email||null,phoneNumber:C.phoneNumber||null,photoURL:C.photoUrl||null}})}function Wo(){return(Wo=(0,b.A)(function*(v,h){const g=yield Ee(v,{},(0,b.A)(function*(){const C=(0,$.Am)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:S,apiKey:k}=v.config,Q=at(v,S,"/v1/token",`key=${k}`),re=yield v._getAdditionalHeaders();return re["Content-Type"]="application/x-www-form-urlencoded",oa.fetch()(Q,{method:"POST",headers:re,body:C})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}function M(){return(M=(0,b.A)(function*(v,h){return ne(v,"POST","/v2/accounts:revokeToken",te(v,h))})).apply(this,arguments)}class D{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){pe(h.idToken,"internal-error"),pe(typeof h.idToken<"u","internal-error"),pe(typeof h.refreshToken<"u","internal-error");const g="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):Ws(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,g)}updateFromIdToken(h){pe(0!==h.length,"internal-error");const g=Ws(h);this.updateTokensAndExpiration(h,null,g)}getToken(h,g=!1){var C=this;return(0,b.A)(function*(){return g||!C.accessToken||C.isExpired?(pe(C.refreshToken,h,"user-token-expired"),C.refreshToken?(yield C.refresh(h,C.refreshToken),C.accessToken):null):C.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,g){var C=this;return(0,b.A)(function*(){const{accessToken:S,refreshToken:k,expiresIn:Q}=yield function Nu(v,h){return Wo.apply(this,arguments)}(h,g);C.updateTokensAndExpiration(S,k,Number(Q))})()}updateTokensAndExpiration(h,g,C){this.refreshToken=g||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*C}static fromJSON(h,g){const{refreshToken:C,accessToken:S,expirationTime:k}=g,Q=new D;return C&&(pe("string"==typeof C,"internal-error",{appName:h}),Q.refreshToken=C),S&&(pe("string"==typeof S,"internal-error",{appName:h}),Q.accessToken=S),k&&(pe("number"==typeof k,"internal-error",{appName:h}),Q.expirationTime=k),Q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new D,this.toJSON())}_performRefresh(){return Jn("not implemented")}}function R(v,h){pe("string"==typeof v||typeof v>"u","internal-error",{appName:h})}class j{constructor(h){var{uid:g,auth:C,stsTokenManager:S}=h,k=(0,Qn.Tt)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ca(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=C,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=k.displayName||null,this.email=k.email||null,this.emailVerified=k.emailVerified||!1,this.phoneNumber=k.phoneNumber||null,this.photoURL=k.photoURL||null,this.isAnonymous=k.isAnonymous||!1,this.tenantId=k.tenantId||null,this.providerData=k.providerData?[...k.providerData]:[],this.metadata=new Cn(k.createdAt||void 0,k.lastLoginAt||void 0)}getIdToken(h){var g=this;return(0,b.A)(function*(){const C=yield sn(g,g.stsTokenManager.getToken(g.auth,h));return pe(C,g.auth,"internal-error"),g.accessToken!==C&&(g.accessToken=C,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),C})()}getIdTokenResult(h){return function la(v){return mo.apply(this,arguments)}(this,h)}reload(){return function Ga(v){return _o.apply(this,arguments)}(this)}_assign(h){this!==h&&(pe(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(g=>Object.assign({},g)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){const g=new j(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}));return g.metadata._copy(this.metadata),g}_onReload(h){pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,g=!1){var C=this;return(0,b.A)(function*(){let S=!1;h.idToken&&h.idToken!==C.stsTokenManager.accessToken&&(C.stsTokenManager.updateFromServerResponse(h),S=!0),g&&(yield ii(C)),yield C.auth._persistUserIfCurrent(C),S&&C.auth._notifyListenersIfCurrent(C)})()}delete(){var h=this;return(0,b.A)(function*(){if((0,De._isFirebaseServerApp)(h.auth.app))return Promise.reject(rn(h.auth));const g=yield h.getIdToken();return yield sn(h,function zo(v,h){return go.apply(this,arguments)}(h.auth,{idToken:g})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,g){var C,S,k,Q,re,ge,Se,He;const ze=null!==(C=g.displayName)&&void 0!==C?C:void 0,is=null!==(S=g.email)&&void 0!==S?S:void 0,nl=null!==(k=g.phoneNumber)&&void 0!==k?k:void 0,rp=null!==(Q=g.photoURL)&&void 0!==Q?Q:void 0,UI=null!==(re=g.tenantId)&&void 0!==re?re:void 0,ip=null!==(ge=g._redirectEventId)&&void 0!==ge?ge:void 0,U_=null!==(Se=g.createdAt)&&void 0!==Se?Se:void 0,nc=null!==(He=g.lastLoginAt)&&void 0!==He?He:void 0,{uid:Xs,emailVerified:BI,isAnonymous:Kd,providerData:rc,stsTokenManager:Yd}=g;pe(Xs&&Yd,h,"internal-error");const B_=D.fromJSON(this.name,Yd);pe("string"==typeof Xs,h,"internal-error"),R(ze,h.name),R(is,h.name),pe("boolean"==typeof BI,h,"internal-error"),pe("boolean"==typeof Kd,h,"internal-error"),R(nl,h.name),R(rp,h.name),R(UI,h.name),R(ip,h.name),R(U_,h.name),R(nc,h.name);const sp=new j({uid:Xs,auth:h,email:is,emailVerified:BI,displayName:ze,isAnonymous:Kd,photoURL:rp,phoneNumber:nl,tenantId:UI,stsTokenManager:B_,createdAt:U_,lastLoginAt:nc});return rc&&Array.isArray(rc)&&(sp.providerData=rc.map($I=>Object.assign({},$I))),ip&&(sp._redirectEventId=ip),sp}static _fromIdTokenResponse(h,g,C=!1){return(0,b.A)(function*(){const S=new D;S.updateFromServerResponse(g);const k=new j({uid:g.localId,auth:h,stsTokenManager:S,isAnonymous:C});return yield ii(k),k})()}static _fromGetAccountInfoResponse(h,g,C){return(0,b.A)(function*(){const S=g.users[0];pe(void 0!==S.localId,"internal-error");const k=void 0!==S.providerUserInfo?da(S.providerUserInfo):[],Q=!(S.email&&S.passwordHash||k?.length),re=new D;re.updateFromIdToken(C);const ge=new j({uid:S.localId,auth:h,stsTokenManager:re,isAnonymous:Q}),Se={uid:S.localId,displayName:S.displayName||null,photoURL:S.photoUrl||null,email:S.email||null,emailVerified:S.emailVerified||!1,phoneNumber:S.phoneNumber||null,tenantId:S.tenantId||null,providerData:k,metadata:new Cn(S.createdAt,S.lastLoginAt),isAnonymous:!(S.email&&S.passwordHash||k?.length)};return Object.assign(ge,Se),ge})()}}const G=new Map;function le(v){$n(v instanceof Function,"Expected a class definition");let h=G.get(v);return h?($n(h instanceof v,"Instance stored in cache mismatched with class"),h):(h=new v,G.set(v,h),h)}const we=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,b.A)(function*(){return!0})()}_set(g,C){var S=this;return(0,b.A)(function*(){S.storage[g]=C})()}_get(g){var C=this;return(0,b.A)(function*(){const S=C.storage[g];return void 0===S?null:S})()}_remove(g){var C=this;return(0,b.A)(function*(){delete C.storage[g]})()}_addListener(g,C){}_removeListener(g,C){}}return v.type="NONE",v})();function qt(v,h,g){return`firebase:${v}:${h}:${g}`}class Vt{constructor(h,g,C){this.persistence=h,this.auth=g,this.userKey=C;const{config:S,name:k}=this.auth;this.fullUserKey=qt(this.userKey,S.apiKey,k),this.fullPersistenceKey=qt("persistence",S.apiKey,k),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,b.A)(function*(){const g=yield h.persistence._get(h.fullUserKey);return g?j._fromJSON(h.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var g=this;return(0,b.A)(function*(){if(g.persistence===h)return;const C=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=h,C?g.setCurrentUser(C):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,g,C="authUser"){return(0,b.A)(function*(){if(!g.length)return new Vt(le(we),h,C);const S=(yield Promise.all(g.map(function(){var Se=(0,b.A)(function*(He){if(yield He._isAvailable())return He});return function(He){return Se.apply(this,arguments)}}()))).filter(Se=>Se);let k=S[0]||le(we);const Q=qt(C,h.config.apiKey,h.name);let re=null;for(const Se of g)try{const He=yield Se._get(Q);if(He){const ze=j._fromJSON(h,He);Se!==k&&(re=ze),k=Se;break}}catch{}const ge=S.filter(Se=>Se._shouldAllowMigration);return k._shouldAllowMigration&&ge.length?(k=ge[0],re&&(yield k._set(Q,re.toJSON())),yield Promise.all(g.map(function(){var Se=(0,b.A)(function*(He){if(He!==k)try{yield He._remove(Q)}catch{}});return function(He){return Se.apply(this,arguments)}}())),new Vt(k,h,C)):new Vt(k,h,C)})()}}function ce(v){const h=v.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Cd(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(Le(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(ku(h))return"Blackberry";if(Gs(h))return"Webos";if(Sn(h))return"Safari";if((h.includes("chrome/")||ws(h))&&!h.includes("edge/"))return"Chrome";if(Cf(h))return"Android";{const C=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===C?.length)return C[1]}return"Other"}function Le(v=(0,$.ZQ)()){return/firefox\//i.test(v)}function Sn(v=(0,$.ZQ)()){const h=v.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function ws(v=(0,$.ZQ)()){return/crios\//i.test(v)}function Cd(v=(0,$.ZQ)()){return/iemobile/i.test(v)}function Cf(v=(0,$.ZQ)()){return/android/i.test(v)}function ku(v=(0,$.ZQ)()){return/blackberry/i.test(v)}function Gs(v=(0,$.ZQ)()){return/webos/i.test(v)}function yo(v=(0,$.ZQ)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function fa(v=(0,$.ZQ)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}function X(v=(0,$.ZQ)()){return yo(v)||Cf(v)||Gs(v)||ku(v)||/windows phone/i.test(v)||Cd(v)}function he(v,h=[]){let g;switch(v){case"Browser":g=ce((0,$.ZQ)());break;case"Worker":g=`${ce((0,$.ZQ)())}-${v}`;break;default:g=v}const C=h.length?h.join(","):"FirebaseCore-web";return`${g}/JsCore/${De.SDK_VERSION}/${C}`}class ke{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,g){const C=k=>new Promise((Q,re)=>{try{Q(h(k))}catch(ge){re(ge)}});C.onAbort=g,this.queue.push(C);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(h){var g=this;return(0,b.A)(function*(){if(g.auth.currentUser===h)return;const C=[];try{for(const S of g.queue)yield S(h),S.onAbort&&C.push(S.onAbort)}catch(S){C.reverse();for(const k of C)try{k()}catch{}throw g.auth._errorFactory.create("login-blocked",{originalMessage:S?.message})}})()}}function gt(){return(gt=(0,b.A)(function*(v,h={}){return ne(v,"GET","/v2/passwordPolicy",te(v,h))})).apply(this,arguments)}class it{constructor(h){var g,C,S,k;const Q=h.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(g=Q.minPasswordLength)&&void 0!==g?g:6,Q.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=Q.maxPasswordLength),void 0!==Q.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=Q.containsLowercaseCharacter),void 0!==Q.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=Q.containsUppercaseCharacter),void 0!==Q.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=Q.containsNumericCharacter),void 0!==Q.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=Q.containsNonAlphanumericCharacter),this.enforcementState=h.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(S=null===(C=h.allowedNonAlphanumericCharacters)||void 0===C?void 0:C.join(""))&&void 0!==S?S:"",this.forceUpgradeOnSignin=null!==(k=h.forceUpgradeOnSignin)&&void 0!==k&&k,this.schemaVersion=h.schemaVersion}validatePassword(h){var g,C,S,k,Q,re;const ge={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(h,ge),this.validatePasswordCharacterOptions(h,ge),ge.isValid&&(ge.isValid=null===(g=ge.meetsMinPasswordLength)||void 0===g||g),ge.isValid&&(ge.isValid=null===(C=ge.meetsMaxPasswordLength)||void 0===C||C),ge.isValid&&(ge.isValid=null===(S=ge.containsLowercaseLetter)||void 0===S||S),ge.isValid&&(ge.isValid=null===(k=ge.containsUppercaseLetter)||void 0===k||k),ge.isValid&&(ge.isValid=null===(Q=ge.containsNumericCharacter)||void 0===Q||Q),ge.isValid&&(ge.isValid=null===(re=ge.containsNonAlphanumericCharacter)||void 0===re||re),ge}validatePasswordLengthOptions(h,g){const C=this.customStrengthOptions.minPasswordLength,S=this.customStrengthOptions.maxPasswordLength;C&&(g.meetsMinPasswordLength=h.length>=C),S&&(g.meetsMaxPasswordLength=h.length<=S)}validatePasswordCharacterOptions(h,g){let C;this.updatePasswordCharacterOptionsStatuses(g,!1,!1,!1,!1);for(let S=0;S<h.length;S++)C=h.charAt(S),this.updatePasswordCharacterOptionsStatuses(g,C>="a"&&C<="z",C>="A"&&C<="Z",C>="0"&&C<="9",this.allowedNonAlphanumericCharacters.includes(C))}updatePasswordCharacterOptionsStatuses(h,g,C,S,k){this.customStrengthOptions.containsLowercaseLetter&&(h.containsLowercaseLetter||(h.containsLowercaseLetter=g)),this.customStrengthOptions.containsUppercaseLetter&&(h.containsUppercaseLetter||(h.containsUppercaseLetter=C)),this.customStrengthOptions.containsNumericCharacter&&(h.containsNumericCharacter||(h.containsNumericCharacter=S)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(h.containsNonAlphanumericCharacter||(h.containsNonAlphanumericCharacter=k))}}class Xn{constructor(h,g,C,S){this.app=h,this.heartbeatServiceProvider=g,this.appCheckServiceProvider=C,this.config=S,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Go(this),this.idTokenSubscription=new Go(this),this.beforeStateQueue=new ke(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=zt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=S.sdkClientVersion}_initializeWithPersistence(h,g){var C=this;return g&&(this._popupRedirectResolver=le(g)),this._initializationPromise=this.queue((0,b.A)(function*(){var S,k;if(!C._deleted&&(C.persistenceManager=yield Vt.create(C,h),!C._deleted)){if(null!==(S=C._popupRedirectResolver)&&void 0!==S&&S._shouldInitProactively)try{yield C._popupRedirectResolver._initialize(C)}catch{}yield C.initializeCurrentUser(g),C.lastNotifiedUid=(null===(k=C.currentUser)||void 0===k?void 0:k.uid)||null,!C._deleted&&(C._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,b.A)(function*(){if(h._deleted)return;const g=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||g){if(h.currentUser&&g&&h.currentUser.uid===g.uid)return h._currentUser._assign(g),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(g,!0)}})()}initializeCurrentUserFromIdToken(h){var g=this;return(0,b.A)(function*(){try{const C=yield Wa(g,{idToken:h}),S=yield j._fromGetAccountInfoResponse(g,C,h);yield g.directlySetCurrentUser(S)}catch(C){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",C),yield g.directlySetCurrentUser(null)}})()}initializeCurrentUser(h){var g=this;return(0,b.A)(function*(){var C;if((0,De._isFirebaseServerApp)(g.app)){const re=g.app.settings.authIdToken;return re?new Promise(ge=>{setTimeout(()=>g.initializeCurrentUserFromIdToken(re).then(ge,ge))}):g.directlySetCurrentUser(null)}const S=yield g.assertedPersistence.getCurrentUser();let k=S,Q=!1;if(h&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const re=null===(C=g.redirectUser)||void 0===C?void 0:C._redirectEventId,ge=k?._redirectEventId,Se=yield g.tryRedirectSignIn(h);(!re||re===ge)&&Se?.user&&(k=Se.user,Q=!0)}if(!k)return g.directlySetCurrentUser(null);if(!k._redirectEventId){if(Q)try{yield g.beforeStateQueue.runMiddleware(k)}catch(re){k=S,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(re))}return k?g.reloadAndSetCurrentUserOrClear(k):g.directlySetCurrentUser(null)}return pe(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===k._redirectEventId?g.directlySetCurrentUser(k):g.reloadAndSetCurrentUserOrClear(k)})()}tryRedirectSignIn(h){var g=this;return(0,b.A)(function*(){let C=null;try{C=yield g._popupRedirectResolver._completeRedirectFn(g,h,!0)}catch{yield g._setRedirectUser(null)}return C})()}reloadAndSetCurrentUserOrClear(h){var g=this;return(0,b.A)(function*(){try{yield ii(h)}catch(C){if("auth/network-request-failed"!==C?.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function Ho(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var h=this;return(0,b.A)(function*(){h._deleted=!0})()}updateCurrentUser(h){var g=this;return(0,b.A)(function*(){if((0,De._isFirebaseServerApp)(g.app))return Promise.reject(rn(g));const C=h?(0,$.Ku)(h):null;return C&&pe(C.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(C&&C._clone(g))})()}_updateCurrentUser(h,g=!1){var C=this;return(0,b.A)(function*(){if(!C._deleted)return h&&pe(C.tenantId===h.tenantId,C,"tenant-id-mismatch"),g||(yield C.beforeStateQueue.runMiddleware(h)),C.queue((0,b.A)(function*(){yield C.directlySetCurrentUser(h),C.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,b.A)(function*(){return(0,De._isFirebaseServerApp)(h.app)?Promise.reject(rn(h)):(yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0))})()}setPersistence(h){var g=this;return(0,De._isFirebaseServerApp)(this.app)?Promise.reject(rn(this)):this.queue((0,b.A)(function*(){yield g.assertedPersistence.setPersistence(le(h))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(h){var g=this;return(0,b.A)(function*(){g._getPasswordPolicyInternal()||(yield g._updatePasswordPolicy());const C=g._getPasswordPolicyInternal();return C.schemaVersion!==g.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(g._errorFactory.create("unsupported-password-policy-schema-version",{})):C.validatePassword(h)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var h=this;return(0,b.A)(function*(){const g=yield function Me(v){return gt.apply(this,arguments)}(h),C=new it(g);null===h.tenantId?h._projectPasswordPolicy=C:h._tenantPasswordPolicies[h.tenantId]=C})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new $.FA("auth","Firebase",h())}onAuthStateChanged(h,g,C){return this.registerStateListener(this.authStateSubscription,h,g,C)}beforeAuthStateChanged(h,g){return this.beforeStateQueue.pushCallback(h,g)}onIdTokenChanged(h,g,C){return this.registerStateListener(this.idTokenSubscription,h,g,C)}authStateReady(){return new Promise((h,g)=>{if(this.currentUser)h();else{const C=this.onAuthStateChanged(()=>{C(),h()},g)}})}revokeAccessToken(h){var g=this;return(0,b.A)(function*(){if(g.currentUser){const C=yield g.currentUser.getIdToken(),S={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:h,idToken:C};null!=g.tenantId&&(S.tenantId=g.tenantId),yield function ha(v,h){return M.apply(this,arguments)}(g,S)}})()}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,g){var C=this;return(0,b.A)(function*(){const S=yield C.getOrInitRedirectPersistenceManager(g);return null===h?S.removeCurrentUser():S.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var g=this;return(0,b.A)(function*(){if(!g.redirectPersistenceManager){const C=h&&le(h)||g._popupRedirectResolver;pe(C,g,"argument-error"),g.redirectPersistenceManager=yield Vt.create(g,[le(C._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(h){var g=this;return(0,b.A)(function*(){var C,S;return g._isInitialized&&(yield g.queue((0,b.A)(function*(){}))),(null===(C=g._currentUser)||void 0===C?void 0:C._redirectEventId)===h?g._currentUser:(null===(S=g.redirectUser)||void 0===S?void 0:S._redirectEventId)===h?g.redirectUser:null})()}_persistUserIfCurrent(h){var g=this;return(0,b.A)(function*(){if(h===g.currentUser)return g.queue((0,b.A)(function*(){return g.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const C=null!==(g=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==C&&(this.lastNotifiedUid=C,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,g,C,S){if(this._deleted)return()=>{};const k="function"==typeof g?g:g.next.bind(g);let Q=!1;const re=this._isInitialized?Promise.resolve():this._initializationPromise;if(pe(re,this,"internal-error"),re.then(()=>{Q||k(this.currentUser)}),"function"==typeof g){const ge=h.addObserver(g,C,S);return()=>{Q=!0,ge()}}{const ge=h.addObserver(g);return()=>{Q=!0,ge()}}}directlySetCurrentUser(h){var g=this;return(0,b.A)(function*(){g.currentUser&&g.currentUser!==h&&g._currentUser._stopProactiveRefresh(),h&&g.isProactiveRefreshEnabled&&h._startProactiveRefresh(),g.currentUser=h,h?yield g.assertedPersistence.setCurrentUser(h):yield g.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=he(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,b.A)(function*(){var g;const C={"X-Client-Version":h.clientVersion};h.app.options.appId&&(C["X-Firebase-gmpid"]=h.app.options.appId);const S=yield null===(g=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();S&&(C["X-Firebase-Client"]=S);const k=yield h._getAppCheckToken();return k&&(C["X-Firebase-AppCheck"]=k),C})()}_getAppCheckToken(){var h=this;return(0,b.A)(function*(){var g;const C=yield null===(g=h.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getToken();return C?.error&&function kr(v,...h){It.logLevel<=$e.$b.WARN&&It.warn(`Auth (${De.SDK_VERSION}): ${v}`,...h)}(`Error while retrieving App Check token: ${C.error}`),C?.token})()}}function nt(v){return(0,$.Ku)(v)}class Go{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,$.tD)(g=>this.observer=g)}get next(){return pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Ou={loadJS:()=>(0,b.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function In(v){return Ou.loadJS(v)}function US(v){return`__${v}${Math.floor(1e6*Math.random())}`}class pa{constructor(h){this.type="recaptcha-enterprise",this.auth=nt(h)}verify(h="verify",g=!1){var C=this;return(0,b.A)(function*(){function k(){return k=(0,b.A)(function*(re){if(!g){if(null==re.tenantId&&null!=re._agentRecaptchaConfig)return re._agentRecaptchaConfig.siteKey;if(null!=re.tenantId&&void 0!==re._tenantRecaptchaConfigs[re.tenantId])return re._tenantRecaptchaConfigs[re.tenantId].siteKey}return new Promise(function(){var ge=(0,b.A)(function*(Se,He){On(re,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(ze=>{if(void 0!==ze.recaptchaKey){const is=new br(ze);return null==re.tenantId?re._agentRecaptchaConfig=is:re._tenantRecaptchaConfigs[re.tenantId]=is,Se(is.siteKey)}He(new Error("recaptcha Enterprise site key undefined"))}).catch(ze=>{He(ze)})});return function(Se,He){return ge.apply(this,arguments)}}())}),k.apply(this,arguments)}function Q(re,ge,Se){const He=window.grecaptcha;Lt(He)?He.enterprise.ready(()=>{He.enterprise.execute(re,{action:h}).then(ze=>{ge(ze)}).catch(()=>{ge("NO_RECAPTCHA")})}):Se(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((re,ge)=>{(function S(re){return k.apply(this,arguments)})(C.auth).then(Se=>{if(!g&&Lt(window.grecaptcha))Q(Se,re,ge);else{if(typeof window>"u")return void ge(new Error("RecaptchaVerifier is only supported in browser"));let He=function If(){return Ou.recaptchaEnterpriseScript}();0!==He.length&&(He+=Se),In(He).then(()=>{Q(Se,re,ge)}).catch(ze=>{ge(ze)})}}).catch(Se=>{ge(Se)})})})()}}function $S(v,h,g){return GC.apply(this,arguments)}function GC(){return(GC=(0,b.A)(function*(v,h,g,C=!1){const S=new pa(v);let k;try{k=yield S.verify(g)}catch{k=yield S.verify(g,!0)}const Q=Object.assign({},h);return Object.assign(Q,C?{captchaResp:k}:{captchaResponse:k}),Object.assign(Q,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Q,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Q})).apply(this,arguments)}function wf(v,h,g,C){return qC.apply(this,arguments)}function qC(){return qC=(0,b.A)(function*(v,h,g,C){var S;if(null!==(S=v._getRecaptchaConfig())&&void 0!==S&&S.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const k=yield $S(v,h,g,"getOobCode"===g);return C(v,k)}return C(v,h).catch(function(){var k=(0,b.A)(function*(Q){if("auth/missing-recaptcha-token"===Q.code){console.log(`${g} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const re=yield $S(v,h,g,"getOobCode"===g);return C(v,re)}return Promise.reject(Q)});return function(Q){return k.apply(this,arguments)}}())}),qC.apply(this,arguments)}function rs(v,h,g){const C=nt(v);pe(C._canInitEmulator,C,"emulator-config-failed"),pe(/^https?:\/\//.test(h),C,"invalid-emulator-scheme");const S=!!g?.disableWarnings,k=ot(h),{host:Q,port:re}=function qV(v){const h=ot(v),g=/(\/\/)?([^?#/]+)/.exec(v.substr(h.length));if(!g)return{host:"",port:null};const C=g[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(C);if(S){const k=S[1];return{host:k,port:WS(C.substr(k.length+1))}}{const[k,Q]=C.split(":");return{host:k,port:WS(Q)}}}(h);C.config.emulator={url:`${k}//${Q}${null===re?"":`:${re}`}/`},C.settings.appVerificationDisabledForTesting=!0,C.emulatorConfig=Object.freeze({host:Q,port:re,protocol:k.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function jV(){function v(){const h=document.createElement("p"),g=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}function ot(v){const h=v.indexOf(":");return h<0?"":v.substr(0,h+1)}function WS(v){if(!v)return null;const h=Number(v);return isNaN(h)?null:h}class Id{constructor(h,g){this.providerId=h,this.signInMethod=g}toJSON(){return Jn("not implemented")}_getIdTokenResponse(h){return Jn("not implemented")}_linkToIdToken(h,g){return Jn("not implemented")}_getReauthenticationResolver(h){return Jn("not implemented")}}function GS(v,h){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,b.A)(function*(v,h){return ne(v,"POST","/v1/accounts:resetPassword",te(v,h))})).apply(this,arguments)}function bs(){return(bs=(0,b.A)(function*(v,h){return ne(v,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Tf(v,h){return Wm.apply(this,arguments)}function Wm(){return(Wm=(0,b.A)(function*(v,h){return ne(v,"POST","/v1/accounts:signUp",h)})).apply(this,arguments)}function Gm(){return(Gm=(0,b.A)(function*(v,h){return ne(v,"POST","/v1/accounts:update",te(v,h))})).apply(this,arguments)}function bf(v,h){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,b.A)(function*(v,h){return wt(v,"POST","/v1/accounts:signInWithPassword",te(v,h))})).apply(this,arguments)}function Lu(v,h){return Af.apply(this,arguments)}function Af(){return(Af=(0,b.A)(function*(v,h){return ne(v,"POST","/v1/accounts:sendOobCode",te(v,h))})).apply(this,arguments)}function be(){return(be=(0,b.A)(function*(v,h){return Lu(v,h)})).apply(this,arguments)}function qm(v,h){return wd.apply(this,arguments)}function wd(){return(wd=(0,b.A)(function*(v,h){return Lu(v,h)})).apply(this,arguments)}function YC(v,h){return Td.apply(this,arguments)}function Td(){return(Td=(0,b.A)(function*(v,h){return Lu(v,h)})).apply(this,arguments)}function bd(){return(bd=(0,b.A)(function*(v,h){return Lu(v,h)})).apply(this,arguments)}function QC(){return(QC=(0,b.A)(function*(v,h){return wt(v,"POST","/v1/accounts:signInWithEmailLink",te(v,h))})).apply(this,arguments)}function JC(){return(JC=(0,b.A)(function*(v,h){return wt(v,"POST","/v1/accounts:signInWithEmailLink",te(v,h))})).apply(this,arguments)}class Fl extends Id{constructor(h,g,C,S=null){super("password",C),this._email=h,this._password=g,this._tenantId=S}static _fromEmailAndPassword(h,g){return new Fl(h,g,"password")}static _fromEmailAndCode(h,g,C=null){return new Fl(h,g,"emailLink",C)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h;if(g?.email&&g?.password){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(h){var g=this;return(0,b.A)(function*(){switch(g.signInMethod){case"password":return wf(h,{returnSecureToken:!0,email:g._email,password:g._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",bf);case"emailLink":return function YV(v,h){return QC.apply(this,arguments)}(h,{email:g._email,oobCode:g._password});default:kt(h,"internal-error")}})()}_linkToIdToken(h,g){var C=this;return(0,b.A)(function*(){switch(C.signInMethod){case"password":return wf(h,{idToken:g,returnSecureToken:!0,email:C._email,password:C._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Tf);case"emailLink":return function QV(v,h){return JC.apply(this,arguments)}(h,{idToken:g,email:C._email,oobCode:C._password});default:kt(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function As(v,h){return Ad.apply(this,arguments)}function Ad(){return(Ad=(0,b.A)(function*(v,h){return wt(v,"POST","/v1/accounts:signInWithIdp",te(v,h))})).apply(this,arguments)}class vo extends Id{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const g=new vo(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(g.idToken=h.idToken),h.accessToken&&(g.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(g.nonce=h.nonce),h.pendingToken&&(g.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(g.accessToken=h.oauthToken,g.secret=h.oauthTokenSecret):kt("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:C,signInMethod:S}=g,k=(0,Qn.Tt)(g,["providerId","signInMethod"]);if(!C||!S)return null;const Q=new vo(C,S);return Q.idToken=k.idToken||void 0,Q.accessToken=k.accessToken||void 0,Q.secret=k.secret,Q.nonce=k.nonce,Q.pendingToken=k.pendingToken||null,Q}_getIdTokenResponse(h){return As(h,this.buildRequest())}_linkToIdToken(h,g){const C=this.buildRequest();return C.idToken=g,As(h,C)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,As(h,g)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),h.postBody=(0,$.Am)(g)}return h}}function Ll(){return(Ll=(0,b.A)(function*(v,h){return ne(v,"POST","/v1/accounts:sendVerificationCode",te(v,h))})).apply(this,arguments)}function dt(){return(dt=(0,b.A)(function*(v,h){return wt(v,"POST","/v1/accounts:signInWithPhoneNumber",te(v,h))})).apply(this,arguments)}function ZC(){return(ZC=(0,b.A)(function*(v,h){const g=yield wt(v,"POST","/v1/accounts:signInWithPhoneNumber",te(v,h));if(g.temporaryProof)throw Fr(v,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const KS={USER_NOT_FOUND:"user-not-found"};function eI(){return(eI=(0,b.A)(function*(v,h){return wt(v,"POST","/v1/accounts:signInWithPhoneNumber",te(v,Object.assign(Object.assign({},h),{operation:"REAUTH"})),KS)})).apply(this,arguments)}class Vl extends Id{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,g){return new Vl({verificationId:h,verificationCode:g})}static _fromTokenResponse(h,g){return new Vl({phoneNumber:h,temporaryProof:g})}_getIdTokenResponse(h){return function XC(v,h){return dt.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,g){return function ln(v,h){return ZC.apply(this,arguments)}(h,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function YS(v,h){return eI.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:g,verificationId:C,verificationCode:S}=this.params;return h&&g?{temporaryProof:h,phoneNumber:g}:{sessionInfo:C,code:S}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:g,verificationCode:C,phoneNumber:S,temporaryProof:k}=h;return C||g||S||k?new Vl({verificationId:g,verificationCode:C,phoneNumber:S,temporaryProof:k}):null}}class Ul{constructor(h){var g,C,S,k,Q,re;const ge=(0,$.I9)((0,$.hp)(h)),Se=null!==(g=ge.apiKey)&&void 0!==g?g:null,He=null!==(C=ge.oobCode)&&void 0!==C?C:null,ze=function Km(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=ge.mode)&&void 0!==S?S:null);pe(Se&&He&&ze,"argument-error"),this.apiKey=Se,this.operation=ze,this.code=He,this.continueUrl=null!==(k=ge.continueUrl)&&void 0!==k?k:null,this.languageCode=null!==(Q=ge.languageCode)&&void 0!==Q?Q:null,this.tenantId=null!==(re=ge.tenantId)&&void 0!==re?re:null}static parseLink(h){const g=function Ut(v){const h=(0,$.I9)((0,$.hp)(v)).link,g=h?(0,$.I9)((0,$.hp)(h)).deep_link_id:null,C=(0,$.I9)((0,$.hp)(v)).deep_link_id;return(C?(0,$.I9)((0,$.hp)(C)).link:null)||C||g||h||v}(h);try{return new Ul(g)}catch{return null}}}let Di=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(g,C){return Fl._fromEmailAndPassword(g,C)}static credentialWithLink(g,C){const S=Ul.parseLink(C);return pe(S,"argument-error"),Fl._fromEmailAndCode(g,S.code,S.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class qo{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Sd extends qo{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class Sf extends Sd{static credentialFromJSON(h){const g="string"==typeof h?JSON.parse(h):h;return pe("providerId"in g&&"signInMethod"in g,"argument-error"),vo._fromParams(g)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return pe(h.idToken||h.accessToken,"argument-error"),vo._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return Sf.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return Sf.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:g,oauthAccessToken:C,oauthTokenSecret:S,pendingToken:k,nonce:Q,providerId:re}=h;if(!C&&!S&&!g&&!k||!re)return null;try{return new Sf(re)._credential({idToken:g,accessToken:C,nonce:Q,pendingToken:k})}catch{return null}}}let Dd=(()=>{class v extends Sd{constructor(){super("facebook.com")}static credential(g){return vo._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return v.credential(g.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),Ym=(()=>{class v extends Sd{constructor(){super("google.com"),this.addScope("profile")}static credential(g,C){return vo._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:C})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:C,oauthAccessToken:S}=g;if(!C&&!S)return null;try{return v.credential(C,S)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),Df=(()=>{class v extends Sd{constructor(){super("github.com")}static credential(g){return vo._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return v.credential(g.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class Vu extends Id{constructor(h,g){super(h,h),this.pendingToken=g}_getIdTokenResponse(h){return As(h,this.buildRequest())}_linkToIdToken(h,g){const C=this.buildRequest();return C.idToken=g,As(h,C)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,As(h,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:C,signInMethod:S,pendingToken:k}=g;return C&&S&&k&&C===S?new Vu(C,k):null}static _create(h,g){return new Vu(h,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class xd extends qo{constructor(h){pe(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return xd.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return xd.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const g=Vu.fromJSON(h);return pe(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:g,providerId:C}=h;if(!g||!C)return null;try{return Vu._create(C,g)}catch{return null}}}let Uu=(()=>{class v extends Sd{constructor(){super("twitter.com")}static credential(g,C){return vo._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:C})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:C,oauthTokenSecret:S}=g;if(!C||!S)return null;try{return v.credential(C,S)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function tI(v,h){return jo.apply(this,arguments)}function jo(){return(jo=(0,b.A)(function*(v,h){return wt(v,"POST","/v1/accounts:signUp",te(v,h))})).apply(this,arguments)}class qs{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,g,C,S=!1){return(0,b.A)(function*(){const k=yield j._fromIdTokenResponse(h,C,S),Q=xe(C);return new qs({user:k,providerId:Q,_tokenResponse:C,operationType:g})})()}static _forOperation(h,g,C){return(0,b.A)(function*(){yield h._updateTokensIfNecessary(C,!0);const S=xe(C);return new qs({user:h,providerId:S,_tokenResponse:C,operationType:g})})()}}function xe(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function nI(v){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,b.A)(function*(v){var h;if((0,De._isFirebaseServerApp)(v.app))return Promise.reject(rn(v));const g=nt(v);if(yield g._initializationPromise,null!==(h=g.currentUser)&&void 0!==h&&h.isAnonymous)return new qs({user:g.currentUser,providerId:null,operationType:"signIn"});const C=yield tI(g,{returnSecureToken:!0}),S=yield qs._fromIdTokenResponse(g,"signIn",C,!0);return yield g._updateCurrentUser(S.user),S})).apply(this,arguments)}class Bl extends $.g{constructor(h,g,C,S){var k;super(g.code,g.message),this.operationType=C,this.user=S,Object.setPrototypeOf(this,Bl.prototype),this.customData={appName:h.name,tenantId:null!==(k=h.tenantId)&&void 0!==k?k:void 0,_serverResponse:g.customData._serverResponse,operationType:C}}static _fromErrorAndOperation(h,g,C,S){return new Bl(h,g,C,S)}}function xf(v,h,g,C){return("reauthenticate"===h?g._getReauthenticationResolver(v):g._getIdTokenResponse(v)).catch(k=>{throw"auth/multi-factor-auth-required"===k.code?Bl._fromErrorAndOperation(v,k,h,C):k})}function Bu(v){return new Set(v.map(({providerId:h})=>h).filter(h=>!!h))}function ZS(v,h){return Qm.apply(this,arguments)}function Qm(){return Qm=(0,b.A)(function*(v,h){const g=(0,$.Ku)(v);yield Gr(!0,g,h);const{providerUserInfo:C}=yield function aa(v,h){return zi.apply(this,arguments)}(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[h]}),S=Bu(C||[]);return g.providerData=g.providerData.filter(k=>S.has(k.providerId)),S.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g}),Qm.apply(this,arguments)}function Jm(v,h){return Xm.apply(this,arguments)}function Xm(){return(Xm=(0,b.A)(function*(v,h,g=!1){const C=yield sn(v,h._linkToIdToken(v.auth,yield v.getIdToken()),g);return qs._forOperation(v,"link",C)})).apply(this,arguments)}function Gr(v,h,g){return Zm.apply(this,arguments)}function Zm(){return(Zm=(0,b.A)(function*(v,h,g){yield ii(h);const S=!1===v?"provider-already-linked":"no-such-provider";pe(Bu(h.providerData).has(g)===v,h.auth,S)})).apply(this,arguments)}function Rd(v,h){return e_.apply(this,arguments)}function e_(){return(e_=(0,b.A)(function*(v,h,g=!1){const{auth:C}=v;if((0,De._isFirebaseServerApp)(C.app))return Promise.reject(rn(C));const S="reauthenticate";try{const k=yield sn(v,xf(C,S,h,v),g);pe(k.idToken,C,"internal-error");const Q=Is(k.idToken);pe(Q,C,"internal-error");const{sub:re}=Q;return pe(v.uid===re,C,"user-mismatch"),qs._forOperation(v,S,k)}catch(k){throw"auth/user-not-found"===k?.code&&kt(C,"user-mismatch"),k}})).apply(this,arguments)}function ja(v,h){return t_.apply(this,arguments)}function t_(){return(t_=(0,b.A)(function*(v,h,g=!1){if((0,De._isFirebaseServerApp)(v.app))return Promise.reject(rn(v));const C="signIn",S=yield xf(v,C,h),k=yield qs._fromIdTokenResponse(v,C,S);return g||(yield v._updateCurrentUser(k.user)),k})).apply(this,arguments)}function fi(v,h){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,b.A)(function*(v,h){return ja(nt(v),h)})).apply(this,arguments)}function n_(v,h){return $u.apply(this,arguments)}function $u(){return($u=(0,b.A)(function*(v,h){const g=(0,$.Ku)(v);return yield Gr(!1,g,h.providerId),Jm(g,h)})).apply(this,arguments)}function Pd(v,h){return Md.apply(this,arguments)}function Md(){return(Md=(0,b.A)(function*(v,h){return Rd((0,$.Ku)(v),h)})).apply(this,arguments)}function Rf(){return(Rf=(0,b.A)(function*(v,h){return wt(v,"POST","/v1/accounts:signInWithCustomToken",te(v,h))})).apply(this,arguments)}function XV(v,h){return Wi.apply(this,arguments)}function Wi(){return Wi=(0,b.A)(function*(v,h){if((0,De._isFirebaseServerApp)(v.app))return Promise.reject(rn(v));const g=nt(v),C=yield function JV(v,h){return Rf.apply(this,arguments)}(g,{token:h,returnSecureToken:!0}),S=yield qs._fromIdTokenResponse(g,"signIn",C);return yield g._updateCurrentUser(S.user),S}),Wi.apply(this,arguments)}class $l{constructor(h,g){this.factorId=h,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(h,g){return"phoneInfo"in g?Ya._fromServerResponse(h,g):"totpInfo"in g?rI._fromServerResponse(h,g):kt(h,"internal-error")}}class Ya extends $l{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,g){return new Ya(g)}}class rI extends $l{constructor(h){super("totp",h)}static _fromServerResponse(h,g){return new rI(g)}}function Nd(v,h,g){var C;pe((null===(C=g.url)||void 0===C?void 0:C.length)>0,v,"invalid-continue-uri"),pe(typeof g.dynamicLinkDomain>"u"||g.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),h.continueUrl=g.url,h.dynamicLinkDomain=g.dynamicLinkDomain,h.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(pe(g.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),h.iOSBundleId=g.iOS.bundleId),g.android&&(pe(g.android.packageName.length>0,v,"missing-android-pkg-name"),h.androidInstallApp=g.android.installApp,h.androidMinimumVersionCode=g.android.minimumVersion,h.androidPackageName=g.android.packageName)}function js(v){return jt.apply(this,arguments)}function jt(){return(jt=(0,b.A)(function*(v){const h=nt(v);h._getPasswordPolicyInternal()&&(yield h._updatePasswordPolicy())})).apply(this,arguments)}function Hl(v,h,g){return Pf.apply(this,arguments)}function Pf(){return(Pf=(0,b.A)(function*(v,h,g){const C=nt(v),S={requestType:"PASSWORD_RESET",email:h,clientType:"CLIENT_TYPE_WEB"};g&&Nd(C,S,g),yield wf(C,S,"getOobCode",qm)})).apply(this,arguments)}function r_(v,h,g){return Hu.apply(this,arguments)}function Hu(){return Hu=(0,b.A)(function*(v,h,g){yield GS((0,$.Ku)(v),{oobCode:h,newPassword:g}).catch(function(){var C=(0,b.A)(function*(S){throw"auth/password-does-not-meet-requirements"===S.code&&js(v),S});return function(S){return C.apply(this,arguments)}}())}),Hu.apply(this,arguments)}function Mf(v,h){return Ss.apply(this,arguments)}function Ss(){return Ss=(0,b.A)(function*(v,h){yield function KC(v,h){return Gm.apply(this,arguments)}((0,$.Ku)(v),{oobCode:h})}),Ss.apply(this,arguments)}function Fn(v,h){return i_.apply(this,arguments)}function i_(){return(i_=(0,b.A)(function*(v,h){const g=(0,$.Ku)(v),C=yield GS(g,{oobCode:h}),S=C.requestType;switch(pe(S,g,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":pe(C.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":pe(C.mfaInfo,g,"internal-error");default:pe(C.email,g,"internal-error")}let k=null;return C.mfaInfo&&(k=$l._fromServerResponse(nt(g),C.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.newEmail:C.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.email:C.newEmail)||null,multiFactorInfo:k},operation:S}})).apply(this,arguments)}function s_(v,h){return Nf.apply(this,arguments)}function Nf(){return(Nf=(0,b.A)(function*(v,h){const{data:g}=yield Fn((0,$.Ku)(v),h);return g.email})).apply(this,arguments)}function iI(v,h,g){return zl.apply(this,arguments)}function zl(){return(zl=(0,b.A)(function*(v,h,g){if((0,De._isFirebaseServerApp)(v.app))return Promise.reject(rn(v));const C=nt(v),Q=yield wf(C,{returnSecureToken:!0,email:h,password:g,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",tI).catch(ge=>{throw"auth/password-does-not-meet-requirements"===ge.code&&js(v),ge}),re=yield qs._fromIdTokenResponse(C,"signIn",Q);return yield C._updateCurrentUser(re.user),re})).apply(this,arguments)}function sI(v,h,g){return(0,De._isFirebaseServerApp)(v.app)?Promise.reject(rn(v)):fi((0,$.Ku)(v),Di.credential(h,g)).catch(function(){var C=(0,b.A)(function*(S){throw"auth/password-does-not-meet-requirements"===S.code&&js(v),S});return function(S){return C.apply(this,arguments)}}())}function oI(v,h,g){return o_.apply(this,arguments)}function o_(){return(o_=(0,b.A)(function*(v,h,g){const C=nt(v),S={requestType:"EMAIL_SIGNIN",email:h,clientType:"CLIENT_TYPE_WEB"};(function k(Q,re){pe(re.handleCodeInApp,C,"argument-error"),re&&Nd(C,Q,re)})(S,g),yield wf(C,S,"getOobCode",YC)})).apply(this,arguments)}function a_(v,h){const g=Ul.parseLink(h);return"EMAIL_SIGNIN"===g?.operation}function eD(v,h,g){return l_.apply(this,arguments)}function l_(){return(l_=(0,b.A)(function*(v,h,g){if((0,De._isFirebaseServerApp)(v.app))return Promise.reject(rn(v));const C=(0,$.Ku)(v),S=Di.credentialWithLink(h,g||Si());return pe(S._tenantId===(C.tenantId||null),C,"tenant-id-mismatch"),fi(C,S)})).apply(this,arguments)}function u_(){return(u_=(0,b.A)(function*(v,h){return ne(v,"POST","/v1/accounts:createAuthUri",te(v,h))})).apply(this,arguments)}function aI(v,h){return c_.apply(this,arguments)}function c_(){return c_=(0,b.A)(function*(v,h){const C={identifier:h,continueUri:es()?Si():"http://localhost"},{signinMethods:S}=yield function Eo(v,h){return u_.apply(this,arguments)}((0,$.Ku)(v),C);return S||[]}),c_.apply(this,arguments)}function tD(v,h){return d_.apply(this,arguments)}function d_(){return d_=(0,b.A)(function*(v,h){const g=(0,$.Ku)(v),S={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};h&&Nd(g.auth,S,h);const{email:k}=yield function qS(v,h){return be.apply(this,arguments)}(g.auth,S);k!==v.email&&(yield v.reload())}),d_.apply(this,arguments)}function nD(v,h,g){return kf.apply(this,arguments)}function kf(){return kf=(0,b.A)(function*(v,h,g){const C=(0,$.Ku)(v),k={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:h};g&&Nd(C.auth,k,g);const{email:Q}=yield function jS(v,h){return bd.apply(this,arguments)}(C.auth,k);Q!==v.email&&(yield v.reload())}),kf.apply(this,arguments)}function h_(){return(h_=(0,b.A)(function*(v,h){return ne(v,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function iD(v,h){return Ds.apply(this,arguments)}function Ds(){return Ds=(0,b.A)(function*(v,{displayName:h,photoURL:g}){if(void 0===h&&void 0===g)return;const C=(0,$.Ku)(v),k={idToken:yield C.getIdToken(),displayName:h,photoUrl:g,returnSecureToken:!0},Q=yield sn(C,function rD(v,h){return h_.apply(this,arguments)}(C.auth,k));C.displayName=Q.displayName||null,C.photoURL=Q.photoUrl||null;const re=C.providerData.find(({providerId:ge})=>"password"===ge);re&&(re.displayName=C.displayName,re.photoURL=C.photoURL),yield C._updateTokensIfNecessary(Q)}),Ds.apply(this,arguments)}function sD(v,h){const g=(0,$.Ku)(v);return(0,De._isFirebaseServerApp)(g.auth.app)?Promise.reject(rn(g.auth)):Co(g,h,null)}function oD(v,h){return Co((0,$.Ku)(v),null,h)}function Co(v,h,g){return Of.apply(this,arguments)}function Of(){return Of=(0,b.A)(function*(v,h,g){const{auth:C}=v,k={idToken:yield v.getIdToken(),returnSecureToken:!0};h&&(k.email=h),g&&(k.password=g);const Q=yield sn(v,function KV(v,h){return bs.apply(this,arguments)}(C,k));yield v._updateTokensIfNecessary(Q,!0)}),Of.apply(this,arguments)}class qr{constructor(h,g,C={}){this.isNewUser=h,this.providerId=g,this.profile=C}}class Dt extends qr{constructor(h,g,C,S){super(h,g,C),this.username=S}}class jr extends qr{constructor(h,g){super(h,"facebook.com",g)}}class pi extends Dt{constructor(h,g){super(h,"github.com",g,"string"==typeof g?.login?g?.login:null)}}class Qa extends qr{constructor(h,g){super(h,"google.com",g)}}class xi extends Dt{constructor(h,g,C){super(h,"twitter.com",g,C)}}function lI(v){const{user:h,_tokenResponse:g}=v;return h.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function ht(v){var h,g;if(!v)return null;const{providerId:C}=v,S=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},k=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!C&&v?.idToken){const Q=null===(g=null===(h=Is(v.idToken))||void 0===h?void 0:h.firebase)||void 0===g?void 0:g.sign_in_provider;if(Q)return new qr(k,"anonymous"!==Q&&"custom"!==Q?Q:null)}if(!C)return null;switch(C){case"facebook.com":return new jr(k,S);case"github.com":return new pi(k,S);case"google.com":return new Qa(k,S);case"twitter.com":return new xi(k,S,v.screenName||null);case"custom":case"anonymous":return new qr(k,null);default:return new qr(k,C,S)}}(g)}class Ja{constructor(h,g,C){this.type=h,this.credential=g,this.user=C}static _fromIdtoken(h,g){return new Ja("enroll",h,g)}static _fromMfaPendingCredential(h){return new Ja("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var g,C;if(h?.multiFactorSession){if(null!==(g=h.multiFactorSession)&&void 0!==g&&g.pendingCredential)return Ja._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(C=h.multiFactorSession)&&void 0!==C&&C.idToken)return Ja._fromIdtoken(h.multiFactorSession.idToken)}return null}}class Ff{constructor(h,g,C){this.session=h,this.hints=g,this.signInResolver=C}static _fromError(h,g){const C=nt(h),S=g.customData._serverResponse,k=(S.mfaInfo||[]).map(re=>$l._fromServerResponse(C,re));pe(S.mfaPendingCredential,C,"internal-error");const Q=Ja._fromMfaPendingCredential(S.mfaPendingCredential);return new Ff(Q,k,function(){var re=(0,b.A)(function*(ge){const Se=yield ge._process(C,Q);delete S.mfaInfo,delete S.mfaPendingCredential;const He=Object.assign(Object.assign({},S),{idToken:Se.idToken,refreshToken:Se.refreshToken});switch(g.operationType){case"signIn":const ze=yield qs._fromIdTokenResponse(C,g.operationType,He);return yield C._updateCurrentUser(ze.user),ze;case"reauthenticate":return pe(g.user,C,"internal-error"),qs._forOperation(g.user,g.operationType,He);default:kt(C,"internal-error")}});return function(ge){return re.apply(this,arguments)}}())}resolveSignIn(h){var g=this;return(0,b.A)(function*(){return g.signInResolver(h)})()}}function Wl(v,h){var g;const C=(0,$.Ku)(v),S=h;return pe(h.customData.operationType,C,"argument-error"),pe(null===(g=S.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,C,"argument-error"),Ff._fromError(C,S)}class zu{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(C=>$l._fromServerResponse(h.auth,C)))})}static _fromUser(h){return new zu(h)}getSession(){var h=this;return(0,b.A)(function*(){return Ja._fromIdtoken(yield h.user.getIdToken(),h.user)})()}enroll(h,g){var C=this;return(0,b.A)(function*(){const S=h,k=yield C.getSession(),Q=yield sn(C.user,S._process(C.user.auth,k,g));return yield C.user._updateTokensIfNecessary(Q),C.user.reload()})()}unenroll(h){var g=this;return(0,b.A)(function*(){const C="string"==typeof h?h:h.uid,S=yield g.user.getIdToken();try{const k=yield sn(g.user,function y_(v,h){return ne(v,"POST","/v2/accounts/mfaEnrollment:withdraw",te(v,h))}(g.user.auth,{idToken:S,mfaEnrollmentId:C}));g.enrolledFactors=g.enrolledFactors.filter(({uid:Q})=>Q!==C),yield g.user._updateTokensIfNecessary(k),yield g.user.reload()}catch(k){throw k}})()}}const Ri=new WeakMap;function Wu(v){const h=(0,$.Ku)(v);return Ri.has(h)||Ri.set(h,zu._fromUser(h)),Ri.get(h)}const Gu="__sak";class hI{constructor(h,g){this.storageRetriever=h,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(Gu,"1"),this.storage.removeItem(Gu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,g){return this.storage.setItem(h,JSON.stringify(g)),Promise.resolve()}_get(h){const g=this.storage.getItem(h);return Promise.resolve(g?JSON.parse(g):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const pI=(()=>{class v extends hI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,C)=>this.onStorageEvent(g,C),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=X(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const C of Object.keys(this.listeners)){const S=this.storage.getItem(C),k=this.localCache[C];S!==k&&g(C,k,S)}}onStorageEvent(g,C=!1){if(!g.key)return void this.forAllChangedKeys((re,ge,Se)=>{this.notifyListeners(re,Se)});const S=g.key;C?this.detachListener():this.stopPolling();const k=()=>{const re=this.storage.getItem(S);!C&&this.localCache[S]===re||this.notifyListeners(S,re)},Q=this.storage.getItem(S);!function se(){return(0,$.lT)()&&10===document.documentMode}()||Q===g.newValue||g.newValue===g.oldValue?k():setTimeout(k,10)}notifyListeners(g,C){this.localCache[g]=C;const S=this.listeners[g];if(S)for(const k of Array.from(S))k(C&&JSON.parse(C))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,C,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:C,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,C){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(C)}_removeListener(g,C){this.listeners[g]&&(this.listeners[g].delete(C),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,C){var S=()=>super._set,k=this;return(0,b.A)(function*(){yield S().call(k,g,C),k.localCache[g]=JSON.stringify(C)})()}_get(g){var C=()=>super._get,S=this;return(0,b.A)(function*(){const k=yield C().call(S,g);return S.localCache[g]=JSON.stringify(k),k})()}_remove(g){var C=()=>super._remove,S=this;return(0,b.A)(function*(){yield C().call(S,g),delete S.localCache[g]})()}}return v.type="LOCAL",v})(),v_=(()=>{class v extends hI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,C){}_removeListener(g,C){}}return v.type="SESSION",v})();let _a=(()=>{class v{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const C=this.receivers.find(k=>k.isListeningto(g));if(C)return C;const S=new v(g);return this.receivers.push(S),S}isListeningto(g){return this.eventTarget===g}handleEvent(g){var C=this;return(0,b.A)(function*(){const S=g,{eventId:k,eventType:Q,data:re}=S.data,ge=C.handlersMap[Q];if(!ge?.size)return;S.ports[0].postMessage({status:"ack",eventId:k,eventType:Q});const Se=Array.from(ge).map(function(){var ze=(0,b.A)(function*(is){return is(S.origin,re)});return function(is){return ze.apply(this,arguments)}}()),He=yield function E_(v){return Promise.all(v.map(function(){var h=(0,b.A)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(C){return{fulfilled:!1,reason:C}}});return function(g){return h.apply(this,arguments)}}()))}(Se);S.ports[0].postMessage({status:"done",eventId:k,eventType:Q,response:He})})()}_subscribe(g,C){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(C)}_unsubscribe(g,C){this.handlersMap[g]&&C&&this.handlersMap[g].delete(C),(!C||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function qu(v="",h=10){let g="";for(let C=0;C<h;C++)g+=Math.floor(10*Math.random());return v+g}class Lf{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,g,C=50){var S=this;return(0,b.A)(function*(){const k=typeof MessageChannel<"u"?new MessageChannel:null;if(!k)throw new Error("connection_unavailable");let Q,re;return new Promise((ge,Se)=>{const He=qu("",20);k.port1.start();const ze=setTimeout(()=>{Se(new Error("unsupported_event"))},C);re={messageChannel:k,onMessage(is){const nl=is;if(nl.data.eventId===He)switch(nl.data.status){case"ack":clearTimeout(ze),Q=setTimeout(()=>{Se(new Error("timeout"))},3e3);break;case"done":clearTimeout(Q),ge(nl.data.response);break;default:clearTimeout(ze),clearTimeout(Q),Se(new Error("invalid_response"))}}},S.handlers.add(re),k.port1.addEventListener("message",re.onMessage),S.target.postMessage({eventType:h,eventId:He,data:g},[k.port2])}).finally(()=>{re&&S.removeMessageHandler(re)})})()}}function Hn(){return window}function C_(){return typeof Hn().WorkerGlobalScope<"u"&&"function"==typeof Hn().importScripts}function Vf(){return(Vf=(0,b.A)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const gI="firebaseLocalStorageDb",Uf="firebaseLocalStorage",mI="fbase_key";class Ld{constructor(h){this.request=h}toPromise(){return new Promise((h,g)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function Bf(v,h){return v.transaction([Uf],h?"readwrite":"readonly").objectStore(Uf)}function ju(){const v=indexedDB.open(gI,1);return new Promise((h,g)=>{v.addEventListener("error",()=>{g(v.error)}),v.addEventListener("upgradeneeded",()=>{const C=v.result;try{C.createObjectStore(Uf,{keyPath:mI})}catch(S){g(S)}}),v.addEventListener("success",(0,b.A)(function*(){const C=v.result;C.objectStoreNames.contains(Uf)?h(C):(C.close(),yield function I_(){const v=indexedDB.deleteDatabase(gI);return new Ld(v).toPromise()}(),h(yield ju()))}))})}function zn(v,h,g){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,b.A)(function*(v,h,g){const C=Bf(v,!0).put({[mI]:h,value:g});return new Ld(C).toPromise()})).apply(this,arguments)}function ur(){return(ur=(0,b.A)(function*(v,h){const g=Bf(v,!1).get(h),C=yield new Ld(g).toPromise();return void 0===C?null:C.value})).apply(this,arguments)}function Ks(v,h){const g=Bf(v,!0).delete(h);return new Ld(g).toPromise()}const Dn=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,b.A)(function*(){return g.db||(g.db=yield ju()),g.db})()}_withRetries(g){var C=this;return(0,b.A)(function*(){let S=0;for(;;)try{const k=yield C._openDb();return yield g(k)}catch(k){if(S++>3)throw k;C.db&&(C.db.close(),C.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,b.A)(function*(){return C_()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,b.A)(function*(){g.receiver=_a._getInstance(function Fd(){return C_()?self:null}()),g.receiver._subscribe("keyChanged",function(){var C=(0,b.A)(function*(S,k){return{keyProcessed:(yield g._poll()).includes(k.key)}});return function(S,k){return C.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var C=(0,b.A)(function*(S,k){return["keyChanged"]});return function(S,k){return C.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,b.A)(function*(){var C,S;if(g.activeServiceWorker=yield function Kr(){return Vf.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Lf(g.activeServiceWorker);const k=yield g.sender._send("ping",{},800);k&&null!==(C=k[0])&&void 0!==C&&C.fulfilled&&null!==(S=k[0])&&void 0!==S&&S.value.includes("keyChanged")&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var C=this;return(0,b.A)(function*(){if(C.sender&&C.activeServiceWorker&&function fD(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===C.activeServiceWorker)try{yield C.sender._send("keyChanged",{key:g},C.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,b.A)(function*(){try{if(!indexedDB)return!1;const g=yield ju();return yield zn(g,Gu,"1"),yield Ks(g,Gu),!0}catch{}return!1})()}_withPendingWrite(g){var C=this;return(0,b.A)(function*(){C.pendingWrites++;try{yield g()}finally{C.pendingWrites--}})()}_set(g,C){var S=this;return(0,b.A)(function*(){return S._withPendingWrite((0,b.A)(function*(){return yield S._withRetries(k=>zn(k,g,C)),S.localCache[g]=C,S.notifyServiceWorker(g)}))})()}_get(g){var C=this;return(0,b.A)(function*(){const S=yield C._withRetries(k=>function Ze(v,h){return ur.apply(this,arguments)}(k,g));return C.localCache[g]=S,S})()}_remove(g){var C=this;return(0,b.A)(function*(){return C._withPendingWrite((0,b.A)(function*(){return yield C._withRetries(S=>Ks(S,g)),delete C.localCache[g],C.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,b.A)(function*(){const C=yield g._withRetries(Q=>{const re=Bf(Q,!1).getAll();return new Ld(re).toPromise()});if(!C)return[];if(0!==g.pendingWrites)return[];const S=[],k=new Set;if(0!==C.length)for(const{fbase_key:Q,value:re}of C)k.add(Q),JSON.stringify(g.localCache[Q])!==JSON.stringify(re)&&(g.notifyListeners(Q,re),S.push(Q));for(const Q of Object.keys(g.localCache))g.localCache[Q]&&!k.has(Q)&&(g.notifyListeners(Q,null),S.push(Q));return S})()}notifyListeners(g,C){this.localCache[g]=C;const S=this.listeners[g];if(S)for(const k of Array.from(S))k(C)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,b.A)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,C){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(C)}_removeListener(g,C){this.listeners[g]&&(this.listeners[g].delete(C),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})(),ya=1e12;class cr{constructor(h){this.auth=h,this.counter=ya,this._widgets=new Map}render(h,g){const C=this.counter;return this._widgets.set(C,new Bd(h,this.auth.name,g||{})),this.counter++,C}reset(h){var g;const C=h||ya;null===(g=this._widgets.get(C))||void 0===g||g.delete(),this._widgets.delete(C)}getResponse(h){var g;return(null===(g=this._widgets.get(h||ya))||void 0===g?void 0:g.getResponse())||""}execute(h){var g=this;return(0,b.A)(function*(){var C;return null===(C=g._widgets.get(h||ya))||void 0===C||C.execute(),""})()}}class Bd{constructor(h,g,C){this.params=C,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof h?document.getElementById(h):h;pe(S,"argument-error",{appName:g}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Ku(v){const h=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let C=0;C<v;C++)h.push(g.charAt(Math.floor(62*Math.random())));return h.join("")}(50);const{callback:h,"expired-callback":g}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const wo=US("rcb"),$d=new zs(3e4,6e4);class yI{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=Hn().grecaptcha)||void 0===h||!h.render)}load(h,g=""){return pe(function Xa(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(g),h,"argument-error"),this.shouldResolveImmediately(g)&&Ot(Hn().grecaptcha)?Promise.resolve(Hn().grecaptcha):new Promise((C,S)=>{const k=Hn().setTimeout(()=>{S(dn(h,"network-request-failed"))},$d.get());Hn()[wo]=()=>{Hn().clearTimeout(k),delete Hn()[wo];const re=Hn().grecaptcha;if(!re||!Ot(re))return void S(dn(h,"internal-error"));const ge=re.render;re.render=(Se,He)=>{const ze=ge(Se,He);return this.counter++,ze},this.hostLanguage=g,C(re)},In(`${function lt(){return Ou.recaptchaV2Script}()}?${(0,$.Am)({onload:wo,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(k),S(dn(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var g;return!(null===(g=Hn().grecaptcha)||void 0===g||!g.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class $f{load(h){return(0,b.A)(function*(){return new cr(h)})()}clearedOneInstance(){}}const Za="recaptcha",mt={theme:"light",type:"image"};class w_{constructor(h,g,C=Object.assign({},mt)){this.parameters=C,this.type=Za,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=nt(h),this.isInvisible="invisible"===this.parameters.size,pe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof g?document.getElementById(g):g;pe(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new $f:new yI,this.validateStartingState()}verify(){var h=this;return(0,b.A)(function*(){h.assertNotDestroyed();const g=yield h.render(),C=h.getAssertedRecaptcha();return C.getResponse(g)||new Promise(k=>{const Q=re=>{re&&(h.tokenChangeListeners.delete(Q),k(re))};h.tokenChangeListeners.add(Q),h.isInvisible&&C.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){pe(!this.parameters.sitekey,this.auth,"argument-error"),pe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),pe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return g=>{if(this.tokenChangeListeners.forEach(C=>C(g)),"function"==typeof h)h(g);else if("string"==typeof h){const C=Hn()[h];"function"==typeof C&&C(g)}}}assertNotDestroyed(){pe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,b.A)(function*(){if(yield h.init(),!h.widgetId){let g=h.container;if(!h.isInvisible){const C=document.createElement("div");g.appendChild(C),g=C}h.widgetId=h.getAssertedRecaptcha().render(g,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,b.A)(function*(){pe(es()&&!C_(),h.auth,"internal-error"),yield function Hd(){let v=null;return new Promise(h=>{"complete"!==document.readyState?(v=()=>h(),window.addEventListener("load",v)):h()}).catch(h=>{throw v&&window.removeEventListener("load",v),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const g=yield function Lr(v){return ri.apply(this,arguments)}(h.auth);pe(g,h.auth,"internal-error"),h.parameters.sitekey=g})()}getAssertedRecaptcha(){return pe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ys{constructor(h,g){this.verificationId=h,this.onConfirmation=g}confirm(h){const g=Vl._fromVerification(this.verificationId,h);return this.onConfirmation(g)}}function Hf(v,h,g){return el.apply(this,arguments)}function el(){return(el=(0,b.A)(function*(v,h,g){if((0,De._isFirebaseServerApp)(v.app))return Promise.reject(rn(v));const C=nt(v),S=yield Yu(C,h,(0,$.Ku)(g));return new Ys(S,k=>fi(C,k))})).apply(this,arguments)}function Sr(v,h,g){return zd.apply(this,arguments)}function zd(){return(zd=(0,b.A)(function*(v,h,g){const C=(0,$.Ku)(v);yield Gr(!1,C,"phone");const S=yield Yu(C.auth,h,(0,$.Ku)(g));return new Ys(S,k=>n_(C,k))})).apply(this,arguments)}function Mi(v,h,g){return oi.apply(this,arguments)}function oi(){return(oi=(0,b.A)(function*(v,h,g){const C=(0,$.Ku)(v);if((0,De._isFirebaseServerApp)(C.auth.app))return Promise.reject(rn(C.auth));const S=yield Yu(C.auth,h,(0,$.Ku)(g));return new Ys(S,k=>Pd(C,k))})).apply(this,arguments)}function Yu(v,h,g){return va.apply(this,arguments)}function va(){return va=(0,b.A)(function*(v,h,g){var C;const S=yield g.verify();try{let k;if(pe("string"==typeof S,v,"argument-error"),pe(g.type===Za,v,"argument-error"),k="string"==typeof h?{phoneNumber:h}:h,"session"in k){const Q=k.session;if("phoneNumber"in k)return pe("enroll"===Q.type,v,"internal-error"),(yield function uD(v,h){return ne(v,"POST","/v2/accounts/mfaEnrollment:start",te(v,h))}(v,{idToken:Q.credential,phoneEnrollmentInfo:{phoneNumber:k.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{pe("signin"===Q.type,v,"internal-error");const re=(null===(C=k.multiFactorHint)||void 0===C?void 0:C.uid)||k.multiFactorUid;return pe(re,v,"missing-multi-factor-info"),(yield function Vr(v,h){return ne(v,"POST","/v2/accounts/mfaSignIn:start",te(v,h))}(v,{mfaPendingCredential:Q.credential,mfaEnrollmentId:re,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Q}=yield function ga(v,h){return Ll.apply(this,arguments)}(v,{phoneNumber:k.phoneNumber,recaptchaToken:S});return Q}}finally{g._reset()}}),va.apply(this,arguments)}function zf(v,h){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,b.A)(function*(v,h){const g=(0,$.Ku)(v);if((0,De._isFirebaseServerApp)(g.auth.app))return Promise.reject(rn(g.auth));yield Jm(g,h)})).apply(this,arguments)}let T_=(()=>{class v{constructor(g){this.providerId=v.PROVIDER_ID,this.auth=nt(g)}verifyPhoneNumber(g,C){return Yu(this.auth,g,(0,$.Ku)(C))}static credential(g,C){return Vl._fromVerification(g,C)}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:C,temporaryProof:S}=g;return C&&S?Vl._fromTokenResponse(C,S):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function Gl(v,h){return h?le(h):(pe(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class b_ extends Id{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return As(h,this._buildIdpRequest())}_linkToIdToken(h,g){return As(h,this._buildIdpRequest(g))}_getReauthenticationResolver(h){return As(h,this._buildIdpRequest())}_buildIdpRequest(h){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(g.idToken=h),g}}function A_(v){return ja(v.auth,new b_(v),v.bypassAuthState)}function vI(v){const{auth:h,user:g}=v;return pe(g,h,"internal-error"),Rd(g,new b_(v),v.bypassAuthState)}function gD(v){return Wd.apply(this,arguments)}function Wd(){return(Wd=(0,b.A)(function*(v){const{auth:h,user:g}=v;return pe(g,h,"internal-error"),Jm(g,new b_(v),v.bypassAuthState)})).apply(this,arguments)}class mD{constructor(h,g,C,S,k=!1){this.auth=h,this.resolver=C,this.user=S,this.bypassAuthState=k,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var h=this;return new Promise(function(){var g=(0,b.A)(function*(C,S){h.pendingPromise={resolve:C,reject:S};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(k){h.reject(k)}});return function(C,S){return g.apply(this,arguments)}}())}onAuthEvent(h){var g=this;return(0,b.A)(function*(){const{urlResponse:C,sessionId:S,postBody:k,tenantId:Q,error:re,type:ge}=h;if(re)return void g.reject(re);const Se={auth:g.auth,requestUri:C,sessionId:S,tenantId:Q||void 0,postBody:k||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(ge)(Se))}catch(He){g.reject(He)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return A_;case"linkViaPopup":case"linkViaRedirect":return gD;case"reauthViaPopup":case"reauthViaRedirect":return vI;default:kt(this.auth,"internal-error")}}resolve(h){$n(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){$n(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const n2=new zs(2e3,1e4);function r2(v,h,g){return EI.apply(this,arguments)}function EI(){return(EI=(0,b.A)(function*(v,h,g){if((0,De._isFirebaseServerApp)(v.app))return Promise.reject(dn(v,"operation-not-supported-in-this-environment"));const C=nt(v);pt(v,h,qo);const S=Gl(C,g);return new wI(C,"signInViaPopup",h,S).executeNotNull()})).apply(this,arguments)}function i2(v,h,g){return CI.apply(this,arguments)}function CI(){return(CI=(0,b.A)(function*(v,h,g){const C=(0,$.Ku)(v);if((0,De._isFirebaseServerApp)(C.auth.app))return Promise.reject(dn(C.auth,"operation-not-supported-in-this-environment"));pt(C.auth,h,qo);const S=Gl(C.auth,g);return new wI(C.auth,"reauthViaPopup",h,S,C).executeNotNull()})).apply(this,arguments)}function s2(v,h,g){return II.apply(this,arguments)}function II(){return(II=(0,b.A)(function*(v,h,g){const C=(0,$.Ku)(v);pt(C.auth,h,qo);const S=Gl(C.auth,g);return new wI(C.auth,"linkViaPopup",h,S,C).executeNotNull()})).apply(this,arguments)}let wI=(()=>{class v extends mD{constructor(g,C,S,k,Q){super(g,C,k,Q),this.provider=S,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var g=this;return(0,b.A)(function*(){const C=yield g.execute();return pe(C,g.auth,"internal-error"),C})()}onExecution(){var g=this;return(0,b.A)(function*(){$n(1===g.filter.length,"Popup operations only handle one event");const C=qu();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],C),g.authWindow.associatedEvent=C,g.resolver._originValidation(g.auth).catch(S=>{g.reject(S)}),g.resolver._isIframeWebStorageSupported(g.auth,S=>{S||g.reject(dn(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(dn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const g=()=>{var C,S;this.pollId=null!==(S=null===(C=this.authWindow)||void 0===C?void 0:C.window)&&void 0!==S&&S.closed?window.setTimeout(()=>{this.pollId=null,this.reject(dn(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(g,n2.get())};g()}}return v.currentPopupAction=null,v})();const o2="pendingRedirect",Wf=new Map;class a2 extends mD{constructor(h,g,C=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,C),this.eventId=null}execute(){var h=()=>super.execute,g=this;return(0,b.A)(function*(){let C=Wf.get(g.auth._key());if(!C){try{const k=(yield function TI(v,h){return Gf.apply(this,arguments)}(g.resolver,g.auth))?yield h().call(g):null;C=()=>Promise.resolve(k)}catch(S){C=()=>Promise.reject(S)}Wf.set(g.auth._key(),C)}return g.bypassAuthState||Wf.set(g.auth._key(),()=>Promise.resolve(null)),C()})()}onAuthEvent(h){var g=()=>super.onAuthEvent,C=this;return(0,b.A)(function*(){if("signInViaRedirect"===h.type)return g().call(C,h);if("unknown"!==h.type){if(h.eventId){const S=yield C.auth._redirectUserForId(h.eventId);if(S)return C.user=S,g().call(C,h);C.resolve(null)}}else C.resolve(null)})()}onExecution(){return(0,b.A)(function*(){})()}cleanUp(){}}function Gf(){return(Gf=(0,b.A)(function*(v,h){const g=S_(h),C=SI(v);if(!(yield C._isAvailable()))return!1;const S="true"===(yield C._get(g));return yield C._remove(g),S})).apply(this,arguments)}function bI(v,h){return AI.apply(this,arguments)}function AI(){return(AI=(0,b.A)(function*(v,h){return SI(v)._set(S_(h),"true")})).apply(this,arguments)}function l2(){Wf.clear()}function _D(v,h){Wf.set(v._key(),h)}function SI(v){return le(v._redirectPersistence)}function S_(v){return qt(o2,v.config.apiKey,v.name)}function Ps(v,h,g){return function DI(v,h,g){return D_.apply(this,arguments)}(v,h,g)}function D_(){return(D_=(0,b.A)(function*(v,h,g){if((0,De._isFirebaseServerApp)(v.app))return Promise.reject(rn(v));const C=nt(v);pt(v,h,qo),yield C._initializationPromise;const S=Gl(C,g);return yield bI(S,C),S._openRedirect(C,h,"signInViaRedirect")})).apply(this,arguments)}function yD(v,h,g){return function xI(v,h,g){return qf.apply(this,arguments)}(v,h,g)}function qf(){return(qf=(0,b.A)(function*(v,h,g){const C=(0,$.Ku)(v);if(pt(C.auth,h,qo),(0,De._isFirebaseServerApp)(C.auth.app))return Promise.reject(rn(C.auth));yield C.auth._initializationPromise;const S=Gl(C.auth,g);yield bI(S,C.auth);const k=yield RI(C);return S._openRedirect(C.auth,h,"reauthViaRedirect",k)})).apply(this,arguments)}function vD(v,h,g){return function x_(v,h,g){return R_.apply(this,arguments)}(v,h,g)}function R_(){return(R_=(0,b.A)(function*(v,h,g){const C=(0,$.Ku)(v);pt(C.auth,h,qo),yield C.auth._initializationPromise;const S=Gl(C.auth,g);yield Gr(!1,C,h.providerId),yield bI(S,C.auth);const k=yield RI(C);return S._openRedirect(C.auth,h,"linkViaRedirect",k)})).apply(this,arguments)}function Ko(v,h){return jf.apply(this,arguments)}function jf(){return(jf=(0,b.A)(function*(v,h){return yield nt(v)._initializationPromise,Kf(v,h,!1)})).apply(this,arguments)}function Kf(v,h){return Yf.apply(this,arguments)}function Yf(){return(Yf=(0,b.A)(function*(v,h,g=!1){if((0,De._isFirebaseServerApp)(v.app))return Promise.reject(rn(v));const C=nt(v),S=Gl(C,h),Q=yield new a2(C,S,g).execute();return Q&&!g&&(delete Q.user._redirectEventId,yield C._persistUserIfCurrent(Q.user),yield C._setRedirectUser(null,h)),Q})).apply(this,arguments)}function RI(v){return PI.apply(this,arguments)}function PI(){return(PI=(0,b.A)(function*(v){const h=qu(`${v.uid}:::`);return v._redirectEventId=h,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),h})).apply(this,arguments)}class Qf{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let g=!1;return this.consumers.forEach(C=>{this.isEventForConsumer(h,C)&&(g=!0,this.sendToConsumer(h,C),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function ED(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ni(v);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=h,g=!0)),g}sendToConsumer(h,g){var C;if(h.error&&!Ni(h)){const S=(null===(C=h.error.code)||void 0===C?void 0:C.split("auth/")[1])||"internal-error";g.onError(dn(this.auth,S))}else g.onAuthEvent(h)}isEventForConsumer(h,g){const C=null===g.eventId||!!h.eventId&&h.eventId===g.eventId;return g.filter.includes(h.type)&&C}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Qu(h))}saveEventToCache(h){this.cachedEventUids.add(Qu(h)),this.lastProcessedEventTime=Date.now()}}function Qu(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(h=>h).join("-")}function Ni({type:v,error:h}){return"unknown"===v&&"auth/no-auth-event"===h?.code}function Ju(v){return tl.apply(this,arguments)}function tl(){return(tl=(0,b.A)(function*(v,h={}){return ne(v,"GET","/v1/projects",h)})).apply(this,arguments)}const Ms=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,CD=/^https?/;function M_(){return(M_=(0,b.A)(function*(v){if(v.config.emulator)return;const{authorizedDomains:h}=yield Ju(v);for(const g of h)try{if(Yo(g))return}catch{}kt(v,"unauthorized-domain")})).apply(this,arguments)}function Yo(v){const h=Si(),{protocol:g,hostname:C}=new URL(h);if(v.startsWith("chrome-extension://")){const Q=new URL(v);return""===Q.hostname&&""===C?"chrome-extension:"===g&&v.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===g&&Q.hostname===C}if(!CD.test(g))return!1;if(Ms.test(v))return C===v;const S=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(C)}const MI=new zs(3e4,6e4);function NI(){const v=Hn().___jsl;if(v?.H)for(const h of Object.keys(v.H))if(v.H[h].r=v.H[h].r||[],v.H[h].L=v.H[h].L||[],v.H[h].r=[...v.H[h].L],v.CP)for(let g=0;g<v.CP.length;g++)v.CP[g]=null}let Xu=null;const Gd=new zs(5e3,15e3),Jf="__/auth/iframe",k_="emulator/auth/iframe",ql={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ct=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function OI(v){const h=v.config;pe(h.authDomain,v,"auth-domain-config-required");const g=h.emulator?Cs(h,k_):`https://${v.config.authDomain}/${Jf}`,C={apiKey:h.apiKey,appName:v.name,v:De.SDK_VERSION},S=ct.get(v.config.apiHost);S&&(C.eid=S);const k=v._getFrameworks();return k.length&&(C.fw=k.join(",")),`${g}?${(0,$.Am)(C).slice(1)}`}function O_(){return O_=(0,b.A)(function*(v){const h=yield function N_(v){return Xu=Xu||function kI(v){return new Promise((h,g)=>{var C,S,k;function Q(){NI(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{NI(),g(dn(v,"network-request-failed"))},timeout:MI.get()})}if(null!==(S=null===(C=Hn().gapi)||void 0===C?void 0:C.iframes)&&void 0!==S&&S.Iframe)h(gapi.iframes.getContext());else{if(null===(k=Hn().gapi)||void 0===k||!k.load){const re=US("iframefcb");return Hn()[re]=()=>{gapi.load?Q():g(dn(v,"network-request-failed"))},In(`${function Ts(){return Ou.gapiScript}()}?onload=${re}`).catch(ge=>g(ge))}Q()}}).catch(h=>{throw Xu=null,h})}(v),Xu}(v),g=Hn().gapi;return pe(g,v,"internal-error"),h.open({where:document.body,url:OI(v),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ql,dontclear:!0},C=>new Promise(function(){var S=(0,b.A)(function*(k,Q){yield C.restyle({setHideOnLeave:!1});const re=dn(v,"network-request-failed"),ge=Hn().setTimeout(()=>{Q(re)},Gd.get());function Se(){Hn().clearTimeout(ge),k(C)}C.ping(Se).then(Se,()=>{Q(re)})});return function(k,Q){return S.apply(this,arguments)}}()))}),O_.apply(this,arguments)}const ID={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class LI{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const SD="__/auth/handler",de="emulator/auth/handler",Bt=encodeURIComponent("fac");function ec(v,h,g,C,S,k){return tc.apply(this,arguments)}function tc(){return(tc=(0,b.A)(function*(v,h,g,C,S,k){pe(v.config.authDomain,v,"auth-domain-config-required"),pe(v.config.apiKey,v,"invalid-api-key");const Q={apiKey:v.config.apiKey,appName:v.name,authType:g,redirectUrl:C,v:De.SDK_VERSION,eventId:S};if(h instanceof qo){h.setDefaultLanguage(v.languageCode),Q.providerId=h.providerId||"",(0,$.Im)(h.getCustomParameters())||(Q.customParameters=JSON.stringify(h.getCustomParameters()));for(const[He,ze]of Object.entries(k||{}))Q[He]=ze}if(h instanceof Sd){const He=h.getScopes().filter(ze=>""!==ze);He.length>0&&(Q.scopes=He.join(","))}v.tenantId&&(Q.tid=v.tenantId);const re=Q;for(const He of Object.keys(re))void 0===re[He]&&delete re[He];const ge=yield v._getAppCheckToken(),Se=ge?`#${Bt}=${encodeURIComponent(ge)}`:"";return`${function _n({config:v}){return v.emulator?Cs(v,de):`https://${v.authDomain}/${SD}`}(v)}?${(0,$.Am)(re).slice(1)}${Se}`})).apply(this,arguments)}const Xf="webStorageSupport",To=class qd{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=v_,this._completeRedirectFn=Kf,this._overrideRedirectResult=_D}_openPopup(h,g,C,S){var k=this;return(0,b.A)(function*(){var Q;$n(null===(Q=k.eventManagers[h._key()])||void 0===Q?void 0:Q.manager,"_initialize() not called before _openPopup()");const re=yield ec(h,g,C,Si(),S);return function bD(v,h,g,C=500,S=600){const k=Math.max((window.screen.availHeight-S)/2,0).toString(),Q=Math.max((window.screen.availWidth-C)/2,0).toString();let re="";const ge=Object.assign(Object.assign({},ID),{width:C.toString(),height:S.toString(),top:k,left:Q}),Se=(0,$.ZQ)().toLowerCase();g&&(re=ws(Se)?"_blank":g),Le(Se)&&(h=h||"http://localhost",ge.scrollbars="yes");const He=Object.entries(ge).reduce((is,[nl,rp])=>`${is}${nl}=${rp},`,"");if(function qa(v=(0,$.ZQ)()){var h;return yo(v)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}(Se)&&"_self"!==re)return function AD(v,h){const g=document.createElement("a");g.href=v,g.target=h;const C=document.createEvent("MouseEvent");C.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(C)}(h||"",re),new LI(null);const ze=window.open(h||"",re,He);pe(ze,v,"popup-blocked");try{ze.focus()}catch{}return new LI(ze)}(h,re,qu())})()}_openRedirect(h,g,C,S){var k=this;return(0,b.A)(function*(){return yield k._originValidation(h),function hD(v){Hn().location.href=v}(yield ec(h,g,C,Si(),S)),new Promise(()=>{})})()}_initialize(h){const g=h._key();if(this.eventManagers[g]){const{manager:S,promise:k}=this.eventManagers[g];return S?Promise.resolve(S):($n(k,"If manager is not set, promise should be"),k)}const C=this.initAndGetManager(h);return this.eventManagers[g]={promise:C},C.catch(()=>{delete this.eventManagers[g]}),C}initAndGetManager(h){var g=this;return(0,b.A)(function*(){const C=yield function u2(v){return O_.apply(this,arguments)}(h),S=new Qf(h);return C.register("authEvent",k=>(pe(k?.authEvent,h,"invalid-auth-event"),{status:S.onEvent(k.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[h._key()]={manager:S},g.iframes[h._key()]=C,S})()}_isIframeWebStorageSupported(h,g){this.iframes[h._key()].send(Xf,{type:Xf},S=>{var k;const Q=null===(k=S?.[0])||void 0===k?void 0:k[Xf];void 0!==Q&&g(!!Q),kt(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const g=h._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function P_(v){return M_.apply(this,arguments)}(h)),this.originValidationPromises[g]}get _shouldInitProactively(){return X()||Sn()||yo()}};class Zf{constructor(h){this.factorId=h}_process(h,g,C){switch(g.type){case"enroll":return this._finalizeEnroll(h,g.credential,C);case"signin":return this._finalizeSignIn(h,g.credential);default:return Jn("unexpected MultiFactorSessionType")}}}class jd extends Zf{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new jd(h)}_finalizeEnroll(h,g,C){return function m_(v,h){return ne(v,"POST","/v2/accounts/mfaEnrollment:finalize",te(v,h))}(h,{idToken:g,displayName:C,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,g){return function Io(v,h){return ne(v,"POST","/v2/accounts/mfaSignIn:finalize",te(v,h))}(h,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let DD=(()=>{class v{constructor(){}static assertion(g){return jd._fromCredential(g)}}return v.FACTOR_ID="phone",v})();var F_="@firebase/auth";class Ea{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var g=this;return(0,b.A)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const g=this.auth.onIdTokenChanged(C=>{h(C?.stsTokenManager.accessToken||null)});this.internalListeners.set(h,g),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const g=this.internalListeners.get(h);g&&(this.internalListeners.delete(h),g(),this.updateProactiveRefresh())}assertAuthConfigured(){pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const PD=(0,$.XA)("authIdTokenMaxAge")||300;let tp=null;const L_=v=>function(){var h=(0,b.A)(function*(g){const C=g&&(yield g.getIdTokenResult()),S=C&&((new Date).getTime()-Date.parse(C.issuedAtTime))/1e3;if(S&&S>PD)return;const k=C?.token;tp!==k&&(tp=k,yield fetch(v,{method:k?"POST":"DELETE",headers:k?{Authorization:`Bearer ${k}`}:{}}))});return function(g){return h.apply(this,arguments)}}();function V_(v=(0,De.getApp)()){const h=(0,De._getProvider)(v,"auth");if(h.isInitialized())return h.getImmediate();const g=function zS(v,h){const g=(0,De._getProvider)(v,"auth");if(g.isInitialized()){const S=g.getImmediate(),k=g.getOptions();if((0,$.bD)(k,h??{}))return S;kt(S,"already-initialized")}return g.initialize({options:h})}(v,{popupRedirectResolver:To,persistence:[Dn,pI,v_]}),C=(0,$.XA)("authTokenSyncURL");if(C&&"boolean"==typeof isSecureContext&&isSecureContext){const k=new URL(C,location.origin);if(location.origin===k.origin){const Q=L_(k.toString());(function uI(v,h,g){(0,$.Ku)(v).beforeAuthStateChanged(h,g)})(g,Q,()=>Q(g.currentUser)),function ma(v,h,g,C){(0,$.Ku)(v).onIdTokenChanged(h,g,C)}(g,re=>Q(re))}}const S=(0,$.Tj)("auth");return S&&rs(g,`http://${S}`),g}(function VS(v){Ou=v})({loadJS:v=>new Promise((h,g)=>{const C=document.createElement("script");C.setAttribute("src",v),C.onload=h,C.onerror=S=>{const k=dn("internal-error");k.customData=S,g(k)},C.type="text/javascript",C.charset="UTF-8",function np(){var v,h;return null!==(h=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==h?h:document}().appendChild(C)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function VI(v){(0,De._registerComponent)(new gn.uA("auth",(h,{options:g})=>{const C=h.getProvider("app").getImmediate(),S=h.getProvider("heartbeat"),k=h.getProvider("app-check-internal"),{apiKey:Q,authDomain:re}=C.options;pe(Q&&!Q.includes(":"),"invalid-api-key",{appName:C.name});const ge={apiKey:Q,authDomain:re,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:he(v)},Se=new Xn(C,S,k,ge);return function GV(v,h){const g=h?.persistence||[],C=(Array.isArray(g)?g:[g]).map(le);h?.errorMap&&v._updateErrorMap(h.errorMap),v._initializeWithPersistence(C,h?.popupRedirectResolver)}(Se,g),Se},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,g,C)=>{h.getProvider("auth-internal").initialize()})),(0,De._registerComponent)(new gn.uA("auth-internal",h=>{const g=nt(h.getProvider("auth").getImmediate());return new Ea(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,De.registerVersion)(F_,"1.7.9",function xD(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(v)),(0,De.registerVersion)(F_,"1.7.9","esm2017")}("Browser")},401:($o,ni,st)=>{st.d(ni,{$L:()=>An,$g:()=>Cs,A4:()=>ve,Am:()=>aa,As:()=>at,Bd:()=>Jn,Cv:()=>Ot,FA:()=>Ee,Fy:()=>rn,HN:()=>ua,Hk:()=>$,I9:()=>zi,Im:()=>ri,K3:()=>gn,KA:()=>bn,Ku:()=>ha,Ll:()=>pe,OE:()=>Cn,T9:()=>kt,Tj:()=>kr,Uj:()=>mn,XA:()=>dn,ZQ:()=>pt,bD:()=>hi,c1:()=>Si,cY:()=>di,dI:()=>Ws,eX:()=>ae,g:()=>me,gR:()=>br,gZ:()=>ii,gz:()=>Wr,hp:()=>Wa,jZ:()=>lr,kH:()=>On,kj:()=>ca,lT:()=>Ho,lV:()=>po,mS:()=>Gt,nr:()=>oa,oD:()=>ns,od:()=>Is,p7:()=>$n,p9:()=>da,qc:()=>Lt,sr:()=>es,tD:()=>yr,u:()=>fe,vA:()=>De,yU:()=>ar,yw:()=>Lr,zW:()=>ie,zw:()=>Ge});const b={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},De=function(M,D){if(!M)throw $(D)},$=function(M){return new Error("Firebase Database ("+b.SDK_VERSION+") INTERNAL ASSERT FAILED: "+M)},$e=function(M){const D=[];let R=0;for(let j=0;j<M.length;j++){let G=M.charCodeAt(j);G<128?D[R++]=G:G<2048?(D[R++]=G>>6|192,D[R++]=63&G|128):55296==(64512&G)&&j+1<M.length&&56320==(64512&M.charCodeAt(j+1))?(G=65536+((1023&G)<<10)+(1023&M.charCodeAt(++j)),D[R++]=G>>18|240,D[R++]=G>>12&63|128,D[R++]=G>>6&63|128,D[R++]=63&G|128):(D[R++]=G>>12|224,D[R++]=G>>6&63|128,D[R++]=63&G|128)}return D},gn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(M,D){if(!Array.isArray(M))throw Error("encodeByteArray takes an array as a parameter");this.init_();const R=D?this.byteToCharMapWebSafe_:this.byteToCharMap_,j=[];for(let G=0;G<M.length;G+=3){const le=M[G],Oe=G+1<M.length,we=Oe?M[G+1]:0,qt=G+2<M.length,Vt=qt?M[G+2]:0;let Sn=(15&we)<<2|Vt>>6,ws=63&Vt;qt||(ws=64,Oe||(Sn=64)),j.push(R[le>>2],R[(3&le)<<4|we>>4],R[Sn],R[ws])}return j.join("")},encodeString(M,D){return this.HAS_NATIVE_SUPPORT&&!D?btoa(M):this.encodeByteArray($e(M),D)},decodeString(M,D){return this.HAS_NATIVE_SUPPORT&&!D?atob(M):function(M){const D=[];let R=0,j=0;for(;R<M.length;){const G=M[R++];if(G<128)D[j++]=String.fromCharCode(G);else if(G>191&&G<224){const le=M[R++];D[j++]=String.fromCharCode((31&G)<<6|63&le)}else if(G>239&&G<365){const qt=((7&G)<<18|(63&M[R++])<<12|(63&M[R++])<<6|63&M[R++])-65536;D[j++]=String.fromCharCode(55296+(qt>>10)),D[j++]=String.fromCharCode(56320+(1023&qt))}else{const le=M[R++],Oe=M[R++];D[j++]=String.fromCharCode((15&G)<<12|(63&le)<<6|63&Oe)}}return D.join("")}(this.decodeStringToByteArray(M,D))},decodeStringToByteArray(M,D){this.init_();const R=D?this.charToByteMapWebSafe_:this.charToByteMap_,j=[];for(let G=0;G<M.length;){const le=R[M.charAt(G++)],we=G<M.length?R[M.charAt(G)]:0;++G;const Vt=G<M.length?R[M.charAt(G)]:64;++G;const Le=G<M.length?R[M.charAt(G)]:64;if(++G,null==le||null==we||null==Vt||null==Le)throw new Ke;j.push(le<<2|we>>4),64!==Vt&&(j.push(we<<4&240|Vt>>2),64!==Le&&j.push(Vt<<6&192|Le))}return j},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let M=0;M<this.ENCODED_VALS.length;M++)this.byteToCharMap_[M]=this.ENCODED_VALS.charAt(M),this.charToByteMap_[this.byteToCharMap_[M]]=M,this.byteToCharMapWebSafe_[M]=this.ENCODED_VALS_WEBSAFE.charAt(M),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[M]]=M,M>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(M)]=M,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(M)]=M)}}};class Ke extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const bn=function(M){const D=$e(M);return gn.encodeByteArray(D,!0)},mn=function(M){return bn(M).replace(/\./g,"")},fe=function(M){try{return gn.decodeString(M,!0)}catch(D){console.error("base64Decode failed: ",D)}return null};function ve(M){return Ge(void 0,M)}function Ge(M,D){if(!(D instanceof Object))return D;switch(D.constructor){case Date:return new Date(D.getTime());case Object:void 0===M&&(M={});break;case Array:M=[];break;default:return D}for(const R in D)!D.hasOwnProperty(R)||!bt(R)||(M[R]=Ge(M[R],D[R]));return M}function bt(M){return"__proto__"!==M}function Gt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const It=()=>{try{return Gt().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const M=process.env.__FIREBASE_DEFAULTS__;return M?JSON.parse(M):void 0})()||(()=>{if(typeof document>"u")return;let M;try{M=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const D=M&&fe(M[1]);return D&&JSON.parse(D)})()}catch(M){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${M}`)}},kr=M=>{var D,R;return null===(R=null===(D=It())||void 0===D?void 0:D.emulatorHosts)||void 0===R?void 0:R[M]},ar=M=>{const D=kr(M);if(!D)return;const R=D.lastIndexOf(":");if(R<=0||R+1===D.length)throw new Error(`Invalid host ${D} with no separate hostname and port!`);const j=parseInt(D.substring(R+1),10);return"["===D[0]?[D.substring(1,R-1),j]:[D.substring(0,R),j]},kt=()=>{var M;return null===(M=It())||void 0===M?void 0:M.config},dn=M=>{var D;return null===(D=It())||void 0===D?void 0:D[`_${M}`]};class di{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((D,R)=>{this.resolve=D,this.reject=R})}wrapCallback(D){return(R,j)=>{R?this.reject(R):this.resolve(j),"function"==typeof D&&(this.promise.catch(()=>{}),1===D.length?D(R):D(R,j))}}}function rn(M,D){if(M.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const j=D||"demo-project",G=M.iat||0,le=M.sub||M.user_id;if(!le)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Oe=Object.assign({iss:`https://securetoken.google.com/${j}`,aud:j,iat:G,exp:G+3600,auth_time:G,sub:le,user_id:le,firebase:{sign_in_provider:"custom",identities:{}}},M);return[mn(JSON.stringify({alg:"none",type:"JWT"})),mn(JSON.stringify(Oe)),""].join(".")}function pt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function lr(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pt())}function pe(){var M;const D=null===(M=It())||void 0===M?void 0:M.forceEnvironment;if("node"===D)return!0;if("browser"===D)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Jn(){return typeof window<"u"||$n()}function $n(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Si(){return typeof navigator<"u"&&"Cloudflare-Workers"===navigator.userAgent}function es(){const M="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof M&&void 0!==M.id}function po(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ho(){const M=pt();return M.indexOf("MSIE ")>=0||M.indexOf("Trident/")>=0}function Cs(){return!0===b.NODE_CLIENT||!0===b.NODE_ADMIN}function oa(){return!pe()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ie(){try{return"object"==typeof indexedDB}catch{return!1}}function ae(){return new Promise((M,D)=>{try{let R=!0;const j="validate-browser-context-for-indexeddb-analytics-module",G=self.indexedDB.open(j);G.onsuccess=()=>{G.result.close(),R||self.indexedDB.deleteDatabase(j),M(!0)},G.onupgradeneeded=()=>{R=!1},G.onerror=()=>{var le;D((null===(le=G.error)||void 0===le?void 0:le.message)||"")}}catch(R){D(R)}})}class me extends Error{constructor(D,R,j){super(R),this.code=D,this.customData=j,this.name="FirebaseError",Object.setPrototypeOf(this,me.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ee.prototype.create)}}class Ee{constructor(D,R,j){this.service=D,this.serviceName=R,this.errors=j}create(D,...R){const j=R[0]||{},G=`${this.service}/${D}`,le=this.errors[D],Oe=le?function qe(M,D){return M.replace(wt,(R,j)=>{const G=D[j];return null!=G?String(G):`<${j}?>`})}(le,j):"Error";return new me(G,`${this.serviceName}: ${Oe} (${G}).`,j)}}const wt=/\{\$([^}]+)}/g;function An(M){return JSON.parse(M)}function at(M){return JSON.stringify(M)}const Qe=function(M){let D={},R={},j={},G="";try{const le=M.split(".");D=An(fe(le[0])||""),R=An(fe(le[1])||""),G=le[2],j=R.d||{},delete R.d}catch{}return{header:D,claims:R,data:j,signature:G}},Ot=function(M){const R=Qe(M).claims;return!!R&&"object"==typeof R&&R.hasOwnProperty("iat")},Lt=function(M){const D=Qe(M).claims;return"object"==typeof D&&!0===D.admin};function br(M,D){return Object.prototype.hasOwnProperty.call(M,D)}function Lr(M,D){if(Object.prototype.hasOwnProperty.call(M,D))return M[D]}function ri(M){for(const D in M)if(Object.prototype.hasOwnProperty.call(M,D))return!1;return!0}function On(M,D,R){const j={};for(const G in M)Object.prototype.hasOwnProperty.call(M,G)&&(j[G]=D.call(R,M[G],G,M));return j}function hi(M,D){if(M===D)return!0;const R=Object.keys(M),j=Object.keys(D);for(const G of R){if(!j.includes(G))return!1;const le=M[G],Oe=D[G];if(zo(le)&&zo(Oe)){if(!hi(le,Oe))return!1}else if(le!==Oe)return!1}for(const G of j)if(!R.includes(G))return!1;return!0}function zo(M){return null!==M&&"object"==typeof M}function aa(M){const D=[];for(const[R,j]of Object.entries(M))Array.isArray(j)?j.forEach(G=>{D.push(encodeURIComponent(R)+"="+encodeURIComponent(G))}):D.push(encodeURIComponent(R)+"="+encodeURIComponent(j));return D.length?"&"+D.join("&"):""}function zi(M){const D={};return M.replace(/^\?/,"").split("&").forEach(j=>{if(j){const[G,le]=j.split("=");D[decodeURIComponent(G)]=decodeURIComponent(le)}}),D}function Wa(M){const D=M.indexOf("?");if(!D)return"";const R=M.indexOf("#",D);return M.substring(D,R>0?R:void 0)}class Wr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let D=1;D<this.blockSize;++D)this.pad_[D]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(D,R){R||(R=0);const j=this.W_;if("string"==typeof D)for(let Le=0;Le<16;Le++)j[Le]=D.charCodeAt(R)<<24|D.charCodeAt(R+1)<<16|D.charCodeAt(R+2)<<8|D.charCodeAt(R+3),R+=4;else for(let Le=0;Le<16;Le++)j[Le]=D[R]<<24|D[R+1]<<16|D[R+2]<<8|D[R+3],R+=4;for(let Le=16;Le<80;Le++){const Sn=j[Le-3]^j[Le-8]^j[Le-14]^j[Le-16];j[Le]=4294967295&(Sn<<1|Sn>>>31)}let Vt,ce,G=this.chain_[0],le=this.chain_[1],Oe=this.chain_[2],we=this.chain_[3],qt=this.chain_[4];for(let Le=0;Le<80;Le++){Le<40?Le<20?(Vt=we^le&(Oe^we),ce=1518500249):(Vt=le^Oe^we,ce=1859775393):Le<60?(Vt=le&Oe|we&(le|Oe),ce=2400959708):(Vt=le^Oe^we,ce=3395469782);const Sn=(G<<5|G>>>27)+Vt+qt+ce+j[Le]&4294967295;qt=we,we=Oe,Oe=4294967295&(le<<30|le>>>2),le=G,G=Sn}this.chain_[0]=this.chain_[0]+G&4294967295,this.chain_[1]=this.chain_[1]+le&4294967295,this.chain_[2]=this.chain_[2]+Oe&4294967295,this.chain_[3]=this.chain_[3]+we&4294967295,this.chain_[4]=this.chain_[4]+qt&4294967295}update(D,R){if(null==D)return;void 0===R&&(R=D.length);const j=R-this.blockSize;let G=0;const le=this.buf_;let Oe=this.inbuf_;for(;G<R;){if(0===Oe)for(;G<=j;)this.compress_(D,G),G+=this.blockSize;if("string"==typeof D){for(;G<R;)if(le[Oe]=D.charCodeAt(G),++Oe,++G,Oe===this.blockSize){this.compress_(le),Oe=0;break}}else for(;G<R;)if(le[Oe]=D[G],++Oe,++G,Oe===this.blockSize){this.compress_(le),Oe=0;break}}this.inbuf_=Oe,this.total_+=R}digest(){const D=[];let R=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let G=this.blockSize-1;G>=56;G--)this.buf_[G]=255&R,R/=256;this.compress_(this.buf_);let j=0;for(let G=0;G<5;G++)for(let le=24;le>=0;le-=8)D[j]=this.chain_[G]>>le&255,++j;return D}}function yr(M,D){const R=new Ar(M,D);return R.subscribe.bind(R)}class Ar{constructor(D,R){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=R,this.task.then(()=>{D(this)}).catch(j=>{this.error(j)})}next(D){this.forEachObserver(R=>{R.next(D)})}error(D){this.forEachObserver(R=>{R.error(D)}),this.close(D)}complete(){this.forEachObserver(D=>{D.complete()}),this.close()}subscribe(D,R,j){let G;if(void 0===D&&void 0===R&&void 0===j)throw new Error("Missing Observer.");G=function mo(M,D){if("object"!=typeof M||null===M)return!1;for(const R of D)if(R in M&&"function"==typeof M[R])return!0;return!1}(D,["next","error","complete"])?D:{next:D,error:R,complete:j},void 0===G.next&&(G.next=ts),void 0===G.error&&(G.error=ts),void 0===G.complete&&(G.complete=ts);const le=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?G.error(this.finalError):G.complete()}catch{}}),this.observers.push(G),le}unsubscribeOne(D){void 0===this.observers||void 0===this.observers[D]||(delete this.observers[D],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(D){if(!this.finalized)for(let R=0;R<this.observers.length;R++)this.sendOne(R,D)}sendOne(D,R){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[D])try{R(this.observers[D])}catch(j){typeof console<"u"&&console.error&&console.error(j)}})}close(D){this.finalized||(this.finalized=!0,void 0!==D&&(this.finalError=D),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ts(){}const Is=function(M,D,R,j){let G;if(j<D?G="at least "+D:j>R&&(G=0===R?"none":"no more than "+R),G)throw new Error(M+" failed: Was called with "+j+(1===j?" argument.":" arguments.")+" Expects "+G+".")};function Ws(M,D){return`${M} failed: ${D} argument `}function ns(M,D,R,j){if((!j||R)&&"function"!=typeof R)throw new Error(Ws(M,D)+"must be a valid function.")}function ua(M,D,R,j){if((!j||R)&&("object"!=typeof R||null===R))throw new Error(Ws(M,D)+"must be a valid context object.")}const ca=function(M){const D=[];let R=0;for(let j=0;j<M.length;j++){let G=M.charCodeAt(j);if(G>=55296&&G<=56319){const le=G-55296;j++,De(j<M.length,"Surrogate pair missing trail surrogate."),G=65536+(le<<10)+(M.charCodeAt(j)-56320)}G<128?D[R++]=G:G<2048?(D[R++]=G>>6|192,D[R++]=63&G|128):G<65536?(D[R++]=G>>12|224,D[R++]=G>>6&63|128,D[R++]=63&G|128):(D[R++]=G>>18|240,D[R++]=G>>12&63|128,D[R++]=G>>6&63|128,D[R++]=63&G|128)}return D},Cn=function(M){let D=0;for(let R=0;R<M.length;R++){const j=M.charCodeAt(R);j<128?D++:j<2048?D+=2:j>=55296&&j<=56319?(D+=4,R++):D+=3}return D},ii=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,M=>{const D=16*Math.random()|0;return("x"===M?D:3&D|8).toString(16)})},si=1e3,Ga=2,_o=144e5,an=.5;function da(M,D=si,R=Ga){const j=D*Math.pow(R,M),G=Math.round(an*j*(Math.random()-.5)*2);return Math.min(_o,j+G)}function ha(M){return M&&M._delegate?M._delegate:M}},333:($o,ni,st)=>{var b=st(467);let $=null,Qn=1;const gn=Symbol("SIGNAL");function Ke(n){const e=$;return $=n,e}function Gt(n){if((!rn(n)||n.dirty)&&(n.dirty||n.lastCleanEpoch!==Qn)){if(!n.producerMustRecompute(n)&&!ar(n))return n.dirty=!1,void(n.lastCleanEpoch=Qn);n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Qn}}function ar(n){pt(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Gt(t),r!==t.version))return!0}return!1}function di(n,e){if(function lr(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),pt(n),1===n.liveConsumerNode.length)for(let r=0;r<n.producerNode.length;r++)di(n.producerNode[r],n.producerIndexOfThis[r]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];pt(i),i.producerIndexOfThis[r]=e}}function rn(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function pt(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let Or=null;function Qe(n){return"function"==typeof n}function kn(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const Fr=kn(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function Ot(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class Lt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(Qe(r))try{r()}catch(s){e=s instanceof Fr?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{ri(s)}catch(o){e=e??[],o instanceof Fr?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Fr(e)}}add(e){var t;if(e&&e!==this)if(this.closed)ri(e);else{if(e instanceof Lt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Ot(t,e)}remove(e){const{_finalizers:t}=this;t&&Ot(t,e),e instanceof Lt&&e._removeParent(this)}}Lt.EMPTY=(()=>{const n=new Lt;return n.closed=!0,n})();const br=Lt.EMPTY;function Lr(n){return n instanceof Lt||n&&"closed"in n&&Qe(n.remove)&&Qe(n.add)&&Qe(n.unsubscribe)}function ri(n){Qe(n)?n():n.unsubscribe()}const On={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},hi={setTimeout(n,e,...t){const{delegate:r}=hi;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=hi;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function zo(n){hi.setTimeout(()=>{const{onUnhandledError:e}=On;if(!e)throw n;e(n)})}function go(){}const aa=Wr("C",void 0,void 0);function Wr(n,e,t){return{kind:n,value:e,error:t}}let yr=null;function Ar(n){if(On.useDeprecatedSynchronousErrorHandling){const e=!yr;if(e&&(yr={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=yr;if(yr=null,t)throw r}}else n()}class mo extends Lt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Lr(e)&&e.add(this)):this.destination=Cn}static create(e,t,r){return new sn(e,t,r)}next(e){this.isStopped?ca(function Wa(n){return Wr("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?ca(function zi(n){return Wr("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ca(aa,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ts=Function.prototype.bind;function Is(n,e){return ts.call(n,e)}class Ws{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){ns(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){ns(r)}else ns(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){ns(t)}}}class sn extends mo{constructor(e,t,r){let i;if(super(),Qe(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&On.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Is(e.next,s),error:e.error&&Is(e.error,s),complete:e.complete&&Is(e.complete,s)}):i=e}this.destination=new Ws(i)}}function ns(n){On.useDeprecatedSynchronousErrorHandling?function la(n){On.useDeprecatedSynchronousErrorHandling&&yr&&(yr.errorThrown=!0,yr.error=n)}(n):zo(n)}function ca(n,e){const{onStoppedNotification:t}=On;t&&hi.setTimeout(()=>t(n,e))}const Cn={closed:!0,next:go,error:function ua(n){throw n},complete:go},ii="function"==typeof Symbol&&Symbol.observable||"@@observable";function si(n){return n}function _o(n){return 0===n.length?si:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let an=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function Wo(n){return n&&n instanceof mo||function Nu(n){return n&&Qe(n.next)&&Qe(n.error)&&Qe(n.complete)}(n)&&Lr(n)}(t)?t:new sn(t,r,i);return Ar(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=da(r))((i,s)=>{const o=new sn({next:a=>{try{t(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[ii](){return this}pipe(...t){return _o(t)(this)}toPromise(t){return new(t=da(t))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function da(n){var e;return null!==(e=n??On.Promise)&&void 0!==e?e:Promise}const ha=kn(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let M=(()=>{class n extends an{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new D(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new ha}next(t){Ar(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){Ar(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Ar(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?br:(this.currentObservers=null,s.push(t),new Lt(()=>{this.currentObservers=null,Ot(s,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new an;return t.source=this,t}}return n.create=(e,t)=>new D(e,t),n})();class D extends M{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:br}}class R extends M{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function j(n){return Qe(n?.lift)}function G(n){return e=>{if(j(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function le(n,e,t,r,i){return new Oe(n,e,t,r,i)}class Oe extends mo{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function we(n,e){return G((t,r)=>{let i=0;t.subscribe(le(r,s=>{r.next(n.call(e,s,i++))}))})}const Vt="https://g.co/ng/security#xss";class ce extends Error{constructor(e,t){super(function Le(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function Gs(n){return{toString:n}.toString()}const fa="__parameters__";function he(n,e,t){return Gs(()=>{const r=function X(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(l,u,c){const d=l.hasOwnProperty(fa)?l[fa]:Object.defineProperty(l,fa,{value:[]})[fa];for(;d.length<=c;)d.push(null);return(d[c]=d[c]||[]).push(o),l}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}const Me=globalThis;function it(n){for(let e in n)if(n[e]===it)return e;throw Error("Could not find renamed property on target object.")}function Xn(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function nt(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(nt).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Go(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const VS=it({__forward_ref__:it});function In(n){return n.__forward_ref__=In,n.toString=function(){return nt(this())},n}function lt(n){return If(n)?n():n}function If(n){return"function"==typeof n&&n.hasOwnProperty(VS)&&n.__forward_ref__===In}function Ve(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function bs(n){return{providers:n.providers||[],imports:n.imports||[]}}function Tf(n){return KC(n,Fu)||KC(n,Af)}function KC(n,e){return n.hasOwnProperty(e)?n[e]:null}function bf(n){return n&&(n.hasOwnProperty(Lu)||n.hasOwnProperty(qS))?n[Lu]:null}const Fu=it({\u0275prov:it}),Lu=it({\u0275inj:it}),Af=it({ngInjectableDef:it}),qS=it({ngInjectorDef:it});class be{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Ve({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Fl(n){return n&&!!n.\u0275providers}const As=it({\u0275cmp:it}),Ad=it({\u0275dir:it}),jm=it({\u0275pipe:it}),vo=it({\u0275mod:it}),ga=it({\u0275fac:it}),Ll=it({__NG_ELEMENT_ID__:it}),XC=it({__NG_ENV_ID__:it});function dt(n){return"string"==typeof n?n:null==n?"":String(n)}function Km(n,e){throw new ce(-201,!1)}var Ut=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Ut||{});let Ul;function QS(){return Ul}function Di(n){const e=Ul;return Ul=n,e}function qo(n,e,t){const r=Tf(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&Ut.Optional?null:void 0!==e?e:void Km()}const Dd={},Ym="__NG_DI_FLAG__",Df="ngTempTokenPath",Vu=/\n/gm,xd="__source";let Uu;function jo(n){const e=Uu;return Uu=n,e}function qs(n,e=Ut.Default){if(void 0===Uu)throw new ce(-203,!1);return null===Uu?qo(n,void 0,e):Uu.get(n,e&Ut.Optional?null:void 0,e)}function xe(n,e=Ut.Default){return(QS()||qs)(lt(n),e)}function Ie(n,e=Ut.Default){return xe(n,Bl(e))}function Bl(n){return typeof n>"u"||"number"==typeof n?n:(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function xf(n){const e=[];for(let t=0;t<n.length;t++){const r=lt(n[t]);if(Array.isArray(r)){if(0===r.length)throw new ce(900,!1);let i,s=Ut.Default;for(let o=0;o<r.length;o++){const a=r[o],l=ZS(a);"number"==typeof l?-1===l?i=a.token:s|=l:i=a}e.push(xe(i,s))}else e.push(xe(r))}return e}function Bu(n,e){return n[Ym]=e,n.prototype[Ym]=e,n}function ZS(n){return n[Ym]}const Gr=Bu(he("Optional"),8),Rd=Bu(he("SkipSelf"),4);function ja(n,e){return n.hasOwnProperty(ga)?n[ga]:null}function Ka(n,e){n.forEach(t=>Array.isArray(t)?Ka(t,e):e(t))}function n_(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function $u(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Wi(n,e,t){let r=Ya(n,e);return r>=0?n[1|r]=t:(r=~r,function Rf(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function $l(n,e){const t=Ya(n,e);if(t>=0)return n[1|t]}function Ya(n,e){return function Nd(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}(n,e,1)}const js={},jt=[],Hl=new be(""),Pf=new be("",-1),r_=new be("");class Hu{get(e,t=Dd){if(t===Dd){const r=new Error(`NullInjectorError: No provider for ${nt(e)}!`);throw r.name="NullInjectorError",r}return t}}var Mf=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(Mf||{}),Ss=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Ss||{}),Fn=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Fn||{});function i_(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function s_(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{const s=i,o=t[++r];iI(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function Nf(n){return 3===n||4===n||6===n}function iI(n){return 64===n.charCodeAt(0)}function zl(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||sI(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function sI(n,e,t,r,i){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}const oI="ng-template";function o_(n,e,t,r){let i=0;if(r){for(;i<e.length&&"string"==typeof e[i];i+=2)if("class"===e[i]&&-1!==i_(e[i+1].toLowerCase(),t,0))return!0}else if(a_(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&"string"==typeof(s=e[i]);)if(s.toLowerCase()===t)return!0}return!1}function a_(n){return 4===n.type&&n.value!==oI}function eD(n,e,t){return e===(4!==n.type||t?n.value:oI)}function l_(n,e,t){let r=4;const i=n.attrs,s=null!==i?function tD(n){for(let e=0;e<n.length;e++)if(Nf(n[e]))return e;return n.length}(i):0;let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&r){if(r=2|1&r,""!==l&&!eD(n,l,t)||""===l&&1===e.length){if(Eo(r))return!1;o=!0}}else if(8&r){if(null===i||!o_(n,i,l,t)){if(Eo(r))return!1;o=!0}}else{const u=e[++a],c=u_(l,i,a_(n),t);if(-1===c){if(Eo(r))return!1;o=!0;continue}if(""!==u){let d;if(d=c>s?"":i[c+1].toLowerCase(),2&r&&u!==d){if(Eo(r))return!1;o=!0}}}}else{if(!o&&!Eo(r)&&!Eo(l))return!1;if(o&&Eo(l))continue;o=!1,r=l|1&r}}return Eo(r)||o}function Eo(n){return!(1&n)}function u_(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const o=e[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function d_(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function aI(n,e,t=!1){for(let r=0;r<e.length;r++)if(l_(n,e[r],t))return!0;return!1}function nD(n,e){e:for(let t=0;t<e.length;t++){const r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function kf(n,e){return n?":not("+e.trim()+")":e}function rD(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!Eo(o)&&(e+=kf(s,i),i=""),r=o,s=s||!Eo(r);t++}return""!==i&&(e+=kf(s,i)),e}function Ds(n){return Gs(()=>{const e=lI(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Mf.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Ss.Emulated,styles:n.styles||jt,_:null,schemas:n.schemas||null,tView:null,id:""};aD(t);const r=n.dependencies;return t.directiveDefs=f_(r,!1),t.pipeDefs=f_(r,!0),t.id=function p_(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const i of t)e=Math.imul(31,e)+i.charCodeAt(0)|0;return e+=2147483648,"c"+e}(t),t})}function sD(n){return Dt(n)||jr(n)}function oD(n){return null!==n}function Co(n){return Gs(()=>({type:n.type,bootstrap:n.bootstrap||jt,declarations:n.declarations||jt,imports:n.imports||jt,exports:n.exports||jt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Of(n,e){if(null==n)return js;const t={};for(const r in n)if(n.hasOwnProperty(r)){const i=n[r];let s,o,a=Fn.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(t[s]=a!==Fn.None?[r,a]:r,e[s]=o):t[s]=r}return t}function ht(n){return Gs(()=>{const e=lI(n);return aD(e),e})}function qr(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Dt(n){return n[As]||null}function jr(n){return n[Ad]||null}function pi(n){return n[jm]||null}function xi(n,e){const t=n[vo]||null;if(!t&&!0===e)throw new Error(`Type ${nt(n)} does not have '\u0275mod' property.`);return t}function lI(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||js,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||jt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Of(n.inputs,e),outputs:Of(n.outputs),debugInfo:null}}function aD(n){n.features?.forEach(e=>e(n))}function f_(n,e){if(!n)return null;const t=e?pi:sD;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(oD)}function ma(n){return{\u0275providers:n}}function uI(...n){return{\u0275providers:cI(0,n),\u0275fromNgModule:!0}}function cI(n,...e){const t=[],r=new Set;let i;const s=o=>{t.push(o)};return Ka(e,o=>{const a=o;g_(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&lD(i,s),t}function lD(n,e){for(let t=0;t<n.length;t++){const{ngModule:r,providers:i}=n[t];dI(i,s=>{e(s,r)})}}function g_(n,e,t,r){if(!(n=lt(n)))return!1;let i=null,s=bf(n);const o=!s&&Dt(n);if(s||o){if(o&&!o.standalone)return!1;i=n}else{const l=n.ngModule;if(s=bf(l),!s)return!1;i=l}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const u of l)g_(u,e,t,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let u;r.add(i);try{Ka(s.imports,c=>{g_(c,e,t,r)&&(u||=[],u.push(c))})}finally{}void 0!==u&&lD(u,e)}if(!a){const u=ja(i)||(()=>new i);e({provide:i,useFactory:u,deps:jt},i),e({provide:r_,useValue:i,multi:!0},i),e({provide:Hl,useValue:()=>xe(i),multi:!0},i)}const l=s.providers;if(null!=l&&!a){const u=n;dI(l,c=>{e(c,u)})}}}return i!==n&&void 0!==n.providers}function dI(n,e){for(let t of n)Fl(t)&&(t=t.\u0275providers),Array.isArray(t)?dI(t,e):e(t)}const e2=it({provide:String,useValue:it});function kd(n){return null!==n&&"object"==typeof n&&e2 in n}function Wl(n){return"function"==typeof n}const m_=new be(""),__={},cD={};let y_;function zu(){return void 0===y_&&(y_=new Hu),y_}class Ri{}class Wu extends Ri{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,E_(e,o=>this.processProvider(o)),this.records.set(Pf,Od(void 0,this)),i.has("environment")&&this.records.set(Ri,Od(void 0,this));const s=this.records.get(m_);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(r_,jt,Ut.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const e=Ke(null);try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();const t=this._onDestroyHooks;this._onDestroyHooks=[];for(const r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ke(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=jo(this),r=Di(void 0);try{return e()}finally{jo(t),Di(r)}}get(e,t=Dd,r=Ut.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(XC))return e[XC](this);r=Bl(r);const s=jo(this),o=Di(void 0);try{if(!(r&Ut.SkipSelf)){let l=this.records.get(e);if(void 0===l){const u=function v_(n){return"function"==typeof n||"object"==typeof n&&n instanceof be}(e)&&Tf(e);l=u&&this.injectableDefInScope(u)?Od(Gu(e),__):null,this.records.set(e,l)}if(null!=l)return this.hydrate(e,l)}return(r&Ut.Self?zu():this.parent).get(e,t=r&Ut.Optional&&t===Dd?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[Df]=a[Df]||[]).unshift(nt(e)),s)throw a;return function Qm(n,e,t,r){const i=n[Df];throw e[xd]&&i.unshift(e[xd]),n.message=function Jm(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=nt(e);if(Array.isArray(e))i=e.map(nt).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):nt(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(Vu,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[Df]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{Di(o),jo(s)}}resolveInjectorInitializers(){const e=Ke(null),t=jo(this),r=Di(void 0);try{const s=this.get(Hl,jt,Ut.Self);for(const o of s)o()}finally{jo(t),Di(r),Ke(e)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(nt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ce(205,!1)}processProvider(e){let t=Wl(e=lt(e))?e:lt(e&&e.provide);const r=function dD(n){return kd(n)?Od(void 0,n.useValue):Od(fI(n),__)}(e);if(!Wl(e)&&!0===e.multi){let i=this.records.get(t);i||(i=Od(void 0,__,!0),i.factory=()=>xf(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){const r=Ke(null);try{return t.value===__&&(t.value=cD,t.value=t.factory()),"object"==typeof t.value&&t.value&&function t2(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Ke(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;const t=lt(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function Gu(n){const e=Tf(n),t=null!==e?e.factory:ja(n);if(null!==t)return t;if(n instanceof be)throw new ce(204,!1);if(n instanceof Function)return function hI(n){if(n.length>0)throw new ce(204,!1);const t=function Gm(n){return n&&(n[Fu]||n[Af])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new ce(204,!1)}function fI(n,e,t){let r;if(Wl(n)){const i=lt(n);return ja(i)||Gu(i)}if(kd(n))r=()=>lt(n.useValue);else if(function Ff(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...xf(n.deps||[]));else if(function Ja(n){return!(!n||!n.useExisting)}(n))r=()=>xe(lt(n.useExisting));else{const i=lt(n&&(n.useClass||n.provide));if(!function pI(n){return!!n.deps}(n))return ja(i)||Gu(i);r=()=>new i(...xf(n.deps))}return r}function Od(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function E_(n,e){for(const t of n)Array.isArray(t)?E_(t,e):t&&Fl(t)?E_(t.\u0275providers,e):e(t)}function _a(n,e){n instanceof Wu&&n.assertNotDestroyed();const r=jo(n),i=Di(void 0);try{return e()}finally{jo(r),Di(i)}}function qu(){return void 0!==QS()||null!=function tI(){return Uu}()}const zn=0,Ae=1,Ze=2,ur=3,Ks=4,Pi=5,xs=6,Vd=7,Dn=8,Vr=9,Io=10,ut=11,Ud=12,_I=13,ya=14,cr=15,Bd=16,Ku=17,wo=18,$d=19,yI=20,Xa=21,$f=22,Za=23,mt=25,w_=1,Ys=7,el=9,Sr=10;var zd=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(zd||{});function Mi(n){return Array.isArray(n)&&"object"==typeof n[w_]}function oi(n){return Array.isArray(n)&&!0===n[w_]}function Yu(n){return!!(4&n.flags)}function va(n){return n.componentOffset>-1}function zf(n){return!(1&~n.flags)}function Rs(n){return!!n.template}function T_(n){return!!(512&n[Ze])}class SI{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function S_(n,e,t,r){null!==e?e.applyValueToInputSignal(e,r):n[t]=r}function Ps(){return DI}function DI(n){return n.type.prototype.ngOnChanges&&(n.setInput=yD),D_}function D_(){const n=qf(this),e=n?.current;if(e){const t=n.previous;if(t===js)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function yD(n,e,t,r,i){const s=this.declaredInputs[r],o=qf(n)||function vD(n,e){return n[xI]=e}(n,{previous:js,current:null}),a=o.current||(o.current={}),l=o.previous,u=l[s];a[s]=new SI(u&&u.currentValue,t,l===js),S_(n,e,i,t)}Ps.ngInherit=!0;const xI="__ngSimpleChanges__";function qf(n){return n[xI]||null}const Ko=function(n,e,t){};let Yf=!1;function wn(n){for(;Array.isArray(n);)n=n[zn];return n}function Qu(n,e){return wn(e[n])}function Ni(n,e){return wn(e[n.index])}function Ju(n,e){return n.data[e]}function Ms(n,e){const t=e[n];return Mi(t)?t:t[zn]}function P_(n){return!(128&~n[Ze])}function Yo(n,e){return null==e?null:n[e]}function MI(n){n[Ku]=0}function NI(n){1024&n[Ze]||(n[Ze]|=1024,P_(n)&&Gd(n))}function Xu(n){return!!(9216&n[Ze]||n[Za]?.dirty)}function N_(n){n[Io].changeDetectionScheduler?.notify(1),Xu(n)?Gd(n):64&n[Ze]&&(function RI(){return Yf}()?(n[Ze]|=1024,Gd(n)):n[Io].changeDetectionScheduler?.notify())}function Gd(n){n[Io].changeDetectionScheduler?.notify();let e=ql(n);for(;null!==e&&!(8192&e[Ze])&&(e[Ze]|=8192,P_(e));)e=ql(e)}function Jf(n,e){if(!(256&~n[Ze]))throw new ce(911,!1);null===n[Xa]&&(n[Xa]=[]),n[Xa].push(e)}function ql(n){const e=n[ur];return oi(e)?e[ur]:e}const ct={lFrame:S(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function FI(){return ct.bindingsEnabled}function Zu(){return null!==ct.skipHydrationRootTNode}function de(){return ct.lFrame.lView}function Bt(){return ct.lFrame.tView}function ec(n){return ct.lFrame.contextLView=n,n[Dn]}function tc(n){return ct.lFrame.contextLView=null,n}function _n(){let n=Xf();for(;null!==n&&64===n.type;)n=n.parent;return n}function Xf(){return ct.lFrame.currentTNode}function To(n,e){const t=ct.lFrame;t.currentTNode=n,t.isParent=e}function Zf(){return ct.lFrame.isParent}function jd(){ct.lFrame.isParent=!1}function ki(){const n=ct.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Js(){return ct.lFrame.bindingIndex++}function Ea(n){const e=ct.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function RD(n,e){const t=ct.lFrame;t.bindingIndex=t.bindingRootIndex=n,tp(e)}function tp(n){ct.lFrame.currentDirectiveIndex=n}function V_(){return ct.lFrame.currentQueryIndex}function np(n){ct.lFrame.currentQueryIndex=n}function v(n){const e=n[Ae];return 2===e.type?e.declTNode:1===e.type?n[Pi]:null}function h(n,e,t){if(t&Ut.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&Ut.Host||(i=v(s),null===i||(s=s[ya],10&i.type))););if(null===i)return!1;e=i,n=s}const r=ct.lFrame=C();return r.currentTNode=e,r.lView=n,!0}function g(n){const e=C(),t=n[Ae];ct.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function C(){const n=ct.lFrame,e=null===n?null:n.child;return null===e?S(n):e}function S(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function k(){const n=ct.lFrame;return ct.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Q=k;function re(){const n=k();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Se(){return ct.lFrame.selectedIndex}function He(n){ct.lFrame.selectedIndex=n}function ze(){const n=ct.lFrame;return Ju(n.tView,n.selectedIndex)}let U_=!0;function nc(){return U_}function Xs(n){U_=n}function Kd(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:u,ngOnDestroy:c}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),null!=c&&(n.destroyHooks??=[]).push(t,c)}}function rc(n,e,t){sp(n,e,3,t)}function Yd(n,e,t,r){(3&n[Ze])===t&&sp(n,e,t,r)}function B_(n,e){let t=n[Ze];(3&t)===e&&(t&=16383,t+=1,n[Ze]=t)}function sp(n,e,t,r){const s=r??-1,o=e.length-1;let a=0;for(let l=void 0!==r?65535&n[Ku]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=r&&a>=r)break}else e[l]<0&&(n[Ku]+=65536),(a<s||-1==s)&&(ote(n,t,e,l),n[Ku]=(4294901760&n[Ku])+l+2),l++}function $I(n,e){Ko(4,n,e);const t=Ke(null);try{e.call(n)}finally{Ke(t),Ko(5,n,e)}}function ote(n,e,t,r){const i=t[r]<0,s=t[r+1],a=n[i?-t[r]:t[r]];i?n[Ze]>>14<n[Ku]>>16&&(3&n[Ze])===e&&(n[Ze]+=16384,$I(a,s)):$I(a,s)}const op=-1;class $_{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function ND(n){return n!==op}function H_(n){return 32767&n}function z_(n,e){let t=function dte(n){return n>>16}(n),r=e;for(;t>0;)r=r[ya],t--;return r}let kD=!0;function HI(n){const e=kD;return kD=n,e}const c2=255,d2=5;let hte=0;const rl={};function zI(n,e){const t=h2(n,e);if(-1!==t)return t;const r=e[Ae];r.firstCreatePass&&(n.injectorIndex=e.length,OD(r.data,n),OD(e,null),OD(r.blueprint,null));const i=WI(n,e),s=n.injectorIndex;if(ND(i)){const o=H_(i),a=z_(i,e),l=a[Ae].data;for(let u=0;u<8;u++)e[s+u]=a[o+u]|l[o+u]}return e[s+8]=i,s}function OD(n,e){n.push(0,0,0,0,0,0,0,0,e)}function h2(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function WI(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=v2(i),null===r)return op;if(t++,i=i[ya],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return op}function FD(n,e,t){!function fte(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(Ll)&&(r=t[Ll]),null==r&&(r=t[Ll]=hte++);const i=r&c2;e.data[n+(i>>d2)]|=1<<i}(n,e,t)}function f2(n,e,t){if(t&Ut.Optional||void 0!==n)return n;Km()}function p2(n,e,t,r){if(t&Ut.Optional&&void 0===r&&(r=null),!(t&(Ut.Self|Ut.Host))){const i=n[Vr],s=Di(void 0);try{return i?i.get(e,r,t&Ut.Optional):qo(e,r,t&Ut.Optional)}finally{Di(s)}}return f2(r,0,t)}function g2(n,e,t,r=Ut.Default,i){if(null!==n){if(2048&e[Ze]&&!(r&Ut.Self)){const o=function yte(n,e,t,r,i){let s=n,o=e;for(;null!==s&&null!==o&&2048&o[Ze]&&!(512&o[Ze]);){const a=m2(s,o,t,r|Ut.Self,rl);if(a!==rl)return a;let l=s.parent;if(!l){const u=o[yI];if(u){const c=u.get(t,rl,r);if(c!==rl)return c}l=v2(o),o=o[ya]}s=l}return i}(n,e,t,r,rl);if(o!==rl)return o}const s=m2(n,e,t,r,rl);if(s!==rl)return s}return p2(e,t,r,i)}function m2(n,e,t,r,i){const s=function mte(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Ll)?n[Ll]:void 0;return"number"==typeof e?e>=0?e&c2:_te:e}(t);if("function"==typeof s){if(!h(e,n,r))return r&Ut.Host?f2(i,0,r):p2(e,t,r,i);try{let o;if(o=s(r),null!=o||r&Ut.Optional)return o;Km()}finally{Q()}}else if("number"==typeof s){let o=null,a=h2(n,e),l=op,u=r&Ut.Host?e[cr][Pi]:null;for((-1===a||r&Ut.SkipSelf)&&(l=-1===a?WI(n,e):e[a+8],l!==op&&y2(r,!1)?(o=e[Ae],a=H_(l),e=z_(l,e)):a=-1);-1!==a;){const c=e[Ae];if(_2(s,a,c.data)){const d=gte(a,e,t,o,r,u);if(d!==rl)return d}l=e[a+8],l!==op&&y2(r,e[Ae].data[a+8]===u)&&_2(s,a,e)?(o=c,a=H_(l),e=z_(l,e)):a=-1}}return i}function gte(n,e,t,r,i,s){const o=e[Ae],a=o.data[n+8],c=GI(a,o,t,null==r?va(a)&&kD:r!=o&&!!(3&a.type),i&Ut.Host&&s===a);return null!==c?Qd(e,o,c,a):rl}function GI(n,e,t,r,i){const s=n.providerIndexes,o=e.data,a=1048575&s,l=n.directiveStart,c=s>>20,f=i?a+c:n.directiveEnd;for(let y=r?a:a+c;y<f;y++){const E=o[y];if(y<l&&t===E||y>=l&&E.type===t)return y}if(i){const y=o[l];if(y&&Rs(y)&&y.type===t)return l}return null}function Qd(n,e,t,r){let i=n[t];const s=e.data;if(function ate(n){return n instanceof $_}(i)){const o=i;o.resolving&&function YS(n,e){throw e&&e.join(" > "),new ce(-200,n)}(function ln(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():dt(n)}(s[t]));const a=HI(o.canSeeViewProviders);o.resolving=!0;const u=o.injectImpl?Di(o.injectImpl):null;h(n,r,Ut.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function BI(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=DI(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}(t,s[t],e)}finally{null!==u&&Di(u),HI(a),o.resolving=!1,Q()}}return i}function _2(n,e,t){return!!(t[e+(n>>d2)]&1<<n)}function y2(n,e){return!(n&Ut.Self||n&Ut.Host&&e)}class gi{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return g2(this._tNode,this._lView,e,Bl(r),t)}}function _te(){return new gi(_n(),de())}function Oi(n){return Gs(()=>{const e=n.prototype.constructor,t=e[ga]||LD(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const s=i[ga]||LD(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function LD(n){return If(n)?()=>{const e=LD(lt(n));return e&&e()}:ja(n)}function v2(n){const e=n[Ae],t=e.type;return 2===t?e.declTNode:1===t?n[Pi]:null}function T2(n,e=null,t=null,r){const i=b2(n,e,t,r);return i.resolveInjectorInitializers(),i}function b2(n,e=null,t=null,r,i=new Set){const s=[t||jt,uI(n)];return r=r||("object"==typeof n?void 0:nt(n)),new Wu(s,e||zu(),r||null,i)}let mi=(()=>{class n{static{this.THROW_IF_NOT_FOUND=Dd}static{this.NULL=new Hu}static create(t,r){if(Array.isArray(t))return T2({name:""},r,t,"");{const i=t.name??"";return T2({name:i},t.parent,t.providers,i)}}static{this.\u0275prov=Ve({token:n,providedIn:"any",factory:()=>xe(Pf)})}static{this.__NG_ELEMENT_ID__=-1}}return n})();function UD(n){return n.ngOriginalError}class il{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&UD(e);for(;t&&UD(t);)t=UD(t);return t||null}}const S2=new be("",{providedIn:"root",factory:()=>Ie(il).handleError.bind(void 0)});let up=(()=>{class n{static{this.__NG_ELEMENT_ID__=Ste}static{this.__NG_ENV_ID__=t=>t}}return n})();class Ate extends up{constructor(e){super(),this._lView=e}onDestroy(e){return Jf(this._lView,e),()=>function k_(n,e){if(null===n[Xa])return;const t=n[Xa].indexOf(e);-1!==t&&n[Xa].splice(t,1)}(this._lView,e)}}function Ste(){return new Ate(de())}function Dte(){return cp(_n(),de())}function cp(n,e){return new bo(Ni(n,e))}let bo=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=Dte}}return n})();function x2(n){return n instanceof bo?n.nativeElement:n}function BD(n){return e=>{setTimeout(n,void 0,e)}}const xn=class xte extends M{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,qu()&&(this.destroyRef=Ie(up,{optional:!0})??void 0)}emit(e){const t=Ke(null);try{super.next(e)}finally{Ke(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&"object"==typeof e){const l=e;i=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=BD(s),i&&(i=BD(i)),o&&(o=BD(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof Lt&&e.add(a),a}};function Rte(){return this._results[Symbol.iterator]()}class $D{get changes(){return this._changes??=new xn}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const t=$D.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=Rte)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;const r=function fi(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function t_(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function jI(n){return!(128&~n.flags)}const HD=new Map;let Mte=0;const WD="__ngContext__";function ss(n,e){Mi(e)?(n[WD]=e[$d],function kte(n){HD.set(n[$d],n)}(e)):n[WD]=e}function U2(n){return $2(n[Ud])}function B2(n){return $2(n[Ks])}function $2(n){for(;null!==n&&!oi(n);)n=n[Ks];return n}let GD;const qD=new be("",{providedIn:"root",factory:()=>Xte}),Xte="ng",Y2=new be(""),Ao=new be("",{providedIn:"platform",factory:()=>"unknown"}),Q2=new be("",{providedIn:"root",factory:()=>function ic(){if(void 0!==GD)return GD;if(typeof document<"u")return document;throw new ce(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let J2=()=>null;function ex(n,e,t=!1){return J2(n,e,t)}const nU=new be("",{providedIn:"root",factory:()=>!1});let rw;function oU(n){return function sx(){if(void 0===rw&&(rw=null,Me.trustedTypes))try{rw=Me.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return rw}()?.createScriptURL(n)||n}class aU{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Vt})`}}function sc(n){return n instanceof aU?n.changingThisBreaksApplicationSecurity:n}function J_(n,e){const t=function _ne(n){return n instanceof aU&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Vt})`)}return t===e}const Cne=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var pp=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(pp||{});function sw(n){const e=Z_();return e?e.sanitize(pp.URL,n)||"":J_(n,"URL")?sc(n):function ox(n){return(n=String(n)).match(Cne)?n:"unsafe:"+n}(dt(n))}function mU(n){const e=Z_();if(e)return oU(e.sanitize(pp.RESOURCE_URL,n)||"");if(J_(n,"ResourceURL"))return oU(sc(n));throw new ce(904,!1)}function Z_(){const n=de();return n&&n[Io].sanitizer}function So(n){return n instanceof Function?n():n}var oc=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(oc||{});let fx;function px(n,e){return fx(n,e)}function mp(n,e,t,r,i){if(null!=r){let s,o=!1;oi(r)?s=r:Mi(r)&&(o=!0,r=r[zn]);const a=wn(r);0===n&&null!==t?null==i?xU(e,t,a):Jd(e,t,a,i||null,!0):1===n&&null!==t?Jd(e,t,a,i||null,!0):2===n?function ny(n,e,t){const r=cw(n,e);r&&function ire(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function are(n,e,t,r,i){const s=t[Ys];s!==wn(t)&&mp(e,n,r,s,i);for(let a=Sr;a<t.length;a++){const l=t[a];hw(l[Ae],l,n,e,r,s)}}(e,n,s,t,i)}}function lw(n,e,t){return n.createElement(e,t)}function AU(n,e){e[Io].changeDetectionScheduler?.notify(1),hw(n,e,e[ut],2,null,null)}function SU(n,e){const t=n[el],r=t.indexOf(e);t.splice(r,1)}function ey(n,e){if(n.length<=Sr)return;const t=Sr+e,r=n[t];if(r){const i=r[Bd];null!==i&&i!==n&&SU(i,r),e>0&&(n[t-1][Ks]=r[Ks]);const s=$u(n,Sr+e);!function Jne(n,e){AU(n,e),e[zn]=null,e[Pi]=null}(r[Ae],r);const o=s[wo];null!==o&&o.detachView(s[Ae]),r[ur]=null,r[Ks]=null,r[Ze]&=-129}return r}function uw(n,e){if(!(256&e[Ze])){const t=e[ut];t.destroyNode&&hw(n,e,t,3,null,null),function Zne(n){let e=n[Ud];if(!e)return _x(n[Ae],n);for(;e;){let t=null;if(Mi(e))t=e[Ud];else{const r=e[Sr];r&&(t=r)}if(!t){for(;e&&!e[Ks]&&e!==n;)Mi(e)&&_x(e[Ae],e),e=e[ur];null===e&&(e=n),Mi(e)&&_x(e[Ae],e),t=e&&e[Ks]}e=t}}(e)}}function _x(n,e){if(256&e[Ze])return;const t=Ke(null);try{e[Ze]&=-129,e[Ze]|=256,e[Za]&&function kt(n){if(pt(n),rn(n))for(let e=0;e<n.producerNode.length;e++)di(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}(e[Za]),function rre(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof $_)){const s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],l=s[o+1];Ko(4,a,l);try{l.call(a)}finally{Ko(5,a,l)}}else{Ko(4,i,s);try{s.call(i)}finally{Ko(5,i,s)}}}}}(n,e),function nre(n,e){const t=n.cleanup,r=e[Vd];if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else t[s].call(r[t[s+1]]);null!==r&&(e[Vd]=null);const i=e[Xa];if(null!==i){e[Xa]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(n,e),1===e[Ae].type&&e[ut].destroy();const r=e[Bd];if(null!==r&&oi(e[ur])){r!==e[ur]&&SU(r,e);const i=e[wo];null!==i&&i.detachView(n)}!function Ote(n){HD.delete(n[$d])}(e)}finally{Ke(t)}}function yx(n,e,t){return function DU(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[zn];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=n.data[r.directiveStart+i];if(s===Ss.None||s===Ss.Emulated)return null}return Ni(r,t)}}(n,e.parent,t)}function Jd(n,e,t,r,i){n.insertBefore(e,t,r,i)}function xU(n,e,t){n.appendChild(e,t)}function RU(n,e,t,r,i){null!==r?Jd(n,e,t,r,i):xU(n,e,t)}function cw(n,e){return n.parentNode(e)}function PU(n,e,t){return NU(n,e,t)}let vx,NU=function MU(n,e,t){return 40&n.type?Ni(n,t):null};function dw(n,e,t,r){const i=yx(n,r,e),s=e[ut],a=PU(r.parent||e[Pi],r,e);if(null!=i)if(Array.isArray(t))for(let l=0;l<t.length;l++)RU(s,i,t[l],a,!1);else RU(s,i,t,a,!1);void 0!==vx&&vx(s,r,e,t,i)}function ty(n,e){if(null!==e){const t=e.type;if(3&t)return Ni(e,n);if(4&t)return Ex(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return ty(n,r);{const i=n[e.index];return oi(i)?Ex(-1,i):wn(i)}}if(32&t)return px(e,n)()||wn(n[e.index]);{const r=OU(n,e);return null!==r?Array.isArray(r)?r[0]:ty(ql(n[cr]),r):ty(n,e.next)}}return null}function OU(n,e){return null!==e?n[cr][Pi].projection[e.projection]:null}function Ex(n,e){const t=Sr+n+1;if(t<e.length){const r=e[t],i=r[Ae].firstChild;if(null!==i)return ty(r,i)}return e[Ys]}function Cx(n,e,t,r,i,s,o){for(;null!=t;){const a=r[t.index],l=t.type;if(o&&0===e&&(a&&ss(wn(a),r),t.flags|=2),32&~t.flags)if(8&l)Cx(n,e,t.child,r,i,s,!1),mp(e,n,i,a,s);else if(32&l){const u=px(t,r);let c;for(;c=u();)mp(e,n,i,c,s);mp(e,n,i,a,s)}else 16&l?LU(n,e,r,t,i,s):mp(e,n,i,a,s);t=o?t.projectionNext:t.next}}function hw(n,e,t,r,i,s){Cx(t,r,n.firstChild,e,i,s,!1)}function LU(n,e,t,r,i,s){const o=t[cr],l=o[Pi].projection[r.projection];if(Array.isArray(l))for(let u=0;u<l.length;u++)mp(e,n,i,l[u],s);else{let u=l;const c=o[ur];jI(r)&&(u.flags|=128),Cx(n,e,u,c,i,s,!0)}}function VU(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function UU(n,e,t){const{mergedAttrs:r,classes:i,styles:s}=t;null!==r&&s_(n,e,r),null!==i&&VU(n,e,i),null!==s&&function ure(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}const At={};function Kt(n=1){BU(Bt(),de(),Se()+n,!1)}function BU(n,e,t,r){if(!r)if(3&~e[Ze]){const s=n.preOrderHooks;null!==s&&Yd(e,s,0,t)}else{const s=n.preOrderCheckHooks;null!==s&&rc(e,s,t)}He(t)}function Ce(n,e=Ut.Default){const t=de();return null===t?xe(n,e):g2(_n(),t,lt(n),e)}function HU(n,e,t,r,i,s){const o=Ke(null);try{let a=null;i&Fn.SignalBased&&(a=e[r][gn]),null!==a&&void 0!==a.transformFn&&(s=a.transformFn(s)),i&Fn.HasDecoratorInputTransform&&(s=n.inputTransforms[r].call(e,s)),null!==n.setInput?n.setInput(e,a,s,t,r):S_(e,a,r,s)}finally{Ke(o)}}function fw(n,e,t,r,i,s,o,a,l,u,c){const d=e.blueprint.slice();return d[zn]=i,d[Ze]=204|r,(null!==u||n&&2048&n[Ze])&&(d[Ze]|=2048),MI(d),d[ur]=d[ya]=n,d[Dn]=t,d[Io]=o||n&&n[Io],d[ut]=a||n&&n[ut],d[Vr]=l||n&&n[Vr]||null,d[Pi]=s,d[$d]=function Nte(){return Mte++}(),d[xs]=c,d[yI]=u,d[cr]=2==e.type?n[cr]:d,d}function _p(n,e,t,r,i){let s=n.data[e];if(null===s)s=function Ix(n,e,t,r,i){const s=Xf(),o=Zf(),l=n.data[e]=function _re(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return Zu()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l,l.prev=s)),l}(n,e,t,r,i),function xD(){return ct.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const o=function qd(){const n=ct.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return To(s,!0),s}function ry(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function zU(n,e,t,r,i){const s=Se(),o=2&r;try{He(-1),o&&e.length>mt&&BU(n,e,mt,!1),Ko(o?2:0,i),t(r,i)}finally{He(s),Ko(o?3:1,i)}}function wx(n,e,t){if(Yu(e)){const r=Ke(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=n.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{Ke(r)}}}function Tx(n,e,t){FI()&&(function Tre(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;va(t)&&function Pre(n,e,t){const r=Ni(e,n),i=WU(t);let o=16;t.signals?o=4096:t.onPush&&(o=64);const a=pw(n,fw(n,i,null,o,r,e,null,n[Io].rendererFactory.createRenderer(r,t),null,null,null));n[e.index]=a}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||zI(t,e),ss(r,e);const o=t.initialInputs;for(let a=i;a<s;a++){const l=n.data[a],u=Qd(e,n,a,t);ss(u,e),null!==o&&Mre(0,a-i,u,l,0,o),Rs(l)&&(Ms(t.index,e)[Dn]=Qd(e,n,a,t))}}(n,e,t,Ni(t,e)),!(64&~t.flags)&&YU(n,e,t))}function bx(n,e,t=Ni){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?t(e,n):n[o];n[i++]=a}}}function WU(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=Ax(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Ax(n,e,t,r,i,s,o,a,l,u,c){const d=mt+r,f=d+i,y=function dre(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:At);return t}(d,f),E="function"==typeof u?u():u;return y[Ae]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:E,incompleteFirstPass:!1,ssrId:c}}let GU=()=>null;function qU(n,e,t,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;const o=e[s];if(void 0===o)continue;r??={};let a,l=Fn.None;Array.isArray(o)?(a=o[0],l=o[1]):a=o;let u=s;if(null!==i){if(!i.hasOwnProperty(s))continue;u=i[s]}0===n?jU(r,t,u,a,l):jU(r,t,u,a)}return r}function jU(n,e,t,r,i){let s;n.hasOwnProperty(t)?(s=n[t]).push(e,r):s=n[t]=[e,r],void 0!==i&&s.push(i)}function eo(n,e,t,r,i,s,o,a){const l=Ni(e,t);let c,u=e.inputs;!a&&null!=u&&(c=u[r])?(Px(n,t,c,r,i),va(e)&&function Ere(n,e){const t=Ms(e,n);16&t[Ze]||(t[Ze]|=64)}(t,e.index)):3&e.type&&(r=function vre(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(l,r,i))}function Sx(n,e,t,r){if(FI()){const i=null===r?null:{"":-1},s=function Are(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(aI(e,o.selectors,!1))if(r||(r=[]),Rs(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),Dx(n,e,a.length)}else r.unshift(o),Dx(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(n,t);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&KU(n,e,t,o,i,a),i&&function Sre(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new ce(-301,!1);r.push(e[i],s)}}}(t,r,i)}t.mergedAttrs=zl(t.mergedAttrs,t.attrs)}function KU(n,e,t,r,i,s){for(let u=0;u<r.length;u++)FD(zI(t,e),n,r[u].type);!function xre(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let u=0;u<r.length;u++){const c=r[u];c.providersResolver&&c.providersResolver(c)}let o=!1,a=!1,l=ry(n,e,r.length,null);for(let u=0;u<r.length;u++){const c=r[u];t.mergedAttrs=zl(t.mergedAttrs,c.hostAttrs),Rre(n,t,e,l,c),Dre(l,c,i),null!==c.contentQueries&&(t.flags|=4),(null!==c.hostBindings||null!==c.hostAttrs||0!==c.hostVars)&&(t.flags|=64);const d=c.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),l++}!function yre(n,e,t){const i=e.directiveEnd,s=n.data,o=e.attrs,a=[];let l=null,u=null;for(let c=e.directiveStart;c<i;c++){const d=s[c],f=t?t.get(d):null,E=f?f.outputs:null;l=qU(0,d.inputs,c,l,f?f.inputs:null),u=qU(1,d.outputs,c,u,E);const I=null===l||null===o||a_(e)?null:Nre(l,c,o);a.push(I)}null!==l&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=u}(n,t,s)}function YU(n,e,t){const r=t.directiveStart,i=t.directiveEnd,s=t.index,o=function PD(){return ct.lFrame.currentDirectiveIndex}();try{He(s);for(let a=r;a<i;a++){const l=n.data[a],u=e[a];tp(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&bre(l,u)}}finally{He(-1),tp(o)}}function bre(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function Dx(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function Dre(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Rs(e)&&(t[""]=n)}}function Rre(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=ja(i.type)),o=new $_(s,Rs(i),Ce);n.blueprint[r]=o,t[r]=o,function Ire(n,e,t,r,i){const s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function wre(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,r,s)}}(n,e,r,ry(n,t,i.hostVars,At),i)}function sl(n,e,t,r,i,s){const o=Ni(n,e);!function xx(n,e,t,r,i,s,o){if(null==s)n.removeAttribute(e,i,t);else{const a=null==o?dt(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}(e[ut],o,s,n.value,t,r,i)}function Mre(n,e,t,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)HU(r,t,o[a++],o[a++],o[a++],o[a++])}function Nre(n,e,t){let r=null,i=0;for(;i<t.length;){const s=t[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===r&&(r=[]);const o=n[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function QU(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function JU(n,e){const t=n.contentQueries;if(null!==t){const r=Ke(null);try{for(let i=0;i<t.length;i+=2){const o=t[i+1];if(-1!==o){const a=n.data[o];np(t[i]),a.contentQueries(2,e[o],o)}}}finally{Ke(r)}}}function pw(n,e){return n[Ud]?n[_I][Ks]=e:n[Ud]=e,n[_I]=e,e}function Rx(n,e,t){np(0);const r=Ke(null);try{e(n,t)}finally{Ke(r)}}function XU(n){return n[Vd]||(n[Vd]=[])}function ZU(n){return n.cleanup||(n.cleanup=[])}function gw(n,e){const t=n[Vr],r=t?t.get(il,null):null;r&&r.handleError(e)}function Px(n,e,t,r,i){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],l=t[s++];HU(n.data[o],e[o],r,a,l,i)}}function kre(n,e){const t=Ms(e,n),r=t[Ae];!function Ore(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(r,t);const i=t[zn];null!==i&&null===t[xs]&&(t[xs]=ex(i,t[Vr])),Mx(r,t,t[Dn])}function Mx(n,e,t){g(e);try{const r=n.viewQuery;null!==r&&Rx(1,r,t);const i=n.template;null!==i&&zU(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[wo]?.finishViewCreation(n),n.staticContentQueries&&JU(n,e),n.staticViewQueries&&Rx(2,n.viewQuery,t);const s=n.components;null!==s&&function Fre(n,e){for(let t=0;t<e.length;t++)kre(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Ze]&=-5,re()}}function iy(n,e,t,r){const i=Ke(null);try{const s=e.tView,l=fw(n,s,t,4096&n[Ze]?4096:16,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null);l[Bd]=n[e.index];const c=n[wo];return null!==c&&(l[wo]=c.createEmbeddedView(s)),Mx(s,l,t),l}finally{Ke(i)}}function tB(n,e){const t=Sr+e;if(t<n.length)return n[t]}function yp(n,e){return!e||null===e.firstChild||jI(n)}function sy(n,e,t,r=!0){const i=e[Ae];if(function ere(n,e,t,r){const i=Sr+r,s=t.length;r>0&&(t[i-1][Ks]=e),r<s-Sr?(e[Ks]=t[i],n_(t,Sr+r,e)):(t.push(e),e[Ks]=null),e[ur]=t;const o=e[Bd];null!==o&&t!==o&&function tre(n,e){const t=n[el];e[cr]!==e[ur][ur][cr]&&(n[Ze]|=zd.HasTransplantedViews),null===t?n[el]=[e]:t.push(e)}(o,e);const a=e[wo];null!==a&&a.insertView(n),N_(e),e[Ze]|=128}(i,e,n,t),r){const o=Ex(t,n),a=e[ut],l=cw(a,n[Ys]);null!==l&&function Xne(n,e,t,r,i,s){r[zn]=i,r[Pi]=e,hw(n,r,t,1,i,s)}(i,n[Pi],a,e,l,o)}const s=e[xs];null!==s&&null!==s.firstChild&&(s.firstChild=null)}function Nx(n,e){const t=ey(n,e);return void 0!==t&&uw(t[Ae],t),t}function oy(n,e,t,r,i=!1){for(;null!==t;){const s=e[t.index];null!==s&&r.push(wn(s)),oi(s)&&nB(s,r);const o=t.type;if(8&o)oy(n,e,t.child,r);else if(32&o){const a=px(t,e);let l;for(;l=a();)r.push(l)}else if(16&o){const a=OU(e,t);if(Array.isArray(a))r.push(...a);else{const l=ql(e[cr]);oy(l[Ae],l,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function nB(n,e){for(let t=Sr;t<n.length;t++){const r=n[t],i=r[Ae].firstChild;null!==i&&oy(r[Ae],r,i,e)}n[Ys]!==n[zn]&&e.push(n[Ys])}let rB=[];const Bre={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{},consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Gd(n.lView)},consumerOnSignalRead(){this.lView[Za]=this}},iB=100;function mw(n,e=!0,t=0){const r=n[Io],i=r.rendererFactory;i.begin?.();try{!function $re(n,e){kx(n,e);let t=0;for(;Xu(n);){if(t===iB)throw new ce(103,!1);t++,kx(n,1)}}(n,t)}catch(o){throw e&&gw(n,o),o}finally{i.end?.(),r.inlineEffectRunner?.flush()}}function Hre(n,e,t,r){const i=e[Ze];if(!(256&~i))return;e[Io].inlineEffectRunner?.flush(),g(e);let o=null,a=null;(function zre(n){return 2!==n.type})(n)&&(a=function Lre(n){return n[Za]??function Vre(n){const e=rB.pop()??Object.create(Bre);return e.lView=n,e}(n)}(e),o=function It(n){return n&&(n.nextProducerIndex=0),Ke(n)}(a));try{MI(e),function F_(n){return ct.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&zU(n,e,t,2,r);const l=!(3&~i);if(l){const d=n.preOrderCheckHooks;null!==d&&rc(e,d,null)}else{const d=n.preOrderHooks;null!==d&&Yd(e,d,0,null),B_(e,0)}if(function Wre(n){for(let e=U2(n);null!==e;e=B2(e)){if(!(e[Ze]&zd.HasTransplantedViews))continue;const t=e[el];for(let r=0;r<t.length;r++){NI(t[r])}}}(e),sB(e,0),null!==n.contentQueries&&JU(n,e),l){const d=n.contentCheckHooks;null!==d&&rc(e,d)}else{const d=n.contentHooks;null!==d&&Yd(e,d,1),B_(e,1)}!function cre(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const i=t[r];if(i<0)He(~i);else{const s=i,o=t[++r],a=t[++r];RD(o,s),a(2,e[s])}}}finally{He(-1)}}(n,e);const u=n.components;null!==u&&aB(e,u,0);const c=n.viewQuery;if(null!==c&&Rx(2,c,r),l){const d=n.viewCheckHooks;null!==d&&rc(e,d)}else{const d=n.viewHooks;null!==d&&Yd(e,d,2),B_(e,2)}if(!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[$f]){for(const d of e[$f])d();e[$f]=null}e[Ze]&=-73}catch(l){throw Gd(e),l}finally{null!==a&&(function kr(n,e){if(Ke(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(rn(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)di(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}(a,o),function Ure(n){n.lView[Za]!==n&&(n.lView=null,rB.push(n))}(a)),re()}}function sB(n,e){for(let t=U2(n);null!==t;t=B2(t))for(let r=Sr;r<t.length;r++)oB(t[r],e)}function Gre(n,e,t){oB(Ms(e,n),t)}function oB(n,e){P_(n)&&kx(n,e)}function kx(n,e){const r=n[Ae],i=n[Ze],s=n[Za];let o=!!(0===e&&16&i);if(o||=!!(64&i&&0===e),o||=!!(1024&i),o||=!(!s?.dirty||!ar(s)),s&&(s.dirty=!1),n[Ze]&=-9217,o)Hre(r,n,r.template,n[Dn]);else if(8192&i){sB(n,1);const a=r.components;null!==a&&aB(n,a,1)}}function aB(n,e,t){for(let r=0;r<e.length;r++)Gre(n,e[r],t)}function ay(n){for(n[Io].changeDetectionScheduler?.notify();n;){n[Ze]|=64;const e=ql(n);if(T_(n)&&!e)return n;n=e}return null}class ly{get rootNodes(){const e=this._lView,t=e[Ae];return oy(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Dn]}set context(e){this._lView[Dn]=e}get destroyed(){return!(256&~this._lView[Ze])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[ur];if(oi(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(ey(e,r),$u(t,r))}this._attachedToViewContainer=!1}uw(this._lView[Ae],this._lView)}onDestroy(e){Jf(this._lView,e)}markForCheck(){ay(this._cdRefInjectingView||this._lView)}detach(){this._lView[Ze]&=-129}reattach(){N_(this._lView),this._lView[Ze]|=128}detectChanges(){this._lView[Ze]|=1024,mw(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ce(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,AU(this._lView[Ae],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ce(902,!1);this._appRef=e,N_(this._lView)}}let Yl=(()=>{class n{static{this.__NG_ELEMENT_ID__=Kre}}return n})();const qre=Yl,jre=class extends qre{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){const i=iy(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new ly(i)}};function Kre(){return _w(_n(),de())}function _w(n,e){return 4&n.type?new jre(e,n,cp(n,e)):null}let fB=()=>null;function vp(n,e){return fB(n,e)}class Bx{}class yie{}class pB{}class Eie{resolveComponentFactory(e){throw function vie(n){const e=Error(`No component factory found for ${nt(n)}.`);return e.ngComponent=n,e}(e)}}let Iw=(()=>{class n{static{this.NULL=new Eie}}return n})();class mB{}let Ql=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>function Cie(){const n=de(),t=Ms(_n().index,n);return(Mi(t)?t:n)[ut]}()}}return n})(),Iie=(()=>{class n{static{this.\u0275prov=Ve({token:n,providedIn:"root",factory:()=>null})}}return n})();const $x={},_B=new Set;function ol(n){_B.has(n)||(_B.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function yB(...n){}class Yt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new xn(!1),this.onMicrotaskEmpty=new xn(!1),this.onStable=new xn(!1),this.onError=new xn(!1),typeof Zone>"u")throw new ce(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function wie(){const n="function"==typeof Me.requestAnimationFrame;let e=Me[n?"requestAnimationFrame":"setTimeout"],t=Me[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function Aie(n){const e=()=>{!function bie(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Me,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,zx(n),n.isCheckStableRunning=!0,Hx(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),zx(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,o,a)=>{if(function Sie(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return t.invokeTask(i,s,o,a);try{return vB(n),t.invokeTask(i,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),EB(n)}},onInvoke:(t,r,i,s,o,a,l)=>{try{return vB(n),t.invoke(i,s,o,a,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),EB(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,zx(n),Hx(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Yt.isInAngularZone())throw new ce(909,!1)}static assertNotInAngularZone(){if(Yt.isInAngularZone())throw new ce(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,Tie,yB,yB);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const Tie={};function Hx(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function zx(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function vB(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function EB(n){n._nesting--,Hx(n)}var Xd=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Xd||{});const IB={destroy(){}};function Gx(n,e){!e&&function Lf(n){if(!qu())throw new ce(-203,!1)}();const t=e?.injector??Ie(mi);if(!function Ca(n){return"browser"===(n??Ie(mi)).get(Ao)}(t))return IB;ol("NgAfterNextRender");const r=t.get(fy),i=r.handler??=new TB,s=e?.phase??Xd.MixedReadWrite,o=()=>{i.unregister(l),a()},a=t.get(up).onDestroy(o),l=_a(t,()=>new wB(s,()=>{o(),n()}));return i.register(l),{destroy:o}}class wB{constructor(e,t){this.phase=e,this.callbackFn=t,this.zone=Ie(Yt),this.errorHandler=Ie(il,{optional:!0}),Ie(Bx,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}}class TB{constructor(){this.executingCallbacks=!1,this.buckets={[Xd.EarlyRead]:new Set,[Xd.Write]:new Set,[Xd.MixedReadWrite]:new Set,[Xd.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(const e of Object.values(this.buckets))for(const t of e)t.invoke();this.executingCallbacks=!1;for(const e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(const e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}}let fy=(()=>{class n{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){const t=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const r of t)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static{this.\u0275prov=Ve({token:n,providedIn:"root",factory:()=>new n})}}return n})();function Tw(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=Go(i,a):2==s&&(r=Go(r,a+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}class SB extends Iw{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Dt(e);return new my(t,this.ngModule)}}function DB(n){const e=[];for(const t in n){if(!n.hasOwnProperty(t))continue;const r=n[t];void 0!==r&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:t})}return e}class bw{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Bl(r);const i=this.injector.get(e,$x,r);return i!==$x||t===$x?i:this.parentInjector.get(e,t,r)}}class my extends pB{get inputs(){const e=this.componentDef,t=e.inputTransforms,r=DB(e.inputs);if(null!==t)for(const i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return DB(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function h_(n){return n.map(rD).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){const s=Ke(null);try{let o=(i=i||this.ngModule)instanceof Ri?i:i?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const a=o?new bw(e,o):e,l=a.get(mB,null);if(null===l)throw new ce(407,!1);const u=a.get(Iie,null),f={rendererFactory:l,sanitizer:u,inlineEffectRunner:null,afterRenderEventManager:a.get(fy,null),changeDetectionScheduler:a.get(Bx,null)},y=l.createRenderer(null,this.componentDef),E=this.componentDef.selectors[0][0]||"div",I=r?function hre(n,e,t,r){const s=r.get(nU,!1)||t===Ss.ShadowDom,o=n.selectRootElement(e,s);return function fre(n){GU(n)}(o),o}(y,r,this.componentDef.encapsulation,a):lw(y,E,function Mie(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(E));let T=512;this.componentDef.signals?T|=4096:this.componentDef.onPush||(T|=16);let P=null;null!==I&&(P=ex(I,a,!0));const x=Ax(0,null,null,1,0,null,null,null,null,null,null),V=fw(null,x,null,T,null,null,f,y,a,null,P);let W,K;g(V);try{const Y=this.componentDef;let U,N=null;Y.findHostDirectiveDefs?(U=[],N=new Map,Y.findHostDirectiveDefs(Y,U,N),U.push(Y)):U=[Y];const F=function kie(n,e){const t=n[Ae],r=mt;return n[r]=e,_p(t,r,2,"#host",null)}(V,I),B=function Oie(n,e,t,r,i,s,o){const a=i[Ae];!function Fie(n,e,t,r){for(const i of n)e.mergedAttrs=zl(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(Tw(e,e.mergedAttrs,!0),null!==t&&UU(r,t,e))}(r,n,e,o);let l=null;null!==e&&(l=ex(e,i[Vr]));const u=s.rendererFactory.createRenderer(e,t);let c=16;t.signals?c=4096:t.onPush&&(c=64);const d=fw(i,WU(t),null,c,i[n.index],n,s,u,null,null,l);return a.firstCreatePass&&Dx(a,n,r.length-1),pw(i,d),i[n.index]=d}(F,I,Y,U,V,f,y);K=Ju(x,mt),I&&function Vie(n,e,t,r){if(r)s_(n,t,["ng-version","17.3.12"]);else{const{attrs:i,classes:s}=function iD(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!Eo(i))break;i=s}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&s_(n,t,i),s&&s.length>0&&VU(n,t,s.join(" "))}}(y,Y,I,r),void 0!==t&&function Uie(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const s=t[i];r.push(null!=s?Array.from(s):null)}}(K,this.ngContentSelectors,t),W=function Lie(n,e,t,r,i,s){const o=_n(),a=i[Ae],l=Ni(o,i);KU(a,i,o,t,null,r);for(let c=0;c<t.length;c++)ss(Qd(i,a,o.directiveStart+c,o),i);YU(a,i,o),l&&ss(l,i);const u=Qd(i,a,o.directiveStart+o.componentOffset,o);if(n[Dn]=i[Dn]=u,null!==s)for(const c of s)c(u,e);return wx(a,o,i),u}(B,Y,U,N,V,[Bie]),Mx(x,V,null)}finally{re()}return new Nie(this.componentType,W,cp(K,V),V,K)}finally{Ke(s)}}}class Nie extends yie{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new ly(i,void 0,!1),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const s=this._rootLView;Px(s[Ae],s,i,e,t),this.previousInputValues.set(e,t),ay(Ms(this._tNode.index,s))}}get injector(){return new gi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function Bie(){const n=_n();Kd(de()[Ae],n)}let Ia=(()=>{class n{static{this.__NG_ELEMENT_ID__=$ie}}return n})();function $ie(){return PB(_n(),de())}const Hie=Ia,xB=class extends Hie{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return cp(this._hostTNode,this._hostLView)}get injector(){return new gi(this._hostTNode,this._hostLView)}get parentInjector(){const e=WI(this._hostTNode,this._hostLView);if(ND(e)){const t=z_(e,this._hostLView),r=H_(e);return new gi(t[Ae].data[r+8],t)}return new gi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=RB(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-Sr}createEmbeddedView(e,t,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const o=vp(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,yp(this._hostTNode,o)),a}createComponent(e,t,r,i,s){const o=e&&!function Fd(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const E=t||{};a=E.index,r=E.injector,i=E.projectableNodes,s=E.environmentInjector||E.ngModuleRef}const l=o?e:new my(Dt(e)),u=r||this.parentInjector;if(!s&&null==l.ngModule){const I=(o?u:this.parentInjector).get(Ri,null);I&&(s=I)}const c=Dt(l.componentType??{}),d=vp(this._lContainer,c?.id??null),y=l.create(u,i,d?.firstChild??null,s);return this.insertImpl(y.hostView,a,yp(this._hostTNode,d)),y}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){const i=e._lView;if(function M_(n){return oi(n[ur])}(i)){const a=this.indexOf(e);if(-1!==a)this.detach(a);else{const l=i[ur],u=new xB(l,l[Pi],l[ur]);u.detach(u.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;return sy(o,i,s,r),e.attachToViewContainerRef(),n_(Kx(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=RB(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=ey(this._lContainer,t);r&&($u(Kx(this._lContainer),t),uw(r[Ae],r))}detach(e){const t=this._adjustIndex(e,-1),r=ey(this._lContainer,t);return r&&null!=$u(Kx(this._lContainer),t)?new ly(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function RB(n){return n[8]}function Kx(n){return n[8]||(n[8]=[])}function PB(n,e){let t;const r=e[n.index];return oi(r)?t=r:(t=QU(r,e,null,n),e[n.index]=t,pw(e,t)),MB(t,e,n,r),new xB(t,n,e)}let MB=function kB(n,e,t,r){if(n[Ys])return;let i;i=8&t.type?wn(r):function zie(n,e){const t=n[ut],r=t.createComment(""),i=Ni(e,n);return Jd(t,cw(t,i),r,function sre(n,e){return n.nextSibling(e)}(t,i),!1),r}(e,t),n[Ys]=i},Yx=()=>!1;class Qx{constructor(e){this.queryList=e,this.matches=null}clone(){return new Qx(this.queryList)}setDirty(){this.queryList.setDirty()}}class Jx{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const r=null!==e.contentQueries?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){const o=t.getByIndex(s);i.push(this.queries[o.indexInDeclarationView].clone())}return new Jx(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==nR(e,t).matches&&this.queries[t].setDirty()}}class OB{constructor(e,t,r=null){this.flags=t,this.read=r,this.predicate="string"==typeof e?function Jie(n){return n.split(",").map(e=>e.trim())}(e):e}}class Xx{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){const i=null!==t?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,null!==t?t.push(s):t=[s])}return null!==t?new Xx(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class Zx{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new Zx(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1&~this.metadata.flags){const t=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const s=r[i];this.matchTNodeWithReadOption(e,t,jie(t,s)),this.matchTNodeWithReadOption(e,t,GI(t,e,s,!1,!1))}else r===Yl?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,GI(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===bo||i===Ia||i===Yl&&4&t.type)this.addMatch(t.index,-2);else{const s=GI(t,e,i,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function jie(n,e){const t=n.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1];return null}function Yie(n,e,t,r){return-1===t?function Kie(n,e){return 11&n.type?cp(n,e):4&n.type?_w(n,e):null}(e,n):-2===t?function Qie(n,e,t){return t===bo?cp(e,n):t===Yl?_w(e,n):t===Ia?PB(e,n):void 0}(n,e,r):Qd(n,n[Ae],t,e)}function FB(n,e,t,r){const i=e[wo].queries[r];if(null===i.matches){const s=n.data,o=t.matches,a=[];for(let l=0;null!==o&&l<o.length;l+=2){const u=o[l];a.push(u<0?null:Yie(e,s[u],o[l+1],t.metadata.read))}i.matches=a}return i.matches}function eR(n,e,t,r){const i=n.queries.getByIndex(t),s=i.matches;if(null!==s){const o=FB(n,e,i,t);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)r.push(o[a/2]);else{const u=s[a+1],c=e[-l];for(let d=Sr;d<c.length;d++){const f=c[d];f[Bd]===f[ur]&&eR(f[Ae],f,u,r)}if(null!==c[el]){const d=c[el];for(let f=0;f<d.length;f++){const y=d[f];eR(y[Ae],y,u,r)}}}}}return r}function VB(n,e,t){const r=Bt();return r.firstCreatePass&&(function BB(n,e,t){null===n.queries&&(n.queries=new Xx),n.queries.track(new Zx(e,t))}(r,new OB(n,e,t),-1),!(2&~e)&&(r.staticViewQueries=!0)),function LB(n,e,t){const r=new $D(!(4&~t));return function mre(n,e,t,r){const i=XU(e);i.push(t),n.firstCreatePass&&ZU(n).push(r,i.length-1)}(n,e,r,r.destroy),(e[wo]??=new Jx).queries.push(new Qx(r))-1}(r,de(),e)}function nR(n,e){return n.queries.getByIndex(e)}function $B(n,e){const t=n[Ae],r=nR(t,e);return r.crossesNgTemplate?eR(t,n,e,[]):FB(t,n,r,e)}function WB(n){return function HB(n){return"function"==typeof n&&void 0!==n[gn]}(n)&&"function"==typeof n.set}function Rn(n){let e=function t$(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(Rs(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ce(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const o=n;o.inputs=Sw(n.inputs),o.inputTransforms=Sw(n.inputTransforms),o.declaredInputs=Sw(n.declaredInputs),o.outputs=Sw(n.outputs);const a=i.hostBindings;a&&fse(n,a);const l=i.viewQuery,u=i.contentQueries;if(l&&dse(n,l),u&&hse(n,u),use(n,i),Xn(n.outputs,i.outputs),Rs(i)&&i.data.animation){const c=n.data;c.animation=(c.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===Rn&&(t=!1)}}e=Object.getPrototypeOf(e)}!function cse(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=zl(i.hostAttrs,t=zl(t,i.hostAttrs))}}(r)}function use(n,e){for(const t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;const r=e.inputs[t];if(void 0!==r&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],null!==e.inputTransforms)){const i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function Sw(n){return n===js?{}:n===jt?[]:n}function dse(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function hse(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,s)=>{e(r,i,s),t(r,i,s)}:e}function fse(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}function s$(n){const e=n.inputConfig,t={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[3]&&(t[r]=i[3])}n.inputTransforms=t}class Zd{}class o${}class iR extends Zd{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new SB(this);const i=xi(e);this._bootstrapComponents=So(i.bootstrap),this._r3Injector=b2(e,t,[{provide:Zd,useValue:this},{provide:Iw,useValue:this.componentFactoryResolver},...r],nt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class sR extends o${constructor(e){super(),this.moduleType=e}create(e){return new iR(this.moduleType,e,[])}}class a$ extends Zd{constructor(e){super(),this.componentFactoryResolver=new SB(this),this.instance=null;const t=new Wu([...e.providers,{provide:Zd,useValue:this},{provide:Iw,useValue:this.componentFactoryResolver}],e.parent||zu(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function Dw(n,e,t=null){return new a$({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let Cp=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new R(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Rw(n){return!!oR(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function oR(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function al(n,e,t){return n[e]=t}function Yr(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function wa(n,e,t,r,i,s,o,a){const l=de(),u=Bt(),c=n+mt,d=u.firstCreatePass?function Ase(n,e,t,r,i,s,o,a,l){const u=e.consts,c=_p(e,n,4,o||null,Yo(u,a));Sx(e,t,c,Yo(u,l)),Kd(e,c);const d=c.tView=Ax(2,c,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return null!==e.queries&&(e.queries.template(e,c),d.queries=e.queries.embeddedTView(c)),c}(c,u,l,e,t,r,i,s,o):u.data[c];To(d,!1);const f=l$(u,l,d,n);nc()&&dw(u,l,f,d),ss(f,l);const y=QU(f,l,f,d);return l[c]=y,pw(l,y),function NB(n,e,t){return Yx(n,e,t)}(y,d,l),zf(d)&&Tx(u,l,d),null!=o&&bx(l,d,a),wa}let l$=function u$(n,e,t,r){return Xs(!0),e[ut].createComment("")};function ll(n,e,t,r){const i=de();return Yr(i,Js(),e)&&(Bt(),sl(ze(),i,n,e,t,r)),ll}function xp(n,e,t,r){return Yr(n,Js(),t)?e+dt(t)+r:At}function Lw(n,e){return n<<17|e<<2}function cc(n){return n>>17&32767}function mR(n){return 2|n}function nh(n){return(131068&n)>>2}function _R(n,e){return-131069&n|e<<2}function yR(n){return 1|n}function B$(n,e,t,r){const i=n[t+1],s=null===e;let o=r?cc(i):nh(i),a=!1;for(;0!==o&&(!1===a||s);){const u=n[o+1];hoe(n[o],e)&&(a=!0,n[o+1]=r?yR(u):mR(u)),o=r?cc(u):nh(u)}a&&(n[t+1]=r?mR(i):yR(i))}function hoe(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Ya(n,e)>=0}const _i={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function $$(n){return n.substring(_i.key,_i.keyEnd)}function H$(n,e){const t=_i.textEnd;return t===e?-1:(e=_i.keyEnd=function moe(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}(n,_i.key=e,t),Lp(n,e,t))}function Lp(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function Dr(n,e,t){const r=de();return Yr(r,Js(),e)&&eo(Bt(),ze(),r,n,e,r[ut],t,!1),Dr}function vR(n,e,t,r,i){const o=i?"class":"style";Px(n,t,e.inputs[o],o,r)}function Vw(n,e){return function Ta(n,e,t,r){const i=de(),s=Bt(),o=Ea(2);s.firstUpdatePass&&Y$(s,n,o,r),e!==At&&Yr(i,o,e)&&J$(s,s.data[Se()],i,i[ut],n,i[o+1]=function Doe(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=nt(sc(n)))),n}(e,t),r,o)}(n,e,null,!0),Vw}function cl(n,e){for(let t=function poe(n){return function W$(n){_i.key=0,_i.keyEnd=0,_i.value=0,_i.valueEnd=0,_i.textEnd=n.length}(n),H$(n,Lp(n,0,_i.textEnd))}(e);t>=0;t=H$(e,t))Wi(n,$$(e),!0)}function K$(n,e){return e>=n.expandoStartIndex}function Y$(n,e,t,r){const i=n.data;if(null===i[t+1]){const s=i[Se()],o=K$(n,t);Z$(s,r)&&null===e&&!o&&(e=!1),e=function Coe(n,e,t,r){const i=function L_(n){const e=ct.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=wy(t=ER(null,n,e,t,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==i)if(t=ER(i,n,e,t,r),null===s){let l=function Ioe(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==nh(r))return n[cc(r)]}(n,e,r);void 0!==l&&Array.isArray(l)&&(l=ER(null,n,e,l[1],r),l=wy(l,e.attrs,r),function woe(n,e,t,r){n[cc(t?e.classBindings:e.styleBindings)]=r}(n,e,r,l))}else s=function Toe(n,e,t){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=wy(r,n[s].hostAttrs,t);return wy(r,e.attrs,t)}(n,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),t}(i,s,e,r),function coe(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=cc(o),l=nh(o);n[r]=t;let c,u=!1;if(Array.isArray(t)?(c=t[1],(null===c||Ya(t,c)>0)&&(u=!0)):c=t,i)if(0!==l){const f=cc(n[a+1]);n[r+1]=Lw(f,a),0!==f&&(n[f+1]=_R(n[f+1],r)),n[a+1]=function loe(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=Lw(a,0),0!==a&&(n[a+1]=_R(n[a+1],r)),a=r;else n[r+1]=Lw(l,0),0===a?a=r:n[l+1]=_R(n[l+1],r),l=r;u&&(n[r+1]=mR(n[r+1])),B$(n,c,r,!0),B$(n,c,r,!1),function doe(n,e,t,r,i){const s=i?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&Ya(s,e)>=0&&(t[r+1]=yR(t[r+1]))}(e,c,n,r,s),o=Lw(a,l),s?e.classBindings=o:e.styleBindings=o}(i,s,e,t,o,r)}}function ER(n,e,t,r,i){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],r=wy(r,s.hostAttrs,i),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function wy(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Wi(n,o,!!t||e[++s]))}return void 0===n?null:n}function J$(n,e,t,r,i,s,o,a){if(!(3&e.type))return;const l=n.data,u=l[a+1],c=function uoe(n){return!(1&~n)}(u)?X$(l,e,t,i,nh(u),o):void 0;Uw(c)||(Uw(s)||function aoe(n){return!(2&~n)}(u)&&(s=X$(l,null,t,i,a,o)),function lre(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=-1===r.indexOf("-")?void 0:oc.DashCase;null==i?n.removeStyle(t,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=oc.Important),n.setStyle(t,r,i,s))}}(r,o,Qu(Se(),t),i,s))}function X$(n,e,t,r,i,s){const o=null===e;let a;for(;i>0;){const l=n[i],u=Array.isArray(l),c=u?l[1]:l,d=null===c;let f=t[i+1];f===At&&(f=d?jt:void 0);let y=d?$l(f,r):c===r?f:void 0;if(u&&!Uw(y)&&(y=$l(l,r)),Uw(y)&&(a=y,o))return a;const E=n[i+1];i=o?cc(E):nh(E)}if(null!==e){let l=s?e.residualClasses:e.residualStyles;null!=l&&(a=$l(l,r))}return a}function Uw(n){return void 0!==n}function Z$(n,e){return!!(n.flags&(e?8:16))}function CR(n,e,t){!function ba(n,e,t,r){const i=Bt(),s=Ea(2);i.firstUpdatePass&&Y$(i,null,s,r);const o=de();if(t!==At&&Yr(o,s,t)){const a=i.data[Se()];if(Z$(a,r)&&!K$(i,s)){let l=r?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(t=Go(l,t||"")),vR(i,a,o,t,r)}else!function Soe(n,e,t,r,i,s,o,a){i===At&&(i=jt);let l=0,u=0,c=0<i.length?i[0]:null,d=0<s.length?s[0]:null;for(;null!==c||null!==d;){const f=l<i.length?i[l+1]:void 0,y=u<s.length?s[u+1]:void 0;let I,E=null;c===d?(l+=2,u+=2,f!==y&&(E=d,I=y)):null===d||null!==c&&c<d?(l+=2,E=c):(u+=2,E=d,I=y),null!==E&&J$(n,e,t,r,E,I,o,a),c=l<i.length?i[l]:null,d=u<s.length?s[u]:null}}(i,a,o,o[ut],o[s+1],o[s+1]=function boe(n,e,t){if(null==t||""===t)return jt;const r=[],i=sc(t);if(Array.isArray(i))for(let s=0;s<i.length;s++)n(r,i[s],!0);else if("object"==typeof i)for(const s in i)i.hasOwnProperty(s)&&n(r,s,i[s]);else"string"==typeof i&&e(r,i);return r}(n,e,t),r,s)}}(Wi,cl,xp(de(),n,e,t),!0)}class Voe{destroy(e){}updateValue(e,t){}swap(e,t){const r=Math.min(e,t),i=Math.max(e,t),s=this.detach(i);if(i-r>1){const o=this.detach(r);this.attach(r,s),this.attach(i,o)}else this.attach(r,s)}move(e,t){this.attach(t,this.detach(e))}}function IR(n,e,t,r,i){return n===t&&Object.is(e,r)?1:Object.is(i(n,e),i(t,r))?-1:0}function wR(n,e,t,r){return!(void 0===e||!e.has(r)||(n.attach(t,e.get(r)),e.delete(r),0))}function eH(n,e,t,r,i){if(wR(n,e,r,t(r,i)))n.updateValue(r,i);else{const s=n.create(r,i);n.attach(r,s)}}function tH(n,e,t,r){const i=new Set;for(let s=e;s<=t;s++)i.add(r(s,n.at(s)));return i}class nH{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;const t=this.kvMap.get(e);return void 0!==this._vMap&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);void 0===this._vMap&&(this._vMap=new Map);const i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),void 0!==this._vMap){const i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,t)}}}class Boe{constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-Sr}}function iH(n,e){return e}class Hoe{constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}}class zoe extends Voe{constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-Sr}at(e){return this.getLView(e)[Dn].$implicit}attach(e,t){const r=t[xs];this.needsIndexUpdate||=e!==this.length,sy(this.lContainer,t,e,yp(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,function Woe(n,e){return ey(n,e)}(this.lContainer,e)}create(e,t){const r=vp(this.lContainer,this.templateTNode.tView.ssrId);return iy(this.hostLView,this.templateTNode,new Boe(this.lContainer,t,e),{dehydratedView:r})}destroy(e){uw(e[Ae],e)}updateValue(e,t){this.getLView(e)[Dn].$implicit=t}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Dn].$index=e}getLView(e){return function Goe(n,e){return tB(n,e)}(this.lContainer,e)}}function TR(n,e){return n[e]}function bR(n,e){return Ju(n,e)}function Ye(n,e,t,r){const i=de(),s=Bt(),o=mt+n,a=i[ut],l=s.firstCreatePass?function qoe(n,e,t,r,i,s){const o=e.consts,l=_p(e,n,2,r,Yo(o,i));return Sx(e,t,l,Yo(o,s)),null!==l.attrs&&Tw(l,l.attrs,!1),null!==l.mergedAttrs&&Tw(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(o,s,i,e,t,r):s.data[o],u=aH(s,i,l,a,e,n);i[o]=u;const c=zf(l);return To(l,!0),UU(a,u,l),!function vy(n){return!(32&~n.flags)}(l)&&nc()&&dw(s,i,u,l),0===function O_(){return ct.lFrame.elementDepthCount}()&&ss(u,i),function ID(){ct.lFrame.elementDepthCount++}(),c&&(Tx(s,i,l),wx(s,l,i)),null!==r&&bx(i,l),Ye}function je(){let n=_n();Zf()?jd():(n=n.parent,To(n,!1));const e=n;(function TD(n){return ct.skipHydrationRootTNode===n})(e)&&function SD(){ct.skipHydrationRootTNode=null}(),function wD(){ct.lFrame.elementDepthCount--}();const t=Bt();return t.firstCreatePass&&(Kd(t,n),Yu(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function ute(n){return!!(8&n.flags)}(e)&&vR(t,e,de(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function cte(n){return!!(16&n.flags)}(e)&&vR(t,e,de(),e.stylesWithoutHost,!1),je}function yi(n,e,t,r){return Ye(n,e,t,r),je(),yi}let aH=(n,e,t,r,i,s)=>(Xs(!0),lw(r,i,function ip(){return ct.lFrame.currentNamespace}()));function DR(){return de()}const rh=void 0;var Zoe=["en",[["a","p"],["AM","PM"],rh],[["AM","PM"],rh,rh],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],rh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],rh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",rh,"{1} 'at' {0}",rh],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Xoe(n){const t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===r?1:5}];let Vp={};function Ns(n){const e=function eae(n){return n.toLowerCase().replace(/_/g,"-")}(n);let t=fH(e);if(t)return t;const r=e.split("-")[0];if(t=fH(r),t)return t;if("en"===r)return Zoe;throw new ce(701,!1)}function fH(n){return n in Vp||(Vp[n]=Me.ng&&Me.ng.common&&Me.ng.common.locales&&Me.ng.common.locales[n]),Vp[n]}var Zn=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Zn||{});const Up="en-US";let pH=Up;function yn(n,e,t,r){const i=de(),s=Bt(),o=_n();return PR(s,i,i[ut],o,n,e,r),yn}function PR(n,e,t,r,i,s,o){const a=zf(r),u=n.firstCreatePass&&ZU(n),c=e[Dn],d=XU(e);let f=!0;if(3&r.type||o){const I=Ni(r,e),T=o?o(I):I,P=d.length,x=o?W=>o(wn(W[r.index])):r.index;let V=null;if(!o&&a&&(V=function Qae(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===t&&i[s+1]===r){const a=e[Vd],l=i[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(n,e,i,r.index)),null!==V)(V.__ngLastListenerFn__||V).__ngNextListenerFn__=s,V.__ngLastListenerFn__=s,f=!1;else{s=HH(r,e,c,s,!1);const W=t.listen(T,i,s);d.push(s,W),u&&u.push(i,x,P,P+1)}}else s=HH(r,e,c,s,!1);const y=r.outputs;let E;if(f&&null!==y&&(E=y[i])){const I=E.length;if(I)for(let T=0;T<I;T+=2){const K=e[E[T]][E[T+1]].subscribe(s),Y=d.length;d.push(s,K),u&&u.push(i,r.index,Y,-(Y+1))}}}function $H(n,e,t,r){const i=Ke(null);try{return Ko(6,e,t),!1!==t(r)}catch(s){return gw(n,s),!1}finally{Ko(7,e,t),Ke(i)}}function HH(n,e,t,r,i){return function s(o){if(o===Function)return r;ay(n.componentOffset>-1?Ms(n.index,e):e);let l=$H(e,t,r,o),u=s.__ngNextListenerFn__;for(;u;)l=$H(e,t,u,o)&&l,u=u.__ngNextListenerFn__;return i&&!1===l&&o.preventDefault(),l}}function Jl(n=1){return function ge(n){return(ct.lFrame.contextLView=function kI(n,e){for(;n>0;)e=e[ya],n--;return e}(n,ct.lFrame.contextLView))[Dn]}(n)}function Jae(n,e){let t=null;const r=function c_(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(!(1&t))return e[t+1]}return null}(n);for(let i=0;i<e.length;i++){const s=e[i];if("*"!==s){if(null===r?aI(n,s,!0):nD(r,s))return i}else t=i}return t}function Ww(n,e,t){return MR(n,"",e,"",t),Ww}function MR(n,e,t,r,i){const s=de(),o=xp(s,e,t,r);return o!==At&&eo(Bt(),ze(),s,n,o,s[ut],i,!1),MR}function NR(n,e,t){VB(n,e,t)}function Gw(n){const e=de(),t=Bt(),r=V_();np(r+1);const i=nR(t,r);if(n.dirty&&function CD(n){return!(4&~n[Ze])}(e)===!(2&~i.metadata.flags)){if(null===i.matches)n.reset([]);else{const s=$B(e,r);n.reset(s,x2),n.notifyOnChanges()}return!0}return!1}function qw(){return function tR(n,e){return n[wo].queries[e].queryList}(de(),V_())}function hn(n,e=""){const t=de(),r=Bt(),i=n+mt,s=r.firstCreatePass?_p(r,i,1,e,null):r.data[i],o=uz(r,t,s,e,n);t[i]=o,nc()&&dw(r,t,o,s),To(s,!1)}let uz=(n,e,t,r,i)=>(Xs(!0),function gx(n,e){return n.createText(e)}(e[ut],r));function Xl(n){return jw("",n,""),Xl}function jw(n,e,t){const r=de(),i=xp(r,n,e,t);return i!==At&&function Kl(n,e,t){const r=Qu(e,n);!function bU(n,e,t){n.setValue(e,t)}(n[ut],r,t)}(r,Se(),i),jw}function dc(n,e,t){WB(e)&&(e=e());const r=de();return Yr(r,Js(),e)&&eo(Bt(),ze(),r,n,e,r[ut],t,!1),dc}function ih(n,e){const t=WB(n);return t&&n.set(e),t}function hc(n,e){const t=de(),r=Bt(),i=_n();return PR(r,t,t[ut],i,n,e),hc}function kR(n,e,t,r,i){if(n=lt(n),Array.isArray(n))for(let s=0;s<n.length;s++)kR(n[s],e,t,r,i);else{const s=Bt(),o=de(),a=_n();let l=Wl(n)?n:lt(n.provide);const u=fI(n),c=1048575&a.providerIndexes,d=a.directiveStart,f=a.providerIndexes>>20;if(Wl(n)||!n.multi){const y=new $_(u,i,Ce),E=FR(l,e,i?c:c+f,d);-1===E?(FD(zI(a,o),s,l),OR(s,n,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),o.push(y)):(t[E]=y,o[E]=y)}else{const y=FR(l,e,c+f,d),E=FR(l,e,c,c+f),T=E>=0&&t[E];if(i&&!T||!i&&!(y>=0&&t[y])){FD(zI(a,o),s,l);const P=function _le(n,e,t,r,i){const s=new $_(n,t,Ce);return s.multi=[],s.index=e,s.componentProviders=0,yz(s,i,r&&!t),s}(i?mle:gle,t.length,i,r,u);!i&&T&&(t[E].providerFactory=P),OR(s,n,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(P),o.push(P)}else OR(s,n,y>-1?y:E,yz(t[i?E:y],u,!i&&r));!i&&r&&T&&t[E].componentProviders++}}}function OR(n,e,t,r){const i=Wl(e),s=function uD(n){return!!n.useClass}(e);if(i||s){const l=(s?lt(e.useClass):e).prototype.ngOnDestroy;if(l){const u=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const c=u.indexOf(t);-1===c?u.push(t,[r,l]):u[c+1].push(r,l)}else u.push(t,l)}}}function yz(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function FR(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function gle(n,e,t,r){return LR(this.multi,[])}function mle(n,e,t,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Qd(t,t[Ae],this.providerFactory.index,r);s=a.slice(0,o),LR(i,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],LR(i,s);return s}function LR(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function Ln(n,e=[]){return t=>{t.providersResolver=(r,i)=>function ple(n,e,t){const r=Bt();if(r.firstCreatePass){const i=Rs(n);kR(t,r.data,r.blueprint,i,!0),kR(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}let yle=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const r=cI(0,t.type),i=r.length>0?Dw([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=Ve({token:n,providedIn:"environment",factory:()=>new n(xe(Ri))})}}return n})();function Aa(n){ol("NgStandalone"),n.getStandaloneInjector=e=>e.get(yle).getOrCreateStandaloneInjector(n)}function Cz(n,e,t,r,i){return function wz(n,e,t,r,i,s,o){const a=e+t;return function eh(n,e,t,r){const i=Yr(n,e,t);return Yr(n,e+1,r)||i}(n,a,i,s)?al(n,a+2,o?r.call(o,i,s):r(i,s)):function Ry(n,e){const t=n[e];return t===At?void 0:t}(n,a+2)}(de(),ki(),n,e,t,r,i)}class Hp{constructor(e){this.full=e;const t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}}const Hz=new Hp("17.3.12");let zz=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();const Kz=new be("");function ky(n){return!!n&&"function"==typeof n.then}function Yz(n){return!!n&&"function"==typeof n.subscribe}const qR=new be("");let jR=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=Ie(qR,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const i of this.appInits){const s=i();if(ky(s))t.push(s);else if(Yz(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const Xw=new be("");let fc=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Ie(S2),this.afterRenderEffectManager=Ie(fy),this.externalTestViews=new Set,this.beforeRender=new M,this.afterTick=new M,this.componentTypes=[],this.components=[],this.isStable=Ie(Cp).hasPendingTasks.pipe(we(t=>!t)),this._injector=Ie(Ri)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof pB;if(!this._injector.get(jR).done)throw!i&&function Qa(n){const e=Dt(n)||jr(n)||pi(n);return null!==e&&e.standalone}(t),new ce(405,!1);let o;o=i?t:this._injector.get(Iw).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function Rue(n){return n.isBoundToModule}(o)?void 0:this._injector.get(Zd),u=o.create(mi.NULL,[],r||o.selector,a),c=u.location.nativeElement,d=u.injector.get(Kz,null);return d?.registerApplication(c),u.onDestroy(()=>{this.detachView(u.hostView),Zw(this.components,u),d?.unregisterApplication(c)}),this._loadComponent(u),u}tick(){this._tick(!0)}_tick(t){if(this._runningTick)throw new ce(101,!1);const r=Ke(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(t)}catch(i){this.internalErrorHandler(i)}finally{this.afterTick.next(),this._runningTick=!1,Ke(r)}}detectChangesInAttachedViews(t){let r=0;const i=this.afterRenderEffectManager;for(;;){if(r===iB)throw new ce(103,!1);if(t){const s=0===r;this.beforeRender.next(s);for(let{_lView:o,notifyErrorHandler:a}of this._views)Mue(o,s,a)}if(r++,i.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>KR(s))&&(i.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>KR(s))))break}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;Zw(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(Xw,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Zw(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new ce(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Zw(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function Mue(n,e,t){!e&&!KR(n)||function Nue(n,e,t){let r;t?(r=0,n[Ze]|=1024):r=64&n[Ze]?0:1,mw(n,e,r)}(n,t,e)}function KR(n){return Xu(n)}class kue{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let Zz=(()=>{class n{compileModuleSync(t){return new sR(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),s=So(xi(t).declarations).reduce((o,a)=>{const l=Dt(a);return l&&o.push(new my(l)),o},[]);return new kue(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Lue=(()=>{class n{constructor(){this.zone=Ie(Yt),this.applicationRef=Ie(fc)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function tW(n){return[{provide:Yt,useFactory:n},{provide:Hl,multi:!0,useFactory:()=>{const e=Ie(Lue,{optional:!0});return()=>e.initialize()}},{provide:Hl,multi:!0,useFactory:()=>{const e=Ie(Bue);return()=>{e.initialize()}}},{provide:S2,useFactory:Vue}]}function Vue(){const n=Ie(Yt),e=Ie(il);return t=>n.runOutsideAngular(()=>e.handleError(t))}function Uue(n){return ma([[],tW(()=>new Yt(function nW(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}(n)))])}let Bue=(()=>{class n{constructor(){this.subscription=new Lt,this.initialized=!1,this.zone=Ie(Yt),this.pendingTasks=Ie(Cp)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Yt.assertNotInAngularZone(),queueMicrotask(()=>{null!==t&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Yt.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const Zl=new be("",{providedIn:"root",factory:()=>Ie(Zl,Ut.Optional|Ut.SkipSelf)||function $ue(){return typeof $localize<"u"&&$localize.locale||Up}()}),YR=new be("");let pc=null;let Oy=(()=>{class n{static{this.__NG_ELEMENT_ID__=jue}}return n})();function jue(n){return function Kue(n,e,t){if(va(n)&&!t){const r=Ms(n.index,e);return new ly(r,r)}return 47&n.type?new ly(e[cr],e):null}(_n(),de(),!(16&~n))}class dW{constructor(){}supports(e){return Rw(e)}create(e){return new Zue(e)}}const Xue=(n,e)=>e;class Zue{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||Xue}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){const o=!r||t&&t.currentIndex<fW(r,i,s)?t:r,a=fW(o,i,s),l=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,null==o.previousIndex)i++;else{s||(s=[]);const u=a-i,c=l-i;if(u!=c){for(let f=0;f<u;f++){const y=f<s.length?s[f]:s[f]=0,E=y+f;c<=E&&E<u&&(s[f]=y+1)}s[o.previousIndex]=c-u}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Rw(e))throw new ce(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),r=!0),t=t._next}else i=0,function Tse(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new ece(t,r),s,i),e}_verifyReinsertion(e,t,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new hW),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new hW),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class ece{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class tce{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class hW{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new tce,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function fW(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}class pW{constructor(){}supports(e){return e instanceof Map||oR(e)}create(){return new nce}}class nce{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||oR(e)))throw new ce(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,t);const s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}const r=new rce(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}}class rce{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function gW(){return new nP([new dW])}let nP=(()=>{class n{static{this.\u0275prov=Ve({token:n,providedIn:"root",factory:gW})}constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||gW()),deps:[[n,new Rd,new Gr]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new ce(901,!1)}}return n})();function mW(){return new rT([new pW])}let rT=(()=>{class n{static{this.\u0275prov=Ve({token:n,providedIn:"root",factory:mW})}constructor(t){this.factories=t}static create(t,r){if(r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||mW()),deps:[[n,new Rd,new Gr]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(r)return r;throw new ce(901,!1)}}return n})();function Ece(n){try{const{rootComponent:e,appProviders:t,platformProviders:r}=n,i=function que(n=[]){if(pc)return pc;const e=function sW(n=[],e){return mi.create({name:e,providers:[{provide:m_,useValue:"platform"},{provide:YR,useValue:new Set([()=>pc=null])},...n]})}(n);return pc=e,function Qz(){!function zs(n){Or=n}(()=>{throw new ce(600,!1)})}(),function oW(n){n.get(Y2,null)?.forEach(t=>t())}(e),e}(r),s=[Uue(),...t||[]],a=new a$({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,l=a.get(Yt);return l.run(()=>{a.resolveInjectorInitializers();const u=a.get(il,null);let c;l.runOutsideAngular(()=>{c=l.onError.subscribe({next:y=>{u.handleError(y)}})});const d=()=>a.destroy(),f=i.get(YR);return f.add(d),a.onDestroy(()=>{c.unsubscribe(),f.delete(d)}),function Jz(n,e,t){try{const r=t();return ky(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(u,l,()=>{const y=a.get(jR);return y.runInitializers(),y.donePromise.then(()=>{!function gH(n){"string"==typeof n&&(pH=n.toLowerCase().replace(/_/g,"-"))}(a.get(Zl,Up)||Up);const I=a.get(fc);return void 0!==e&&I.bootstrap(e),I})})})}catch(e){return Promise.reject(e)}}function Wp(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let UW=null;function gc(){return UW}class zce{}const Jo=new be("");let sP=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ve({token:n,factory:()=>Ie(Gce),providedIn:"platform"})}}return n})();const Wce=new be("");let Gce=(()=>{class n extends sP{constructor(){super(),this._doc=Ie(Jo),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return gc().getBaseHref(this._doc)}onPopState(t){const r=gc().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=gc().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ve({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function oP(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function BW(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function eu(n){return n&&"?"!==n[0]?"?"+n:n}let oh=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ve({token:n,factory:()=>Ie(HW),providedIn:"root"})}}return n})();const $W=new be("");let HW=(()=>{class n extends oh{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Ie(Jo).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return oP(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+eu(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const o=this.prepareExternalUrl(i+eu(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){const o=this.prepareExternalUrl(i+eu(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(xe(sP),xe($W,8))}}static{this.\u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),qce=(()=>{class n extends oh{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){const r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=oP(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+eu(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+eu(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(xe(sP),xe($W,8))}}static{this.\u0275prov=Ve({token:n,factory:n.\u0275fac})}}return n})(),Vy=(()=>{class n{constructor(t){this._subject=new xn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function Yce(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(BW(zW(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+eu(r))}normalize(t){return n.stripTrailingSlash(function Kce(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,zW(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+eu(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+eu(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=eu}static{this.joinWithSlash=oP}static{this.stripTrailingSlash=BW}static{this.\u0275fac=function(r){return new(r||n)(xe(oh))}}static{this.\u0275prov=Ve({token:n,factory:()=>function jce(){return new Vy(xe(oh))}(),providedIn:"root"})}}return n})();function zW(n){return n.replace(/\/index.html$/,"")}var uT=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(uT||{});const ai={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function Xo(n,e){const t=Ns(n),r=t[Zn.NumberSymbols][e];if(typeof r>"u"){if(e===ai.CurrencyDecimal)return t[Zn.NumberSymbols][ai.Decimal];if(e===ai.CurrencyGroup)return t[Zn.NumberSymbols][ai.Group]}return r}const Ide=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function pP(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}const mP=/\s+/,XW=[];let ZW=(()=>{class n{constructor(t,r){this._ngEl=t,this._renderer=r,this.initialClasses=XW,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(mP):XW}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(mP):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){const i=this.stateMap.get(t);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(mP).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static{this.\u0275fac=function(r){return new(r||n)(Ce(bo),Ce(Ql))}}static{this.\u0275dir=ht({type:n,selectors:[["","ngClass",""]],inputs:{klass:[Fn.None,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return n})();class Ode{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let _P=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Ode(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),tG(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{tG(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(Ce(Ia),Ce(Yl),Ce(nP))}}static{this.\u0275dir=ht({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function tG(n,e){n.context.$implicit=e.item}let yP=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Fde,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){nG("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){nG("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(Ce(Ia),Ce(Yl))}}static{this.\u0275dir=ht({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})();class Fde{constructor(){this.$implicit=null,this.ngIf=null}}function nG(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${nt(e)}'.`)}let iG=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,s]=t.split("."),o=-1===i.indexOf("-")?void 0:oc.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,i,s?`${r}${s}`:r,o):this._renderer.removeStyle(this._ngEl.nativeElement,i,o)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static{this.\u0275fac=function(r){return new(r||n)(Ce(bo),Ce(rT),Ce(Ql))}}static{this.\u0275dir=ht({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}}return n})();let oG=(()=>{class n{constructor(t){this._locale=t}transform(t,r,i){if(!function CP(n){return!(null==n||""===n||n!=n)}(t))return null;i||=this._locale;try{return function Dde(n,e,t){return function hP(n,e,t,r,i,s,o=!1){let a="",l=!1;if(isFinite(n)){let u=function Rde(n){let r,i,s,o,a,e=Math.abs(n)+"",t=0;for((i=e.indexOf("."))>-1&&(e=e.replace(".","")),(s=e.search(/e/i))>0?(i<0&&(i=s),i+=+e.slice(s+1),e=e.substring(0,s)):i<0&&(i=e.length),s=0;"0"===e.charAt(s);s++);if(s===(a=e.length))r=[0],i=1;else{for(a--;"0"===e.charAt(a);)a--;for(i-=s,r=[],o=0;s<=a;s++,o++)r[o]=Number(e.charAt(s))}return i>22&&(r=r.splice(0,21),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}(n);o&&(u=function xde(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(u));let c=e.minInt,d=e.minFrac,f=e.maxFrac;if(s){const x=s.match(Ide);if(null===x)throw new Error(`${s} is not a valid digit info`);const V=x[1],W=x[3],K=x[5];null!=V&&(c=pP(V)),null!=W&&(d=pP(W)),null!=K?f=pP(K):null!=W&&d>f&&(f=d)}!function Pde(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen;const s=Math.min(Math.max(e,i),t);let o=s+n.integerLen,a=r[o];if(o>0){r.splice(Math.max(n.integerLen,o));for(let d=o;d<r.length;d++)r[d]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,o=s+1),r[0]=0;for(let d=1;d<o;d++)r[d]=0}if(a>=5)if(o-1<0){for(let d=0;d>o;d--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[o-1]++;for(;i<Math.max(0,s);i++)r.push(0);let l=0!==s;const u=e+n.integerLen,c=r.reduceRight(function(d,f,y,E){return E[y]=(f+=d)<10?f:f-10,l&&(0===E[y]&&y>=u?E.pop():l=!1),f>=10?1:0},0);c&&(r.unshift(c),n.integerLen++)}(u,d,f);let y=u.digits,E=u.integerLen;const I=u.exponent;let T=[];for(l=y.every(x=>!x);E<c;E++)y.unshift(0);for(;E<0;E++)y.unshift(0);E>0?T=y.splice(E,y.length):(T=y,y=[0]);const P=[];for(y.length>=e.lgSize&&P.unshift(y.splice(-e.lgSize,y.length).join(""));y.length>e.gSize;)P.unshift(y.splice(-e.gSize,y.length).join(""));y.length&&P.unshift(y.join("")),a=P.join(Xo(t,r)),T.length&&(a+=Xo(t,i)+T.join("")),I&&(a+=Xo(t,ai.Exponential)+"+"+I)}else a=Xo(t,ai.Infinity);return a=n<0&&!l?e.negPre+a+e.negSuf:e.posPre+a+e.posSuf,a}(n,function fP(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(";"),i=r[0],s=r[1],o=-1!==i.indexOf(".")?i.split("."):[i.substring(0,i.lastIndexOf("0")+1),i.substring(i.lastIndexOf("0")+1)],a=o[0],l=o[1]||"";t.posPre=a.substring(0,a.indexOf("#"));for(let c=0;c<l.length;c++){const d=l.charAt(c);"0"===d?t.minFrac=t.maxFrac=c+1:"#"===d?t.maxFrac=c+1:t.posSuf+=d}const u=a.split(",");if(t.gSize=u[1]?u[1].length:0,t.lgSize=u[2]||u[1]?(u[2]||u[1]).length:0,s){const c=i.length-t.posPre.length-t.posSuf.length,d=s.indexOf("#");t.negPre=s.substring(0,d).replace(/'/g,""),t.negSuf=s.slice(d+c).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function aP(n,e){return Ns(n)[Zn.NumberFormats][e]}(e,uT.Decimal),Xo(e,ai.MinusSign)),e,ai.Group,ai.Decimal,t)}(function IP(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),i,r)}catch(s){throw function Da(n,e){return new ce(2100,!1)}()}}static{this.\u0275fac=function(r){return new(r||n)(Ce(Zl,16))}}static{this.\u0275pipe=qr({name:"number",type:n,pure:!0,standalone:!0})}}return n})();let ah=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Co({type:n})}static{this.\u0275inj=bs({})}}return n})();const aG="browser",lhe="server";function ET(n){return n===lhe}let hhe=(()=>{class n{static{this.\u0275prov=Ve({token:n,providedIn:"root",factory:()=>function dhe(n){return n===aG}(Ie(Ao))?new fhe(Ie(Jo),window):new ghe})}}return n})();class fhe{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){const t=function phe(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}}class ghe{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}}class Whe extends zce{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class TP extends Whe{static makeCurrent(){!function Hce(n){UW??=n}(new TP)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Ghe(){return Hy=Hy||document.querySelector("base"),Hy?Hy.getAttribute("href"):null}();return null==t?null:function qhe(n){return new URL(n,document.baseURI).pathname}(t)}resetBaseElement(){Hy=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Nde(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let Hy=null,Khe=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ve({token:n,factory:n.\u0275fac})}}return n})();const bP=new be("");let mG=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new ce(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(xe(bP),xe(Yt))}}static{this.\u0275prov=Ve({token:n,factory:n.\u0275fac})}}return n})();class _G{constructor(e){this._doc=e}}const AP="ng-app-id";let yG=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=ET(s),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${AP}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(AP),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(AP,this.appId),t.appendChild(o),o}}addStyleToHost(t,r){const i=this.getStyleElement(t,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(xe(Jo),xe(qD),xe(Q2,8),xe(Ao))}}static{this.\u0275prov=Ve({token:n,factory:n.\u0275fac})}}return n})();const SP={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},DP=/%COMP%/g,Xhe=new be("",{providedIn:"root",factory:()=>!0});function EG(n,e){return e.map(t=>t.replace(DP,n))}let CG=(()=>{class n{constructor(t,r,i,s,o,a,l,u=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=ET(a),this.defaultRenderer=new xP(t,o,l,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Ss.ShadowDom&&(r={...r,encapsulation:Ss.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof wG?i.applyToHost(t):i instanceof RP&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,c=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(r.encapsulation){case Ss.Emulated:s=new wG(l,u,r,this.appId,c,o,a,d);break;case Ss.ShadowDom:return new nfe(l,u,t,r,o,a,this.nonce,d);default:s=new RP(l,u,r,c,o,a,d)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(xe(mG),xe(yG),xe(qD),xe(Xhe),xe(Jo),xe(Ao),xe(Yt),xe(Q2))}}static{this.\u0275prov=Ve({token:n,factory:n.\u0275fac})}}return n})();class xP{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(SP[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(IG(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(IG(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new ce(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=SP[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=SP[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(oc.DashCase|oc.Important)?e.style.setProperty(t,r,i&oc.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&oc.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){null!=e&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=gc().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function IG(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class nfe extends xP{constructor(e,t,r,i,s,o,a,l){super(e,s,o,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=EG(i.id,i.styles);for(const c of u){const d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=c,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class RP extends xP{constructor(e,t,r,i,s,o,a,l){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=l?EG(l,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class wG extends RP{constructor(e,t,r,i,s,o,a,l){const u=i+"-"+r.id;super(e,t,r,s,o,a,l,u),this.contentAttr=function Zhe(n){return"_ngcontent-%COMP%".replace(DP,n)}(u),this.hostAttr=function efe(n){return"_nghost-%COMP%".replace(DP,n)}(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let rfe=(()=>{class n extends _G{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(xe(Jo))}}static{this.\u0275prov=Ve({token:n,factory:n.\u0275fac})}}return n})();const TG=["alt","control","meta","shift"],ife={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},sfe={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ofe=(()=>{class n extends _G{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>gc().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),TG.forEach(u=>{const c=r.indexOf(u);c>-1&&(r.splice(c,1),o+=u+".")}),o+=s,0!=r.length||0===s.length)return null;const l={};return l.domEventName=i,l.fullKey=o,l}static matchEventFullKeyCode(t,r){let i=ife[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),TG.forEach(o=>{o!==i&&(0,sfe[o])(t)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(xe(Jo))}}static{this.\u0275prov=Ve({token:n,factory:n.\u0275fac})}}return n})();function bG(n){return{appProviders:[...ffe,...n?.providers??[]],platformProviders:dfe}}const dfe=[{provide:Ao,useValue:aG},{provide:Y2,useValue:function lfe(){TP.makeCurrent()},multi:!0},{provide:Jo,useFactory:function cfe(){return function Jte(n){GD=n}(document),document},deps:[]}],ffe=[{provide:m_,useValue:"root"},{provide:il,useFactory:function ufe(){return new il},deps:[]},{provide:bP,useClass:rfe,multi:!0,deps:[Jo,Yt,Ao]},{provide:bP,useClass:ofe,multi:!0,deps:[Jo]},CG,yG,mG,{provide:mB,useExisting:CG},{provide:class mhe{},useClass:Khe,deps:[]},[]];let pfe=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(xe(Jo))}}static{this.\u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var qp=st(635);const xG=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function RG(n){return Qe(n?.then)}function PG(n){return Qe(n[ii])}function MG(n){return Symbol.asyncIterator&&Qe(n?.[Symbol.asyncIterator])}function NG(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const kG=function vfe(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function OG(n){return Qe(n?.[kG])}function FG(n){return(0,qp.AQ)(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield(0,qp.N3)(t.read());if(i)return yield(0,qp.N3)(void 0);yield yield(0,qp.N3)(r)}}finally{t.releaseLock()}})}function LG(n){return Qe(n?.getReader)}function no(n){if(n instanceof an)return n;if(null!=n){if(PG(n))return function Efe(n){return new an(e=>{const t=n[ii]();if(Qe(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(xG(n))return function Cfe(n){return new an(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(RG(n))return function Ife(n){return new an(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,zo)})}(n);if(MG(n))return VG(n);if(OG(n))return function wfe(n){return new an(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(LG(n))return function Tfe(n){return VG(FG(n))}(n)}throw NG(n)}function VG(n){return new an(e=>{(function bfe(n,e){var t,r,i,s;return(0,qp.sH)(this,void 0,void 0,function*(){try{for(t=(0,qp.xN)(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function ru(n,e,t,r=0,i=!1){const s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function mc(n,e=0){return G((t,r)=>{t.subscribe(le(r,i=>ru(r,n,()=>r.next(i),e),()=>ru(r,n,()=>r.complete(),e),i=>ru(r,n,()=>r.error(i),e)))})}function lh(n,e=0){return G((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function UG(n,e){if(!n)throw new Error("Iterable cannot be null");return new an(t=>{ru(t,e,()=>{const r=n[Symbol.asyncIterator]();ru(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function Pn(n,e){return e?function Pfe(n,e){if(null!=n){if(PG(n))return function Afe(n,e){return no(n).pipe(lh(e),mc(e))}(n,e);if(xG(n))return function Dfe(n,e){return new an(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(RG(n))return function Sfe(n,e){return no(n).pipe(lh(e),mc(e))}(n,e);if(MG(n))return UG(n,e);if(OG(n))return function xfe(n,e){return new an(t=>{let r;return ru(t,e,()=>{r=n[kG](),ru(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void t.error(o)}s?t.complete():t.next(i)},0,!0)}),()=>Qe(r?.return)&&r.return()})}(n,e);if(LG(n))return function Rfe(n,e){return UG(FG(n),e)}(n,e)}throw NG(n)}(n,e):no(n)}function PP(n){return n[n.length-1]}function MP(n){return Qe(PP(n))?n.pop():void 0}function Wy(n){return function Mfe(n){return n&&Qe(n.schedule)}(PP(n))?n.pop():void 0}function rt(...n){return Pn(n,Wy(n))}const{isArray:kfe}=Array,{getPrototypeOf:Ofe,prototype:Ffe,keys:Lfe}=Object;function BG(n){if(1===n.length){const e=n[0];if(kfe(e))return{args:e,keys:null};if(function Vfe(n){return n&&"object"==typeof n&&Ofe(n)===Ffe}(e)){const t=Lfe(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:Ufe}=Array;function $G(n){return we(e=>function Bfe(n,e){return Ufe(e)?n(...e):n(e)}(n,e))}function HG(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function NP(...n){const e=Wy(n),t=MP(n),{args:r,keys:i}=BG(n);if(0===r.length)return Pn([],e);const s=new an(function $fe(n,e,t=si){return r=>{zG(e,()=>{const{length:i}=n,s=new Array(i);let o=i,a=i;for(let l=0;l<i;l++)zG(e,()=>{const u=Pn(n[l],e);let c=!1;u.subscribe(le(r,d=>{s[l]=d,c||(c=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>HG(i,o):si));return t?s.pipe($G(t)):s}function zG(n,e,t){n?ru(t,n,e):e()}const TT=kn(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function os(n,e,t=1/0){return Qe(e)?os((r,i)=>we((s,o)=>e(r,s,i,o))(no(n(r,i))),t):("number"==typeof e&&(t=e),G((r,i)=>function Hfe(n,e,t,r,i,s,o,a){const l=[];let u=0,c=0,d=!1;const f=()=>{d&&!l.length&&!u&&e.complete()},y=I=>u<r?E(I):l.push(I),E=I=>{s&&e.next(I),u++;let T=!1;no(t(I,c++)).subscribe(le(e,P=>{i?.(P),s?y(P):e.next(P)},()=>{T=!0},void 0,()=>{if(T)try{for(u--;l.length&&u<r;){const P=l.shift();o?ru(e,o,()=>E(P)):E(P)}f()}catch(P){e.error(P)}}))};return n.subscribe(le(e,y,()=>{d=!0,f()})),()=>{a?.()}}(r,i,n,t)))}function jp(n=1/0){return os(si,n)}function kP(...n){return function zfe(){return jp(1)}()(Pn(n,Wy(n)))}function WG(n){return new an(e=>{no(n()).subscribe(e)})}function bT(n,e){const t=Qe(n)?n:()=>n,r=i=>i.error(t());return new an(e?i=>e.schedule(r,0,i):r)}const xa=new an(n=>n.complete());function OP(){return G((n,e)=>{let t=null;n._refCount++;const r=le(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class GG extends an{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,j(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Lt;const t=this.getSubject();e.add(this.source.subscribe(le(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Lt.EMPTY)}return e}refCount(){return OP()(this)}}function Ei(n,e){return G((t,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();t.subscribe(le(r,l=>{i?.unsubscribe();let u=0;const c=s++;no(n(l,c)).subscribe(i=le(r,d=>r.next(e?e(l,d,c,u++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Kp(n){return n<=0?()=>xa:G((e,t)=>{let r=0;e.subscribe(le(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function dl(n,e){return G((t,r)=>{let i=0;t.subscribe(le(r,s=>n.call(e,s,i++)&&r.next(s)))})}function AT(n){return G((e,t)=>{let r=!1;e.subscribe(le(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function qG(n=qfe){return G((e,t)=>{let r=!1;e.subscribe(le(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function qfe(){return new TT}function _c(n,e){const t=arguments.length>=2;return r=>r.pipe(n?dl((i,s)=>n(i,s,r)):si,Kp(1),t?AT(e):qG(()=>new TT))}function Yp(n,e){return Qe(e)?os(n,e,1):os(n,1)}function Ci(n,e,t){const r=Qe(n)||e||t?{next:n,error:e,complete:t}:n;return r?G((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(le(s,l=>{var u;null===(u=r.next)||void 0===u||u.call(r,l),s.next(l)},()=>{var l;a=!1,null===(l=r.complete)||void 0===l||l.call(r),s.complete()},l=>{var u;a=!1,null===(u=r.error)||void 0===u||u.call(r,l),s.error(l)},()=>{var l,u;a&&(null===(l=r.unsubscribe)||void 0===l||l.call(r)),null===(u=r.finalize)||void 0===u||u.call(r)}))}):si}function Qp(n){return G((e,t)=>{let s,r=null,i=!1;r=e.subscribe(le(t,void 0,void 0,o=>{s=no(n(o,Qp(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function FP(n,e){return G(function jfe(n,e,t,r,i){return(s,o)=>{let a=t,l=e,u=0;s.subscribe(le(o,c=>{const d=u++;l=a?n(l,c,d):(a=!0,c),r&&o.next(l)},i&&(()=>{a&&o.next(l),o.complete()})))}}(n,e,arguments.length>=2,!0))}function LP(n){return n<=0?()=>xa:G((e,t)=>{let r=[];e.subscribe(le(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function uh(n){return G((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Mt="primary",Gy=Symbol("RouteTitle");class Jfe{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Jp(n){return new Jfe(n)}function Xfe(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=n[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function hl(n,e){const t=n?VP(n):void 0,r=e?VP(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!jG(n[i],e[i]))return!1;return!0}function VP(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function jG(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function KG(n){return n.length>0?n[n.length-1]:null}function yc(n){return function yfe(n){return!!n&&(n instanceof an||Qe(n.lift)&&Qe(n.subscribe))}(n)?n:ky(n)?Pn(Promise.resolve(n)):rt(n)}const epe={exact:function JG(n,e,t){if(!ch(n.segments,e.segments)||!ST(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!JG(n.children[r],e.children[r],t))return!1;return!0},subset:XG},YG={exact:function tpe(n,e){return hl(n,e)},subset:function npe(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>jG(n[t],e[t]))},ignored:()=>!0};function QG(n,e,t){return epe[t.paths](n.root,e.root,t.matrixParams)&&YG[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function XG(n,e,t){return ZG(n,e,e.segments,t)}function ZG(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!ch(i,t)||e.hasChildren()||!ST(i,t,r))}if(n.segments.length===t.length){if(!ch(n.segments,t)||!ST(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!XG(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(ch(n.segments,i)&&ST(n.segments,i,r)&&n.children[Mt])&&ZG(n.children[Mt],e,s,r)}}function ST(n,e,t){return e.every((r,i)=>YG[t](n[i].parameters,r.parameters))}class Xp{constructor(e=new Vn([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Jp(this.queryParams),this._queryParamMap}toString(){return spe.serialize(this)}}class Vn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return DT(this)}}class qy{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Jp(this.parameters),this._parameterMap}toString(){return nq(this)}}function ch(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Zp=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ve({token:n,factory:()=>new UP,providedIn:"root"})}}return n})();class UP{parse(e){const t=new mpe(e);return new Xp(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${jy(e.root,!0)}`,r=function lpe(n){const e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${xT(t)}=${xT(i)}`).join("&"):`${xT(t)}=${xT(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function ope(n){return encodeURI(n)}(e.fragment)}`:""}`}}const spe=new UP;function DT(n){return n.segments.map(e=>nq(e)).join("/")}function jy(n,e){if(!n.hasChildren())return DT(n);if(e){const t=n.children[Mt]?jy(n.children[Mt],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==Mt&&r.push(`${i}:${jy(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function ipe(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Mt&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Mt&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===Mt?[jy(n.children[Mt],!1)]:[`${i}:${jy(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Mt]?`${DT(n)}/${t[0]}`:`${DT(n)}/(${t.join("//")})`}}function eq(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function xT(n){return eq(n).replace(/%3B/gi,";")}function BP(n){return eq(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function RT(n){return decodeURIComponent(n)}function tq(n){return RT(n.replace(/\+/g,"%20"))}function nq(n){return`${BP(n.path)}${function ape(n){return Object.entries(n).map(([e,t])=>`;${BP(e)}=${BP(t)}`).join("")}(n.parameters)}`}const upe=/^[^\/()?;#]+/;function $P(n){const e=n.match(upe);return e?e[0]:""}const cpe=/^[^\/()?;=#]+/,hpe=/^[^=?&#]+/,ppe=/^[^&#]+/;class mpe{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Vn([],{}):new Vn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Mt]=new Vn(e,t)),r}parseSegment(){const e=$P(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new ce(4009,!1);return this.capture(e),new qy(RT(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function dpe(n){const e=n.match(cpe);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=$P(this.remaining);i&&(r=i,this.capture(r))}e[RT(t)]=RT(r)}parseQueryParam(e){const t=function fpe(n){const e=n.match(hpe);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function gpe(n){const e=n.match(ppe);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=tq(t),s=tq(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=$P(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new ce(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Mt);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[Mt]:new Vn([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new ce(4011,!1)}}function rq(n){return n.segments.length>0?new Vn([],{[Mt]:n}):n}function iq(n){const e={};for(const[r,i]of Object.entries(n.children)){const s=iq(i);if(r===Mt&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function _pe(n){if(1===n.numberOfChildren&&n.children[Mt]){const e=n.children[Mt];return new Vn(n.segments.concat(e.segments),e.children)}return n}(new Vn(n.segments,e))}function eg(n){return n instanceof Xp}function sq(n){let e;const r=function t(s){const o={};for(const l of s.children){const u=t(l);o[l.outlet]=u}const a=new Vn(s.url,o);return s===n&&(e=a),a}(n.root),i=rq(r);return e??i}function oq(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return HP(i,i,i,t,r);const s=function vpe(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new lq(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([l,u])=>{a[l]="string"==typeof u?u.split("/"):u}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new lq(t,e,r)}(e);if(s.toRoot())return HP(i,i,new Vn([],{}),t,r);const o=function Epe(n,e,t){if(n.isAbsolute)return new MT(e,!0,0);if(!t)return new MT(e,!1,NaN);if(null===t.parent)return new MT(t,!0,0);const r=PT(n.commands[0])?0:1;return function Cpe(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new ce(4005,!1);i=r.segments.length}return new MT(r,!1,i-s)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(s,i,n),a=o.processChildren?Yy(o.segmentGroup,o.index,s.commands):uq(o.segmentGroup,o.index,s.commands);return HP(i,o.segmentGroup,a,t,r)}function PT(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Ky(n){return"object"==typeof n&&null!=n&&n.outlets}function HP(n,e,t,r,i){let o,s={};r&&Object.entries(r).forEach(([l,u])=>{s[l]=Array.isArray(u)?u.map(c=>`${c}`):`${u}`}),o=n===e?t:aq(n,e,t);const a=rq(iq(o));return new Xp(a,s,i)}function aq(n,e,t){const r={};return Object.entries(n.children).forEach(([i,s])=>{r[i]=s===e?t:aq(s,e,t)}),new Vn(n.segments,r)}class lq{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&PT(r[0]))throw new ce(4003,!1);const i=r.find(Ky);if(i&&i!==KG(r))throw new ce(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class MT{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function uq(n,e,t){if(n??=new Vn([],{}),0===n.segments.length&&n.hasChildren())return Yy(n,e,t);const r=function wpe(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const o=n.segments[i],a=t[r];if(Ky(a))break;const l=`${a}`,u=r<t.length-1?t[r+1]:null;if(i>0&&void 0===l)break;if(l&&u&&"object"==typeof u&&void 0===u.outlets){if(!dq(l,u,o))return s;r+=2}else{if(!dq(l,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new Vn(n.segments.slice(0,r.pathIndex),{});return s.children[Mt]=new Vn(n.segments.slice(r.pathIndex),n.children),Yy(s,0,i)}return r.match&&0===i.length?new Vn(n.segments,{}):r.match&&!n.hasChildren()?zP(n,e,t):r.match?Yy(n,0,i):zP(n,e,t)}function Yy(n,e,t){if(0===t.length)return new Vn(n.segments,{});{const r=function Ipe(n){return Ky(n[0])?n[0].outlets:{[Mt]:n}}(t),i={};if(Object.keys(r).some(s=>s!==Mt)&&n.children[Mt]&&1===n.numberOfChildren&&0===n.children[Mt].segments.length){const s=Yy(n.children[Mt],e,t);return new Vn(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=uq(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new Vn(n.segments,i)}}function zP(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(Ky(s)){const l=Tpe(s.outlets);return new Vn(r,l)}if(0===i&&PT(t[0])){r.push(new qy(n.segments[e].path,cq(t[0]))),i++;continue}const o=Ky(s)?s.outlets[Mt]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&PT(a)?(r.push(new qy(o,cq(a))),i+=2):(r.push(new qy(o,{})),i++)}return new Vn(r,{})}function Tpe(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=zP(new Vn([],{}),0,r))}),e}function cq(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function dq(n,e,t){return n==t.path&&hl(e,t.parameters)}const Qy="imperative";var tn=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(tn||{});class fl{constructor(e,t){this.id=e,this.url=t}}class NT extends fl{constructor(e,t,r="imperative",i=null){super(e,t),this.type=tn.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class iu extends fl{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=tn.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var Ro=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Ro||{}),kT=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(kT||{});class tg extends fl{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=tn.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ng extends fl{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=tn.NavigationSkipped}}class OT extends fl{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=tn.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class hq extends fl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=tn.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bpe extends fl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=tn.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ape extends fl{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=tn.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Spe extends fl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=tn.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Dpe extends fl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=tn.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xpe{constructor(e){this.route=e,this.type=tn.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Rpe{constructor(e){this.route=e,this.type=tn.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ppe{constructor(e){this.snapshot=e,this.type=tn.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Mpe{constructor(e){this.snapshot=e,this.type=tn.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Npe{constructor(e){this.snapshot=e,this.type=tn.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class kpe{constructor(e){this.snapshot=e,this.type=tn.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fq{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=tn.Scroll}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class WP{}class GP{constructor(e){this.url=e}}class Ope{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Jy,this.attachRef=null}}let Jy=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Ope,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class pq{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=qP(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=qP(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=jP(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return jP(e,this._root).map(t=>t.value)}}function qP(n,e){if(n===e.value)return e;for(const t of e.children){const r=qP(n,t);if(r)return r}return null}function jP(n,e){if(n===e.value)return[e];for(const t of e.children){const r=jP(n,t);if(r.length)return r.unshift(e),r}return[]}class Ra{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function rg(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class gq extends pq{constructor(e,t){super(e),this.snapshot=t,QP(this,e)}toString(){return this.snapshot.toString()}}function mq(n){const e=function Fpe(n){const s=new YP([],{},{},"",{},Mt,n,null,{});return new _q("",new Ra(s,[]))}(n),t=new R([new qy("",{})]),r=new R({}),i=new R({}),s=new R({}),o=new R(""),a=new ig(t,r,s,o,i,Mt,n,e.root);return a.snapshot=e.root,new gq(new Ra(a,[]),e)}class ig{constructor(e,t,r,i,s,o,a,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(we(u=>u[Gy]))??rt(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(we(e=>Jp(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(we(e=>Jp(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function KP(n,e,t="emptyOnly"){let r;const{routeConfig:i}=n;return r=null===e||"always"!==t&&""!==i?.path&&(e.component||e.routeConfig?.loadComponent)?{params:{...n.params},data:{...n.data},resolve:{...n.data,...n._resolvedData??{}}}:{params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.data,...i?.data,...n._resolvedData}},i&&vq(i)&&(r.resolve[Gy]=i.title),r}class YP{get title(){return this.data?.[Gy]}constructor(e,t,r,i,s,o,a,l,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Jp(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Jp(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class _q extends pq{constructor(e,t){super(t),this.url=e,QP(this,t)}toString(){return yq(this._root)}}function QP(n,e){e.value._routerState=n,e.children.forEach(t=>QP(n,t))}function yq(n){const e=n.children.length>0?` { ${n.children.map(yq).join(", ")} } `:"";return`${n.value}${e}`}function JP(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,hl(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),hl(e.params,t.params)||n.paramsSubject.next(t.params),function Zfe(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!hl(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),hl(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function XP(n,e){const t=hl(n.params,e.params)&&function rpe(n,e){return ch(n,e)&&n.every((t,r)=>hl(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||XP(n.parent,e.parent))}function vq(n){return"string"==typeof n.title||null===n.title}let ZP=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Mt,this.activateEvents=new xn,this.deactivateEvents=new xn,this.attachEvents=new xn,this.detachEvents=new xn,this.parentContexts=Ie(Jy),this.location=Ie(Ia),this.changeDetector=Ie(Oy),this.environmentInjector=Ie(Ri),this.inputBinder=Ie(FT,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ce(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ce(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ce(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new ce(4013,!1);this._activatedRoute=t;const i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new eM(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:l,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=ht({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ps]})}}return n})();class eM{__ngOutletInjector(e){return new eM(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ig?this.route:e===Jy?this.childContexts:this.parent.get(e,t)}}const FT=new be("");let Eq=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=NP([r.queryParams,r.params,r.data]).pipe(Ei(([s,o,a],l)=>(a={...s,...o,...a},0===l?rt(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const o=function $ce(n){const e=Dt(n);if(!e)return null;const t=new my(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ve({token:n,factory:n.\u0275fac})}}return n})();function Xy(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function Vpe(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Xy(n,r,i);return Xy(n,r)})}(n,e,t);return new Ra(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Xy(n,a)),o}}const r=function Upe(n){return new ig(new R(n.url),new R(n.params),new R(n.queryParams),new R(n.fragment),new R(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>Xy(n,s));return new Ra(r,i)}}const Cq="ngNavigationCancelingError";function Iq(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=eg(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=wq(!1,Ro.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function wq(n,e){const t=new Error(`NavigationCancelingError: ${n||""}`);return t[Cq]=!0,t.cancellationCode=e,t}function Tq(n){return!!n&&n[Cq]}let bq=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Ds({type:n,selectors:[["ng-component"]],standalone:!0,features:[Aa],decls:1,vars:0,template:function(r,i){1&r&&yi(0,"router-outlet")},dependencies:[ZP],encapsulation:2})}}return n})();function tM(n){const e=n.children&&n.children.map(tM),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Mt&&(t.component=bq),t}function pl(n){return n.outlet||Mt}function Zy(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class jpe{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),JP(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=rg(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=rg(e);for(const o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=rg(e);for(const o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=rg(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new kpe(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Mpe(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(JP(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),JP(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=Zy(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class Aq{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class LT{constructor(e,t){this.component=e,this.route=t}}function Kpe(n,e,t){const r=n._root;return ev(r,e?e._root:null,t,[r.value])}function sg(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function Wm(n){return null!==Tf(n)}(n)?e.get(n):n:r}function ev(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=rg(e);return n.children.forEach(o=>{(function Qpe(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function Jpe(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ch(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ch(n.url,e.url)||!hl(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!XP(n,e)||!hl(n.queryParams,e.queryParams);default:return!XP(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new Aq(r)):(s.data=o.data,s._resolvedData=o._resolvedData),ev(n,e,s.component?a?a.children:null:t,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new LT(a.outlet.component,o))}else o&&tv(e,a,i),i.canActivateChecks.push(new Aq(r)),ev(n,null,s.component?a?a.children:null:t,r,i)})(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>tv(a,t.getContext(o),i)),i}function tv(n,e,t){const r=rg(n),i=n.value;Object.entries(r).forEach(([s,o])=>{tv(o,i.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new LT(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function nv(n){return"function"==typeof n}function Sq(n){return n instanceof TT||"EmptyError"===n?.name}const VT=Symbol("INITIAL_VALUE");function og(){return Ei(n=>NP(n.map(e=>e.pipe(Kp(1),function Gfe(...n){const e=Wy(n);return G((t,r)=>{(e?kP(n,t,e):kP(n,t)).subscribe(r)})}(VT)))).pipe(we(e=>{for(const t of e)if(!0!==t){if(t===VT)return VT;if(!1===t||t instanceof Xp)return t}return!0}),dl(e=>e!==VT),Kp(1)))}function Dq(n){return function Ga(...n){return _o(n)}(Ci(e=>{if(eg(e))throw Iq(0,e)}),we(e=>!0===e))}class nM{constructor(e){this.segmentGroup=e||null}}class rM extends Error{constructor(e){super(),this.urlTree=e}}function ag(n){return bT(new nM(n))}class mge{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return rt(r);if(i.numberOfChildren>1||!i.children[Mt])return bT(new ce(4e3,!1));i=i.children[Mt]}}applyRedirectCommands(e,t,r){const i=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t.startsWith("/"))throw new rM(i);return i}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new Xp(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let o={};return Object.entries(t.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(e,l,r,i)}),new Vn(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new ce(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const iM={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function _ge(n,e,t,r,i){const s=sM(n,e,t);return s.matched?(r=function $pe(n,e){return n.providers&&!n._injector&&(n._injector=Dw(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function fge(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?rt(i.map(o=>{const a=sg(o,n);return yc(function rge(n){return n&&nv(n.canMatch)}(a)?a.canMatch(e,t):_a(n,()=>a(e,t)))})).pipe(og(),Dq()):rt(!0)}(r,e,t).pipe(we(o=>!0===o?s:{...iM}))):rt(s)}function sM(n,e,t){if("**"===e.path)return function yge(n){return{matched:!0,parameters:n.length>0?KG(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}(t);if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...iM}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Xfe)(t,n,e);if(!i)return{...iM};const s={};Object.entries(i.posParams??{}).forEach(([a,l])=>{s[a]=l.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function xq(n,e,t,r){return t.length>0&&function Cge(n,e,t){return t.some(r=>UT(n,e,r)&&pl(r)!==Mt)}(n,t,r)?{segmentGroup:new Vn(e,Ege(r,new Vn(t,n.children))),slicedSegments:[]}:0===t.length&&function Ige(n,e,t){return t.some(r=>UT(n,e,r))}(n,t,r)?{segmentGroup:new Vn(n.segments,vge(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Vn(n.segments,n.children),slicedSegments:t}}function vge(n,e,t,r){const i={};for(const s of t)if(UT(n,e,s)&&!r[pl(s)]){const o=new Vn([],{});i[pl(s)]=o}return{...r,...i}}function Ege(n,e){const t={};t[Mt]=e;for(const r of n)if(""===r.path&&pl(r)!==Mt){const i=new Vn([],{});t[pl(r)]=i}return t}function UT(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class bge{}class Dge{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new mge(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new ce(4002,`'${e.segmentGroup}'`)}recognize(){const e=xq(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(we(t=>{const r=new YP([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Mt,this.rootComponentType,null,{}),i=new Ra(r,t),s=new _q("",i),o=function ype(n,e,t=null,r=null){return oq(sq(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,Mt).pipe(Qp(r=>{if(r instanceof rM)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof nM?this.noMatchError(r):r}))}inheritParamsAndData(e,t){const r=e.value,i=KP(r,t,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(s=>this.inheritParamsAndData(s,r))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0).pipe(we(s=>s instanceof Ra?[s]:[]))}processChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return Pn(i).pipe(Yp(s=>{const o=r.children[s],a=function Gpe(n,e){const t=n.filter(r=>pl(r)===e);return t.push(...n.filter(r=>pl(r)!==e)),t}(t,s);return this.processSegmentGroup(e,a,o,s)}),FP((s,o)=>(s.push(...o),s)),AT(null),function Kfe(n,e){const t=arguments.length>=2;return r=>r.pipe(n?dl((i,s)=>n(i,s,r)):si,LP(1),t?AT(e):qG(()=>new TT))}(),os(s=>{if(null===s)return ag(r);const o=Rq(s);return function xge(n){n.sort((e,t)=>e.value.outlet===Mt?-1:t.value.outlet===Mt?1:e.value.outlet.localeCompare(t.value.outlet))}(o),rt(o)}))}processSegment(e,t,r,i,s,o){return Pn(t).pipe(Yp(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,r,i,s,o).pipe(Qp(l=>{if(l instanceof nM)return rt(null);throw l}))),_c(a=>!!a),Qp(a=>{if(Sq(a))return function Tge(n,e,t){return 0===e.length&&!n.children[t]}(r,i,s)?rt(new bge):ag(r);throw a}))}processSegmentAgainstRoute(e,t,r,i,s,o,a){return function wge(n,e,t,r){return!!(pl(n)===r||r!==Mt&&UT(e,t,n))&&sM(e,n,t).matched}(r,i,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o):ag(i):ag(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){const{matched:a,consumedSegments:l,positionalParamSegments:u,remainingSegments:c}=sM(t,i,s);if(!a)return ag(t);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const d=this.applyRedirects.applyRedirectCommands(l,i.redirectTo,u);return this.applyRedirects.lineralizeSegments(i,d).pipe(os(f=>this.processSegment(e,r,t,f.concat(c),o,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){const o=_ge(t,r,i,e);return"**"===r.path&&(t.children={}),o.pipe(Ei(a=>a.matched?this.getChildConfig(e=r._injector??e,r,i).pipe(Ei(({routes:l})=>{const u=r._loadedInjector??e,{consumedSegments:c,remainingSegments:d,parameters:f}=a,y=new YP(c,f,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,function Pge(n){return n.data||{}}(r),pl(r),r.component??r._loadedComponent??null,r,function Mge(n){return n.resolve||{}}(r)),{segmentGroup:E,slicedSegments:I}=xq(t,c,d,l);if(0===I.length&&E.hasChildren())return this.processChildren(u,l,E).pipe(we(P=>null===P?null:new Ra(y,P)));if(0===l.length&&0===I.length)return rt(new Ra(y,[]));const T=pl(r)===s;return this.processSegment(u,l,E,I,T?Mt:s,!0).pipe(we(P=>new Ra(y,P instanceof Ra?[P]:[])))})):ag(t)))}getChildConfig(e,t,r){return t.children?rt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?rt({routes:t._loadedRoutes,injector:t._loadedInjector}):function hge(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?rt(!0):rt(i.map(o=>{const a=sg(o,n);return yc(function Zpe(n){return n&&nv(n.canLoad)}(a)?a.canLoad(e,t):_a(n,()=>a(e,t)))})).pipe(og(),Dq())}(e,t,r).pipe(os(i=>i?this.configLoader.loadChildren(e,t).pipe(Ci(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function gge(n){return bT(wq(!1,Ro.GuardRejected))}())):rt({routes:[],injector:e})}}function Rge(n){const e=n.value.routeConfig;return e&&""===e.path}function Rq(n){const e=[],t=new Set;for(const r of n){if(!Rge(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Rq(r.children);e.push(new Ra(r.value,i))}return e.filter(r=>!t.has(r))}function Pq(n){const e=n.children.map(t=>Pq(t)).flat();return[n,...e]}function oM(n){return Ei(e=>{const t=n(e);return t?Pn(t).pipe(we(()=>e)):rt(e)})}let Mq=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Mt);return r}getResolvedTitleForRoute(t){return t.data[Gy]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ve({token:n,factory:()=>Ie(Vge),providedIn:"root"})}}return n})(),Vge=(()=>{class n extends Mq{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(xe(pfe))}}static{this.\u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const lg=new be("",{providedIn:"root",factory:()=>({})}),ug=new be("");let aM=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Ie(Zz)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return rt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=yc(t.loadComponent()).pipe(we(Nq),Ci(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),uh(()=>{this.componentLoaders.delete(t)})),i=new GG(r,()=>new M).pipe(OP());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return rt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=function Uge(n,e,t,r){return yc(n.loadChildren()).pipe(we(Nq),os(i=>i instanceof o$||Array.isArray(i)?rt(i):Pn(e.compileModuleAsync(i))),we(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,!0):(s=i.create(t).injector,o=s.get(ug,[],{optional:!0,self:!0}).flat()),{routes:o.map(tM),injector:s}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(uh(()=>{this.childrenLoaders.delete(r)})),o=new GG(s,()=>new M).pipe(OP());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Nq(n){return function Bge(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let lM=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ve({token:n,factory:()=>Ie($ge),providedIn:"root"})}}return n})(),$ge=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const kq=new be(""),Oq=new be("");function Hge(n,e,t){const r=n.get(Oq),i=n.get(Jo);return n.get(Yt).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(u=>setTimeout(u));let s;const o=new Promise(u=>{s=u}),a=i.startViewTransition(()=>(s(),function zge(n){return new Promise(e=>{Gx(e,{injector:n})})}(n))),{onViewTransitionCreated:l}=r;return l&&_a(n,()=>l({transition:a,from:e,to:t})),o})}let BT=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new M,this.transitionAbortSubject=new M,this.configLoader=Ie(aM),this.environmentInjector=Ie(Ri),this.urlSerializer=Ie(Zp),this.rootContexts=Ie(Jy),this.location=Ie(Vy),this.inputBindingEnabled=null!==Ie(FT,{optional:!0}),this.titleStrategy=Ie(Mq),this.options=Ie(lg,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=Ie(lM),this.createViewTransition=Ie(kq,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>rt(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new Rpe(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new xpe(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new R({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Qy,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(dl(s=>0!==s.id),we(s=>({...s,extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Ei(s=>{let o=!1,a=!1;return rt(s).pipe(Ei(l=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Ro.SupersededByNewNavigation),xa;this.currentTransition=s,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const u=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!u&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const d="";return this.events.next(new ng(l.id,this.urlSerializer.serialize(l.rawUrl),d,kT.IgnoredSameUrlNavigation)),l.resolve(null),xa}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return rt(l).pipe(Ei(d=>{const f=this.transitions?.getValue();return this.events.next(new NT(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),f!==this.transitions?.getValue()?xa:Promise.resolve(d)}),function Nge(n,e,t,r,i,s){return os(o=>function Age(n,e,t,r,i,s,o="emptyOnly"){return new Dge(n,e,t,r,i,o,s).recognize()}(n,e,t,r,o.extractedUrl,i,s).pipe(we(({state:a,tree:l})=>({...o,targetSnapshot:a,urlAfterRedirects:l}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Ci(d=>{s.targetSnapshot=d.targetSnapshot,s.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:d.urlAfterRedirects};const f=new hq(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){const{id:d,extractedUrl:f,source:y,restoredState:E,extras:I}=l,T=new NT(d,this.urlSerializer.serialize(f),y,E);this.events.next(T);const P=mq(this.rootComponentType).snapshot;return this.currentTransition=s={...l,targetSnapshot:P,urlAfterRedirects:f,extras:{...I,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=f,rt(s)}{const d="";return this.events.next(new ng(l.id,this.urlSerializer.serialize(l.extractedUrl),d,kT.IgnoredByUrlHandlingStrategy)),l.resolve(null),xa}}),Ci(l=>{const u=new bpe(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),we(l=>(this.currentTransition=s={...l,guards:Kpe(l.targetSnapshot,l.currentSnapshot,this.rootContexts)},s)),function ige(n,e){return os(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?rt({...t,guardsResult:!0}):function sge(n,e,t,r){return Pn(n).pipe(os(i=>function dge(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?rt(s.map(a=>{const l=Zy(e)??i,u=sg(a,l);return yc(function nge(n){return n&&nv(n.canDeactivate)}(u)?u.canDeactivate(n,e,t,r):_a(l,()=>u(n,e,t,r))).pipe(_c())})).pipe(og()):rt(!0)}(i.component,i.route,t,e,r)),_c(i=>!0!==i,!0))}(o,r,i,n).pipe(os(a=>a&&function Xpe(n){return"boolean"==typeof n}(a)?function oge(n,e,t,r){return Pn(e).pipe(Yp(i=>kP(function lge(n,e){return null!==n&&e&&e(new Ppe(n)),rt(!0)}(i.route.parent,r),function age(n,e){return null!==n&&e&&e(new Npe(n)),rt(!0)}(i.route,r),function cge(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function Ype(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>WG(()=>rt(o.guards.map(l=>{const u=Zy(o.node)??t,c=sg(l,u);return yc(function tge(n){return n&&nv(n.canActivateChild)}(c)?c.canActivateChild(r,n):_a(u,()=>c(r,n))).pipe(_c())})).pipe(og())));return rt(s).pipe(og())}(n,i.path,t),function uge(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return rt(!0);const i=r.map(s=>WG(()=>{const o=Zy(e)??t,a=sg(s,o);return yc(function ege(n){return n&&nv(n.canActivate)}(a)?a.canActivate(e,n):_a(o,()=>a(e,n))).pipe(_c())}));return rt(i).pipe(og())}(n,i.route,t))),_c(i=>!0!==i,!0))}(r,s,n,e):rt(a)),we(a=>({...t,guardsResult:a})))})}(this.environmentInjector,l=>this.events.next(l)),Ci(l=>{if(s.guardsResult=l.guardsResult,eg(l.guardsResult))throw Iq(0,l.guardsResult);const u=new Ape(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),dl(l=>!!l.guardsResult||(this.cancelNavigationTransition(l,"",Ro.GuardRejected),!1)),oM(l=>{if(l.guards.canActivateChecks.length)return rt(l).pipe(Ci(u=>{const c=new Spe(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(c)}),Ei(u=>{let c=!1;return rt(u).pipe(function kge(n,e){return os(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return rt(t);const s=new Set(i.map(l=>l.route)),o=new Set;for(const l of s)if(!o.has(l))for(const u of Pq(l))o.add(u);let a=0;return Pn(o).pipe(Yp(l=>s.has(l)?function Oge(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!vq(i)&&(s[Gy]=i.title),function Fge(n,e,t,r){const i=VP(n);if(0===i.length)return rt({});const s={};return Pn(i).pipe(os(o=>function Lge(n,e,t,r){const i=Zy(e)??r,s=sg(n,i);return yc(s.resolve?s.resolve(e,t):_a(i,()=>s(e,t)))}(n[o],e,t,r).pipe(_c(),Ci(a=>{s[o]=a}))),LP(1),function Yfe(n){return we(()=>n)}(s),Qp(o=>Sq(o)?xa:bT(o)))}(s,n,e,r).pipe(we(o=>(n._resolvedData=o,n.data=KP(n,n.parent,t).resolve,null)))}(l,r,n,e):(l.data=KP(l,l.parent,n).resolve,rt(void 0))),Ci(()=>a++),LP(1),os(l=>a===o.size?rt(t):xa))})}(this.paramsInheritanceStrategy,this.environmentInjector),Ci({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(u,"",Ro.NoDataFromResolver)}}))}),Ci(u=>{const c=new Dpe(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(c)}))}),oM(l=>{const u=c=>{const d=[];c.routeConfig?.loadComponent&&!c.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(c.routeConfig).pipe(Ci(f=>{c.component=f}),we(()=>{})));for(const f of c.children)d.push(...u(f));return d};return NP(u(l.targetSnapshot.root)).pipe(AT(null),Kp(1))}),oM(()=>this.afterPreactivation()),Ei(()=>{const{currentSnapshot:l,targetSnapshot:u}=s,c=this.createViewTransition?.(this.environmentInjector,l.root,u.root);return c?Pn(c).pipe(we(()=>s)):rt(s)}),we(l=>{const u=function Lpe(n,e,t){const r=Xy(n,e._root,t?t._root:void 0);return new gq(r,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s={...l,targetRouterState:u},this.currentNavigation.targetRouterState=u,s}),Ci(()=>{this.events.next(new WP)}),((n,e,t,r)=>we(i=>(new jpe(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Kp(1),Ci({next:l=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new iu(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{o=!0}}),function Qfe(n){return G((e,t)=>{no(n).subscribe(le(t,()=>t.complete(),go)),!t.closed&&e.subscribe(t)})}(this.transitionAbortSubject.pipe(Ci(l=>{throw l}))),uh(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",Ro.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Qp(l=>{if(a=!0,Tq(l))this.events.next(new tg(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),function Bpe(n){return Tq(n)&&eg(n.url)}(l)?this.events.next(new GP(l.url)):s.resolve(!1);else{this.events.next(new OT(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0));try{s.resolve(t.errorHandler(l))}catch(u){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(u)}}return xa}))}))}cancelNavigationTransition(t,r,i){const s=new tg(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Wge(n){return n!==Qy}let Gge=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ve({token:n,factory:()=>Ie(jge),providedIn:"root"})}}return n})();class qge{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let jge=(()=>{class n extends qge{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Oi(n)))(i||n)}})()}static{this.\u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Fq=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ve({token:n,factory:()=>Ie(Kge),providedIn:"root"})}}return n})(),Kge=(()=>{class n extends Fq{constructor(){super(...arguments),this.location=Ie(Vy),this.urlSerializer=Ie(Zp),this.options=Ie(lg,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=Ie(lM),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Xp,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=mq(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{"popstate"===r.type&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof NT)this.stateMemento=this.createStateMemento();else if(t instanceof ng)this.rawUrlTree=r.initialUrl;else if(t instanceof hq){if("eager"===this.urlUpdateStrategy&&!r.extras.skipLocationChange){const i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(i,r)}}else t instanceof WP?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,"deferred"===this.urlUpdateStrategy&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):t instanceof tg&&(t.code===Ro.GuardRejected||t.code===Ro.NoDataFromResolver)?this.restoreHistory(r):t instanceof OT?this.restoreHistory(r,!0):t instanceof iu&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",s)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&0===s&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Oi(n)))(i||n)}})()}static{this.\u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var rv=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(rv||{});function Lq(n,e){n.events.pipe(dl(t=>t instanceof iu||t instanceof tg||t instanceof OT||t instanceof ng),we(t=>t instanceof iu||t instanceof ng?rv.COMPLETE:t instanceof tg&&(t.code===Ro.Redirect||t.code===Ro.SupersededByNewNavigation)?rv.REDIRECTING:rv.FAILED),dl(t=>t!==rv.REDIRECTING),Kp(1)).subscribe(()=>{e()})}function Yge(n){throw n}const Qge={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Jge={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Pa=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=Ie(zz),this.stateManager=Ie(Fq),this.options=Ie(lg,{optional:!0})||{},this.pendingTasks=Ie(Cp),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=Ie(BT),this.urlSerializer=Ie(Zp),this.location=Ie(Vy),this.urlHandlingStrategy=Ie(lM),this._events=new M,this.errorHandler=this.options.errorHandler||Yge,this.navigated=!1,this.routeReuseStrategy=Ie(Gge),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=Ie(ug,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!Ie(FT,{optional:!0}),this.eventsSubscription=new Lt,this.isNgZoneEnabled=Ie(Yt)instanceof Yt&&Yt.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(null!==i&&null!==s)if(this.stateManager.handleRouterEvent(r,s),r instanceof tg&&r.code!==Ro.Redirect&&r.code!==Ro.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof iu)this.navigated=!0;else if(r instanceof GP){const o=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),a={info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Wge(i.source)};this.scheduleNavigation(o,Qy,null,a,{resolve:i.resolve,reject:i.reject,promise:i.promise})}(function Zge(n){return!(n instanceof WP||n instanceof GP)})(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Qy,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const l={...i};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(s.state=l)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(tM),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=r,u=l?this.currentUrlTree.fragment:o;let d,c=null;switch(a){case"merge":c={...this.currentUrlTree.queryParams,...s};break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=s||null}null!==c&&(c=this.removeEmptyProps(c));try{d=sq(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),d=this.currentUrlTree.root}return oq(d,t,c,u??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=eg(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Qy,null,r)}navigate(t,r={skipLocationChange:!1}){return function Xge(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new ce(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(i=!0===r?{...Qge}:!1===r?{...Jge}:r,eg(t))return QG(this.currentUrlTree,t,i);const s=this.parseUrl(t);return QG(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(null!=s&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,u;o?(a=o.resolve,l=o.reject,u=o.promise):u=new Promise((d,f)=>{a=d,l=f});const c=this.pendingTasks.add();return Lq(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(c))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(d=>Promise.reject(d))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),$T=(()=>{class n{constructor(t,r,i,s,o,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new M,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const l=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===l||"area"===l,this.isAnchorElement?this.subscription=t.events.subscribe(u=>{u instanceof iu&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,s,o){const a=this.urlTree;return!!(null===a||this.isAnchorElement&&(0!==t||r||i||s||o||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(a,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){const t=this.urlTree;this.href=null!==t&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;const r=null===this.href?null:function _U(n,e,t){return function Fne(n,e){return"src"===e&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===e&&("base"===n||"link"===n)?mU:sw}(e,t)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){const i=this.renderer,s=this.el.nativeElement;null!==r?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||n)(Ce(Pa),Ce(ig),function W_(n){return function pte(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const s=t[i];if(Nf(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(s===e)return t[i+1];i+=2}}}return null}(_n(),n)}("tabindex"),Ce(Ql),Ce(bo),Ce(oh))}}static{this.\u0275dir=ht({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&yn("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&r&&ll("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[Fn.HasDecoratorInputTransform,"preserveFragment","preserveFragment",Wp],skipLocationChange:[Fn.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",Wp],replaceUrl:[Fn.HasDecoratorInputTransform,"replaceUrl","replaceUrl",Wp],routerLink:"routerLink"},standalone:!0,features:[s$,Ps]})}}return n})();class Vq{}let nme=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(dl(t=>t instanceof iu),Yp(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=Dw(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return Pn(i).pipe(jp())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):rt(null);const s=i.pipe(os(o=>null===o?rt(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return r.loadComponent&&!r._loadedComponent?Pn([s,this.loader.loadComponent(r)]).pipe(jp()):s})}static{this.\u0275fac=function(r){return new(r||n)(xe(Pa),xe(Zz),xe(Ri),xe(Vq),xe(aM))}}static{this.\u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const uM=new be("");let Uq=(()=>{class n{constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=Ie(Ri),o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof NT?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof iu?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof ng&&t.code===kT.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof fq&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){var i=this;this.zone.runOutsideAngular((0,b.A)(function*(){yield new Promise(s=>{setTimeout(()=>{s()}),Gx(()=>{s()},{injector:i.environmentInjector})}),i.zone.run(()=>{i.transitions.events.next(new fq(t,"popstate"===i.lastSource?i.store[i.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){!function $U(){throw new Error("invalid")}()}}static{this.\u0275prov=Ve({token:n,factory:n.\u0275fac})}}return n})();function Bq(n){return n.routerState.root}function gl(n,e){return{\u0275kind:n,\u0275providers:e}}function $q(){const n=Ie(mi);return e=>{const t=n.get(fc);if(e!==t.components[0])return;const r=n.get(Pa),i=n.get(Hq);1===n.get(cM)&&r.initialNavigation(),n.get(zq,null,Ut.Optional)?.setUpPreloading(),n.get(uM,null,Ut.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const Hq=new be("",{factory:()=>new M}),cM=new be("",{providedIn:"root",factory:()=>1}),zq=new be("");function ame(n){return gl(0,[{provide:zq,useExisting:nme},{provide:Vq,useExisting:n}])}function ume(n){return gl(9,[{provide:kq,useValue:Hge},{provide:Oq,useValue:{skipNextTransition:!!n?.skipInitialTransition,...n}}])}const Wq=new be("ROUTER_FORROOT_GUARD"),cme=[Vy,{provide:Zp,useClass:UP},Pa,Jy,{provide:ig,useFactory:Bq,deps:[Pa]},aM,[]];let dme=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[cme,[],{provide:ug,multi:!0,useValue:t},{provide:Wq,useFactory:gme,deps:[[Pa,new Gr,new Rd]]},{provide:lg,useValue:r||{}},r?.useHash?{provide:oh,useClass:qce}:{provide:oh,useClass:HW},{provide:uM,useFactory:()=>{const n=Ie(hhe),e=Ie(Yt),t=Ie(lg),r=Ie(BT),i=Ie(Zp);return t.scrollOffset&&n.setOffset(t.scrollOffset),new Uq(i,r,n,e,t)}},r?.preloadingStrategy?ame(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?mme(r):[],r?.bindToComponentInputs?gl(8,[Eq,{provide:FT,useExisting:Eq}]).\u0275providers:[],r?.enableViewTransitions?ume().\u0275providers:[],[{provide:Gq,useFactory:$q},{provide:Xw,multi:!0,useExisting:Gq}]]}}static forChild(t){return{ngModule:n,providers:[{provide:ug,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(xe(Wq,8))}}static{this.\u0275mod=Co({type:n})}static{this.\u0275inj=bs({})}}return n})();function gme(n){return"guarded"}function mme(n){return["disabled"===n.initialNavigation?gl(3,[{provide:qR,multi:!0,useFactory:()=>{const e=Ie(Pa);return()=>{e.setUpLocationChangeListener()}}},{provide:cM,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?gl(2,[{provide:cM,useValue:0},{provide:qR,multi:!0,deps:[mi],useFactory:e=>{const t=e.get(Wce,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(Pa),s=e.get(Hq);Lq(i,()=>{r(!0)}),e.get(BT).afterPreactivation=()=>(r(!0),s.closed?rt(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const Gq=new be("");var Gn=st(979);(0,Gn.registerVersion)("firebase","10.14.1","app");class Eme extends Lt{constructor(e,t){super()}schedule(e,t=0){return this}}const HT={setInterval(n,e,...t){const{delegate:r}=HT;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=HT;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class qq extends Eme{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return HT.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&HT.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Ot(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const dM={now:()=>(dM.delegate||Date).now(),delegate:void 0};class iv{constructor(e,t=iv.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}iv.now=dM.now;class jq extends iv{constructor(e,t=iv.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const wme=new class Ime extends jq{}(class Cme extends qq{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}}),Kq=new jq(qq),vc=new Hp("ANGULARFIRE2_VERSION");function hM(n,e,t){if(e){if(1===e.length)return e[0];const s=e.filter(o=>o.app===t);if(1===s.length)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}const fM=(n,e)=>{const t=e?[e]:(0,Gn.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r};class sv{constructor(){return fM(Yq)}}const Yq="app-check";function cg(){}class Qq{zone;delegate;constructor(e,t=wme){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},t,r)}}class Tme{zone;task=null;constructor(e){this.zone=e}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",cg,{},cg,cg)),t.pipe(Ci({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let dg=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Qq(Zone.current)),this.insideAngular=t.run(()=>new Qq(Zone.current,Kq)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(xe(Yt))};static \u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function hg(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function dh(n){return hg().ngZone.run(()=>n())}function Ec(n){return function Ame(n){return function(t){return(t=t.lift(new Tme(n.ngZone))).pipe(lh(n.outsideAngular),mc(n.insideAngular))}}(hg())(n)}const Sme=(n,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),dh(()=>n.apply(void 0,r))},zT=(n,e)=>function(){let t;const r=arguments;for(let s=0;s<arguments.length;s++)"function"==typeof r[s]&&(e&&(t||=dh(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",cg,{},cg,cg))),r[s]=Sme(r[s],t));const i=function bme(n){return hg().ngZone.runOutsideAngular(()=>n())}(()=>n.apply(this,r));if(!e){if(i instanceof an){const s=hg();return i.pipe(lh(s.outsideAngular),mc(s.insideAngular))}return dh(()=>i)}return i instanceof an?i.pipe(Ec):i instanceof Promise?dh(()=>new Promise((s,o)=>i.then(a=>dh(()=>s(a)),a=>dh(()=>o(a))))):"function"==typeof i&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),i.apply(this,arguments)}:dh(()=>i)};var Cc=st(574);Cc.A.registerVersion("firebase","10.14.1","app-compat");const Rme=["ngOnDestroy"];class Jq{constructor(e){return e}}const WT=new be("angularfire2.app.options"),GT=new be("angularfire2.app.name");function pM(n,e,t){const i="object"==typeof t&&t||{};i.name=i.name||"string"==typeof t&&t||"[DEFAULT]";const o=Cc.A.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Cc.A.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){const a=!!module.hot;Nme("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Jq(o)}const Nme=(n,...e)=>{},kme={provide:Jq,useFactory:pM,deps:[WT,Yt,[new Gr,GT]]};let Ome=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:WT,useValue:t},{provide:GT,useValue:r}]}}constructor(t){Cc.A.registerVersion("angularfire",vc.full,"core"),Cc.A.registerVersion("angularfire",vc.full,"app-compat"),Cc.A.registerVersion("angular",Hz.full,t.toString())}static \u0275fac=function(r){return new(r||n)(xe(Ao))};static \u0275mod=Co({type:n});static \u0275inj=bs({providers:[kme]})}return n})();function Xq(n,e,t,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return function Fme(n,e){try{return n.toString()===e.toString()}catch{return n===e}}(i,o)||(Zq("error",`${e} was already initialized on the ${t} Firebase App with different settings.${Lme?" You may need to reload as Firebase is not HMR aware.":""}`),Zq("warn",{is:i,was:o})),s;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}const Lme=typeof module<"u"&&!!module.hot,Zq=(n,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[];let ej=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(Ce(Ql),Ce(bo))}}static{this.\u0275dir=ht({type:n})}}return n})(),hh=(()=>{class n extends ej{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Oi(n)))(i||n)}})()}static{this.\u0275dir=ht({type:n,features:[Rn]})}}return n})();const ml=new be(""),Ume={provide:ml,useExisting:In(()=>gM),multi:!0};let gM=(()=>{class n extends hh{writeValue(t){this.setProperty("checked",t)}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Oi(n)))(i||n)}})()}static{this.\u0275dir=ht({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){1&r&&yn("change",function(o){return i.onChange(o.target.checked)})("blur",function(){return i.onTouched()})},features:[Ln([Ume]),Rn]})}}return n})();const Bme={provide:ml,useExisting:In(()=>fh),multi:!0},Hme=new be("");let fh=(()=>{class n extends ej{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function $me(){const n=gc()?gc().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(Ce(Ql),Ce(bo),Ce(Hme,8))}}static{this.\u0275dir=ht({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&yn("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[Ln([Bme]),Rn]})}}return n})();const as=new be(""),wc=new be("");function cj(n){return null!=n}function dj(n){return ky(n)?Pn(n):n}function hj(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function fj(n,e){return e.map(t=>t(n))}function pj(n){return n.map(e=>function Wme(n){return!n.validate}(e)?e:t=>e.validate(t))}function mM(n){return null!=n?function gj(n){if(!n)return null;const e=n.filter(cj);return 0==e.length?null:function(t){return hj(fj(t,e))}}(pj(n)):null}function _M(n){return null!=n?function mj(n){if(!n)return null;const e=n.filter(cj);return 0==e.length?null:function(t){return function Vme(...n){const e=MP(n),{args:t,keys:r}=BG(n),i=new an(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let l=o,u=o;for(let c=0;c<o;c++){let d=!1;no(t[c]).subscribe(le(s,f=>{d||(d=!0,u--),a[c]=f},()=>l--,void 0,()=>{(!l||!d)&&(u||s.next(r?HG(r,a):a),s.complete())}))}});return e?i.pipe($G(e)):i}(fj(t,e).map(dj)).pipe(we(hj))}}(pj(n)):null}function _j(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function yM(n){return n?Array.isArray(n)?n:[n]:[]}function jT(n,e){return Array.isArray(n)?n.includes(e):n===e}function Ej(n,e){const t=yM(e);return yM(n).forEach(i=>{jT(t,i)||t.push(i)}),t}function Cj(n,e){return yM(e).filter(t=>!jT(n,t))}class Ij{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=mM(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=_M(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Fs extends Ij{get formDirective(){return null}get path(){return null}}class Tc extends Ij{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class wj{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let ov=(()=>{class n extends wj{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(Ce(Tc,2))}}static{this.\u0275dir=ht({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&Vw("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Rn]})}}return n})(),Tj=(()=>{class n extends wj{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(Ce(Fs,10))}}static{this.\u0275dir=ht({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&Vw("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Rn]})}}return n})();const av="VALID",YT="INVALID",fg="PENDING",lv="DISABLED";function CM(n){return(QT(n)?n.validators:n)||null}function IM(n,e){return(QT(e)?e.asyncValidators:n)||null}function QT(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class wM{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===av}get invalid(){return this.status===YT}get pending(){return this.status==fg}get disabled(){return this.status===lv}get enabled(){return this.status!==lv}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Ej(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Ej(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Cj(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Cj(e,this._rawAsyncValidators))}hasValidator(e){return jT(this._rawValidators,e)}hasAsyncValidator(e){return jT(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=fg,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=lv,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=av,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===av||this.status===fg)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?lv:av}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=fg,this._hasOwnPendingAsyncValidator=!0;const t=dj(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new xn,this.statusChanges=new xn}_calculateStatus(){return this._allControlsDisabled()?lv:this.errors?YT:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(fg)?fg:this._anyControlsHaveStatus(YT)?YT:av}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){QT(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function Kme(n){return Array.isArray(n)?mM(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function Yme(n){return Array.isArray(n)?_M(n):n||null}(this._rawAsyncValidators)}}class TM extends wM{constructor(e,t,r){super(CM(t),IM(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function Sj(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new ce(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function Aj(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new ce(1e3,"");if(!r[t])throw new ce(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const ph=new be("CallSetDisabledState",{providedIn:"root",factory:()=>uv}),uv="always";function cv(n,e,t=uv){bM(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function Xme(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Dj(n,e)})}(n,e),function e_e(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Zme(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Dj(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Jme(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function ZT(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function bM(n,e){const t=function yj(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(_j(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function vj(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(_j(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();ZT(e._rawValidators,i),ZT(e._rawAsyncValidators,i)}function Dj(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const s_e={provide:Fs,useExisting:In(()=>tb)},dv=Promise.resolve();let tb=(()=>{class n extends Fs{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new xn,this.form=new TM({},mM(t),_M(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){dv.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),cv(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){dv.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){dv.then(()=>{const r=this._findContainer(t.path),i=new TM({});(function xj(n,e){bM(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){dv.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){dv.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function Rj(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||n)(Ce(as,10),Ce(wc,10),Ce(ph,8))}}static{this.\u0275dir=ht({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&yn("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:[Fn.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Ln([s_e]),Rn]})}}return n})();function Pj(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function Mj(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Nj=class extends wM{constructor(e=null,t,r){super(CM(t),IM(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),QT(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=Mj(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Pj(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Pj(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){Mj(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},l_e={provide:Tc,useExisting:In(()=>pg)},Fj=Promise.resolve();let pg=(()=>{class n extends Tc{constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new Nj,this._registered=!1,this.name="",this.update=new xn,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function DM(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===fh?t=s:function r_e(n){return Object.getPrototypeOf(n.constructor)===hh}(s)?r=s:i=s}),i||r||t||null}(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function SM(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){cv(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Fj.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&Wp(r);Fj.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function JT(n,e){return[...e.path,n]}(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(Ce(Fs,9),Ce(as,10),Ce(wc,10),Ce(ml,10),Ce(Oy,8),Ce(ph,8))}}static{this.\u0275dir=ht({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[Fn.None,"disabled","isDisabled"],model:[Fn.None,"ngModel","model"],options:[Fn.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Ln([l_e]),Rn,Ps]})}}return n})(),Lj=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=ht({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})();const xM=new be("");let t4=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Co({type:n})}static{this.\u0275inj=bs({})}}return n})(),gg=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:ph,useValue:t.callSetDisabledState??uv}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Co({type:n})}static{this.\u0275inj=bs({imports:[t4]})}}return n})(),nb=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:xM,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:ph,useValue:t.callSetDisabledState??uv}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Co({type:n})}static{this.\u0275inj=bs({imports:[t4]})}}return n})();const mh_apiKeyDeepSeek="sk-aa28be8659af435fbf999d56f20b5338",mh_firebaseConfig={apiKey:"AIzaSyBdgIkui4VLwWui6bdimqyyIcKAx-nt3mE",authDomain:"cl-angular-training.firebaseapp.com",databaseURL:"https://cl-angular-training-default-rtdb.europe-west1.firebasedatabase.app",projectId:"cl-angular-training",storageBucket:"cl-angular-training.firebasestorage.app",messagingSenderId:"807616859621",appId:"1:807616859621:web:cdbc4a6fe34825a494f30c",measurementId:"G-FDJWF6YG6C"};function FM(...n){const e=Wy(n),t=function Nfe(n,e){return"number"==typeof PP(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?no(r[0]):jp(t)(Pn(r,e)):xa}st(46);class N_e extends M{constructor(e=1/0,t=1/0,r=dM){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=t.now();let a=0;for(let l=1;l<r.length&&r[l]<=o;l+=2)a=l;a&&r.splice(0,a+1)}}}function n4(n={}){const{connector:e=(()=>new M),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,l,u=0,c=!1,d=!1;const f=()=>{a?.unsubscribe(),a=void 0},y=()=>{f(),o=l=void 0,c=d=!1},E=()=>{const I=o;y(),I?.unsubscribe()};return G((I,T)=>{u++,!d&&!c&&f();const P=l=l??e();T.add(()=>{u--,0===u&&!d&&!c&&(a=LM(E,i))}),P.subscribe(T),!o&&u>0&&(o=new sn({next:x=>P.next(x),error:x=>{d=!0,f(),a=LM(y,t,x),P.error(x)},complete:()=>{c=!0,f(),a=LM(y,r),P.complete()}}),no(I).subscribe(o))})(s)}}function LM(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new sn({next:()=>{r.unsubscribe(),n()}});return no(e(...t)).subscribe(r)}function r4(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,n4({connector:()=>new N_e(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function i4(n,e){return Qe(e)?Ei(()=>n,e):Ei(()=>n)}const s4=new be("angularfire2.auth.use-emulator"),o4=new be("angularfire2.auth.settings"),a4=new be("angularfire2.auth.tenant-id"),l4=new be("angularfire2.auth.langugage-code"),u4=new be("angularfire2.auth.use-device-language"),c4=new be("angularfire.auth.persistence"),d4=(n,e,t,r,i,s,o,a)=>Xq(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const l=e.runOutsideAngular(()=>n.auth());if(t&&l.useEmulator(...t),r&&(l.tenantId=r),l.languageCode=i,s&&l.useDeviceLanguage(),o)for(const[u,c]of Object.entries(o))l.settings[u]=c;return a&&l.setPersistence(a),l},[t,r,i,s,o,a]);let h4=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,s,o,a,l,u,c,d,f,y){const E=new M,I=rt(void 0).pipe(mc(o.outsideAngular),Ei(()=>s.runOutsideAngular(()=>Promise.resolve().then(st.bind(st,46)))),we(()=>pM(t,s,r)),we(T=>d4(T,s,a,u,c,d,l,f)),r4({bufferSize:1,refCount:!1}));if(ET(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=rt(null);else{I.pipe(_c()).subscribe();const T=I.pipe(Ei(V=>V.getRedirectResult().then(W=>W,()=>null)),Ec,r4({bufferSize:1,refCount:!1})),P=I.pipe(Ei(V=>new an(W=>({unsubscribe:s.runOutsideAngular(()=>V.onAuthStateChanged(K=>W.next(K),K=>W.error(K),()=>W.complete()))})))),x=I.pipe(Ei(V=>new an(W=>({unsubscribe:s.runOutsideAngular(()=>V.onIdTokenChanged(K=>W.next(K),K=>W.error(K),()=>W.complete()))}))));this.authState=T.pipe(i4(P),lh(o.outsideAngular),mc(o.insideAngular)),this.user=T.pipe(i4(x),lh(o.outsideAngular),mc(o.insideAngular)),this.idToken=this.user.pipe(Ei(V=>V?Pn(V.getIdToken()):rt(null))),this.idTokenResult=this.user.pipe(Ei(V=>V?Pn(V.getIdTokenResult()):rt(null))),this.credential=FM(T,E,this.authState.pipe(dl(V=>!V))).pipe(we(V=>V?.user?V:null),lh(o.outsideAngular),mc(o.insideAngular))}return((n,e,t,r={})=>new Proxy(n,{get:(i,s)=>t.runOutsideAngular(()=>{if(n[s])return r?.spy?.get&&r.spy.get(s,n[s]),n[s];if(Rme.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(a=>{const l=a?.[s];return"function"==typeof l?l.bind(a):l?.then?l.then(u=>t.run(()=>u)):t.run(()=>l)});return new Proxy(()=>{},{get:(a,l)=>o[l],apply:(a,l,u)=>o.then(c=>{const d=c?.(...u);return r?.spy?.apply&&r.spy.apply(s,u,d),d})})})}))(this,I,s,{spy:{apply:(T,P,x)=>{(T.startsWith("signIn")||T.startsWith("createUser"))&&x.then(V=>E.next(V))}}})}static \u0275fac=function(r){return new(r||n)(xe(WT),xe(GT,8),xe(Ao),xe(Yt),xe(dg),xe(s4,8),xe(o4,8),xe(a4,8),xe(l4,8),xe(u4,8),xe(c4,8),xe(sv,8))};static \u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();function V_e(n,e){return n===e}var _l=st(779),L=st(401),ro=st(398);const f4="@firebase/database";let VM="";function UM(n){VM=n}class U_e{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,L.As)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,L.$L)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class B_e{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,L.gR)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const g4=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new U_e(e)}}catch{}return new B_e},_h=g4("localStorage"),BM=g4("sessionStorage"),mg=new ro.Vy("@firebase/database"),m4=function(){let n=1;return function(){return n++}}(),_4=function(n){const e=(0,L.kj)(n),t=new L.gz;t.update(e);const r=t.digest();return L.K3.encodeByteArray(r)},hv=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=hv.apply(null,r):e+="object"==typeof r?(0,L.As)(r):r,e+=" "}return e};let yh=null,y4=!0;const v4=function(n,e){(0,L.vA)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(mg.logLevel=ro.$b.VERBOSE,yh=mg.log.bind(mg),e&&BM.set("logging_enabled",!0)):"function"==typeof n?yh=n:(yh=null,BM.remove("logging_enabled"))},Fi=function(...n){if(!0===y4&&(y4=!1,null===yh&&!0===BM.get("logging_enabled")&&v4(!0)),yh){const e=hv.apply(null,n);yh(e)}},fv=function(n){return function(...e){Fi(n,...e)}},$M=function(...n){const e="FIREBASE INTERNAL ERROR: "+hv(...n);mg.error(e)},yl=function(...n){const e=`FIREBASE FATAL ERROR: ${hv(...n)}`;throw mg.error(e),new Error(e)},ls=function(...n){const e="FIREBASE WARNING: "+hv(...n);mg.warn(e)},rb=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},bc="[MIN_NAME]",su="[MAX_NAME]",vh=function(n,e){if(n===e)return 0;if(n===bc||e===su)return-1;if(e===bc||n===su)return 1;{const t=I4(n),r=I4(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},z_e=function(n,e){return n===e?0:n<e?-1:1},pv=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,L.As)(e))},HM=function(n){if("object"!=typeof n||null===n)return(0,L.As)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,L.As)(e[r]),t+=":",t+=HM(n[e[r]]);return t+="}",t},E4=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Li(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const C4=function(n){(0,L.vA)(!rb(n),"Invalid JSON number");const r=1023;let i,s,o,a,l;0===n?(s=0,o=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=a+r,o=Math.round(n*Math.pow(2,52-a)-Math.pow(2,52))):(s=0,o=Math.round(n/Math.pow(2,-1074))));const u=[];for(l=52;l;l-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(l=11;l;l-=1)u.push(s%2?1:0),s=Math.floor(s/2);u.push(i?1:0),u.reverse();const c=u.join("");let d="";for(l=0;l<64;l+=8){let f=parseInt(c.substr(l,8),2).toString(16);1===f.length&&(f="0"+f),d+=f}return d.toLowerCase()},j_e=new RegExp("^-?(0*)\\d{1,10}$"),I4=function(n){if(j_e.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},_g=function(n){try{n()}catch(e){setTimeout(()=>{throw ls("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},gv=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class J_e{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){ls(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class X_e{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Fi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ls(e)}}let mv=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const S4=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,R4="websocket",P4="long_polling";class WM{constructor(e,t,r,i,s=!1,o="",a=!1,l=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=_h.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&_h.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function M4(n,e,t){let r;if((0,L.vA)("string"==typeof e,"typeof type must == string"),(0,L.vA)("object"==typeof t,"typeof params must == object"),e===R4)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==P4)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function Z_e(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Li(t,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}class eye{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,L.gR)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,L.A4)(this.counters_)}}const GM={},qM={};function jM(n){const e=n.toString();return GM[e]||(GM[e]=new eye),GM[e]}class nye{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&_g(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Ac{constructor(e,t,r,i,s,o,a){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=fv(e),this.stats_=jM(t),this.urlFn=l=>(this.appCheckToken&&(l.ac=this.appCheckToken),M4(t,P4,l))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new nye(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,L.$g)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new KM((...s)=>{const[o,a,l,u,c]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===o)this.id=a,this.password=l;else{if("close"!==o)throw new Error("Unrecognized command received: "+o);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&S4.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ac.forceAllow_=!0}static forceDisallow(){Ac.forceDisallow_=!0}static isAvailable(){return!((0,L.$g)()||!Ac.forceAllow_&&(Ac.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,L.As)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,L.KA)(t),i=E4(r,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,L.$g)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,L.As)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class KM{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,L.$g)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=m4(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=KM.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Fi("frame writing exception"),a.stack&&Fi(a.stack),Fi(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Fi("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const o=this.pendingSegs.shift();r=r+"&seg"+i+"="+o.seg+"&ts"+i+"="+o.ts+"&d"+i+"="+o.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,L.$g)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Fi("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let sb=null;typeof MozWebSocket<"u"?sb=MozWebSocket:typeof WebSocket<"u"&&(sb=WebSocket);let yg=(()=>{class n{constructor(t,r,i,s,o,a,l){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=fv(this.connId),this.stats_=jM(r),this.connURL=n.connectionURL_(r,a,l,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,o){const a={v:"5"};return!(0,L.$g)()&&typeof location<"u"&&location.hostname&&S4.test(location.hostname)&&(a.r="f"),r&&(a.s=r),i&&(a.ls=i),s&&(a.ac=s),o&&(a.p=o),M4(t,R4,a)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,_h.set("previous_websocket_failure",!0);try{let i;if((0,L.$g)()){i={headers:{"User-Agent":`Firebase/5/${VM}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const o=process.env,a=0===this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new sb(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==sb&&!n.forceDisallow_}static previouslyFailed(){return _h.isInMemoryStorage||!0===_h.get("previous_websocket_failure")}markConnectionHealthy(){_h.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,L.$L)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,L.vA)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,L.As)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=E4(r,16384);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),U4=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Ac,yg]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=yg&&yg.isAvailable();let i=r&&!yg.previouslyFailed();if(t.webSocketOnly&&(r||ls("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[yg];else{const s=this.transports_=[];for(const o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class q4{constructor(e,t,r,i,s,o,a,l,u,c){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=u,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=fv("c:"+this.id+":"),this.transportManager_=new U4(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=gv(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=pv("t",e),r=pv("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=pv("t",e),r=pv("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=pv("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?$M("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):$M("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&ls("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),gv(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):gv(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(_h.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class j4{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class K4{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,L.vA)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context))return void i.splice(s,1)}validateEventType_(e){(0,L.vA)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class ob extends K4{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,L.jZ)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new ob}getInitialEvent(e){return(0,L.vA)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Tn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function fn(){return new Tn("")}function $t(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Sc(n){return n.pieces_.length-n.pieceNum_}function qn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Tn(n.pieces_,e)}function QM(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function _v(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function J4(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Tn(e,0)}function vr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Tn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Tn(t,0)}function Ht(n){return n.pieceNum_>=n.pieces_.length}function Ls(n,e){const t=$t(n),r=$t(e);if(null===t)return e;if(t===r)return Ls(qn(n),qn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function Tye(n,e){const t=_v(n,0),r=_v(e,0);for(let i=0;i<t.length&&i<r.length;i++){const s=vh(t[i],r[i]);if(0!==s)return s}return t.length===r.length?0:t.length<r.length?-1:1}function JM(n,e){if(Sc(n)!==Sc(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function ea(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Sc(n)>Sc(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class bye{constructor(e,t){this.errorPrefix_=t,this.parts_=_v(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,L.OE)(this.parts_[r]);X4(this)}}function X4(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Eh(n))}function Eh(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class XM extends K4{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new XM}getInitialEvent(e){return(0,L.vA)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const yv=1e3;let lb,Ch=(()=>{class n extends j4{constructor(t,r,i,s,o,a,l,u){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=u,this.id=n.nextPersistentConnectionId_++,this.log_=fv("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=yv,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u&&!(0,L.$g)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");XM.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&ob.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const s=++this.requestNumber_,o={r:s,a:t,b:r};this.log_((0,L.As)(o)),(0,L.vA)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const r=new L.cY,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{const l=a.d;"ok"===a.s?r.resolve(l):r.reject(l)}};return this.outstandingGets_.push(s),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,s){this.initConnection_();const o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),(0,L.vA)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,L.vA)(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");const l={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(a).set(o,l),this.connected_&&this.sendListen_(l)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);const o={p:i};t.tag&&(o.q=r._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest("q",o,l=>{const u=l.d,c=l.s;n.warnOnListenWarnings_(u,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",l),"ok"!==c&&this.removeListen_(i,s),t.onComplete&&t.onComplete(c,u))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,L.gR)(t,"w")){const i=(0,L.yw)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();ls(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,L.qc)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,L.Cv)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{const o=s.s,a=s.d||"error";this.authToken_===t&&("ok"===o?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),(0,L.vA)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);const o={p:t};s&&(o.q=i,o.t=s),this.sendRequest("n",o)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){const o={p:r,d:i};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,o){this.initConnection_();const a={p:r,d:i};void 0!==o&&(a.h=o),this.outstandingPuts_.push({action:t,request:a,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,L.As)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):$M("Unrecognized action received from server: "+(0,L.As)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,L.vA)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=yv,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=yv,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=yv),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,b.A)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),o=t.id+":"+n.nextConnectionId_++,a=t.lastSessionId;let l=!1,u=null;const c=function(){u?u.close():(l=!0,s())};t.realtime_={close:c,sendRequest:function(y){(0,L.vA)(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(y)}};const f=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[y,E]=yield Promise.all([t.authTokenProvider_.getToken(f),t.appCheckTokenProvider_.getToken(f)]);l?Fi("getToken() completed but was canceled"):(Fi("getToken() completed. Creating connection."),t.authToken_=y&&y.accessToken,t.appCheckToken_=E&&E.token,u=new q4(o,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,s,I=>{ls(I+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},a))}catch(y){t.log_("Failed to get token: "+y),l||(t.repoInfo_.nodeAdmin&&ls(y),c())}}})()}interrupt(t){Fi("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Fi("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,L.Im)(this.interruptReasons_)&&(this.reconnectDelay_=yv,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(o=>HM(o)).join("$"):"default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){const i=new Tn(t).toString();let s;if(this.listens.has(i)){const o=this.listens.get(i);s=o.get(r),o.delete(r),0===o.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){Fi("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Fi("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,L.$g)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+VM.replace(/\./g,"-")]=1,(0,L.jZ)()?t["framework.cordova"]=1:(0,L.lV)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=ob.getInstance().currentlyOnline();return(0,L.Im)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Wt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Wt(e,t)}}class ab{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Wt(bc,e),i=new Wt(bc,t);return 0!==this.compare(r,i)}minPost(){return Wt.MIN}}class t3 extends ab{static get __EMPTY_NODE(){return lb}static set __EMPTY_NODE(e){lb=e}compare(e,t){return vh(e.name,t.name)}isDefinedOn(e){throw(0,L.Hk)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Wt.MIN}maxPost(){return new Wt(su,lb)}makePost(e,t){return(0,L.vA)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Wt(e,lb)}toString(){return".key"}}const vl=new t3;class ub{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,i&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let eN,Ma=(()=>{class n{constructor(t,r,i,s,o){this.key=t,this.value=r,this.color=i??n.RED,this.left=s??io.EMPTY_NODE,this.right=o??io.EMPTY_NODE}copy(t,r,i,s,o){return new n(t??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this;const o=i(t,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(t,r,i),null):0===o?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return io.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return io.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class io{constructor(e,t=io.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new io(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Ma.BLACK,null,null))}remove(e){return new io(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ma.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ub(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new ub(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new ub(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new ub(this.root_,null,this.comparator_,!0,e)}}function Nye(n,e){return vh(n.name,e.name)}function ZM(n,e){return vh(n,e)}io.EMPTY_NODE=new class Mye{copy(e,t,r,i,s){return this}insert(e,t,r){return new Ma(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const n3=function(n){return"number"==typeof n?"number:"+C4(n):"string:"+n},r3=function(n){if(n.isLeafNode()){const e=n.val();(0,L.vA)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,L.gR)(e,".sv"),"Priority must be a string or number.")}else(0,L.vA)(n===eN||n.isEmpty(),"priority of unexpected type.");(0,L.vA)(n===eN||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let i3,s3,o3,vg=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,L.vA)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),r3(this.priorityNode_)}static set __childrenNodeConstructor(t){i3=t}static get __childrenNodeConstructor(){return i3}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Ht(t)?this:".priority"===$t(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=$t(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,L.vA)(".priority"!==i||1===Sc(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(qn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+n3(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?C4(this.value_):this.value_,this.lazyHash_=_4(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,L.vA)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),o=n.VALUE_TYPE_ORDER.indexOf(i);return(0,L.vA)(s>=0,"Unknown leaf type: "+r),(0,L.vA)(o>=0,"Unknown leaf type: "+i),s===o?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const nr=new class Lye extends ab{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return 0===s?vh(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Wt.MIN}maxPost(){return new Wt(su,new vg("[PRIORITY-POST]",o3))}makePost(e,t){const r=s3(e);return new Wt(t,new vg("[PRIORITY-POST]",r))}toString(){return".priority"}},Vye=Math.log(2);class Uye{constructor(e){this.count=parseInt(Math.log(e+1)/Vye,10),this.current_=this.count-1;const i=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const cb=function(n,e,t,r){n.sort(e);const i=function(l,u){const c=u-l;let d,f;if(0===c)return null;if(1===c)return d=n[l],f=t?t(d):d,new Ma(f,d.node,Ma.BLACK,null,null);{const y=parseInt(c/2,10)+l,E=i(l,y),I=i(y+1,u);return d=n[y],f=t?t(d):d,new Ma(f,d.node,Ma.BLACK,E,I)}},a=function(l){let u=null,c=null,d=n.length;const f=function(E,I){const T=d-E,P=d;d-=E;const x=i(T+1,P),V=n[T],W=t?t(V):V;y(new Ma(W,V.node,I,null,x))},y=function(E){u?(u.left=E,u=E):(c=E,u=E)};for(let E=0;E<l.count;++E){const I=l.nextBitIsOne(),T=Math.pow(2,l.count-(E+1));I?f(T,Ma.BLACK):(f(T,Ma.BLACK),f(T,Ma.RED))}return c}(new Uye(n.length));return new io(r||e,a)};let tN;const Eg={};class ou{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,L.vA)(Eg&&nr,"ChildrenNode.ts has not been loaded"),tN=tN||new ou({".priority":Eg},{".priority":nr}),tN}get(e){const t=(0,L.yw)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof io?t:null}hasIndex(e){return(0,L.gR)(this.indexSet_,e.toString())}addIndex(e,t){(0,L.vA)(e!==vl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=t.getIterator(Wt.Wrap);let a,o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();a=i?cb(r,e.getCompare()):Eg;const l=e.toString(),u=Object.assign({},this.indexSet_);u[l]=e;const c=Object.assign({},this.indexes_);return c[l]=a,new ou(c,u)}addToIndexes(e,t){const r=(0,L.kH)(this.indexes_,(i,s)=>{const o=(0,L.yw)(this.indexSet_,s);if((0,L.vA)(o,"Missing index implementation for "+s),i===Eg){if(o.isDefinedOn(e.node)){const a=[],l=t.getIterator(Wt.Wrap);let u=l.getNext();for(;u;)u.name!==e.name&&a.push(u),u=l.getNext();return a.push(e),cb(a,o.getCompare())}return Eg}{const a=t.get(e.name);let l=i;return a&&(l=l.remove(new Wt(e.name,a))),l.insert(e,e.node)}});return new ou(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,L.kH)(this.indexes_,i=>{if(i===Eg)return i;{const s=t.get(e.name);return s?i.remove(new Wt(e.name,s)):i}});return new ou(r,this.indexSet_)}}let vv,St=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&r3(this.priorityNode_),this.children_.isEmpty()&&(0,L.vA)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return vv||(vv=new n(new io(ZM),null,ou.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||vv}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?vv:r}}getChild(t){const r=$t(t);return null===r?this:this.getImmediateChild(r).getChild(qn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,L.vA)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new Wt(t,r);let s,o;r.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),o=this.indexMap_.addToIndexes(i,this.children_));const a=s.isEmpty()?vv:this.priorityNode_;return new n(s,a,o)}}updateChild(t,r){const i=$t(t);if(null===i)return r;{(0,L.vA)(".priority"!==$t(t)||1===Sc(t),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(qn(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,s=0,o=!0;if(this.forEachChild(nr,(a,l)=>{r[a]=l.val(t),i++,o&&n.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!t&&o&&s<2*i){const a=[];for(const l in r)a[l]=r[l];return a}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+n3(this.getPriority().val())+":"),this.forEachChild(nr,(r,i)=>{const s=i.hash();""!==s&&(t+=":"+r+":"+s)}),this.lazyHash_=""===t?"":_4(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const s=this.resolveIndex_(i);if(s){const o=s.getPredecessorKey(new Wt(t,r));return o?o.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Wt(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Wt(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,Wt.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,Wt.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Ev?-1:0}withIndex(t){if(t===vl||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===vl||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(nr),s=r.getIterator(nr);let o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return null===o&&null===a}return!1}return!1}}resolveIndex_(t){return t===vl?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const Ev=new class Bye extends St{constructor(){super(new io(ZM),St.EMPTY_NODE,ou.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return St.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Wt,{MIN:{value:new Wt(bc,St.EMPTY_NODE)},MAX:{value:new Wt(su,Ev)}}),t3.__EMPTY_NODE=St.EMPTY_NODE,vg.__childrenNodeConstructor=St,function kye(n){eN=n}(Ev),function Fye(n){o3=n}(Ev);const $ye=!0;function xr(n,e=null){if(null===n)return St.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,L.vA)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new vg(n,xr(e));if(n instanceof Array||!$ye){let t=St.EMPTY_NODE;return Li(n,(r,i)=>{if((0,L.gR)(n,r)&&"."!==r.substring(0,1)){const s=xr(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(xr(e))}{const t=[];let r=!1;if(Li(n,(o,a)=>{if("."!==o.substring(0,1)){const l=xr(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),t.push(new Wt(o,l)))}}),0===t.length)return St.EMPTY_NODE;const s=cb(t,Nye,o=>o.name,ZM);if(r){const o=cb(t,nr.getCompare());return new St(s,xr(e),new ou({".priority":o},{".priority":nr}))}return new St(s,xr(e),ou.Default)}}!function Oye(n){s3=n}(xr);class nN extends ab{constructor(e){super(),this.indexPath_=e,(0,L.vA)(!Ht(e)&&".priority"!==$t(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return 0===s?vh(e.name,t.name):s}makePost(e,t){const r=xr(e),i=St.EMPTY_NODE.updateChild(this.indexPath_,r);return new Wt(t,i)}maxPost(){const e=St.EMPTY_NODE.updateChild(this.indexPath_,Ev);return new Wt(su,e)}toString(){return _v(this.indexPath_,0).join("/")}}const rN=new class Hye extends ab{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?vh(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Wt.MIN}maxPost(){return Wt.MAX}makePost(e,t){const r=xr(e);return new Wt(t,r)}toString(){return".value"}};function a3(n){return{type:"value",snapshotNode:n}}function Cg(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Cv(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Iv(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class iN{constructor(e){this.index_=e}updateChild(e,t,r,i,s,o){(0,L.vA)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(t);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(null!=o&&(r.isEmpty()?e.hasChild(t)?o.trackChildChange(Cv(t,a)):(0,L.vA)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Cg(t,r)):o.trackChildChange(Iv(t,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(nr,(i,s)=>{t.hasChild(i)||r.trackChildChange(Cv(i,s))}),t.isLeafNode()||t.forEachChild(nr,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(Iv(i,s,o))}else r.trackChildChange(Cg(i,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?St.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class wv{constructor(e){this.indexedFilter_=new iN(e.getIndex()),this.index_=e.getIndex(),this.startPost_=wv.getStartPost_(e),this.endPost_=wv.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,s,o){return this.matches(new Wt(t,r))||(r=St.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,s,o)}updateFullNode(e,t,r){t.isLeafNode()&&(t=St.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(St.EMPTY_NODE);const s=this;return t.forEachChild(nr,(o,a)=>{s.matches(new Wt(o,a))||(i=i.updateImmediateChild(o,St.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class Wye{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new wv(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,s,o){return this.rangedFilter_.matches(new Wt(t,r))||(r=St.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,s,o):this.fullLimitUpdateChild_(e,t,r,s,o)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=St.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let s;i=St.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();if(this.withinDirectionalStart(a)){if(!this.withinDirectionalEnd(a))break;i=i.updateImmediateChild(a.name,a.node),o++}}}else{let s;i=t.withIndex(this.index_),i=i.updatePriority(St.EMPTY_NODE),s=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let o=0;for(;s.hasNext();){const a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,St.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,s){let o;if(this.reverse_){const d=this.index_.getCompare();o=(f,y)=>d(y,f)}else o=this.index_.getCompare();const a=e;(0,L.vA)(a.numChildren()===this.limit_,"");const l=new Wt(t,r),u=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),c=this.rangedFilter_.matches(l);if(a.hasChild(t)){const d=a.getImmediateChild(t);let f=i.getChildAfterChild(this.index_,u,this.reverse_);for(;null!=f&&(f.name===t||a.hasChild(f.name));)f=i.getChildAfterChild(this.index_,f,this.reverse_);const y=null==f?1:o(f,l);if(c&&!r.isEmpty()&&y>=0)return s?.trackChildChange(Iv(t,r,d)),a.updateImmediateChild(t,r);{s?.trackChildChange(Cv(t,d));const I=a.updateImmediateChild(t,St.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(s?.trackChildChange(Cg(f.name,f.node)),I.updateImmediateChild(f.name,f.node)):I}}return r.isEmpty()?e:c&&o(u,l)>=0?(null!=s&&(s.trackChildChange(Cv(u.name,u.node)),s.trackChildChange(Cg(t,r))),a.updateImmediateChild(t,r).updateImmediateChild(u.name,St.EMPTY_NODE)):e}}class db{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=nr}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,L.vA)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,L.vA)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:bc}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,L.vA)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,L.vA)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:su}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,L.vA)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===nr}copy(){const e=new db;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function sN(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function oN(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function hb(n,e){const t=n.copy();return t.index_=e,t}function l3(n){const e={};if(n.isDefault())return e;let t;if(n.index_===nr?t="$priority":n.index_===rN?t="$value":n.index_===vl?t="$key":((0,L.vA)(n.index_ instanceof nN,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,L.As)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,L.As)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,L.As)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,L.As)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,L.As)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function u3(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==nr&&(e.i=n.index_.toString()),e}class fb extends j4{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=fv("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,L.vA)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=fb.getListenId_(e,r),a={};this.listens_[o]=a;const l=l3(e._queryParams);this.restRequest_(s+".json",l,(u,c)=>{let d=c;if(404===u&&(d=null,u=null),null===u&&this.onDataUpdate_(s,d,!1,r),(0,L.yw)(this.listens_,o)===a){let f;f=u?401===u?"permission_denied":"rest_error:"+u:"ok",i(f,null)}})}unlisten(e,t){const r=fb.getListenId_(e,t);delete this.listens_[r]}get(e){const t=l3(e._queryParams),r=e._path.toString(),i=new L.cY;return this.restRequest_(r+".json",t,(s,o)=>{let a=o;404===s&&(a=null,s=null),null===s?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,L.Am)(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=(0,L.$L)(a.responseText)}catch{ls("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else 401!==a.status&&404!==a.status&&ls("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}class Qye{constructor(){this.rootNode_=St.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function pb(){return{value:null,children:new Map}}function Ig(n,e,t){if(Ht(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=$t(e);n.children.has(r)||n.children.set(r,pb()),Ig(n.children.get(r),e=qn(e),t)}}function aN(n,e){if(Ht(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(nr,(r,i)=>{Ig(n,new Tn(r),i)}),aN(n,e)}}if(n.children.size>0){const t=$t(e);return e=qn(e),n.children.has(t)&&aN(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function lN(n,e,t){null!==n.value?t(e,n.value):function Jye(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{lN(i,new Tn(e.toString()+"/"+r),t)})}class Xye{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Li(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class tve{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Xye(e);const r=1e4+2e4*Math.random();gv(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Li(e,(i,s)=>{s>0&&(0,L.gR)(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),gv(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var El=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(El||{});function dN(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class gb{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=El.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Ht(this.path)){if(null!=this.affectedTree.value)return(0,L.vA)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Tn(e));return new gb(fn(),t,this.revert)}}return(0,L.vA)($t(this.path)===e,"operationForChild called for unrelated child."),new gb(qn(this.path),this.affectedTree,this.revert)}}class Tv{constructor(e,t){this.source=e,this.path=t,this.type=El.LISTEN_COMPLETE}operationForChild(e){return Ht(this.path)?new Tv(this.source,fn()):new Tv(this.source,qn(this.path))}}class Ih{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=El.OVERWRITE}operationForChild(e){return Ht(this.path)?new Ih(this.source,fn(),this.snap.getImmediateChild(e)):new Ih(this.source,qn(this.path),this.snap)}}class wg{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=El.MERGE}operationForChild(e){if(Ht(this.path)){const t=this.children.subtree(new Tn(e));return t.isEmpty()?null:t.value?new Ih(this.source,fn(),t.value):new wg(this.source,fn(),t)}return(0,L.vA)($t(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new wg(this.source,qn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Dc{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ht(e))return this.isFullyInitialized()&&!this.filtered_;const t=$t(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class nve{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function bv(n,e,t,r,i,s){const o=r.filter(a=>a.type===t);o.sort((a,l)=>function sve(n,e,t){if(null==e.childName||null==t.childName)throw(0,L.Hk)("Should only compare child_ events.");const r=new Wt(e.childName,e.snapshotNode),i=new Wt(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,a,l)),o.forEach(a=>{const l=function ive(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,a,s);i.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(l,n.query_))})})}function mb(n,e){return{eventCache:n,serverCache:e}}function Av(n,e,t,r){return mb(new Dc(e,t,r),n.serverCache)}function d3(n,e,t,r){return mb(n.eventCache,new Dc(e,t,r))}function _b(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function wh(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let hN;class rr{constructor(e,t=(()=>(hN||(hN=new io(z_e)),hN))()){this.value=e,this.children=t}static fromObject(e){let t=new rr(null);return Li(e,(r,i)=>{t=t.set(new Tn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:fn(),value:this.value};if(Ht(e))return null;{const r=$t(e),i=this.children.get(r);if(null!==i){const s=i.findRootMostMatchingPathAndValue(qn(e),t);return null!=s?{path:vr(new Tn(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ht(e))return this;{const t=$t(e),r=this.children.get(t);return null!==r?r.subtree(qn(e)):new rr(null)}}set(e,t){if(Ht(e))return new rr(t,this.children);{const r=$t(e),s=(this.children.get(r)||new rr(null)).set(qn(e),t),o=this.children.insert(r,s);return new rr(this.value,o)}}remove(e){if(Ht(e))return this.children.isEmpty()?new rr(null):new rr(null,this.children);{const t=$t(e),r=this.children.get(t);if(r){const i=r.remove(qn(e));let s;return s=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&s.isEmpty()?new rr(null):new rr(this.value,s)}return this}}get(e){if(Ht(e))return this.value;{const t=$t(e),r=this.children.get(t);return r?r.get(qn(e)):null}}setTree(e,t){if(Ht(e))return t;{const r=$t(e),s=(this.children.get(r)||new rr(null)).setTree(qn(e),t);let o;return o=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new rr(this.value,o)}}fold(e){return this.fold_(fn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(vr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,fn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(Ht(e))return null;{const s=$t(e),o=this.children.get(s);return o?o.findOnPath_(qn(e),vr(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,fn(),t)}foreachOnPath_(e,t,r){if(Ht(e))return this;{this.value&&r(t,this.value);const i=$t(e),s=this.children.get(i);return s?s.foreachOnPath_(qn(e),vr(t,i),r):new rr(null)}}foreach(e){this.foreach_(fn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(vr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Na{constructor(e){this.writeTree_=e}static empty(){return new Na(new rr(null))}}function Sv(n,e,t){if(Ht(e))return new Na(new rr(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let s=r.value;const o=Ls(i,e);return s=s.updateChild(o,t),new Na(n.writeTree_.set(i,s))}{const i=new rr(t),s=n.writeTree_.setTree(e,i);return new Na(s)}}}function fN(n,e,t){let r=n;return Li(t,(i,s)=>{r=Sv(r,vr(e,i),s)}),r}function h3(n,e){if(Ht(e))return Na.empty();{const t=n.writeTree_.setTree(e,new rr(null));return new Na(t)}}function pN(n,e){return null!=Th(n,e)}function Th(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Ls(t.path,e)):null}function f3(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(nr,(r,i)=>{e.push(new Wt(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new Wt(r,i.value))}),e}function xc(n,e){if(Ht(e))return n;{const t=Th(n,e);return new Na(null!=t?new rr(t):n.writeTree_.subtree(e))}}function gN(n){return n.writeTree_.isEmpty()}function Tg(n,e){return p3(fn(),n.writeTree_,e)}function p3(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{".priority"===i?((0,L.vA)(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):t=p3(vr(n,i),s,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(vr(n,".priority"),r)),t}}function yb(n,e){return v3(e,n)}function dve(n,e){if(n.snap)return ea(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&ea(vr(n.path,t),e))return!0;return!1}function fve(n){return n.visible}function g3(n,e,t){let r=Na.empty();for(let i=0;i<n.length;++i){const s=n[i];if(e(s)){const o=s.path;let a;if(s.snap)ea(t,o)?(a=Ls(t,o),r=Sv(r,a,s.snap)):ea(o,t)&&(a=Ls(o,t),r=Sv(r,fn(),s.snap.getChild(a)));else{if(!s.children)throw(0,L.Hk)("WriteRecord should have .snap or .children");if(ea(t,o))a=Ls(t,o),r=fN(r,a,s.children);else if(ea(o,t))if(a=Ls(o,t),Ht(a))r=fN(r,fn(),s.children);else{const l=(0,L.yw)(s.children,$t(a));if(l){const u=l.getChild(qn(a));r=Sv(r,fn(),u)}}}}}return r}function m3(n,e,t,r,i){if(r||i){const s=xc(n.visibleWrites,e);return!i&&gN(s)?t:i||null!=t||pN(s,fn())?Tg(g3(n.allWrites,function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&(ea(u.path,e)||ea(e,u.path))},e),t||St.EMPTY_NODE):null}{const s=Th(n.visibleWrites,e);if(null!=s)return s;{const o=xc(n.visibleWrites,e);return gN(o)?t:null!=t||pN(o,fn())?Tg(o,t||St.EMPTY_NODE):null}}}function vb(n,e,t,r){return m3(n.writeTree,n.treePath,e,t,r)}function mN(n,e){return function pve(n,e,t){let r=St.EMPTY_NODE;const i=Th(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(nr,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(t){const s=xc(n.visibleWrites,e);return t.forEachChild(nr,(o,a)=>{const l=Tg(xc(s,new Tn(o)),a);r=r.updateImmediateChild(o,l)}),f3(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}return f3(xc(n.visibleWrites,e)).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}(n.writeTree,n.treePath,e)}function _3(n,e,t,r){return function gve(n,e,t,r,i){(0,L.vA)(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=vr(e,t);if(pN(n.visibleWrites,s))return null;{const o=xc(n.visibleWrites,s);return gN(o)?i.getChild(t):Tg(o,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function Eb(n,e){return function _ve(n,e){return Th(n.visibleWrites,e)}(n.writeTree,vr(n.treePath,e))}function _N(n,e,t){return function mve(n,e,t,r){const i=vr(e,t),s=Th(n.visibleWrites,i);return null!=s?s:r.isCompleteForChild(t)?Tg(xc(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function y3(n,e){return v3(vr(n.treePath,e),n.writeTree)}function v3(n,e){return{treePath:n,writeTree:e}}class Cve{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,L.vA)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,L.vA)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(r,Iv(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(r,Cv(r,i.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(r,Cg(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw(0,L.Hk)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,Iv(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const E3=new class Ive{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class yN{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Dc(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return _N(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:wh(this.viewCache_),s=function Eve(n,e,t,r,i,s){return function yve(n,e,t,r,i,s,o){let a;const l=xc(n.visibleWrites,e),u=Th(l,fn());if(null!=u)a=u;else{if(null==t)return[];a=Tg(l,t)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const c=[],d=o.getCompare(),f=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let y=f.getNext();for(;y&&c.length<i;)0!==d(y,r)&&c.push(y),y=f.getNext();return c}}(n.writeTree,n.treePath,e,t,r,i,s)}(this.writes_,i,t,1,r,e);return 0===s.length?null:s[0]}}function C3(n,e,t,r,i,s){const o=e.eventCache;if(null!=Eb(r,t))return e;{let a,l;if(Ht(t))if((0,L.vA)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=wh(e),d=mN(r,u instanceof St?u:St.EMPTY_NODE);a=n.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const u=vb(r,wh(e));a=n.filter.updateFullNode(e.eventCache.getNode(),u,s)}else{const u=$t(t);if(".priority"===u){(0,L.vA)(1===Sc(t),"Can't have a priority with additional path components");const c=o.getNode();l=e.serverCache.getNode();const d=_3(r,t,c,l);a=null!=d?n.filter.updatePriority(c,d):o.getNode()}else{const c=qn(t);let d;if(o.isCompleteForChild(u)){l=e.serverCache.getNode();const f=_3(r,t,o.getNode(),l);d=null!=f?o.getNode().getImmediateChild(u).updateChild(c,f):o.getNode().getImmediateChild(u)}else d=_N(r,u,e.serverCache);a=null!=d?n.filter.updateChild(o.getNode(),u,d,c,i,s):o.getNode()}}return Av(e,a,o.isFullyInitialized()||Ht(t),n.filter.filtersNodes())}}function Cb(n,e,t,r,i,s,o,a){const l=e.serverCache;let u;const c=o?n.filter:n.filter.getIndexedFilter();if(Ht(t))u=c.updateFullNode(l.getNode(),r,null);else if(c.filtersNodes()&&!l.isFiltered()){const y=l.getNode().updateChild(t,r);u=c.updateFullNode(l.getNode(),y,null)}else{const y=$t(t);if(!l.isCompleteForPath(t)&&Sc(t)>1)return e;const E=qn(t),T=l.getNode().getImmediateChild(y).updateChild(E,r);u=".priority"===y?c.updatePriority(l.getNode(),T):c.updateChild(l.getNode(),y,T,E,E3,null)}const d=d3(e,u,l.isFullyInitialized()||Ht(t),c.filtersNodes());return C3(n,d,t,i,new yN(i,d,s),a)}function vN(n,e,t,r,i,s,o){const a=e.eventCache;let l,u;const c=new yN(i,e,s);if(Ht(t))u=n.filter.updateFullNode(e.eventCache.getNode(),r,o),l=Av(e,u,!0,n.filter.filtersNodes());else{const d=$t(t);if(".priority"===d)u=n.filter.updatePriority(e.eventCache.getNode(),r),l=Av(e,u,a.isFullyInitialized(),a.isFiltered());else{const f=qn(t),y=a.getNode().getImmediateChild(d);let E;if(Ht(f))E=r;else{const I=c.getCompleteChild(d);E=null!=I?".priority"===QM(f)&&I.getChild(J4(f)).isEmpty()?I:I.updateChild(f,r):St.EMPTY_NODE}l=y.equals(E)?e:Av(e,n.filter.updateChild(a.getNode(),d,E,f,c,o),a.isFullyInitialized(),n.filter.filtersNodes())}}return l}function I3(n,e){return n.eventCache.isCompleteForChild(e)}function w3(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function EN(n,e,t,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let u,l=e;u=Ht(t)?r:new rr(null).setTree(t,r);const c=e.serverCache.getNode();return u.children.inorderTraversal((d,f)=>{if(c.hasChild(d)){const E=w3(0,e.serverCache.getNode().getImmediateChild(d),f);l=Cb(n,l,new Tn(d),E,i,s,o,a)}}),u.children.inorderTraversal((d,f)=>{const y=!e.serverCache.isCompleteForChild(d)&&null===f.value;if(!c.hasChild(d)&&!y){const I=w3(0,e.serverCache.getNode().getImmediateChild(d),f);l=Cb(n,l,new Tn(d),I,i,s,o,a)}}),l}class Pve{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new iN(r.getIndex()),s=function Gye(n){return n.loadsAllData()?new iN(n.getIndex()):n.hasLimit()?new Wye(n):new wv(n)}(r);this.processor_=function wve(n){return{filter:n}}(s);const o=t.serverCache,a=t.eventCache,l=i.updateFullNode(St.EMPTY_NODE,o.getNode(),null),u=s.updateFullNode(St.EMPTY_NODE,a.getNode(),null),c=new Dc(l,o.isFullyInitialized(),i.filtersNodes()),d=new Dc(u,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=mb(d,c),this.eventGenerator_=new nve(this.query_)}get query(){return this.query_}}function kve(n,e){const t=wh(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Ht(e)&&!t.getImmediateChild($t(e)).isEmpty())?t.getChild(e):null}function T3(n){return 0===n.eventRegistrations_.length}function b3(n,e,t){const r=[];if(t){(0,L.vA)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(t,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<n.eventRegistrations_.length;++s){const o=n.eventRegistrations_[s];if(o.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(s+1));break}}else i.push(o)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function A3(n,e,t,r){e.type===El.MERGE&&null!==e.source.queryId&&((0,L.vA)(wh(n.viewCache_),"We should always have a full cache before handling merges"),(0,L.vA)(_b(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,s=function bve(n,e,t,r,i){const s=new Cve;let o,a;if(t.type===El.OVERWRITE){const u=t;u.source.fromUser?o=vN(n,e,u.path,u.snap,r,i,s):((0,L.vA)(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!Ht(u.path),o=Cb(n,e,u.path,u.snap,r,i,a,s))}else if(t.type===El.MERGE){const u=t;u.source.fromUser?o=function Sve(n,e,t,r,i,s,o){let a=e;return r.foreach((l,u)=>{const c=vr(t,l);I3(e,$t(c))&&(a=vN(n,a,c,u,i,s,o))}),r.foreach((l,u)=>{const c=vr(t,l);I3(e,$t(c))||(a=vN(n,a,c,u,i,s,o))}),a}(n,e,u.path,u.children,r,i,s):((0,L.vA)(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),o=EN(n,e,u.path,u.children,r,i,a,s))}else if(t.type===El.ACK_USER_WRITE){const u=t;o=u.revert?function Rve(n,e,t,r,i,s){let o;if(null!=Eb(r,t))return e;{const a=new yN(r,e,i),l=e.eventCache.getNode();let u;if(Ht(t)||".priority"===$t(t)){let c;if(e.serverCache.isFullyInitialized())c=vb(r,wh(e));else{const d=e.serverCache.getNode();(0,L.vA)(d instanceof St,"serverChildren would be complete if leaf node"),c=mN(r,d)}u=n.filter.updateFullNode(l,c,s)}else{const c=$t(t);let d=_N(r,c,e.serverCache);null==d&&e.serverCache.isCompleteForChild(c)&&(d=l.getImmediateChild(c)),u=null!=d?n.filter.updateChild(l,c,d,qn(t),a,s):e.eventCache.getNode().hasChild(c)?n.filter.updateChild(l,c,St.EMPTY_NODE,qn(t),a,s):l,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=vb(r,wh(e)),o.isLeafNode()&&(u=n.filter.updateFullNode(u,o,s)))}return o=e.serverCache.isFullyInitialized()||null!=Eb(r,fn()),Av(e,u,o,n.filter.filtersNodes())}}(n,e,u.path,r,i,s):function Dve(n,e,t,r,i,s,o){if(null!=Eb(i,t))return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(null!=r.value){if(Ht(t)&&l.isFullyInitialized()||l.isCompleteForPath(t))return Cb(n,e,t,l.getNode().getChild(t),i,s,a,o);if(Ht(t)){let u=new rr(null);return l.getNode().forEachChild(vl,(c,d)=>{u=u.set(new Tn(c),d)}),EN(n,e,t,u,i,s,a,o)}return e}{let u=new rr(null);return r.foreach((c,d)=>{const f=vr(t,c);l.isCompleteForPath(f)&&(u=u.set(c,l.getNode().getChild(f)))}),EN(n,e,t,u,i,s,a,o)}}(n,e,u.path,u.affectedTree,r,i,s)}else{if(t.type!==El.LISTEN_COMPLETE)throw(0,L.Hk)("Unknown operation type: "+t.type);o=function xve(n,e,t,r,i){const s=e.serverCache;return C3(n,d3(e,s.getNode(),s.isFullyInitialized()||Ht(t),s.isFiltered()),t,r,E3,i)}(n,e,t.path,r,s)}const l=s.getChanges();return function Ave(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=_b(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(a3(_b(e)))}}(e,o,l),{viewCache:o,changes:l}}(n.processor_,i,e,t,r);return function Tve(n,e){(0,L.vA)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,L.vA)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,L.vA)(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,S3(n,s.changes,s.viewCache.eventCache.getNode(),null)}function S3(n,e,t,r){return function rve(n,e,t,r){const i=[],s=[];return e.forEach(o=>{"child_changed"===o.type&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(function zye(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(o.childName,o.snapshotNode))}),bv(n,i,"child_removed",e,r,t),bv(n,i,"child_added",e,r,t),bv(n,i,"child_moved",s,r,t),bv(n,i,"child_changed",e,r,t),bv(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let Ib,Tb;class D3{constructor(){this.views=new Map}}function CN(n,e,t,r){const i=e.source.queryId;if(null!==i){const s=n.views.get(i);return(0,L.vA)(null!=s,"SyncTree gave us an op for an invalid query."),A3(s,e,t,r)}{let s=[];for(const o of n.views.values())s=s.concat(A3(o,e,t,r));return s}}function x3(n,e,t,r,i){const o=n.views.get(e._queryIdentifier);if(!o){let a=vb(t,i?r:null),l=!1;a?l=!0:r instanceof St?(a=mN(t,r),l=!1):(a=St.EMPTY_NODE,l=!1);const u=mb(new Dc(a,l,!1),new Dc(r,i,!1));return new Pve(e,u)}return o}function R3(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Rc(n,e){let t=null;for(const r of n.views.values())t=t||kve(r,e);return t}function P3(n,e){return e._queryParams.loadsAllData()?wb(n):n.views.get(e._queryIdentifier)}function M3(n,e){return null!=P3(n,e)}function Pc(n){return null!=wb(n)}function wb(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let Wve=1;class N3{constructor(e){this.listenProvider_=e,this.syncPointTree_=new rr(null),this.pendingWriteTree_=function vve(){return{visibleWrites:Na.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function IN(n,e,t,r,i){return function ave(n,e,t,r,i){(0,L.vA)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Sv(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?bg(n,new Ih({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Mc(n,e,t=!1){const r=function uve(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function cve(n,e){const t=n.allWrites.findIndex(a=>a.writeId===e);(0,L.vA)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,o=n.allWrites.length-1;for(;i&&o>=0;){const a=n.allWrites[o];a.visible&&(o>=t&&dve(a,r.path)?i=!1:ea(r.path,a.path)&&(s=!0)),o--}return!!i&&(s?(function hve(n){n.visibleWrites=g3(n.allWrites,fve,fn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=h3(n.visibleWrites,r.path):Li(r.children,l=>{n.visibleWrites=h3(n.visibleWrites,vr(r.path,l))}),!0))}(n.pendingWriteTree_,e)){let s=new rr(null);return null!=r.snap?s=s.set(fn(),!0):Li(r.children,o=>{s=s.set(new Tn(o),!0)}),bg(n,new gb(r.path,s,t))}return[]}function Dv(n,e,t){return bg(n,new Ih({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function bb(n,e,t,r,i=!1){const s=e._path,o=n.syncPointTree_.get(s);let a=[];if(o&&("default"===e._queryIdentifier||M3(o,e))){const l=function $ve(n,e,t,r){const i=e._queryIdentifier,s=[];let o=[];const a=Pc(n);if("default"===i)for(const[l,u]of n.views.entries())o=o.concat(b3(u,t,r)),T3(u)&&(n.views.delete(l),u.query._queryParams.loadsAllData()||s.push(u.query));else{const l=n.views.get(i);l&&(o=o.concat(b3(l,t,r)),T3(l)&&(n.views.delete(i),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!Pc(n)&&s.push(new(function Vve(){return(0,L.vA)(Ib,"Reference.ts has not been loaded"),Ib}())(e._repo,e._path)),{removed:s,events:o}}(o,e,t,r);(function Uve(n){return 0===n.views.size})(o)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const u=l.removed;if(a=l.events,!i){const c=-1!==u.findIndex(f=>f._queryParams.loadsAllData()),d=n.syncPointTree_.findOnPath(s,(f,y)=>Pc(y));if(c&&!d){const f=n.syncPointTree_.subtree(s);if(!f.isEmpty()){const y=function Jve(n){return n.fold((e,t,r)=>{if(t&&Pc(t))return[wb(t)];{let i=[];return t&&(i=R3(t)),Li(r,(s,o)=>{i=i.concat(o)}),i}})}(f);for(let E=0;E<y.length;++E){const I=y[E],T=I.query,P=L3(n,I);n.listenProvider_.startListening(Rv(T),xv(n,T),P.hashFn,P.onComplete)}}}!d&&u.length>0&&!r&&(c?n.listenProvider_.stopListening(Rv(e),null):u.forEach(f=>{const y=n.queryToTagMap.get(Sb(f));n.listenProvider_.stopListening(Rv(f),y)}))}!function Xve(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=Sb(r),s=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(s)}}}(n,u)}return a}function k3(n,e,t,r){const i=TN(n,r);if(null!=i){const s=bN(i),o=s.path,a=s.queryId,l=Ls(o,e);return AN(n,o,new Ih(dN(a),l,t))}return[]}function wN(n,e,t,r=!1){const i=e._path;let s=null,o=!1;n.syncPointTree_.foreachOnPath(i,(f,y)=>{const E=Ls(f,i);s=s||Rc(y,E),o=o||Pc(y)});let l,a=n.syncPointTree_.get(i);a?(o=o||Pc(a),s=s||Rc(a,fn())):(a=new D3,n.syncPointTree_=n.syncPointTree_.set(i,a)),null!=s?l=!0:(l=!1,s=St.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((y,E)=>{const I=Rc(E,fn());I&&(s=s.updateImmediateChild(y,I))}));const u=M3(a,e);if(!u&&!e._queryParams.loadsAllData()){const f=Sb(e);(0,L.vA)(!n.queryToTagMap.has(f),"View does not exist, but we have a tag");const y=function Zve(){return Wve++}();n.queryToTagMap.set(f,y),n.tagToQueryMap.set(y,f)}let d=function Bve(n,e,t,r,i,s){const o=x3(n,e,r,i,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,o),function Ove(n,e){n.eventRegistrations_.push(e)}(o,t),function Fve(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(nr,(s,o)=>{r.push(Cg(s,o))}),t.isFullyInitialized()&&r.push(a3(t.getNode())),S3(n,r,t.getNode(),e)}(o,t)}(a,e,t,yb(n.pendingWriteTree_,i),s,l);if(!u&&!o&&!r){const f=P3(a,e);d=d.concat(function eEe(n,e,t){const r=e._path,i=xv(n,e),s=L3(n,t),o=n.listenProvider_.startListening(Rv(e),i,s.hashFn,s.onComplete),a=n.syncPointTree_.subtree(r);if(i)(0,L.vA)(!Pc(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((u,c,d)=>{if(!Ht(u)&&c&&Pc(c))return[wb(c).query];{let f=[];return c&&(f=f.concat(R3(c).map(y=>y.query))),Li(d,(y,E)=>{f=f.concat(E)}),f}});for(let u=0;u<l.length;++u){const c=l[u];n.listenProvider_.stopListening(Rv(c),xv(n,c))}}return o}(n,e,f))}return d}function Ab(n,e,t){const i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,a)=>{const u=Rc(a,Ls(o,e));if(u)return u});return m3(i,e,s,t,!0)}function bg(n,e){return O3(e,n.syncPointTree_,null,yb(n.pendingWriteTree_,fn()))}function O3(n,e,t,r){if(Ht(n.path))return F3(n,e,t,r);{const i=e.get(fn());null==t&&null!=i&&(t=Rc(i,fn()));let s=[];const o=$t(n.path),a=n.operationForChild(o),l=e.children.get(o);if(l&&a){const u=t?t.getImmediateChild(o):null,c=y3(r,o);s=s.concat(O3(a,l,u,c))}return i&&(s=s.concat(CN(i,n,r,t))),s}}function F3(n,e,t,r){const i=e.get(fn());null==t&&null!=i&&(t=Rc(i,fn()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=t?t.getImmediateChild(o):null,u=y3(r,o),c=n.operationForChild(o);c&&(s=s.concat(F3(c,a,l,u)))}),i&&(s=s.concat(CN(i,n,r,t))),s}function L3(n,e){const t=e.query,r=xv(n,t);return{hashFn:()=>(function Mve(n){return n.viewCache_.serverCache.getNode()}(e)||St.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function Kve(n,e,t){const r=TN(n,t);if(r){const i=bN(r),s=i.path,o=i.queryId,a=Ls(s,e);return AN(n,s,new Tv(dN(o),a))}return[]}(n,t._path,r):function jve(n,e){return bg(n,new Tv({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const s=function q_e(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return bb(n,t,null,s)}}}}function xv(n,e){const t=Sb(e);return n.queryToTagMap.get(t)}function Sb(n){return n._path.toString()+"$"+n._queryIdentifier}function TN(n,e){return n.tagToQueryMap.get(e)}function bN(n){const e=n.indexOf("$");return(0,L.vA)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Tn(n.substr(0,e))}}function AN(n,e,t){const r=n.syncPointTree_.get(e);return(0,L.vA)(r,"Missing sync point for query tag that we're tracking"),CN(r,t,yb(n.pendingWriteTree_,e),null)}function Rv(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function zve(){return(0,L.vA)(Tb,"Reference.ts has not been loaded"),Tb}())(n._repo,n._path):n}class SN{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new SN(t)}node(){return this.node_}}class DN{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=vr(this.path_,e);return new DN(this.syncTree_,t)}node(){return Ab(this.syncTree_,this.path_)}}const tEe=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},V3=function(n,e,t){return n&&"object"==typeof n?((0,L.vA)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?nEe(n[".sv"],e,t):"object"==typeof n[".sv"]?rEe(n[".sv"],e):void(0,L.vA)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},nEe=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,L.vA)(!1,"Unexpected server value: "+n)},rEe=function(n,e,t){n.hasOwnProperty("increment")||(0,L.vA)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,L.vA)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,L.vA)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return"number"!=typeof o?r:o+r},U3=function(n,e,t,r){return RN(e,new DN(t,n),r)},xN=function(n,e,t){return RN(n,new SN(e),t)};function RN(n,e,t){const r=n.getPriority().val(),i=V3(r,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const o=n,a=V3(o.getValue(),e,t);return a!==o.getValue()||i!==o.getPriority().val()?new vg(a,xr(i)):n}{const o=n;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new vg(i))),o.forEachChild(nr,(a,l)=>{const u=RN(l,e.getImmediateChild(a),t);u!==l&&(s=s.updateImmediateChild(a,u))}),s}}class PN{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function Db(n,e){let t=e instanceof Tn?e:new Tn(e),r=n,i=$t(t);for(;null!==i;){const s=(0,L.yw)(r.node.children,i)||{children:{},childCount:0};r=new PN(i,r,s),t=qn(t),i=$t(t)}return r}function bh(n){return n.node.value}function MN(n,e){n.node.value=e,NN(n)}function B3(n){return n.node.childCount>0}function xb(n,e){Li(n.node.children,(t,r)=>{e(new PN(t,n,r))})}function $3(n,e,t,r){t&&!r&&e(n),xb(n,i=>{$3(i,e,!0,r)}),t&&r&&e(n)}function Pv(n){return new Tn(null===n.parent?n.name:Pv(n.parent)+"/"+n.name)}function NN(n){null!==n.parent&&function oEe(n,e,t){const r=function iEe(n){return void 0===bh(n)&&!B3(n)}(t),i=(0,L.gR)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,NN(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,NN(n))}(n.parent,n.name,n)}const aEe=/[\[\].#$\/\u0000-\u001F\u007F]/,lEe=/[\[\].#$\u0000-\u001F\u007F]/,kN=10485760,Rb=function(n){return"string"==typeof n&&0!==n.length&&!aEe.test(n)},H3=function(n){return"string"==typeof n&&0!==n.length&&!lEe.test(n)},Mv=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!rb(n)||n&&"object"==typeof n&&(0,L.gR)(n,".sv")},Cl=function(n,e,t,r){r&&void 0===e||Nv((0,L.dI)(n,"value"),e,t)},Nv=function(n,e,t){const r=t instanceof Tn?new bye(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Eh(r));if("function"==typeof e)throw new Error(n+"contains a function "+Eh(r)+" with contents = "+e.toString());if(rb(e))throw new Error(n+"contains "+e.toString()+" "+Eh(r));if("string"==typeof e&&e.length>kN/3&&(0,L.OE)(e)>kN)throw new Error(n+"contains a string greater than "+kN+" utf8 bytes "+Eh(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,s=!1;if(Li(e,(o,a)=>{if(".value"===o)i=!0;else if(".priority"!==o&&".sv"!==o&&(s=!0,!Rb(o)))throw new Error(n+" contains an invalid key ("+o+") "+Eh(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Aye(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,L.OE)(e),X4(n)})(r,o),Nv(n,a,r),function Sye(n){const e=n.parts_.pop();n.byteLength_-=(0,L.OE)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&s)throw new Error(n+' contains ".value" child '+Eh(r)+" in addition to actual children.")}},W3=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,L.dI)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];Li(e,(o,a)=>{const l=new Tn(o);if(Nv(i,a,vr(t,l)),".priority"===QM(l)&&!Mv(a))throw new Error(i+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(l)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const s=_v(r);for(let o=0;o<s.length;o++)if((".priority"!==s[o]||o!==s.length-1)&&!Rb(s[o]))throw new Error(n+"contains an invalid key ("+s[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(Tye);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&ea(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,s)},ON=function(n,e,t){if(!t||void 0!==e){if(rb(e))throw new Error((0,L.dI)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Mv(e))throw new Error((0,L.dI)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},kv=function(n,e,t,r){if(!(r&&void 0===t||Rb(t)))throw new Error((0,L.dI)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Ov=function(n,e,t,r){if(!(r&&void 0===t||H3(t)))throw new Error((0,L.dI)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},dEe=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Ov(n,e,t,r)},ta=function(n,e){if(".info"===$t(e))throw new Error(n+" failed = Can't modify data under /.info/")},G3=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Rb(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),H3(n)}(t))throw new Error((0,L.dI)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class hEe{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Pb(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();null!==t&&!JM(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)}function q3(n,e,t){Pb(n,t),j3(n,r=>JM(r,e))}function Po(n,e,t){Pb(n,t),j3(n,r=>ea(r,e)||ea(e,r))}function j3(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(fEe(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function fEe(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();yh&&Fi("event: "+t.toString()),_g(r)}}}const K3="repo_interrupt",pEe=25;class gEe{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new hEe,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=pb(),this.transactionQueueTree_=new PN,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Y3(n){const t=n.infoData_.getNode(new Tn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Fv(n){return tEe({timestamp:Y3(n)})}function Q3(n,e,t,r,i){n.dataUpdateCount++;const s=new Tn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(i)if(r){const l=(0,L.kH)(t,u=>xr(u));o=function Yve(n,e,t,r){const i=TN(n,r);if(i){const s=bN(i),o=s.path,a=s.queryId,l=Ls(o,e),u=rr.fromObject(t);return AN(n,o,new wg(dN(a),l,u))}return[]}(n.serverSyncTree_,s,l,i)}else{const l=xr(t);o=k3(n.serverSyncTree_,s,l,i)}else if(r){const l=(0,L.kH)(t,u=>xr(u));o=function qve(n,e,t){const r=rr.fromObject(t);return bg(n,new wg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,s,l)}else{const l=xr(t);o=Dv(n.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=Sg(n,s)),Po(n.eventQueue_,a,o)}function J3(n,e){FN(n,"connected",e),!1===e&&function EEe(n){Ag(n,"onDisconnectEvents");const e=Fv(n),t=pb();lN(n.onDisconnect_,fn(),(i,s)=>{const o=U3(i,s,n.serverSyncTree_,e);Ig(t,i,o)});let r=[];lN(t,fn(),(i,s)=>{r=r.concat(Dv(n.serverSyncTree_,i,s));const o=BN(n,i);Sg(n,o)}),n.onDisconnect_=pb(),Po(n.eventQueue_,fn(),r)}(n)}function FN(n,e,t){const r=new Tn("/.info/"+e),i=xr(t);n.infoData_.updateSnapshot(r,i);const s=Dv(n.infoSyncTree_,r,i);Po(n.eventQueue_,r,s)}function Mb(n){return n.nextWriteId_++}function LN(n,e,t,r,i){Ag(n,"set",{path:e.toString(),value:t,priority:r});const s=Fv(n),o=xr(t,r),a=Ab(n.serverSyncTree_,e),l=xN(o,a,s),u=Mb(n),c=IN(n.serverSyncTree_,e,l,u,!0);Pb(n.eventQueue_,c),n.server_.put(e.toString(),o.val(!0),(f,y)=>{const E="ok"===f;E||ls("set at "+e+" failed: "+f);const I=Mc(n.serverSyncTree_,u,!E);Po(n.eventQueue_,e,I),Nc(0,i,f,y)});const d=BN(n,e);Sg(n,d),Po(n.eventQueue_,d,[])}function CEe(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&aN(n.onDisconnect_,e),Nc(0,t,r,i)})}function X3(n,e,t,r){const i=xr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(s,o)=>{"ok"===s&&Ig(n.onDisconnect_,e,i),Nc(0,r,s,o)})}function VN(n,e,t){let r;r=".info"===$t(e._path)?bb(n.infoSyncTree_,e,t):bb(n.serverSyncTree_,e,t),q3(n.eventQueue_,e._path,r)}function Z3(n){n.persistentConnection_&&n.persistentConnection_.interrupt(K3)}function Ag(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Fi(t,...e)}function Nc(n,e,t,r){e&&_g(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}function UN(n,e,t){return Ab(n.serverSyncTree_,e,t)||St.EMPTY_NODE}function Nb(n,e=n.transactionQueueTree_){if(e||kb(n,e),bh(e)){const t=t5(n,e);(0,L.vA)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function SEe(n,e,t){const r=t.map(u=>u.currentWriteId),i=UN(n,e,r);let s=i;const o=i.hash();for(let u=0;u<t.length;u++){const c=t[u];(0,L.vA)(0===c.status,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;const d=Ls(e,c.path);s=s.updateChild(d,c.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;n.server_.put(l.toString(),a,u=>{Ag(n,"transaction put response",{path:l.toString(),status:u});let c=[];if("ok"===u){const d=[];for(let f=0;f<t.length;f++)t[f].status=2,c=c.concat(Mc(n.serverSyncTree_,t[f].currentWriteId)),t[f].onComplete&&d.push(()=>t[f].onComplete(null,!0,t[f].currentOutputSnapshotResolved)),t[f].unwatcher();kb(n,Db(n.transactionQueueTree_,e)),Nb(n,n.transactionQueueTree_),Po(n.eventQueue_,e,c);for(let f=0;f<d.length;f++)_g(d[f])}else{if("datastale"===u)for(let d=0;d<t.length;d++)t[d].status=3===t[d].status?4:0;else{ls("transaction at "+l.toString()+" failed: "+u);for(let d=0;d<t.length;d++)t[d].status=4,t[d].abortReason=u}Sg(n,e)}},o)}(n,Pv(e),t)}else B3(e)&&xb(e,t=>{Nb(n,t)})}function Sg(n,e){const t=e5(n,e),r=Pv(t);return function DEe(n,e,t){if(0===e.length)return;const r=[];let i=[];const o=e.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],u=Ls(t,l.path);let d,c=!1;if((0,L.vA)(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)c=!0,d=l.abortReason,i=i.concat(Mc(n.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=pEe)c=!0,d="maxretry",i=i.concat(Mc(n.serverSyncTree_,l.currentWriteId,!0));else{const f=UN(n,l.path,o);l.currentInputSnapshot=f;const y=e[a].update(f.val());if(void 0!==y){Nv("transaction failed: Data returned ",y,l.path);let E=xr(y);"object"==typeof y&&null!=y&&(0,L.gR)(y,".priority")||(E=E.updatePriority(f.getPriority()));const T=l.currentWriteId,P=Fv(n),x=xN(E,f,P);l.currentOutputSnapshotRaw=E,l.currentOutputSnapshotResolved=x,l.currentWriteId=Mb(n),o.splice(o.indexOf(T),1),i=i.concat(IN(n.serverSyncTree_,l.path,x,l.currentWriteId,l.applyLocally)),i=i.concat(Mc(n.serverSyncTree_,T,!0))}else c=!0,d="nodata",i=i.concat(Mc(n.serverSyncTree_,l.currentWriteId,!0))}Po(n.eventQueue_,t,i),i=[],c&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===d?()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot):()=>e[a].onComplete(new Error(d),!1,null)))}kb(n,n.transactionQueueTree_);for(let a=0;a<r.length;a++)_g(r[a]);Nb(n,n.transactionQueueTree_)}(n,t5(n,t),r),r}function e5(n,e){let t,r=n.transactionQueueTree_;for(t=$t(e);null!==t&&void 0===bh(r);)r=Db(r,t),t=$t(e=qn(e));return r}function t5(n,e){const t=[];return n5(n,e,t),t.sort((r,i)=>r.order-i.order),t}function n5(n,e,t){const r=bh(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);xb(e,i=>{n5(n,i,t)})}function kb(n,e){const t=bh(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,MN(e,t.length>0?t:void 0)}xb(e,r=>{kb(n,r)})}function BN(n,e){const t=Pv(e5(n,e)),r=Db(n.transactionQueueTree_,e);return function sEe(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{$N(n,i)}),$N(n,r),$3(r,i=>{$N(n,i)}),t}function $N(n,e){const t=bh(e);if(t){const r=[];let i=[],s=-1;for(let o=0;o<t.length;o++)3===t[o].status||(1===t[o].status?((0,L.vA)(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):((0,L.vA)(0===t[o].status,"Unexpected transaction status in abort"),t[o].unwatcher(),i=i.concat(Mc(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&r.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));-1===s?MN(e,void 0):t.length=s+1,Po(n.eventQueue_,Pv(e),i);for(let o=0;o<r.length;o++)_g(r[o])}}const HN=function(n,e){const t=PEe(n),r=t.namespace;return"firebase.com"===t.domain&&yl(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&yl("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ls("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new WM(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Tn(t.pathString)}},PEe=function(n){let e="",t="",r="",i="",s="",o=!0,a="https",l=443;if("string"==typeof n){let u=n.indexOf("//");u>=0&&(a=n.substring(0,u-1),n=n.substring(u+2));let c=n.indexOf("/");-1===c&&(c=n.length);let d=n.indexOf("?");-1===d&&(d=n.length),e=n.substring(0,Math.min(c,d)),c<d&&(i=function xEe(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(c,d)));const f=function REe(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ls(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,d)));u=e.indexOf(":"),u>=0?(o="https"===a||"wss"===a,l=parseInt(e.substring(u+1),10)):u=e.length;const y=e.slice(0,u);if("localhost"===y.toLowerCase())t="localhost";else if(y.split(".").length<=2)t=y;else{const E=e.indexOf(".");r=e.substring(0,E).toLowerCase(),t=e.substring(E+1),s=r}"ns"in f&&(s=f.ns)}return{host:e,port:l,domain:t,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}},r5="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",MEe=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const s=new Array(8);for(i=7;i>=0;i--)s[i]=r5.charAt(t%64),t=Math.floor(t/64);(0,L.vA)(0===t,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)o+=r5.charAt(e[i]);return(0,L.vA)(20===o.length,"nextPushId: Length should be 20."),o}}();class i5{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,L.As)(this.snapshot.exportVal())}}class s5{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class zN{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,L.vA)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class o5{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new L.cY;return CEe(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){ta("OnDisconnect.remove",this._path);const e=new L.cY;return X3(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){ta("OnDisconnect.set",this._path),Cl("OnDisconnect.set",e,this._path,!1);const t=new L.cY;return X3(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){ta("OnDisconnect.setWithPriority",this._path),Cl("OnDisconnect.setWithPriority",e,this._path,!1),ON("OnDisconnect.setWithPriority",t,!1);const r=new L.cY;return function IEe(n,e,t,r,i){const s=xr(t,r);n.server_.onDisconnectPut(e.toString(),s.val(!0),(o,a)=>{"ok"===o&&Ig(n.onDisconnect_,e,s),Nc(0,i,o,a)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){ta("OnDisconnect.update",this._path),W3("OnDisconnect.update",e,this._path,!1);const t=new L.cY;return function wEe(n,e,t,r){if((0,L.Im)(t))return Fi("onDisconnect().update() called with empty data.  Don't do anything."),void Nc(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,s)=>{"ok"===i&&Li(t,(o,a)=>{const l=xr(a);Ig(n.onDisconnect_,vr(e,o),l)}),Nc(0,r,i,s)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class so{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Ht(this._path)?null:QM(this._path)}get ref(){return new na(this._repo,this._path)}get _queryIdentifier(){const e=u3(this._queryParams),t=HM(e);return"{}"===t?"default":t}get _queryObject(){return u3(this._queryParams)}isEqual(e){if(!((e=(0,L.Ku)(e))instanceof so))return!1;const t=this._repo===e._repo,r=JM(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function wye(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function Ob(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function kc(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===vl){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==bc)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==su)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===nr){if(null!=e&&!Mv(e)||null!=t&&!Mv(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,L.vA)(n.getIndex()instanceof nN||n.getIndex()===rN,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Fb(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class na extends so{constructor(e,t){super(e,t,new db,!1)}get parent(){const e=J4(this._path);return null===e?null:new na(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Ah{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Tn(e),r=Sh(this.ref,e);return new Ah(this._node.getChild(t),r,nr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Ah(i,Sh(this.ref,r),nr)))}hasChild(e){const t=new Tn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function a5(n,e){return(n=(0,L.Ku)(n))._checkNotDeleted("ref"),void 0!==e?Sh(n._root,e):n._root}function l5(n,e){(n=(0,L.Ku)(n))._checkNotDeleted("refFromURL");const t=HN(e,n._repo.repoInfo_.nodeAdmin);G3("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&yl("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),a5(n,t.path.toString())}function Sh(n,e){return null===$t((n=(0,L.Ku)(n))._path)?dEe("child","path",e,!1):Ov("child","path",e,!1),new na(n._repo,vr(n._path,e))}function WN(n,e){n=(0,L.Ku)(n),ta("set",n._path),Cl("set",e,n._path,!1);const t=new L.cY;return LN(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function LEe(n,e){W3("update",e,n._path,!1);const t=new L.cY;return function vEe(n,e,t,r){Ag(n,"update",{path:e.toString(),value:t});let i=!0;const s=Fv(n),o={};if(Li(t,(a,l)=>{i=!1,o[a]=U3(vr(e,a),xr(l),n.serverSyncTree_,s)}),i)Fi("update() called with empty data.  Don't do anything."),Nc(0,r,"ok",void 0);else{const a=Mb(n),l=function Gve(n,e,t,r){!function lve(n,e,t,r){(0,L.vA)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=fN(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=rr.fromObject(t);return bg(n,new wg({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,o,a);Pb(n.eventQueue_,l),n.server_.merge(e.toString(),t,(u,c)=>{const d="ok"===u;d||ls("update at "+e+" failed: "+u);const f=Mc(n.serverSyncTree_,a,!d),y=f.length>0?Sg(n,e):e;Po(n.eventQueue_,y,f),Nc(0,r,u,c)}),Li(t,u=>{const c=BN(n,vr(e,u));Sg(n,c)}),Po(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function VEe(n){n=(0,L.Ku)(n);const e=new zN(()=>{}),t=new Lv(e);return function yEe(n,e,t){const r=function Qve(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(u,c)=>{const d=Ls(u,t);r=r||Rc(c,d)});let i=n.syncPointTree_.get(t);i?r=r||Rc(i,fn()):(i=new D3,n.syncPointTree_=n.syncPointTree_.set(t,i));const s=null!=r,o=s?new Dc(r,!0,!1):null;return function Nve(n){return _b(n.viewCache_)}(x3(i,e,yb(n.pendingWriteTree_,e._path),s?o.getNode():St.EMPTY_NODE,s))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const s=xr(i).withIndex(e._queryParams.getIndex());let o;if(wN(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())o=Dv(n.serverSyncTree_,e._path,s);else{const a=xv(n.serverSyncTree_,e);o=k3(n.serverSyncTree_,e._path,s,a)}return Po(n.eventQueue_,e._path,o),bb(n.serverSyncTree_,e,t,null,!0),s},i=>(Ag(n,"get for query "+(0,L.As)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new Ah(r,new na(n._repo,n._path),n._queryParams.getIndex()))}class Lv{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new i5("value",this,new Ah(e.snapshotNode,new na(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new s5(this,e,t):null}matches(e){return e instanceof Lv&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Lb{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new s5(this,e,t):null}createEvent(e,t){(0,L.vA)(null!=e.childName,"Child events should have a childName.");const r=Sh(new na(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new i5(e.type,this,new Ah(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Lb&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Vv(n,e,t,r,i){let s;if("object"==typeof r&&(s=void 0,i=r),"function"==typeof r&&(s=r),i&&i.onlyOnce){const l=t,u=(c,d)=>{VN(n._repo,n,a),l(c,d)};u.userCallback=t.userCallback,u.context=t.context,t=u}const o=new zN(t,s||void 0),a="value"===e?new Lv(o):new Lb(e,o);return function TEe(n,e,t){let r;r=".info"===$t(e._path)?wN(n.infoSyncTree_,e,t):wN(n.serverSyncTree_,e,t),q3(n.eventQueue_,e._path,r)}(n._repo,n,a),()=>VN(n._repo,n,a)}function GN(n,e,t,r){return Vv(n,"value",e,t,r)}function u5(n,e,t,r){return Vv(n,"child_added",e,t,r)}function c5(n,e,t,r){return Vv(n,"child_changed",e,t,r)}function d5(n,e,t,r){return Vv(n,"child_moved",e,t,r)}function h5(n,e,t,r){return Vv(n,"child_removed",e,t,r)}function f5(n,e,t){let r=null;const i=t?new zN(t):null;"value"===e?r=new Lv(i):e&&(r=new Lb(e,i)),VN(n._repo,n,r)}class ka{}class p5 extends ka{constructor(e,t){super(),this._value=e,this._key=t,this.type="endAt"}_apply(e){Cl("endAt",this._value,e._path,!0);const t=oN(e._queryParams,this._value,this._key);if(Fb(t),kc(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new so(e._repo,e._path,t,e._orderByCalled)}}class BEe extends ka{constructor(e,t){super(),this._value=e,this._key=t,this.type="endBefore"}_apply(e){Cl("endBefore",this._value,e._path,!1);const t=function Yye(n,e,t){let r;return r=oN(n,e,n.index_===vl||t?t:bc),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(Fb(t),kc(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new so(e._repo,e._path,t,e._orderByCalled)}}class g5 extends ka{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAt"}_apply(e){Cl("startAt",this._value,e._path,!0);const t=sN(e._queryParams,this._value,this._key);if(Fb(t),kc(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new so(e._repo,e._path,t,e._orderByCalled)}}class zEe extends ka{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAfter"}_apply(e){Cl("startAfter",this._value,e._path,!1);const t=function Kye(n,e,t){let r;return r=sN(n,e,n.index_===vl||t?t:su),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(Fb(t),kc(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new so(e._repo,e._path,t,e._orderByCalled)}}class GEe extends ka{constructor(e){super(),this._limit=e,this.type="limitToFirst"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new so(e._repo,e._path,function qye(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class jEe extends ka{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new so(e._repo,e._path,function jye(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class YEe extends ka{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){Ob(e,"orderByChild");const t=new Tn(this._path);if(Ht(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new nN(t),i=hb(e._queryParams,r);return kc(i),new so(e._repo,e._path,i,!0)}}class JEe extends ka{constructor(){super(...arguments),this.type="orderByKey"}_apply(e){Ob(e,"orderByKey");const t=hb(e._queryParams,vl);return kc(t),new so(e._repo,e._path,t,!0)}}class ZEe extends ka{constructor(){super(...arguments),this.type="orderByPriority"}_apply(e){Ob(e,"orderByPriority");const t=hb(e._queryParams,nr);return kc(t),new so(e._repo,e._path,t,!0)}}class tCe extends ka{constructor(){super(...arguments),this.type="orderByValue"}_apply(e){Ob(e,"orderByValue");const t=hb(e._queryParams,rN);return kc(t),new so(e._repo,e._path,t,!0)}}class rCe extends ka{constructor(e,t){super(),this._value=e,this._key=t,this.type="equalTo"}_apply(e){if(Cl("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new p5(this._value,this._key)._apply(new g5(this._value,this._key)._apply(e))}}function Oa(n,...e){let t=(0,L.Ku)(n);for(const r of e)t=r._apply(t);return t}(function Lve(n){(0,L.vA)(!Ib,"__referenceConstructor has already been defined"),Ib=n})(na),function Hve(n){(0,L.vA)(!Tb,"__referenceConstructor has already been defined"),Tb=n}(na);const qN={};function jN(n,e,t,r,i){let s=r||n.options.databaseURL;void 0===s&&(n.options.projectId||yl("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Fi("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let l,u,o=HN(s,i),a=o.repoInfo;typeof process<"u"&&process.env&&(u=process.env.FIREBASE_DATABASE_EMULATOR_HOST),u?(l=!0,s=`http://${u}?ns=${a.namespace}`,o=HN(s,i),a=o.repoInfo):l=!o.repoInfo.secure;const c=i&&l?new mv(mv.OWNER):new X_e(n.name,n.options,e);G3("Invalid Firebase Database URL",o),Ht(o.path)||yl("Database URL must point to the root of a Firebase Database (not including a child path).");const d=function lCe(n,e,t,r){let i=qN[e.name];i||(i={},qN[e.name]=i);let s=i[n.toURLString()];return s&&yl("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new gEe(n,false,t,r),i[n.toURLString()]=s,s}(a,n,c,new J_e(n.name,t));return new cCe(d,n)}class cCe{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function mEe(n,e,t){if(n.stats_=jM(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new fb(n.repoInfo_,(r,i,s,o)=>{Q3(n,r,i,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>J3(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,L.As)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Ch(n.repoInfo_,e,(r,i,s,o)=>{Q3(n,r,i,s,o)},r=>{J3(n,r)},r=>{!function _Ee(n,e){Li(e,(t,r)=>{FN(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function tye(n,e){const t=n.toString();return qM[t]||(qM[t]=e()),qM[t]}(n.repoInfo_,()=>new tve(n.stats_,n.server_)),n.infoData_=new Qye,n.infoSyncTree_=new N3({startListening:(r,i,s,o)=>{let a=[];const l=n.infoData_.getNode(r._path);return l.isEmpty()||(a=Dv(n.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),FN(n,"connected",!1),n.serverSyncTree_=new N3({startListening:(r,i,s,o)=>(n.server_.listen(r,s,i,(a,l)=>{const u=o(a,l);Po(n.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new na(this._repo,fn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function aCe(n,e){const t=qN[e];(!t||t[n.key]!==n)&&yl(`Database ${e}(${n.repoInfo_}) has already been deleted.`),Z3(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&yl("Cannot call "+e+" on a deleted database.")}}function _5(){U4.IS_TRANSPORT_INITIALIZED&&ls("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function dCe(){_5(),Ac.forceDisallow()}function hCe(){_5(),yg.forceDisallow(),Ac.forceAllow()}function gCe(n,e){v4(n,e)}const _Ce={".sv":"timestamp"};class ECe{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Ch.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Ch.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function mCe(n){UM(Gn.SDK_VERSION),(0,Gn._registerComponent)(new _l.uA("database",(e,{instanceIdentifier:t})=>jN(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Gn.registerVersion)(f4,"1.0.8",n),(0,Gn.registerVersion)(f4,"1.0.8","esm2017")}();const TCe=new ro.Vy("@firebase/database-compat"),v5=function(n){TCe.warn("FIREBASE WARNING: "+n)};class SCe{constructor(e){this._delegate=e}cancel(e){(0,L.od)("OnDisconnect.cancel",0,1,arguments.length),(0,L.oD)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,L.od)("OnDisconnect.remove",0,1,arguments.length),(0,L.oD)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,L.od)("OnDisconnect.set",1,2,arguments.length),(0,L.oD)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,L.od)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,L.oD)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),s=>r(s)),i}update(e,t){if((0,L.od)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,v5("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,L.oD)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class DCe{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,L.od)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Oc{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,L.od)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,L.od)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,L.od)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,L.od)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,L.od)("DataSnapshot.child",0,1,arguments.length),e=String(e),Ov("DataSnapshot.child","path",e,!1),new Oc(this._database,this._delegate.child(e))}hasChild(e){return(0,L.od)("DataSnapshot.hasChild",1,1,arguments.length),Ov("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,L.od)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,L.od)("DataSnapshot.forEach",1,1,arguments.length),(0,L.oD)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Oc(this._database,t)))}hasChildren(){return(0,L.od)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,L.od)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,L.od)("DataSnapshot.ref",0,0,arguments.length),new Mo(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Gi{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var s;(0,L.od)("Query.on",2,4,arguments.length),(0,L.oD)("Query.on","callback",t,!1);const o=Gi.getCancelAndContextArgs_("Query.on",r,i),a=(u,c)=>{t.call(o.context,new Oc(this.database,u),c)};a.userCallback=t,a.context=o.context;const l=null===(s=o.cancel)||void 0===s?void 0:s.bind(o.context);switch(e){case"value":return GN(this._delegate,a,l),t;case"child_added":return u5(this._delegate,a,l),t;case"child_removed":return h5(this._delegate,a,l),t;case"child_changed":return c5(this._delegate,a,l),t;case"child_moved":return d5(this._delegate,a,l),t;default:throw new Error((0,L.dI)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,L.od)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,L.dI)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,L.oD)("Query.off","callback",t,!0),(0,L.HN)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,f5(this._delegate,e,i)}else f5(this._delegate,e)}get(){return VEe(this._delegate).then(e=>new Oc(this.database,e))}once(e,t,r,i){(0,L.od)("Query.once",1,4,arguments.length),(0,L.oD)("Query.once","callback",t,!0);const s=Gi.getCancelAndContextArgs_("Query.once",r,i),o=new L.cY,a=(u,c)=>{const d=new Oc(this.database,u);t&&t.call(s.context,d,c),o.resolve(d)};a.userCallback=t,a.context=s.context;const l=u=>{s.cancel&&s.cancel.call(s.context,u),o.reject(u)};switch(e){case"value":GN(this._delegate,a,l,{onlyOnce:!0});break;case"child_added":u5(this._delegate,a,l,{onlyOnce:!0});break;case"child_removed":h5(this._delegate,a,l,{onlyOnce:!0});break;case"child_changed":c5(this._delegate,a,l,{onlyOnce:!0});break;case"child_moved":d5(this._delegate,a,l,{onlyOnce:!0});break;default:throw new Error((0,L.dI)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return o.promise}limitToFirst(e){return(0,L.od)("Query.limitToFirst",1,1,arguments.length),new Gi(this.database,Oa(this._delegate,function qEe(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new GEe(n)}(e)))}limitToLast(e){return(0,L.od)("Query.limitToLast",1,1,arguments.length),new Gi(this.database,Oa(this._delegate,function KEe(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new jEe(n)}(e)))}orderByChild(e){return(0,L.od)("Query.orderByChild",1,1,arguments.length),new Gi(this.database,Oa(this._delegate,function QEe(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Ov("orderByChild","path",n,!1),new YEe(n)}(e)))}orderByKey(){return(0,L.od)("Query.orderByKey",0,0,arguments.length),new Gi(this.database,Oa(this._delegate,function XEe(){return new JEe}()))}orderByPriority(){return(0,L.od)("Query.orderByPriority",0,0,arguments.length),new Gi(this.database,Oa(this._delegate,function eCe(){return new ZEe}()))}orderByValue(){return(0,L.od)("Query.orderByValue",0,0,arguments.length),new Gi(this.database,Oa(this._delegate,function nCe(){return new tCe}()))}startAt(e=null,t){return(0,L.od)("Query.startAt",0,2,arguments.length),new Gi(this.database,Oa(this._delegate,function HEe(n=null,e){return kv("startAt","key",e,!0),new g5(n,e)}(e,t)))}startAfter(e=null,t){return(0,L.od)("Query.startAfter",0,2,arguments.length),new Gi(this.database,Oa(this._delegate,function WEe(n,e){return kv("startAfter","key",e,!0),new zEe(n,e)}(e,t)))}endAt(e=null,t){return(0,L.od)("Query.endAt",0,2,arguments.length),new Gi(this.database,Oa(this._delegate,function UEe(n,e){return kv("endAt","key",e,!0),new p5(n,e)}(e,t)))}endBefore(e=null,t){return(0,L.od)("Query.endBefore",0,2,arguments.length),new Gi(this.database,Oa(this._delegate,function $Ee(n,e){return kv("endBefore","key",e,!0),new BEe(n,e)}(e,t)))}equalTo(e,t){return(0,L.od)("Query.equalTo",1,2,arguments.length),new Gi(this.database,Oa(this._delegate,function iCe(n,e){return kv("equalTo","key",e,!0),new rCe(n,e)}(e,t)))}toString(){return(0,L.od)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,L.od)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,L.od)("Query.isEqual",1,1,arguments.length),!(e instanceof Gi))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,L.oD)(e,"cancel",i.cancel,!0),i.context=r,(0,L.HN)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,L.dI)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Mo(this.database,new na(this._delegate._repo,this._delegate._path))}}class Mo extends Gi{constructor(e,t){super(e,new so(t._repo,t._path,new db,!1)),this.database=e,this._delegate=t}getKey(){return(0,L.od)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,L.od)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Mo(this.database,Sh(this._delegate,e))}getParent(){(0,L.od)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Mo(this.database,e):null}getRoot(){return(0,L.od)("Reference.root",0,0,arguments.length),new Mo(this.database,this._delegate.root)}set(e,t){(0,L.od)("Reference.set",1,2,arguments.length),(0,L.oD)("Reference.set","onComplete",t,!0);const r=WN(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,L.od)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,v5("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ta("Reference.update",this._delegate._path),(0,L.oD)("Reference.update","onComplete",t,!0);const r=LEe(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,L.od)("Reference.setWithPriority",2,3,arguments.length),(0,L.oD)("Reference.setWithPriority","onComplete",r,!0);const i=function FEe(n,e,t){if(ta("setWithPriority",n._path),Cl("setWithPriority",e,n._path,!1),ON("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new L.cY;return LN(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),s=>r(s)),i}remove(e){(0,L.od)("Reference.remove",0,1,arguments.length),(0,L.oD)("Reference.remove","onComplete",e,!0);const t=function kEe(n){return ta("remove",n._path),WN(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,L.od)("Reference.transaction",1,3,arguments.length),(0,L.oD)("Reference.transaction","transactionUpdate",e,!1),(0,L.oD)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,L.dI)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function CCe(n,e,t){var r;if(n=(0,L.Ku)(n),ta("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,s=new L.cY,a=GN(n,()=>{});return function AEe(n,e,t,r,i,s){Ag(n,"transaction on "+e);const o={path:e,update:t,onComplete:r,status:null,order:m4(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=UN(n,e,void 0);o.currentInputSnapshot=a;const l=o.update(a.val());if(void 0===l)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{Nv("transaction failed: Data returned ",l,o.path),o.status=0;const u=Db(n.transactionQueueTree_,e),c=bh(u)||[];let d;c.push(o),MN(u,c),"object"==typeof l&&null!==l&&(0,L.gR)(l,".priority")?(d=(0,L.yw)(l,".priority"),(0,L.vA)(Mv(d),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):d=(Ab(n.serverSyncTree_,e)||St.EMPTY_NODE).getPriority().val();const f=Fv(n),y=xr(l,d),E=xN(y,a,f);o.currentOutputSnapshotRaw=y,o.currentOutputSnapshotResolved=E,o.currentWriteId=Mb(n);const I=IN(n.serverSyncTree_,e,E,o.currentWriteId,o.applyLocally);Po(n.eventQueue_,e,I),Nb(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(l,u,c)=>{let d=null;l?s.reject(l):(d=new Ah(c,new na(n._repo,n._path),nr),s.resolve(new ECe(u,d)))},a,i),s.promise}(this._delegate,e,{applyLocally:r}).then(s=>new DCe(s.committed,new Oc(this.database,s.snapshot)));return t&&i.then(s=>t(null,s.committed,s.snapshot),s=>t(s,!1,null)),i}setPriority(e,t){(0,L.od)("Reference.setPriority",1,2,arguments.length),(0,L.oD)("Reference.setPriority","onComplete",t,!0);const r=function OEe(n,e){n=(0,L.Ku)(n),ta("setPriority",n._path),ON("setPriority",e,!1);const t=new L.cY;return LN(n._repo,vr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,L.od)("Reference.push",0,2,arguments.length),(0,L.oD)("Reference.push","onComplete",t,!0);const r=function NEe(n,e){n=(0,L.Ku)(n),ta("push",n._path),Cl("push",e,n._path,!0);const t=Y3(n._repo),r=MEe(t),i=Sh(n,r),s=Sh(n,r);let o;return o=null!=e?WN(s,e).then(()=>s):Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}(this._delegate,e),i=r.then(o=>new Mo(this.database,o));t&&i.then(()=>t(null),o=>t(o));const s=new Mo(this.database,r);return s.then=i.then.bind(i),s.catch=i.catch.bind(i,void 0),s}onDisconnect(){return ta("Reference.onDisconnect",this._delegate._path),new SCe(new o5(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Uv{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:dCe,forceLongPolling:hCe}}useEmulator(e,t,r={}){!function y5(n,e,t,r={}){(n=(0,L.Ku)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&yl("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&yl('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new mv(mv.OWNER);else if(r.mockUserToken){const o="string"==typeof r.mockUserToken?r.mockUserToken:(0,L.Fy)(r.mockUserToken,n.app.options.projectId);s=new mv(o)}!function oCe(n,e,t,r){n.repoInfo_=new WM(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,s)}(this._delegate,e,t,r)}ref(e){if((0,L.od)("database.ref",0,1,arguments.length),e instanceof Mo){const t=l5(this._delegate,e.toString());return new Mo(this,t)}{const t=a5(this._delegate,e);return new Mo(this,t)}}refFromURL(e){(0,L.od)("database.refFromURL",1,1,arguments.length);const r=l5(this._delegate,e);return new Mo(this,r)}goOffline(){return(0,L.od)("database.goOffline",0,0,arguments.length),function fCe(n){(n=(0,L.Ku)(n))._checkNotDeleted("goOffline"),Z3(n._repo)}(this._delegate)}goOnline(){return(0,L.od)("database.goOnline",0,0,arguments.length),function pCe(n){(n=(0,L.Ku)(n))._checkNotDeleted("goOnline"),function bEe(n){n.persistentConnection_&&n.persistentConnection_.resume(K3)}(n._repo)}(this._delegate)}}Uv.ServerValue={TIMESTAMP:function yCe(){return _Ce}(),increment:n=>function vCe(n){return{".sv":{increment:n}}}(n)};var RCe=Object.freeze({__proto__:null,initStandalone:function xCe({app:n,url:e,version:t,customAuthImpl:r,customAppCheckImpl:i,namespace:s,nodeAdmin:o=!1}){UM(t);const a=new _l.h1("database-standalone"),l=new _l.Kq("auth-internal",a);let u;return l.setComponent(new _l.uA("auth-internal",()=>r,"PRIVATE")),i&&(u=new _l.Kq("app-check-internal",a),u.setComponent(new _l.uA("app-check-internal",()=>i,"PRIVATE"))),{instance:new Uv(jN(n,l,u,e,o),n),namespace:s}}});const PCe=Uv.ServerValue;function Bv(n,e,t="on",r=Kq){return new an(i=>{let s=null;return s=n[t](e,(o,a)=>{r.schedule(()=>{i.next({snapshot:o,prevKey:a})}),"once"===t&&r.schedule(()=>i.complete())},o=>{r.schedule(()=>i.error(o))}),"on"===t?{unsubscribe(){null!=s&&n.off(e,s)}}:{unsubscribe(){}}}).pipe(we(i=>{const{snapshot:s,prevKey:o}=i;let a=null;return s.exists()&&(a=s.key),{type:e,payload:s,prevKey:o,key:a}}),n4())}function E5(n){return null==n}function C5(n){return"function"==typeof n.set}function I5(n,e){return C5(e)?e:n.ref(e)}function w5(n,e){if(function NCe(n){return"string"==typeof n}(n))return e.stringCase();if(C5(n))return e.firebaseCase();if(function kCe(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function T5(n){return(E5(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function b5(n,e,t){return FM(...(e=T5(e)).map(i=>Bv(n,i,"on",t)))}function A5(n,e){return function(r,i){return w5(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function VCe(n){return function(t){return t?w5(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function S5(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function $Ce(n,e){const{payload:t,prevKey:r,key:i}=e,s=S5(n,i),o=function BCe(n,e){if(E5(e))return 0;{const t=S5(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload?.exists()){let a=null;e.payload.forEach(l=>{const u={payload:l,type:"value",prevKey:a,key:l.key};return a=l.key,n=[...n,u],!1})}return n;case"child_added":if(s>-1)(n[s-1]?.key||null)!==r&&(n=n.filter(l=>l.payload.key!==t.key)).splice(o,0,e);else{if(null==r)return[e,...n];(n=n.slice()).splice(o,0,e)}return n;case"child_removed":return n.filter(a=>a.payload.key!==t.key);case"child_changed":return n.map(a=>a.payload.key===i?e:a);case"child_moved":if(s>-1){const a=n.splice(s,1)[0];return(n=n.slice()).splice(o,0,a),n}return n;default:return n}}function D5(n,e,t){return function UCe(n,e,t){return Bv(n,"value","once",t).pipe(Ei(r=>{const i=[rt(r)];return e.forEach(s=>i.push(Bv(n,s,"on",t))),FM(...i).pipe(FP($Ce,[]))}),function L_e(n,e=si){return n=n??V_e,G((t,r)=>{let i,s=!0;t.subscribe(le(r,o=>{const a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}())}(n,e=T5(e),t)}function x5(n,e){return function(){return Bv(n,"value","on",e)}}!function MCe(n){n.INTERNAL.registerComponent(new _l.uA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new Uv(i,r)},"PUBLIC").setServiceProps({Reference:Mo,Query:Gi,Database:Uv,DataSnapshot:Oc,enableLogging:gCe,INTERNAL:RCe,ServerValue:PCe}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","1.0.8")}(Cc.A);const WCe=new be("angularfire2.realtimeDatabaseURL"),GCe=new be("angularfire2.database.use-emulator");let R5=(()=>{class n{schedulers;database;constructor(t,r,i,s,o,a,l,u,c,d,f,y,E,I,T){this.schedulers=a;const P=l,x=pM(t,o,r);u&&d4(x,o,c,f,y,E,d,I),this.database=Xq(`${x.name}.database.${i}`,"AngularFireDatabase",x.name,()=>{const V=o.runOutsideAngular(()=>x.database(i||void 0));return P&&V.useEmulator(...P),V},[P])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>I5(this.database,t));let s=i;return r&&(s=r(i)),function HCe(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:A5(r,"update"),set:A5(r,"set"),push:i=>r.push(i),remove:VCe(r),snapshotChanges:i=>D5(n,i,t).pipe(Ec),stateChanges:i=>b5(n,i,t).pipe(Ec),auditTrail:i=>function OCe(n,e,t){return function LCe(n,e,t){return function FCe(n,e){return Bv(n,"value","on",e).pipe(we(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function O_e(...n){const e=MP(n);return G((t,r)=>{const i=n.length,s=new Array(i);let o=n.map(()=>!1),a=!1;for(let l=0;l<i;l++)no(n[l]).subscribe(le(r,u=>{s[l]=u,!a&&!o[l]&&(o[l]=!0,(a=o.every(si))&&(o=null))},go));t.subscribe(le(r,l=>{if(a){const u=[l,...s];r.next(e?e(...u):u)}}))})}(e),we(([i,s])=>{const o=i.lastKeyToLoad,a=s.map(l=>l.key);return{actions:s,lastKeyToLoad:o,loadedKeys:a}}),function F_e(n){return G((e,t)=>{let r=!1,i=0;e.subscribe(le(t,s=>(r||(r=!n(s,i++)))&&t.next(s)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),we(i=>i.actions))}(n,b5(n,e).pipe(FP((i,s)=>[...i,s],[])),t)}(n,i,t).pipe(Ec),valueChanges:(i,s)=>D5(n,i,t).pipe(we(a=>a.map(l=>s&&s.idField?{...l.payload.val(),[s.idField]:l.key}:l.payload.val())),Ec)}}(s,this)}object(t){return function zCe(n,e){return{query:n,snapshotChanges:()=>x5(n,e.schedulers.outsideAngular)().pipe(Ec),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>x5(n,e.schedulers.outsideAngular)().pipe(Ec,we(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>I5(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}static \u0275fac=function(r){return new(r||n)(xe(WT),xe(GT,8),xe(WCe,8),xe(Ao),xe(Yt),xe(dg),xe(GCe,8),xe(h4,8),xe(s4,8),xe(o4,8),xe(a4,8),xe(l4,8),xe(u4,8),xe(c4,8),xe(sv,8))};static \u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),qCe=(()=>{class n{constructor(){Cc.A.registerVersion("angularfire",vc.full,"rtdb-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Co({type:n});static \u0275inj=bs({providers:[R5]})}return n})(),jCe=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Co({type:n})}static{this.\u0275inj=bs({imports:[nb,ah,gg,Ome.initializeApp(mh_firebaseConfig),qCe,nb,ah,gg]})}}return n})();var un,n;(n=un||(un={})).assertEqual=i=>{},n.assertIs=function e(i){},n.assertNever=function t(i){throw new Error},n.arrayToEnum=i=>{const s={};for(const o of i)s[o]=o;return s},n.getValidEnumValues=i=>{const s=n.objectKeys(i).filter(a=>"number"!=typeof i[i[a]]),o={};for(const a of s)o[a]=i[a];return n.objectValues(o)},n.objectValues=i=>n.objectKeys(i).map(function(s){return i[s]}),n.objectKeys="function"==typeof Object.keys?i=>Object.keys(i):i=>{const s=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.push(o);return s},n.find=(i,s)=>{for(const o of i)if(s(o))return o},n.isInteger="function"==typeof Number.isInteger?i=>Number.isInteger(i):i=>"number"==typeof i&&Number.isFinite(i)&&Math.floor(i)===i,n.joinValues=function r(i,s=" | "){return i.map(o=>"string"==typeof o?`'${o}'`:o).join(s)},n.jsonStringifyReplacer=(i,s)=>"bigint"==typeof s?s.toString():s;const Be=un.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Fc=n=>{switch(typeof n){case"undefined":return Be.undefined;case"string":return Be.string;case"number":return Number.isNaN(n)?Be.nan:Be.number;case"boolean":return Be.boolean;case"function":return Be.function;case"bigint":return Be.bigint;case"symbol":return Be.symbol;case"object":return Array.isArray(n)?Be.array:null===n?Be.null:n.then&&"function"==typeof n.then&&n.catch&&"function"==typeof n.catch?Be.promise:typeof Map<"u"&&n instanceof Map?Be.map:typeof Set<"u"&&n instanceof Set?Be.set:typeof Date<"u"&&n instanceof Date?Be.date:Be.object;default:return Be.unknown}},Te=un.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);let Lc=(()=>{class n extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=i=>{this.issues=[...this.issues,i]},this.addIssues=(i=[])=>{this.issues=[...this.issues,...i]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=t}format(t){const r=t||function(o){return o.message},i={_errors:[]},s=o=>{for(const a of o.issues)if("invalid_union"===a.code)a.unionErrors.map(s);else if("invalid_return_type"===a.code)s(a.returnTypeError);else if("invalid_arguments"===a.code)s(a.argumentsError);else if(0===a.path.length)i._errors.push(r(a));else{let l=i,u=0;for(;u<a.path.length;){const c=a.path[u];u===a.path.length-1?(l[c]=l[c]||{_errors:[]},l[c]._errors.push(r(a))):l[c]=l[c]||{_errors:[]},l=l[c],u++}}};return s(this),i}static assert(t){if(!(t instanceof n))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,un.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(t=(r=>r.message)){const r={},i=[];for(const s of this.issues)s.path.length>0?(r[s.path[0]]=r[s.path[0]]||[],r[s.path[0]].push(t(s))):i.push(t(s));return{formErrors:i,fieldErrors:r}}get formErrors(){return this.flatten()}}return n.create=e=>new n(e),n})();const $v=(n,e)=>{let t;switch(n.code){case Te.invalid_type:t=n.received===Be.undefined?"Required":`Expected ${n.expected}, received ${n.received}`;break;case Te.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(n.expected,un.jsonStringifyReplacer)}`;break;case Te.unrecognized_keys:t=`Unrecognized key(s) in object: ${un.joinValues(n.keys,", ")}`;break;case Te.invalid_union:t="Invalid input";break;case Te.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${un.joinValues(n.options)}`;break;case Te.invalid_enum_value:t=`Invalid enum value. Expected ${un.joinValues(n.options)}, received '${n.received}'`;break;case Te.invalid_arguments:t="Invalid function arguments";break;case Te.invalid_return_type:t="Invalid function return type";break;case Te.invalid_date:t="Invalid date";break;case Te.invalid_string:"object"==typeof n.validation?"includes"in n.validation?(t=`Invalid input: must include "${n.validation.includes}"`,"number"==typeof n.validation.position&&(t=`${t} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?t=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?t=`Invalid input: must end with "${n.validation.endsWith}"`:un.assertNever(n.validation):t="regex"!==n.validation?`Invalid ${n.validation}`:"Invalid";break;case Te.too_small:t="array"===n.type?`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:"string"===n.type?`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:"number"===n.type?`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:"date"===n.type?`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:"Invalid input";break;case Te.too_big:t="array"===n.type?`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:"string"===n.type?`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:"number"===n.type?`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:"bigint"===n.type?`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:"date"===n.type?`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:"Invalid input";break;case Te.custom:t="Invalid input";break;case Te.invalid_intersection_types:t="Intersection results could not be merged";break;case Te.not_multiple_of:t=`Number must be a multiple of ${n.multipleOf}`;break;case Te.not_finite:t="Number must be finite";break;default:t=e.defaultError,un.assertNever(n)}return{message:t}};let P5=$v;function Fe(n,e){const t=function KN(){return P5}(),r=(n=>{const{data:e,path:t,errorMaps:r,issueData:i}=n,s=[...t,...i.path||[]],o={...i,path:s};if(void 0!==i.message)return{...i,path:s,message:i.message};let a="";const l=r.filter(u=>!!u).slice().reverse();for(const u of l)a=u(o,{data:e,defaultError:a}).message;return{...i,path:s,message:a}})({issueData:e,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,t,t===$v?void 0:$v].filter(i=>!!i)});n.common.issues.push(r)}class Vs{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const i of t){if("aborted"===i.status)return _t;"dirty"===i.status&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static mergeObjectAsync(e,t){return(0,b.A)(function*(){const r=[];for(const i of t){const s=yield i.key,o=yield i.value;r.push({key:s,value:o})}return Vs.mergeObjectSync(e,r)})()}static mergeObjectSync(e,t){const r={};for(const i of t){const{key:s,value:o}=i;if("aborted"===s.status||"aborted"===o.status)return _t;"dirty"===s.status&&e.dirty(),"dirty"===o.status&&e.dirty(),"__proto__"!==s.value&&(typeof o.value<"u"||i.alwaysSet)&&(r[s.value]=o.value)}return{status:e.value,value:r}}}const _t=Object.freeze({status:"aborted"}),Hv=n=>({status:"dirty",value:n}),oo=n=>({status:"valid",value:n}),M5=n=>"aborted"===n.status,N5=n=>"dirty"===n.status,Dg=n=>"valid"===n.status,Vb=n=>typeof Promise<"u"&&n instanceof Promise;var zv,Wv,Je=function(n){return n.errToObj=e=>"string"==typeof e?{message:e}:e||{},n.toString=e=>"string"==typeof e?e:e?.message,n}(Je||{}),Ub=function(n,e,t,r){if("a"===t&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===t?r:"a"===t?r.call(n):r?r.value:e.get(n)},k5=function(n,e,t,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(n,t):i?i.value=t:e.set(n,t),t};class Il{constructor(e,t,r,i){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const O5=(n,e)=>{if(Dg(e))return{success:!0,data:e.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new Lc(n.common.issues);return this._error=t,this._error}}};function xt(n){if(!n)return{};const{errorMap:e,invalid_type_error:t,required_error:r,description:i}=n;if(e&&(t||r))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return e?{errorMap:e,description:i}:{errorMap:(o,a)=>{const{message:l}=n;return"invalid_enum_value"===o.code?{message:l??a.defaultError}:typeof a.data>"u"?{message:l??r??a.defaultError}:"invalid_type"!==o.code?{message:a.defaultError}:{message:l??t??a.defaultError}},description:i}}class Qt{get description(){return this._def.description}_getType(e){return Fc(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Fc(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Vs,ctx:{common:e.parent.common,data:e.data,parsedType:Fc(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(Vb(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){const r={common:{issues:[],async:t?.async??!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Fc(e)},i=this._parseSync({data:e,path:r.path,parent:r});return O5(r,i)}"~validate"(e){const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Fc(e)};if(!this["~standard"].async)try{const r=this._parseSync({data:e,path:[],parent:t});return Dg(r)?{value:r.value}:{issues:t.common.issues}}catch(r){r?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(r=>Dg(r)?{value:r.value}:{issues:t.common.issues})}parseAsync(e,t){var r=this;return(0,b.A)(function*(){const i=yield r.safeParseAsync(e,t);if(i.success)return i.data;throw i.error})()}safeParseAsync(e,t){var r=this;return(0,b.A)(function*(){const i={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:r._def.errorMap,parent:null,data:e,parsedType:Fc(e)},s=r._parse({data:e,path:i.path,parent:i}),o=yield Vb(s)?s:Promise.resolve(s);return O5(i,o)})()}refine(e,t){const r=i=>"string"==typeof t||typeof t>"u"?{message:t}:"function"==typeof t?t(i):t;return this._refinement((i,s)=>{const o=e(i),a=()=>s.addIssue({code:Te.custom,...r(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>!!l||(a(),!1)):!!o||(a(),!1)})}refinement(e,t){return this._refinement((r,i)=>!!e(r)||(i.addIssue("function"==typeof t?t(r,i):t),!1))}_refinement(e){return new Kv({schema:this,typeName:yt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return xh.create(this,this._def)}nullable(){return Yv.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return $b.create(this)}promise(){return tk.create(this,this._def)}or(e){return W5.create([this,e],this._def)}and(e){return G5.create(this,e,this._def)}transform(e){return new Kv({...xt(this._def),schema:this,typeName:yt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new Y5({...xt(this._def),innerType:this,defaultValue:t,typeName:yt.ZodDefault})}brand(){return new J5({typeName:yt.ZodBranded,type:this,...xt(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new Q5({...xt(this._def),innerType:this,catchValue:t,typeName:yt.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return Wb.create(this,e)}readonly(){return X5.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const YCe=/^c[^\s-]{8,}$/i,QCe=/^[0-9a-z]+$/,JCe=/^[0-9A-HJKMNP-TV-Z]{26}$/i,XCe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,ZCe=/^[a-z0-9_-]{21}$/i,eIe=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,tIe=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,nIe=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let QN;const iIe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,sIe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,oIe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,aIe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,lIe=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,uIe=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,F5="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",cIe=new RegExp(`^${F5}$`);function L5(n){let e="[0-5]\\d";return n.precision?e=`${e}\\.\\d{${n.precision}}`:null==n.precision&&(e=`${e}(\\.\\d+)?`),`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n.precision?"+":"?"}`}function dIe(n){return new RegExp(`^${L5(n)}$`)}function hIe(n){let e=`${F5}T${L5(n)}`;const t=[];return t.push(n.local?"Z?":"Z"),n.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function fIe(n,e){return!(("v4"!==e&&e||!iIe.test(n))&&("v6"!==e&&e||!oIe.test(n)))}function pIe(n,e){if(!eIe.test(n))return!1;try{const[t]=n.split("."),r=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),i=JSON.parse(atob(r));return!("object"!=typeof i||null===i||"typ"in i&&"JWT"!==i?.typ||!i.alg||e&&i.alg!==e)}catch{return!1}}function gIe(n,e){return!(("v4"!==e&&e||!sIe.test(n))&&("v6"!==e&&e||!aIe.test(n)))}let JN=(()=>{class n extends Qt{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==Be.string){const o=this._getOrReturnCtx(t);return Fe(o,{code:Te.invalid_type,expected:Be.string,received:o.parsedType}),_t}const i=new Vs;let s;for(const o of this._def.checks)if("min"===o.kind)t.data.length<o.value&&(s=this._getOrReturnCtx(t,s),Fe(s,{code:Te.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),i.dirty());else if("max"===o.kind)t.data.length>o.value&&(s=this._getOrReturnCtx(t,s),Fe(s,{code:Te.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),i.dirty());else if("length"===o.kind){const a=t.data.length>o.value,l=t.data.length<o.value;(a||l)&&(s=this._getOrReturnCtx(t,s),a?Fe(s,{code:Te.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):l&&Fe(s,{code:Te.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),i.dirty())}else if("email"===o.kind)nIe.test(t.data)||(s=this._getOrReturnCtx(t,s),Fe(s,{validation:"email",code:Te.invalid_string,message:o.message}),i.dirty());else if("emoji"===o.kind)QN||(QN=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),QN.test(t.data)||(s=this._getOrReturnCtx(t,s),Fe(s,{validation:"emoji",code:Te.invalid_string,message:o.message}),i.dirty());else if("uuid"===o.kind)XCe.test(t.data)||(s=this._getOrReturnCtx(t,s),Fe(s,{validation:"uuid",code:Te.invalid_string,message:o.message}),i.dirty());else if("nanoid"===o.kind)ZCe.test(t.data)||(s=this._getOrReturnCtx(t,s),Fe(s,{validation:"nanoid",code:Te.invalid_string,message:o.message}),i.dirty());else if("cuid"===o.kind)YCe.test(t.data)||(s=this._getOrReturnCtx(t,s),Fe(s,{validation:"cuid",code:Te.invalid_string,message:o.message}),i.dirty());else if("cuid2"===o.kind)QCe.test(t.data)||(s=this._getOrReturnCtx(t,s),Fe(s,{validation:"cuid2",code:Te.invalid_string,message:o.message}),i.dirty());else if("ulid"===o.kind)JCe.test(t.data)||(s=this._getOrReturnCtx(t,s),Fe(s,{validation:"ulid",code:Te.invalid_string,message:o.message}),i.dirty());else if("url"===o.kind)try{new URL(t.data)}catch{s=this._getOrReturnCtx(t,s),Fe(s,{validation:"url",code:Te.invalid_string,message:o.message}),i.dirty()}else"regex"===o.kind?(o.regex.lastIndex=0,o.regex.test(t.data)||(s=this._getOrReturnCtx(t,s),Fe(s,{validation:"regex",code:Te.invalid_string,message:o.message}),i.dirty())):"trim"===o.kind?t.data=t.data.trim():"includes"===o.kind?t.data.includes(o.value,o.position)||(s=this._getOrReturnCtx(t,s),Fe(s,{code:Te.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),i.dirty()):"toLowerCase"===o.kind?t.data=t.data.toLowerCase():"toUpperCase"===o.kind?t.data=t.data.toUpperCase():"startsWith"===o.kind?t.data.startsWith(o.value)||(s=this._getOrReturnCtx(t,s),Fe(s,{code:Te.invalid_string,validation:{startsWith:o.value},message:o.message}),i.dirty()):"endsWith"===o.kind?t.data.endsWith(o.value)||(s=this._getOrReturnCtx(t,s),Fe(s,{code:Te.invalid_string,validation:{endsWith:o.value},message:o.message}),i.dirty()):"datetime"===o.kind?hIe(o).test(t.data)||(s=this._getOrReturnCtx(t,s),Fe(s,{code:Te.invalid_string,validation:"datetime",message:o.message}),i.dirty()):"date"===o.kind?cIe.test(t.data)||(s=this._getOrReturnCtx(t,s),Fe(s,{code:Te.invalid_string,validation:"date",message:o.message}),i.dirty()):"time"===o.kind?dIe(o).test(t.data)||(s=this._getOrReturnCtx(t,s),Fe(s,{code:Te.invalid_string,validation:"time",message:o.message}),i.dirty()):"duration"===o.kind?tIe.test(t.data)||(s=this._getOrReturnCtx(t,s),Fe(s,{validation:"duration",code:Te.invalid_string,message:o.message}),i.dirty()):"ip"===o.kind?fIe(t.data,o.version)||(s=this._getOrReturnCtx(t,s),Fe(s,{validation:"ip",code:Te.invalid_string,message:o.message}),i.dirty()):"jwt"===o.kind?pIe(t.data,o.alg)||(s=this._getOrReturnCtx(t,s),Fe(s,{validation:"jwt",code:Te.invalid_string,message:o.message}),i.dirty()):"cidr"===o.kind?gIe(t.data,o.version)||(s=this._getOrReturnCtx(t,s),Fe(s,{validation:"cidr",code:Te.invalid_string,message:o.message}),i.dirty()):"base64"===o.kind?lIe.test(t.data)||(s=this._getOrReturnCtx(t,s),Fe(s,{validation:"base64",code:Te.invalid_string,message:o.message}),i.dirty()):"base64url"===o.kind?uIe.test(t.data)||(s=this._getOrReturnCtx(t,s),Fe(s,{validation:"base64url",code:Te.invalid_string,message:o.message}),i.dirty()):un.assertNever(o);return{status:i.value,value:t.data}}_regex(t,r,i){return this.refinement(s=>t.test(s),{validation:r,code:Te.invalid_string,...Je.errToObj(i)})}_addCheck(t){return new n({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...Je.errToObj(t)})}url(t){return this._addCheck({kind:"url",...Je.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...Je.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...Je.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...Je.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...Je.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...Je.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...Je.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...Je.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...Je.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...Je.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...Je.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...Je.errToObj(t)})}datetime(t){return this._addCheck("string"==typeof t?{kind:"datetime",precision:null,offset:!1,local:!1,message:t}:{kind:"datetime",precision:typeof t?.precision>"u"?null:t?.precision,offset:t?.offset??!1,local:t?.local??!1,...Je.errToObj(t?.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return this._addCheck("string"==typeof t?{kind:"time",precision:null,message:t}:{kind:"time",precision:typeof t?.precision>"u"?null:t?.precision,...Je.errToObj(t?.message)})}duration(t){return this._addCheck({kind:"duration",...Je.errToObj(t)})}regex(t,r){return this._addCheck({kind:"regex",regex:t,...Je.errToObj(r)})}includes(t,r){return this._addCheck({kind:"includes",value:t,position:r?.position,...Je.errToObj(r?.message)})}startsWith(t,r){return this._addCheck({kind:"startsWith",value:t,...Je.errToObj(r)})}endsWith(t,r){return this._addCheck({kind:"endsWith",value:t,...Je.errToObj(r)})}min(t,r){return this._addCheck({kind:"min",value:t,...Je.errToObj(r)})}max(t,r){return this._addCheck({kind:"max",value:t,...Je.errToObj(r)})}length(t,r){return this._addCheck({kind:"length",value:t,...Je.errToObj(r)})}nonempty(t){return this.min(1,Je.errToObj(t))}trim(){return new n({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new n({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new n({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>"datetime"===t.kind)}get isDate(){return!!this._def.checks.find(t=>"date"===t.kind)}get isTime(){return!!this._def.checks.find(t=>"time"===t.kind)}get isDuration(){return!!this._def.checks.find(t=>"duration"===t.kind)}get isEmail(){return!!this._def.checks.find(t=>"email"===t.kind)}get isURL(){return!!this._def.checks.find(t=>"url"===t.kind)}get isEmoji(){return!!this._def.checks.find(t=>"emoji"===t.kind)}get isUUID(){return!!this._def.checks.find(t=>"uuid"===t.kind)}get isNANOID(){return!!this._def.checks.find(t=>"nanoid"===t.kind)}get isCUID(){return!!this._def.checks.find(t=>"cuid"===t.kind)}get isCUID2(){return!!this._def.checks.find(t=>"cuid2"===t.kind)}get isULID(){return!!this._def.checks.find(t=>"ulid"===t.kind)}get isIP(){return!!this._def.checks.find(t=>"ip"===t.kind)}get isCIDR(){return!!this._def.checks.find(t=>"cidr"===t.kind)}get isBase64(){return!!this._def.checks.find(t=>"base64"===t.kind)}get isBase64url(){return!!this._def.checks.find(t=>"base64url"===t.kind)}get minLength(){let t=null;for(const r of this._def.checks)"min"===r.kind&&(null===t||r.value>t)&&(t=r.value);return t}get maxLength(){let t=null;for(const r of this._def.checks)"max"===r.kind&&(null===t||r.value<t)&&(t=r.value);return t}}return n.create=e=>new n({checks:[],typeName:yt.ZodString,coerce:e?.coerce??!1,...xt(e)}),n})();function mIe(n,e){const t=(n.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=t>r?t:r;return Number.parseInt(n.toFixed(i).replace(".",""))%Number.parseInt(e.toFixed(i).replace(".",""))/10**i}let V5=(()=>{class n extends Qt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==Be.number){const o=this._getOrReturnCtx(t);return Fe(o,{code:Te.invalid_type,expected:Be.number,received:o.parsedType}),_t}let i;const s=new Vs;for(const o of this._def.checks)"int"===o.kind?un.isInteger(t.data)||(i=this._getOrReturnCtx(t,i),Fe(i,{code:Te.invalid_type,expected:"integer",received:"float",message:o.message}),s.dirty()):"min"===o.kind?(o.inclusive?t.data<o.value:t.data<=o.value)&&(i=this._getOrReturnCtx(t,i),Fe(i,{code:Te.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),s.dirty()):"max"===o.kind?(o.inclusive?t.data>o.value:t.data>=o.value)&&(i=this._getOrReturnCtx(t,i),Fe(i,{code:Te.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),s.dirty()):"multipleOf"===o.kind?0!==mIe(t.data,o.value)&&(i=this._getOrReturnCtx(t,i),Fe(i,{code:Te.not_multiple_of,multipleOf:o.value,message:o.message}),s.dirty()):"finite"===o.kind?Number.isFinite(t.data)||(i=this._getOrReturnCtx(t,i),Fe(i,{code:Te.not_finite,message:o.message}),s.dirty()):un.assertNever(o);return{status:s.value,value:t.data}}gte(t,r){return this.setLimit("min",t,!0,Je.toString(r))}gt(t,r){return this.setLimit("min",t,!1,Je.toString(r))}lte(t,r){return this.setLimit("max",t,!0,Je.toString(r))}lt(t,r){return this.setLimit("max",t,!1,Je.toString(r))}setLimit(t,r,i,s){return new n({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:i,message:Je.toString(s)}]})}_addCheck(t){return new n({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:Je.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Je.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Je.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Je.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Je.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:Je.toString(r)})}finite(t){return this._addCheck({kind:"finite",message:Je.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Je.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Je.toString(t)})}get minValue(){let t=null;for(const r of this._def.checks)"min"===r.kind&&(null===t||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)"max"===r.kind&&(null===t||r.value<t)&&(t=r.value);return t}get isInt(){return!!this._def.checks.find(t=>"int"===t.kind||"multipleOf"===t.kind&&un.isInteger(t.value))}get isFinite(){let t=null,r=null;for(const i of this._def.checks){if("finite"===i.kind||"int"===i.kind||"multipleOf"===i.kind)return!0;"min"===i.kind?(null===r||i.value>r)&&(r=i.value):"max"===i.kind&&(null===t||i.value<t)&&(t=i.value)}return Number.isFinite(r)&&Number.isFinite(t)}}return n.create=e=>new n({checks:[],typeName:yt.ZodNumber,coerce:e?.coerce||!1,...xt(e)}),n})(),U5=(()=>{class n extends Qt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==Be.bigint)return this._getInvalidInput(t);let i;const s=new Vs;for(const o of this._def.checks)"min"===o.kind?(o.inclusive?t.data<o.value:t.data<=o.value)&&(i=this._getOrReturnCtx(t,i),Fe(i,{code:Te.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),s.dirty()):"max"===o.kind?(o.inclusive?t.data>o.value:t.data>=o.value)&&(i=this._getOrReturnCtx(t,i),Fe(i,{code:Te.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),s.dirty()):"multipleOf"===o.kind?t.data%o.value!==BigInt(0)&&(i=this._getOrReturnCtx(t,i),Fe(i,{code:Te.not_multiple_of,multipleOf:o.value,message:o.message}),s.dirty()):un.assertNever(o);return{status:s.value,value:t.data}}_getInvalidInput(t){const r=this._getOrReturnCtx(t);return Fe(r,{code:Te.invalid_type,expected:Be.bigint,received:r.parsedType}),_t}gte(t,r){return this.setLimit("min",t,!0,Je.toString(r))}gt(t,r){return this.setLimit("min",t,!1,Je.toString(r))}lte(t,r){return this.setLimit("max",t,!0,Je.toString(r))}lt(t,r){return this.setLimit("max",t,!1,Je.toString(r))}setLimit(t,r,i,s){return new n({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:i,message:Je.toString(s)}]})}_addCheck(t){return new n({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Je.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Je.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Je.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Je.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:Je.toString(r)})}get minValue(){let t=null;for(const r of this._def.checks)"min"===r.kind&&(null===t||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)"max"===r.kind&&(null===t||r.value<t)&&(t=r.value);return t}}return n.create=e=>new n({checks:[],typeName:yt.ZodBigInt,coerce:e?.coerce??!1,...xt(e)}),n})(),B5=(()=>{class n extends Qt{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==Be.boolean){const i=this._getOrReturnCtx(t);return Fe(i,{code:Te.invalid_type,expected:Be.boolean,received:i.parsedType}),_t}return oo(t.data)}}return n.create=e=>new n({typeName:yt.ZodBoolean,coerce:e?.coerce||!1,...xt(e)}),n})(),$5=(()=>{class n extends Qt{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==Be.date){const o=this._getOrReturnCtx(t);return Fe(o,{code:Te.invalid_type,expected:Be.date,received:o.parsedType}),_t}if(Number.isNaN(t.data.getTime()))return Fe(this._getOrReturnCtx(t),{code:Te.invalid_date}),_t;const i=new Vs;let s;for(const o of this._def.checks)"min"===o.kind?t.data.getTime()<o.value&&(s=this._getOrReturnCtx(t,s),Fe(s,{code:Te.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),i.dirty()):"max"===o.kind?t.data.getTime()>o.value&&(s=this._getOrReturnCtx(t,s),Fe(s,{code:Te.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),i.dirty()):un.assertNever(o);return{status:i.value,value:new Date(t.data.getTime())}}_addCheck(t){return new n({...this._def,checks:[...this._def.checks,t]})}min(t,r){return this._addCheck({kind:"min",value:t.getTime(),message:Je.toString(r)})}max(t,r){return this._addCheck({kind:"max",value:t.getTime(),message:Je.toString(r)})}get minDate(){let t=null;for(const r of this._def.checks)"min"===r.kind&&(null===t||r.value>t)&&(t=r.value);return null!=t?new Date(t):null}get maxDate(){let t=null;for(const r of this._def.checks)"max"===r.kind&&(null===t||r.value<t)&&(t=r.value);return null!=t?new Date(t):null}}return n.create=e=>new n({checks:[],coerce:e?.coerce||!1,typeName:yt.ZodDate,...xt(e)}),n})(),Bb=(()=>{class n extends Qt{constructor(){super(...arguments),this._unknown=!0}_parse(t){return oo(t.data)}}return n.create=e=>new n({typeName:yt.ZodUnknown,...xt(e)}),n})(),xg=(()=>{class n extends Qt{_parse(t){const r=this._getOrReturnCtx(t);return Fe(r,{code:Te.invalid_type,expected:Be.never,received:r.parsedType}),_t}}return n.create=e=>new n({typeName:yt.ZodNever,...xt(e)}),n})(),$b=(()=>{class n extends Qt{_parse(t){const{ctx:r,status:i}=this._processInputParams(t),s=this._def;if(r.parsedType!==Be.array)return Fe(r,{code:Te.invalid_type,expected:Be.array,received:r.parsedType}),_t;if(null!==s.exactLength){const a=r.data.length>s.exactLength.value,l=r.data.length<s.exactLength.value;(a||l)&&(Fe(r,{code:a?Te.too_big:Te.too_small,minimum:l?s.exactLength.value:void 0,maximum:a?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),i.dirty())}if(null!==s.minLength&&r.data.length<s.minLength.value&&(Fe(r,{code:Te.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),i.dirty()),null!==s.maxLength&&r.data.length>s.maxLength.value&&(Fe(r,{code:Te.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),i.dirty()),r.common.async)return Promise.all([...r.data].map((a,l)=>s.type._parseAsync(new Il(r,a,r.path,l)))).then(a=>Vs.mergeArray(i,a));const o=[...r.data].map((a,l)=>s.type._parseSync(new Il(r,a,r.path,l)));return Vs.mergeArray(i,o)}get element(){return this._def.type}min(t,r){return new n({...this._def,minLength:{value:t,message:Je.toString(r)}})}max(t,r){return new n({...this._def,maxLength:{value:t,message:Je.toString(r)}})}length(t,r){return new n({...this._def,exactLength:{value:t,message:Je.toString(r)}})}nonempty(t){return this.min(1,t)}}return n.create=(e,t)=>new n({type:e,minLength:null,maxLength:null,exactLength:null,typeName:yt.ZodArray,...xt(t)}),n})();function Rg(n){if(n instanceof Gv){const e={};for(const t in n.shape)e[t]=xh.create(Rg(n.shape[t]));return new Gv({...n._def,shape:()=>e})}return n instanceof $b?new $b({...n._def,type:Rg(n.element)}):n instanceof xh?xh.create(Rg(n.unwrap())):n instanceof Yv?Yv.create(Rg(n.unwrap())):n instanceof qv?qv.create(n.items.map(e=>Rg(e))):n}let Gv=(()=>{class n extends Qt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const t=this._def.shape(),r=un.objectKeys(t);return this._cached={shape:t,keys:r},this._cached}_parse(t){if(this._getType(t)!==Be.object){const c=this._getOrReturnCtx(t);return Fe(c,{code:Te.invalid_type,expected:Be.object,received:c.parsedType}),_t}const{status:i,ctx:s}=this._processInputParams(t),{shape:o,keys:a}=this._getCached(),l=[];if(!(this._def.catchall instanceof xg&&"strip"===this._def.unknownKeys))for(const c in s.data)a.includes(c)||l.push(c);const u=[];for(const c of a)u.push({key:{status:"valid",value:c},value:o[c]._parse(new Il(s,s.data[c],s.path,c)),alwaysSet:c in s.data});if(this._def.catchall instanceof xg){const c=this._def.unknownKeys;if("passthrough"===c)for(const d of l)u.push({key:{status:"valid",value:d},value:{status:"valid",value:s.data[d]}});else if("strict"===c)l.length>0&&(Fe(s,{code:Te.unrecognized_keys,keys:l}),i.dirty());else if("strip"!==c)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const d of l)u.push({key:{status:"valid",value:d},value:c._parse(new Il(s,s.data[d],s.path,d)),alwaysSet:d in s.data})}return s.common.async?Promise.resolve().then((0,b.A)(function*(){const c=[];for(const d of u){const f=yield d.key,y=yield d.value;c.push({key:f,value:y,alwaysSet:d.alwaysSet})}return c})).then(c=>Vs.mergeObjectSync(i,c)):Vs.mergeObjectSync(i,u)}get shape(){return this._def.shape()}strict(t){return new n({...this._def,unknownKeys:"strict",...void 0!==t?{errorMap:(r,i)=>{const s=this._def.errorMap?.(r,i).message??i.defaultError;return"unrecognized_keys"===r.code?{message:Je.errToObj(t).message??s}:{message:s}}}:{}})}strip(){return new n({...this._def,unknownKeys:"strip"})}passthrough(){return new n({...this._def,unknownKeys:"passthrough"})}extend(t){return new n({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new n({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:yt.ZodObject})}setKey(t,r){return this.augment({[t]:r})}catchall(t){return new n({...this._def,catchall:t})}pick(t){const r={};for(const i of un.objectKeys(t))t[i]&&this.shape[i]&&(r[i]=this.shape[i]);return new n({...this._def,shape:()=>r})}omit(t){const r={};for(const i of un.objectKeys(this.shape))t[i]||(r[i]=this.shape[i]);return new n({...this._def,shape:()=>r})}deepPartial(){return Rg(this)}partial(t){const r={};for(const i of un.objectKeys(this.shape)){const s=this.shape[i];r[i]=t&&!t[i]?s:s.optional()}return new n({...this._def,shape:()=>r})}required(t){const r={};for(const i of un.objectKeys(this.shape))if(t&&!t[i])r[i]=this.shape[i];else{let o=this.shape[i];for(;o instanceof xh;)o=o._def.innerType;r[i]=o}return new n({...this._def,shape:()=>r})}keyof(){return K5(un.objectKeys(this.shape))}}return n.create=(e,t)=>new n({shape:()=>e,unknownKeys:"strip",catchall:xg.create(),typeName:yt.ZodObject,...xt(t)}),n.strictCreate=(e,t)=>new n({shape:()=>e,unknownKeys:"strict",catchall:xg.create(),typeName:yt.ZodObject,...xt(t)}),n.lazycreate=(e,t)=>new n({shape:e,unknownKeys:"strip",catchall:xg.create(),typeName:yt.ZodObject,...xt(t)}),n})(),W5=(()=>{class n extends Qt{_parse(t){const{ctx:r}=this._processInputParams(t),i=this._def.options;if(r.common.async)return Promise.all(i.map(function(){var o=(0,b.A)(function*(a){const l={...r,common:{...r.common,issues:[]},parent:null};return{result:yield a._parseAsync({data:r.data,path:r.path,parent:l}),ctx:l}});return function(a){return o.apply(this,arguments)}}())).then(function s(o){for(const l of o)if("valid"===l.result.status)return l.result;for(const l of o)if("dirty"===l.result.status)return r.common.issues.push(...l.ctx.common.issues),l.result;const a=o.map(l=>new Lc(l.ctx.common.issues));return Fe(r,{code:Te.invalid_union,unionErrors:a}),_t});{let o;const a=[];for(const u of i){const c={...r,common:{...r.common,issues:[]},parent:null},d=u._parseSync({data:r.data,path:r.path,parent:c});if("valid"===d.status)return d;"dirty"===d.status&&!o&&(o={result:d,ctx:c}),c.common.issues.length&&a.push(c.common.issues)}if(o)return r.common.issues.push(...o.ctx.common.issues),o.result;const l=a.map(u=>new Lc(u));return Fe(r,{code:Te.invalid_union,unionErrors:l}),_t}}get options(){return this._def.options}}return n.create=(e,t)=>new n({options:e,typeName:yt.ZodUnion,...xt(t)}),n})();function ek(n,e){const t=Fc(n),r=Fc(e);if(n===e)return{valid:!0,data:n};if(t===Be.object&&r===Be.object){const i=un.objectKeys(e),s=un.objectKeys(n).filter(a=>-1!==i.indexOf(a)),o={...n,...e};for(const a of s){const l=ek(n[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}if(t===Be.array&&r===Be.array){if(n.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<n.length;s++){const l=ek(n[s],e[s]);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}return t===Be.date&&r===Be.date&&+n==+e?{valid:!0,data:n}:{valid:!1}}let G5=(()=>{class n extends Qt{_parse(t){const{status:r,ctx:i}=this._processInputParams(t),s=(o,a)=>{if(M5(o)||M5(a))return _t;const l=ek(o.value,a.value);return l.valid?((N5(o)||N5(a))&&r.dirty(),{status:r.value,value:l.data}):(Fe(i,{code:Te.invalid_intersection_types}),_t)};return i.common.async?Promise.all([this._def.left._parseAsync({data:i.data,path:i.path,parent:i}),this._def.right._parseAsync({data:i.data,path:i.path,parent:i})]).then(([o,a])=>s(o,a)):s(this._def.left._parseSync({data:i.data,path:i.path,parent:i}),this._def.right._parseSync({data:i.data,path:i.path,parent:i}))}}return n.create=(e,t,r)=>new n({left:e,right:t,typeName:yt.ZodIntersection,...xt(r)}),n})(),qv=(()=>{class n extends Qt{_parse(t){const{status:r,ctx:i}=this._processInputParams(t);if(i.parsedType!==Be.array)return Fe(i,{code:Te.invalid_type,expected:Be.array,received:i.parsedType}),_t;if(i.data.length<this._def.items.length)return Fe(i,{code:Te.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),_t;!this._def.rest&&i.data.length>this._def.items.length&&(Fe(i,{code:Te.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const o=[...i.data].map((a,l)=>{const u=this._def.items[l]||this._def.rest;return u?u._parse(new Il(i,a,i.path,l)):null}).filter(a=>!!a);return i.common.async?Promise.all(o).then(a=>Vs.mergeArray(r,a)):Vs.mergeArray(r,o)}get items(){return this._def.items}rest(t){return new n({...this._def,rest:t})}}return n.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new n({items:e,typeName:yt.ZodTuple,rest:null,...xt(t)})},n})();class Hb extends Qt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==Be.object)return Fe(r,{code:Te.invalid_type,expected:Be.object,received:r.parsedType}),_t;const i=[],s=this._def.keyType,o=this._def.valueType;for(const a in r.data)i.push({key:s._parse(new Il(r,a,r.path,a)),value:o._parse(new Il(r,r.data[a],r.path,a)),alwaysSet:a in r.data});return r.common.async?Vs.mergeObjectAsync(t,i):Vs.mergeObjectSync(t,i)}get element(){return this._def.valueType}static create(e,t,r){return new Hb(t instanceof Qt?{keyType:e,valueType:t,typeName:yt.ZodRecord,...xt(r)}:{keyType:JN.create(),valueType:e,typeName:yt.ZodRecord,...xt(t)})}}let q5=(()=>{class n extends Qt{get schema(){return this._def.getter()}_parse(t){const{ctx:r}=this._processInputParams(t);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}return n.create=(e,t)=>new n({getter:e,typeName:yt.ZodLazy,...xt(t)}),n})();function K5(n,e){return new Dh({values:n,typeName:yt.ZodEnum,...xt(e)})}class Dh extends Qt{constructor(){super(...arguments),zv.set(this,void 0)}_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e);return Fe(t,{expected:un.joinValues(this._def.values),received:t.parsedType,code:Te.invalid_type}),_t}if(Ub(this,zv,"f")||k5(this,zv,new Set(this._def.values),"f"),!Ub(this,zv,"f").has(e.data)){const t=this._getOrReturnCtx(e);return Fe(t,{received:t.data,code:Te.invalid_enum_value,options:this._def.values}),_t}return oo(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Dh.create(e,{...this._def,...t})}exclude(e,t=this._def){return Dh.create(this.options.filter(r=>!e.includes(r)),{...this._def,...t})}}zv=new WeakMap,Dh.create=K5;class zb extends Qt{constructor(){super(...arguments),Wv.set(this,void 0)}_parse(e){const t=un.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Be.string&&r.parsedType!==Be.number){const i=un.objectValues(t);return Fe(r,{expected:un.joinValues(i),received:r.parsedType,code:Te.invalid_type}),_t}if(Ub(this,Wv,"f")||k5(this,Wv,new Set(un.getValidEnumValues(this._def.values)),"f"),!Ub(this,Wv,"f").has(e.data)){const i=un.objectValues(t);return Fe(r,{received:r.data,code:Te.invalid_enum_value,options:i}),_t}return oo(e.data)}get enum(){return this._def.values}}Wv=new WeakMap,zb.create=(n,e)=>new zb({values:n,typeName:yt.ZodNativeEnum,...xt(e)});let tk=(()=>{class n extends Qt{unwrap(){return this._def.type}_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==Be.promise&&!1===r.common.async)return Fe(r,{code:Te.invalid_type,expected:Be.promise,received:r.parsedType}),_t;const i=r.parsedType===Be.promise?r.data:Promise.resolve(r.data);return oo(i.then(s=>this._def.type.parseAsync(s,{path:r.path,errorMap:r.common.contextualErrorMap})))}}return n.create=(e,t)=>new n({type:e,typeName:yt.ZodPromise,...xt(t)}),n})(),Kv=(()=>{class n extends Qt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===yt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){var r=this;const{status:i,ctx:s}=this._processInputParams(t),o=this._def.effect||null,a={addIssue:l=>{Fe(s,l),l.fatal?i.abort():i.dirty()},get path(){return s.path}};if(a.addIssue=a.addIssue.bind(a),"preprocess"===o.type){const l=o.transform(s.data,a);if(s.common.async)return Promise.resolve(l).then(function(){var u=(0,b.A)(function*(c){if("aborted"===i.value)return _t;const d=yield r._def.schema._parseAsync({data:c,path:s.path,parent:s});return"aborted"===d.status?_t:"dirty"===d.status||"dirty"===i.value?Hv(d.value):d});return function(c){return u.apply(this,arguments)}}());{if("aborted"===i.value)return _t;const u=this._def.schema._parseSync({data:l,path:s.path,parent:s});return"aborted"===u.status?_t:"dirty"===u.status||"dirty"===i.value?Hv(u.value):u}}if("refinement"===o.type){const l=u=>{const c=o.refinement(u,a);if(s.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return u};if(!1===s.common.async){const u=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return"aborted"===u.status?_t:("dirty"===u.status&&i.dirty(),l(u.value),{status:i.value,value:u.value})}return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(u=>"aborted"===u.status?_t:("dirty"===u.status&&i.dirty(),l(u.value).then(()=>({status:i.value,value:u.value}))))}if("transform"===o.type){if(!1===s.common.async){const l=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!Dg(l))return l;const u=o.transform(l.value,a);if(u instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:i.value,value:u}}return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(l=>Dg(l)?Promise.resolve(o.transform(l.value,a)).then(u=>({status:i.value,value:u})):l)}un.assertNever(o)}}return n.create=(e,t,r)=>new n({schema:e,typeName:yt.ZodEffects,effect:t,...xt(r)}),n.createWithPreprocess=(e,t,r)=>new n({schema:t,effect:{type:"preprocess",transform:e},typeName:yt.ZodEffects,...xt(r)}),n})(),xh=(()=>{class n extends Qt{_parse(t){return this._getType(t)===Be.undefined?oo(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}return n.create=(e,t)=>new n({innerType:e,typeName:yt.ZodOptional,...xt(t)}),n})(),Yv=(()=>{class n extends Qt{_parse(t){return this._getType(t)===Be.null?oo(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}return n.create=(e,t)=>new n({innerType:e,typeName:yt.ZodNullable,...xt(t)}),n})(),Y5=(()=>{class n extends Qt{_parse(t){const{ctx:r}=this._processInputParams(t);let i=r.data;return r.parsedType===Be.undefined&&(i=this._def.defaultValue()),this._def.innerType._parse({data:i,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}return n.create=(e,t)=>new n({innerType:e,typeName:yt.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...xt(t)}),n})(),Q5=(()=>{class n extends Qt{_parse(t){const{ctx:r}=this._processInputParams(t),i={...r,common:{...r.common,issues:[]}},s=this._def.innerType._parse({data:i.data,path:i.path,parent:{...i}});return Vb(s)?s.then(o=>({status:"valid",value:"valid"===o.status?o.value:this._def.catchValue({get error(){return new Lc(i.common.issues)},input:i.data})})):{status:"valid",value:"valid"===s.status?s.value:this._def.catchValue({get error(){return new Lc(i.common.issues)},input:i.data})}}removeCatch(){return this._def.innerType}}return n.create=(e,t)=>new n({innerType:e,typeName:yt.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...xt(t)}),n})();Symbol("zod_brand");class J5 extends Qt{_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.type._parse({data:t.data,path:t.path,parent:t})}unwrap(){return this._def.type}}class Wb extends Qt{_parse(e){var t=this;const{status:r,ctx:i}=this._processInputParams(e);if(i.common.async)return function(){var o=(0,b.A)(function*(){const a=yield t._def.in._parseAsync({data:i.data,path:i.path,parent:i});return"aborted"===a.status?_t:"dirty"===a.status?(r.dirty(),Hv(a.value)):t._def.out._parseAsync({data:a.value,path:i.path,parent:i})});return function(){return o.apply(this,arguments)}}()();{const s=this._def.in._parseSync({data:i.data,path:i.path,parent:i});return"aborted"===s.status?_t:"dirty"===s.status?(r.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:i.path,parent:i})}}static create(e,t){return new Wb({in:e,out:t,typeName:yt.ZodPipeline})}}let X5=(()=>{class n extends Qt{_parse(t){const r=this._def.innerType._parse(t),i=s=>(Dg(s)&&(s.value=Object.freeze(s.value)),s);return Vb(r)?r.then(s=>i(s)):i(r)}unwrap(){return this._def.innerType}}return n.create=(e,t)=>new n({innerType:e,typeName:yt.ZodReadonly,...xt(t)}),n})();var yt=function(n){return n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly",n}(yt||{});const Vc=JN.create,nk=V5.create,e9=B5.create,t9=Bb.create,Qv=$b.create,wIe=Gv.create,TIe=W5.create,bIe=Hb.create,AIe=q5.create,SIe=Dh.create,Pg={string:n=>JN.create({...n,coerce:!0}),number:n=>V5.create({...n,coerce:!0}),boolean:n=>B5.create({...n,coerce:!0}),bigint:n=>U5.create({...n,coerce:!0}),date:n=>$5.create({...n,coerce:!0})};class Jv{}function vt(n,e){return n.replace(/\{([^}]+)\}/g,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const s=e[i];return null!=s?String(s):""}throw new Error(`Key '${i}' not found in valueMap.`)})}function _(n,e,t){for(let s=0;s<e.length-1;s++){const o=e[s];if(o.endsWith("[]")){const a=o.slice(0,-2);if(!(a in n)){if(!Array.isArray(t))throw new Error(`Value must be a list given an array path ${o}`);n[a]=Array.from({length:t.length},()=>({}))}if(Array.isArray(n[a])){const l=n[a];if(Array.isArray(t))for(let u=0;u<l.length;u++)_(l[u],e.slice(s+1),t[u]);else for(const u of l)_(u,e.slice(s+1),t)}return}if(o.endsWith("[0]")){const a=o.slice(0,-3);return a in n||(n[a]=[{}]),void _(n[a][0],e.slice(s+1),t)}(!n[o]||"object"!=typeof n[o])&&(n[o]={}),n=n[o]}const r=e[e.length-1],i=n[r];if(void 0!==i){if(!t||"object"==typeof t&&0===Object.keys(t).length||t===i)return;if("object"!=typeof i||"object"!=typeof t||null===i||null===t)throw new Error(`Cannot set value for an existing key. Key: ${r}`);Object.assign(i,t)}else n[r]=t}function p(n,e){try{if(1===e.length&&"_self"===e[0])return n;for(let t=0;t<e.length;t++){if("object"!=typeof n||null===n)return;const r=e[t];if(r.endsWith("[]")){const i=r.slice(0,-2);if(i in n){const s=n[i];return Array.isArray(s)?s.map(o=>p(o,e.slice(t+1))):void 0}return}n=n[r]}return n}catch(t){if(t instanceof TypeError)return;throw t}}var Fa=function(n){return n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n}(Fa||{}),rk=function(n){return n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO",n}(rk||{}),i9=function(n){return n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED",n}(i9||{}),Xv=function(n){return n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT",n}(Xv||{});class Zv{get text(){var e,t,r,i,s,o,a,l;if(0===(null===(i=null===(r=null===(t=null===(e=this.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content)||void 0===r?void 0:r.parts)||void 0===i?void 0:i.length))return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let u="",c=!1;const d=[];for(const f of null!==(l=null===(a=null===(o=null===(s=this.candidates)||void 0===s?void 0:s[0])||void 0===o?void 0:o.content)||void 0===a?void 0:a.parts)&&void 0!==l?l:[]){for(const[y,E]of Object.entries(f))"text"!==y&&"thought"!==y&&(null!==E||void 0!==E)&&d.push(y);if("string"==typeof f.text){if("boolean"==typeof f.thought&&f.thought)continue;c=!0,u+=f.text}}return d.length>0&&console.warn(`there are non-text parts ${d} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),c?u:void 0}get data(){var e,t,r,i,s,o,a,l;if(0===(null===(i=null===(r=null===(t=null===(e=this.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content)||void 0===r?void 0:r.parts)||void 0===i?void 0:i.length))return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let u="";const c=[];for(const d of null!==(l=null===(a=null===(o=null===(s=this.candidates)||void 0===s?void 0:s[0])||void 0===o?void 0:o.content)||void 0===a?void 0:a.parts)&&void 0!==l?l:[]){for(const[f,y]of Object.entries(d))"inlineData"!==f&&(null!==y||void 0!==y)&&c.push(f);d.inlineData&&"string"==typeof d.inlineData.data&&(u+=atob(d.inlineData.data))}return c.length>0&&console.warn(`there are non-data parts ${c} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}get functionCalls(){var e,t,r,i,s,o,a,l;if(0===(null===(i=null===(r=null===(t=null===(e=this.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content)||void 0===r?void 0:r.parts)||void 0===i?void 0:i.length))return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const u=null===(l=null===(a=null===(o=null===(s=this.candidates)||void 0===s?void 0:s[0])||void 0===o?void 0:o.content)||void 0===a?void 0:a.parts)||void 0===l?void 0:l.filter(c=>c.functionCall).map(c=>c.functionCall).filter(c=>void 0!==c);return 0!==u?.length?u:void 0}get executableCode(){var e,t,r,i,s,o,a,l,u;if(0===(null===(i=null===(r=null===(t=null===(e=this.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content)||void 0===r?void 0:r.parts)||void 0===i?void 0:i.length))return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const c=null===(l=null===(a=null===(o=null===(s=this.candidates)||void 0===s?void 0:s[0])||void 0===o?void 0:o.content)||void 0===a?void 0:a.parts)||void 0===l?void 0:l.filter(d=>d.executableCode).map(d=>d.executableCode).filter(d=>void 0!==d);return 0!==c?.length?null===(u=c?.[0])||void 0===u?void 0:u.code:void 0}get codeExecutionResult(){var e,t,r,i,s,o,a,l,u;if(0===(null===(i=null===(r=null===(t=null===(e=this.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content)||void 0===r?void 0:r.parts)||void 0===i?void 0:i.length))return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const c=null===(l=null===(a=null===(o=null===(s=this.candidates)||void 0===s?void 0:s[0])||void 0===o?void 0:o.content)||void 0===a?void 0:a.parts)||void 0===l?void 0:l.filter(d=>d.codeExecutionResult).map(d=>d.codeExecutionResult).filter(d=>void 0!==d);return 0!==c?.length?null===(u=c?.[0])||void 0===u?void 0:u.output:void 0}}class l9{}class u9{}class hwe{}class fwe{}class c9{}class d9{}class h9{}class pwe{}class f9{}class p9{}class g9{}class gwe{}class ik{constructor(e){const t={};for(const r of e.headers.entries())t[r[0]]=r[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class mwe{}class _we{}class ywe{get text(){var e,t,r;let i="",s=!1;const o=[];for(const a of null!==(r=null===(t=null===(e=this.serverContent)||void 0===e?void 0:e.modelTurn)||void 0===t?void 0:t.parts)&&void 0!==r?r:[]){for(const[l,u]of Object.entries(a))"text"!==l&&"thought"!==l&&null!==u&&o.push(l);if("string"==typeof a.text){if("boolean"==typeof a.thought&&a.thought)continue;s=!0,i+=a.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?i:void 0}get data(){var e,t,r;let i="";const s=[];for(const o of null!==(r=null===(t=null===(e=this.serverContent)||void 0===e?void 0:e.modelTurn)||void 0===t?void 0:t.parts)&&void 0!==r?r:[]){for(const[a,l]of Object.entries(o))"inlineData"!==a&&null!==l&&s.push(a);o.inlineData&&"string"==typeof o.inlineData.data&&(i+=atob(o.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class vwe{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}function dr(n,e){if(!e||"string"!=typeof e)throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}return`publishers/google/models/${e}`}return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function m9(n,e){const t=dr(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function _9(n,e){return Array.isArray(e)?e.map(t=>Gb(0,t)):[Gb(0,e)]}function Gb(n,e){if("object"==typeof e&&null!==e)return e;throw new Error("Could not parse input as Blob. Unsupported blob type: "+typeof e)}function y9(n,e){if(null==e)throw new Error("PartUnion is required");if("object"==typeof e)return e;if("string"==typeof e)return{text:e};throw new Error("Unsupported part type: "+typeof e)}function v9(n,e){if(null==e||Array.isArray(e)&&0===e.length)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>y9(0,t)):[y9(0,e)]}function sk(n){return null!=n&&"object"==typeof n&&"parts"in n&&Array.isArray(n.parts)}function E9(n){return null!=n&&"object"==typeof n&&"functionCall"in n}function C9(n){return null!=n&&"object"==typeof n&&"functionResponse"in n}function ao(n,e){if(null==e)throw new Error("ContentUnion is required");return sk(e)?e:{role:"user",parts:v9(0,e)}}function I9(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const r=ao(0,t);return r.parts&&r.parts.length>0&&void 0!==r.parts[0].text?[r.parts[0].text]:[]});if(n.isVertexAI()){const t=ao(0,e);return t.parts&&t.parts.length>0&&void 0!==t.parts[0].text?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>ao(0,t)):[ao(0,e)]}function La(n,e){if(null==e||Array.isArray(e)&&0===e.length)throw new Error("contents are required");if(!Array.isArray(e)){if(E9(e)||C9(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ao(0,e)]}const t=[],r=[],i=sk(e[0]);for(const s of e){const o=sk(s);if(o!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)t.push(s);else{if(E9(s)||C9(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");r.push(s)}}return i||t.push({role:"user",parts:v9(0,r)}),t}const w9=SIe(["string","number","integer","object","array","boolean","null"]),wwe=TIe([w9,Qv(w9)]);function Mg(n){const e={},t=["items"],r=["anyOf"],i=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const s=n.anyOf;null!=s&&2==s.length&&("null"===s[0].type?(e.nullable=!0,n=s[1]):"null"===s[1].type&&(e.nullable=!0,n=s[0])),n.type instanceof Array&&function bwe(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(r=>"null"!==r);if(1===t.length)e.type=Object.keys(Fa).includes(t[0].toUpperCase())?Fa[t[0].toUpperCase()]:Fa.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of t)e.anyOf.push({type:Object.keys(Fa).includes(r.toUpperCase())?Fa[r.toUpperCase()]:Fa.TYPE_UNSPECIFIED})}}(n.type,e);for(const[o,a]of Object.entries(n))if(null!=a)if("type"==o){if("null"===a)throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.keys(Fa).includes(a.toUpperCase())?a.toUpperCase():Fa.TYPE_UNSPECIFIED}else if(t.includes(o))e[o]=Mg(a);else if(r.includes(o)){const l=[];for(const u of a)"null"!=u.type?l.push(Mg(u)):e.nullable=!0;e[o]=l}else if(i.includes(o)){const l={};for(const[u,c]of Object.entries(a))l[u]=Mg(c);e[o]=l}else{if("additionalProperties"===o)continue;e[o]=a}return e}function qb(n,e){if(Object.keys(e).includes("$schema")){delete e.$schema;const t=function Twe(n=!0){const e=AIe(()=>{const t=wIe({type:wwe.optional(),format:Vc().optional(),title:Vc().optional(),description:Vc().optional(),default:t9().optional(),items:e.optional(),minItems:Pg.string().optional(),maxItems:Pg.string().optional(),enum:Qv(t9()).optional(),properties:bIe(Vc(),e).optional(),required:Qv(Vc()).optional(),minProperties:Pg.string().optional(),maxProperties:Pg.string().optional(),propertyOrdering:Qv(Vc()).optional(),minimum:nk().optional(),maximum:nk().optional(),minLength:Pg.string().optional(),maxLength:Pg.string().optional(),pattern:Vc().optional(),anyOf:Qv(e).optional(),additionalProperties:e9().optional()});return n?t.strict():t});return e}().parse(e);return Mg(t)}return Mg(e)}function T9(n,e){if("object"==typeof e)return e;if("string"==typeof e)return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error("Unsupported speechConfig type: "+typeof e)}function b9(n,e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function jb(n,e){if(e.functionDeclarations)for(const t of e.functionDeclarations)t.parameters&&(t.parameters=qb(0,t.parameters)),t.response&&(t.response=qb(0,t.response));return e}function Kb(n,e){if(null==e)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const t=[];for(const r of e)t.push(r);return t}function Uc(n,e){if("string"!=typeof e)throw new Error("name must be a string");return function Awe(n,e,t,r=1){const i=!e.startsWith(`${t}/`)&&e.split("/").length===r;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:i?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:i?`${t}/${e}`:e}(n,e,"cachedContents")}function A9(n,e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function Bc(n,e){if("string"!=typeof e)throw new Error("fromImageBytes must be a string");return e}function S9(n,e){var t;let r;if(function Swe(n){return null!=n&&"object"==typeof n&&"name"in n}(e)&&(r=e.name),!(function xwe(n){return null!=n&&"object"==typeof n&&"uri"in n}(e)&&(r=e.uri,void 0===r)||function Dwe(n){return null!=n&&"object"==typeof n&&"video"in n}(e)&&(r=null===(t=e.video)||void 0===t?void 0:t.uri,void 0===r))){if("string"==typeof e&&(r=e),void 0===r)throw new Error("Could not extract file name from the provided input.");if(r.startsWith("https://")){const s=r.split("files/")[1].match(/[a-z0-9]+/);if(null===s)throw new Error(`Could not extract file name from URI ${r}`);r=s[0]}else r.startsWith("files/")&&(r=r.split("files/")[1]);return r}}function D9(n,e){let t;return t=n.isVertexAI()?e?"publishers/google/models":"models":e?"models":"tunedModels",t}function x9(n,e){for(const t of["models","tunedModels","publisherModels"])if(Rwe(e,t))return e[t];return[]}function Rwe(n,e){return null!==n&&"object"==typeof n&&e in n}function R9(n,e){const t={},r=p(e,["parts"]);if(null!=r){let s=r;Array.isArray(s)&&(s=s.map(o=>function Lwe(n,e){const t={},r=p(e,["videoMetadata"]);null!=r&&_(t,["videoMetadata"],function Owe(n,e){const t={},r=p(e,["fps"]);null!=r&&_(t,["fps"],r);const i=p(e,["endOffset"]);null!=i&&_(t,["endOffset"],i);const s=p(e,["startOffset"]);return null!=s&&_(t,["startOffset"],s),t}(0,r));const i=p(e,["thought"]);null!=i&&_(t,["thought"],i);const s=p(e,["inlineData"]);null!=s&&_(t,["inlineData"],function Fwe(n,e){const t={};if(void 0!==p(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const r=p(e,["data"]);null!=r&&_(t,["data"],r);const i=p(e,["mimeType"]);return null!=i&&_(t,["mimeType"],i),t}(0,s));const o=p(e,["codeExecutionResult"]);null!=o&&_(t,["codeExecutionResult"],o);const a=p(e,["executableCode"]);null!=a&&_(t,["executableCode"],a);const l=p(e,["fileData"]);null!=l&&_(t,["fileData"],l);const u=p(e,["functionCall"]);null!=u&&_(t,["functionCall"],u);const c=p(e,["functionResponse"]);null!=c&&_(t,["functionResponse"],c);const d=p(e,["text"]);return null!=d&&_(t,["text"],d),t}(0,o))),_(t,["parts"],s)}const i=p(e,["role"]);return null!=i&&_(t,["role"],i),t}function Wwe(n,e){const t={},r=p(e,["functionDeclarations"]);if(null!=r){let l=r;Array.isArray(l)&&(l=l.map(u=>function Vwe(n,e){const t={},r=p(e,["behavior"]);null!=r&&_(t,["behavior"],r);const i=p(e,["description"]);null!=i&&_(t,["description"],i);const s=p(e,["name"]);null!=s&&_(t,["name"],s);const o=p(e,["parameters"]);null!=o&&_(t,["parameters"],o);const a=p(e,["response"]);return null!=a&&_(t,["response"],a),t}(0,u))),_(t,["functionDeclarations"],l)}if(void 0!==p(e,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(e,["googleSearch"]);null!=i&&_(t,["googleSearch"],function Bwe(n,e){const t={},r=p(e,["timeRangeFilter"]);return null!=r&&_(t,["timeRangeFilter"],function Uwe(n,e){const t={},r=p(e,["startTime"]);null!=r&&_(t,["startTime"],r);const i=p(e,["endTime"]);return null!=i&&_(t,["endTime"],i),t}(0,r)),t}(0,i));const s=p(e,["googleSearchRetrieval"]);if(null!=s&&_(t,["googleSearchRetrieval"],function Hwe(n,e){const t={},r=p(e,["dynamicRetrievalConfig"]);return null!=r&&_(t,["dynamicRetrievalConfig"],function $we(n,e){const t={},r=p(e,["mode"]);null!=r&&_(t,["mode"],r);const i=p(e,["dynamicThreshold"]);return null!=i&&_(t,["dynamicThreshold"],i),t}(0,r)),t}(0,s)),void 0!==p(e,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(void 0!==p(e,["googleMaps"]))throw new Error("googleMaps parameter is not supported in Gemini API.");null!=p(e,["urlContext"])&&_(t,["urlContext"],{});const a=p(e,["codeExecution"]);return null!=a&&_(t,["codeExecution"],a),t}function Kwe(n,e){const t={},r=p(e,["functionCallingConfig"]);null!=r&&_(t,["functionCallingConfig"],function Gwe(n,e){const t={},r=p(e,["mode"]);null!=r&&_(t,["mode"],r);const i=p(e,["allowedFunctionNames"]);return null!=i&&_(t,["allowedFunctionNames"],i),t}(0,r));const i=p(e,["retrievalConfig"]);return null!=i&&_(t,["retrievalConfig"],function jwe(n,e){const t={},r=p(e,["latLng"]);return null!=r&&_(t,["latLng"],function qwe(n,e){const t={},r=p(e,["latitude"]);null!=r&&_(t,["latitude"],r);const i=p(e,["longitude"]);return null!=i&&_(t,["longitude"],i),t}(0,r)),t}(0,i)),t}function P9(n,e){const t={},r=p(e,["parts"]);if(null!=r){let s=r;Array.isArray(s)&&(s=s.map(o=>function sTe(n,e){const t={},r=p(e,["videoMetadata"]);null!=r&&_(t,["videoMetadata"],function rTe(n,e){const t={},r=p(e,["fps"]);null!=r&&_(t,["fps"],r);const i=p(e,["endOffset"]);null!=i&&_(t,["endOffset"],i);const s=p(e,["startOffset"]);return null!=s&&_(t,["startOffset"],s),t}(0,r));const i=p(e,["thought"]);null!=i&&_(t,["thought"],i);const s=p(e,["inlineData"]);null!=s&&_(t,["inlineData"],function iTe(n,e){const t={},r=p(e,["displayName"]);null!=r&&_(t,["displayName"],r);const i=p(e,["data"]);null!=i&&_(t,["data"],i);const s=p(e,["mimeType"]);return null!=s&&_(t,["mimeType"],s),t}(0,s));const o=p(e,["codeExecutionResult"]);null!=o&&_(t,["codeExecutionResult"],o);const a=p(e,["executableCode"]);null!=a&&_(t,["executableCode"],a);const l=p(e,["fileData"]);null!=l&&_(t,["fileData"],l);const u=p(e,["functionCall"]);null!=u&&_(t,["functionCall"],u);const c=p(e,["functionResponse"]);null!=c&&_(t,["functionResponse"],c);const d=p(e,["text"]);return null!=d&&_(t,["text"],d),t}(0,o))),_(t,["parts"],s)}const i=p(e,["role"]);return null!=i&&_(t,["role"],i),t}function gTe(n,e){const t={},r=p(e,["functionDeclarations"]);if(null!=r){let c=r;Array.isArray(c)&&(c=c.map(d=>function oTe(n,e){const t={};if(void 0!==p(e,["behavior"]))throw new Error("behavior parameter is not supported in Vertex AI.");const r=p(e,["description"]);null!=r&&_(t,["description"],r);const i=p(e,["name"]);null!=i&&_(t,["name"],i);const s=p(e,["parameters"]);null!=s&&_(t,["parameters"],s);const o=p(e,["response"]);return null!=o&&_(t,["response"],o),t}(0,d))),_(t,["functionDeclarations"],c)}const i=p(e,["retrieval"]);null!=i&&_(t,["retrieval"],i);const s=p(e,["googleSearch"]);null!=s&&_(t,["googleSearch"],function lTe(n,e){const t={},r=p(e,["timeRangeFilter"]);return null!=r&&_(t,["timeRangeFilter"],function aTe(n,e){const t={},r=p(e,["startTime"]);null!=r&&_(t,["startTime"],r);const i=p(e,["endTime"]);return null!=i&&_(t,["endTime"],i),t}(0,r)),t}(0,s));const o=p(e,["googleSearchRetrieval"]);null!=o&&_(t,["googleSearchRetrieval"],function cTe(n,e){const t={},r=p(e,["dynamicRetrievalConfig"]);return null!=r&&_(t,["dynamicRetrievalConfig"],function uTe(n,e){const t={},r=p(e,["mode"]);null!=r&&_(t,["mode"],r);const i=p(e,["dynamicThreshold"]);return null!=i&&_(t,["dynamicThreshold"],i),t}(0,r)),t}(0,o)),null!=p(e,["enterpriseWebSearch"])&&_(t,["enterpriseWebSearch"],{});const l=p(e,["googleMaps"]);if(null!=l&&_(t,["googleMaps"],function pTe(n,e){const t={},r=p(e,["authConfig"]);return null!=r&&_(t,["authConfig"],function fTe(n,e){const t={},r=p(e,["apiKeyConfig"]);null!=r&&_(t,["apiKeyConfig"],function hTe(n,e){const t={},r=p(e,["apiKeyString"]);return null!=r&&_(t,["apiKeyString"],r),t}(0,r));const i=p(e,["authType"]);null!=i&&_(t,["authType"],i);const s=p(e,["googleServiceAccountConfig"]);null!=s&&_(t,["googleServiceAccountConfig"],s);const o=p(e,["httpBasicAuthConfig"]);null!=o&&_(t,["httpBasicAuthConfig"],o);const a=p(e,["oauthConfig"]);null!=a&&_(t,["oauthConfig"],a);const l=p(e,["oidcConfig"]);return null!=l&&_(t,["oidcConfig"],l),t}(0,r)),t}(0,l)),void 0!==p(e,["urlContext"]))throw new Error("urlContext parameter is not supported in Vertex AI.");const u=p(e,["codeExecution"]);return null!=u&&_(t,["codeExecution"],u),t}function vTe(n,e){const t={},r=p(e,["functionCallingConfig"]);null!=r&&_(t,["functionCallingConfig"],function mTe(n,e){const t={},r=p(e,["mode"]);null!=r&&_(t,["mode"],r);const i=p(e,["allowedFunctionNames"]);return null!=i&&_(t,["allowedFunctionNames"],i),t}(0,r));const i=p(e,["retrievalConfig"]);return null!=i&&_(t,["retrievalConfig"],function yTe(n,e){const t={},r=p(e,["latLng"]);return null!=r&&_(t,["latLng"],function _Te(n,e){const t={},r=p(e,["latitude"]);null!=r&&_(t,["latitude"],r);const i=p(e,["longitude"]);return null!=i&&_(t,["longitude"],i),t}(0,r)),t}(0,i)),t}function Qb(n,e){const t={},r=p(e,["name"]);null!=r&&_(t,["name"],r);const i=p(e,["displayName"]);null!=i&&_(t,["displayName"],i);const s=p(e,["model"]);null!=s&&_(t,["model"],s);const o=p(e,["createTime"]);null!=o&&_(t,["createTime"],o);const a=p(e,["updateTime"]);null!=a&&_(t,["updateTime"],a);const l=p(e,["expireTime"]);null!=l&&_(t,["expireTime"],l);const u=p(e,["usageMetadata"]);return null!=u&&_(t,["usageMetadata"],u),t}function Jb(n,e){const t={},r=p(e,["name"]);null!=r&&_(t,["name"],r);const i=p(e,["displayName"]);null!=i&&_(t,["displayName"],i);const s=p(e,["model"]);null!=s&&_(t,["model"],s);const o=p(e,["createTime"]);null!=o&&_(t,["createTime"],o);const a=p(e,["updateTime"]);null!=a&&_(t,["updateTime"],a);const l=p(e,["expireTime"]);null!=l&&_(t,["expireTime"],l);const u=p(e,["usageMetadata"]);return null!=u&&_(t,["usageMetadata"],u),t}var eE=function(n){return n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n}(eE||{});class Xb{constructor(e,t,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,r,i)}init(e,t,r){var i,s;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.idxInternal=0;let o={config:{}};o=r?"object"==typeof r?Object.assign({},r):r:{config:{}},o.config&&(o.config.pageToken=t.nextPageToken),this.paramsInternal=o,this.pageInternalSize=null!==(s=null===(i=o.config)||void 0===i?void 0:i.pageSize)&&void 0!==s?s:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){var t,e=this;return{next:(t=(0,b.A)(function*(){if(e.idxInternal>=e.pageLength){if(!e.hasNextPage())return{value:void 0,done:!0};yield e.nextPage()}const r=e.getItem(e.idxInternal);return e.idxInternal+=1,{value:r,done:!1}}),function(){return t.apply(this,arguments)}),return:function(){var t=(0,b.A)(function*(){return{value:void 0,done:!0}});return function(){return t.apply(this,arguments)}}()}}nextPage(){var e=this;return(0,b.A)(function*(){if(!e.hasNextPage())throw new Error("No more pages to fetch.");const t=yield e.requestInternal(e.params);return e.initNextPage(t),e.page})()}hasNextPage(){var e;return void 0!==(null===(e=this.params.config)||void 0===e?void 0:e.pageToken)}}class MTe extends Jv{constructor(e){var t;super(),t=this,this.apiClient=e,this.list=(0,b.A)(function*(r={}){return new Xb(eE.PAGED_ITEM_CACHED_CONTENTS,i=>t.listInternal(i),yield t.listInternal(r),r)})}create(e){var t=this;return(0,b.A)(function*(){var r,i,s,o;let a,l="",u={};if(t.apiClient.isVertexAI()){const c=function CTe(n,e){const t={},r=p(e,["model"]);null!=r&&_(t,["model"],m9(n,r));const i=p(e,["config"]);return null!=i&&_(t,["config"],function ETe(n,e,t){const i=p(e,["ttl"]);void 0!==t&&null!=i&&_(t,["ttl"],i);const s=p(e,["expireTime"]);void 0!==t&&null!=s&&_(t,["expireTime"],s);const o=p(e,["displayName"]);void 0!==t&&null!=o&&_(t,["displayName"],o);const a=p(e,["contents"]);if(void 0!==t&&null!=a){let f=La(0,a);Array.isArray(f)&&(f=f.map(y=>P9(0,y))),_(t,["contents"],f)}const l=p(e,["systemInstruction"]);void 0!==t&&null!=l&&_(t,["systemInstruction"],P9(0,ao(0,l)));const u=p(e,["tools"]);if(void 0!==t&&null!=u){let f=u;Array.isArray(f)&&(f=f.map(y=>gTe(0,y))),_(t,["tools"],f)}const c=p(e,["toolConfig"]);void 0!==t&&null!=c&&_(t,["toolConfig"],vTe(0,c));const d=p(e,["kmsKeyName"]);return void 0!==t&&null!=d&&_(t,["encryption_spec","kmsKeyName"],d),{}}(0,i,t)),t}(t.apiClient,e);return l=vt("cachedContents",c._url),u=c._query,delete c.config,delete c._url,delete c._query,a=t.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>Jb(0,d))}{const c=function Qwe(n,e){const t={},r=p(e,["model"]);null!=r&&_(t,["model"],m9(n,r));const i=p(e,["config"]);return null!=i&&_(t,["config"],function Ywe(n,e,t){const i=p(e,["ttl"]);void 0!==t&&null!=i&&_(t,["ttl"],i);const s=p(e,["expireTime"]);void 0!==t&&null!=s&&_(t,["expireTime"],s);const o=p(e,["displayName"]);void 0!==t&&null!=o&&_(t,["displayName"],o);const a=p(e,["contents"]);if(void 0!==t&&null!=a){let d=La(0,a);Array.isArray(d)&&(d=d.map(f=>R9(0,f))),_(t,["contents"],d)}const l=p(e,["systemInstruction"]);void 0!==t&&null!=l&&_(t,["systemInstruction"],R9(0,ao(0,l)));const u=p(e,["tools"]);if(void 0!==t&&null!=u){let d=u;Array.isArray(d)&&(d=d.map(f=>Wwe(0,f))),_(t,["tools"],d)}const c=p(e,["toolConfig"]);if(void 0!==t&&null!=c&&_(t,["toolConfig"],Kwe(0,c)),void 0!==p(e,["kmsKeyName"]))throw new Error("kmsKeyName parameter is not supported in Gemini API.");return{}}(0,i,t)),t}(t.apiClient,e);return l=vt("cachedContents",c._url),u=c._query,delete c.config,delete c._url,delete c._query,a=t.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:null===(s=e.config)||void 0===s?void 0:s.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(d=>d.json()),a.then(d=>Qb(0,d))}})()}get(e){var t=this;return(0,b.A)(function*(){var r,i,s,o;let a,l="",u={};if(t.apiClient.isVertexAI()){const c=function ITe(n,e){const t={},r=p(e,["name"]);null!=r&&_(t,["_url","name"],Uc(n,r));const i=p(e,["config"]);return null!=i&&_(t,["config"],i),t}(t.apiClient,e);return l=vt("{name}",c._url),u=c._query,delete c.config,delete c._url,delete c._query,a=t.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>Jb(0,d))}{const c=function Jwe(n,e){const t={},r=p(e,["name"]);null!=r&&_(t,["_url","name"],Uc(n,r));const i=p(e,["config"]);return null!=i&&_(t,["config"],i),t}(t.apiClient,e);return l=vt("{name}",c._url),u=c._query,delete c.config,delete c._url,delete c._query,a=t.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:null===(s=e.config)||void 0===s?void 0:s.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(d=>d.json()),a.then(d=>Qb(0,d))}})()}delete(e){var t=this;return(0,b.A)(function*(){var r,i,s,o;let a,l="",u={};if(t.apiClient.isVertexAI()){const c=function wTe(n,e){const t={},r=p(e,["name"]);null!=r&&_(t,["_url","name"],Uc(n,r));const i=p(e,["config"]);return null!=i&&_(t,["config"],i),t}(t.apiClient,e);return l=vt("{name}",c._url),u=c._query,delete c.config,delete c._url,delete c._query,a=t.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then(d=>d.json()),a.then(()=>{const f=new p9;return Object.assign(f,{}),f})}{const c=function Xwe(n,e){const t={},r=p(e,["name"]);null!=r&&_(t,["_url","name"],Uc(n,r));const i=p(e,["config"]);return null!=i&&_(t,["config"],i),t}(t.apiClient,e);return l=vt("{name}",c._url),u=c._query,delete c.config,delete c._url,delete c._query,a=t.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:null===(s=e.config)||void 0===s?void 0:s.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(d=>d.json()),a.then(()=>{const f=new p9;return Object.assign(f,{}),f})}})()}update(e){var t=this;return(0,b.A)(function*(){var r,i,s,o;let a,l="",u={};if(t.apiClient.isVertexAI()){const c=function bTe(n,e){const t={},r=p(e,["name"]);null!=r&&_(t,["_url","name"],Uc(n,r));const i=p(e,["config"]);return null!=i&&_(t,["config"],function TTe(n,e,t){const i=p(e,["ttl"]);void 0!==t&&null!=i&&_(t,["ttl"],i);const s=p(e,["expireTime"]);return void 0!==t&&null!=s&&_(t,["expireTime"],s),{}}(0,i,t)),t}(t.apiClient,e);return l=vt("{name}",c._url),u=c._query,delete c.config,delete c._url,delete c._query,a=t.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>Jb(0,d))}{const c=function eTe(n,e){const t={},r=p(e,["name"]);null!=r&&_(t,["_url","name"],Uc(n,r));const i=p(e,["config"]);return null!=i&&_(t,["config"],function Zwe(n,e,t){const i=p(e,["ttl"]);void 0!==t&&null!=i&&_(t,["ttl"],i);const s=p(e,["expireTime"]);return void 0!==t&&null!=s&&_(t,["expireTime"],s),{}}(0,i,t)),t}(t.apiClient,e);return l=vt("{name}",c._url),u=c._query,delete c.config,delete c._url,delete c._query,a=t.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:null===(s=e.config)||void 0===s?void 0:s.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(d=>d.json()),a.then(d=>Qb(0,d))}})()}listInternal(e){var t=this;return(0,b.A)(function*(){var r,i,s,o;let a,l="",u={};if(t.apiClient.isVertexAI()){const c=function STe(n,e){const t={},r=p(e,["config"]);return null!=r&&_(t,["config"],function ATe(n,e,t){const i=p(e,["pageSize"]);void 0!==t&&null!=i&&_(t,["_query","pageSize"],i);const s=p(e,["pageToken"]);return void 0!==t&&null!=s&&_(t,["_query","pageToken"],s),{}}(0,r,t)),t}(0,e);return l=vt("cachedContents",c._url),u=c._query,delete c.config,delete c._url,delete c._query,a=t.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>{const f=function PTe(n,e){const t={},r=p(e,["nextPageToken"]);null!=r&&_(t,["nextPageToken"],r);const i=p(e,["cachedContents"]);if(null!=i){let s=i;Array.isArray(s)&&(s=s.map(o=>Jb(0,o))),_(t,["cachedContents"],s)}return t}(0,d),y=new g9;return Object.assign(y,f),y})}{const c=function nTe(n,e){const t={},r=p(e,["config"]);return null!=r&&_(t,["config"],function tTe(n,e,t){const i=p(e,["pageSize"]);void 0!==t&&null!=i&&_(t,["_query","pageSize"],i);const s=p(e,["pageToken"]);return void 0!==t&&null!=s&&_(t,["_query","pageToken"],s),{}}(0,r,t)),t}(0,e);return l=vt("cachedContents",c._url),u=c._query,delete c.config,delete c._url,delete c._query,a=t.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:null===(s=e.config)||void 0===s?void 0:s.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(d=>d.json()),a.then(d=>{const f=function xTe(n,e){const t={},r=p(e,["nextPageToken"]);null!=r&&_(t,["nextPageToken"],r);const i=p(e,["cachedContents"]);if(null!=i){let s=i;Array.isArray(s)&&(s=s.map(o=>Qb(0,o))),_(t,["cachedContents"],s)}return t}(0,d),y=new g9;return Object.assign(y,f),y})}})()}}function hr(n){return this instanceof hr?(this.v=n,this):new hr(n)}function Ng(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=t.apply(n,e||[]),s=[];return i=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function o(y){return function(E){return Promise.resolve(E).then(y,d)}}),i[Symbol.asyncIterator]=function(){return this},i;function a(y,E){r[y]&&(i[y]=function(I){return new Promise(function(T,P){s.push([y,I,T,P])>1||l(y,I)})},E&&(i[y]=E(i[y])))}function l(y,E){try{!function u(y){y.value instanceof hr?Promise.resolve(y.value.v).then(c,d):f(s[0][2],y)}(r[y](E))}catch(I){f(s[0][3],I)}}function c(y){l("next",y)}function d(y){l("throw",y)}function f(y,E){y(E),s.shift(),s.length&&l(s[0][0],s[0][1])}}function tE(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function M9(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,l){!function i(s,o,a,l){Promise.resolve(l).then(function(u){s({value:u,done:a})},o)}(a,l,(o=n[s](o)).done,o.value)})}}}function NTe(n){var e;if(null==n.candidates||0===n.candidates.length)return!1;const t=null===(e=n.candidates[0])||void 0===e?void 0:e.content;return void 0!==t&&N9(t)}function N9(n){if(void 0===n.parts||0===n.parts.length)return!1;for(const e of n.parts)if(void 0===e||0===Object.keys(e).length||!e.thought&&void 0!==e.text&&""===e.text)return!1;return!0}function k9(n){if(void 0===n||0===n.length)return[];const e=[],t=n.length;let r=0;for(;r<t;)if("user"===n[r].role)e.push(n[r]),r++;else{const i=[];let s=!0;for(;r<t&&"model"===n[r].role;)i.push(n[r]),s&&!N9(n[r])&&(s=!1),r++;s?e.push(...i):e.pop()}return e}"function"==typeof SuppressedError&&SuppressedError;class OTe{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new FTe(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class FTe{constructor(e,t,r,i={},s=[]){this.apiClient=e,this.modelsModule=t,this.model=r,this.config=i,this.history=s,this.sendPromise=Promise.resolve(),function kTe(n){if(0!==n.length)for(const e of n)if("user"!==e.role&&"model"!==e.role)throw new Error(`Role must be user or model, but got ${e.role}.`)}(s)}sendMessage(e){var t=this;return(0,b.A)(function*(){var r;yield t.sendPromise;const i=ao(0,e.message),s=t.modelsModule.generateContent({model:t.model,contents:t.getHistory(!0).concat(i),config:null!==(r=e.config)&&void 0!==r?r:t.config});return t.sendPromise=(0,b.A)(function*(){var o,a,l;const u=yield s,c=null===(a=null===(o=u.candidates)||void 0===o?void 0:o[0])||void 0===a?void 0:a.content,d=u.automaticFunctionCallingHistory,f=t.getHistory(!0).length;let y=[];null!=d&&(y=null!==(l=d.slice(f))&&void 0!==l?l:[]),t.recordHistory(i,c?[c]:[],y)})(),yield t.sendPromise.catch(()=>{t.sendPromise=Promise.resolve()}),s})()}sendMessageStream(e){var t=this;return(0,b.A)(function*(){var r;yield t.sendPromise;const i=ao(0,e.message),s=t.modelsModule.generateContentStream({model:t.model,contents:t.getHistory(!0).concat(i),config:null!==(r=e.config)&&void 0!==r?r:t.config});t.sendPromise=s.then(()=>{}).catch(()=>{});const o=yield s;return t.processStreamResponse(o,i)})()}getHistory(e=!1){const t=e?k9(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var r,i;return Ng(this,arguments,function*(){var o,a,l;const c=[];try{for(var y,d=!0,f=tE(e);!(o=(y=yield hr(f.next())).done);d=!0){d=!1;const E=y.value;if(NTe(E)){const I=null===(i=null===(r=E.candidates)||void 0===r?void 0:r[0])||void 0===i?void 0:i.content;void 0!==I&&c.push(I)}yield yield hr(E)}}catch(E){a={error:E}}finally{try{!d&&!o&&(l=f.return)&&(yield hr(l.call(f)))}finally{if(a)throw a.error}}this.recordHistory(t,c)})}recordHistory(e,t,r){let i=[];t.length>0&&t.every(s=>void 0!==s.role)?i=t:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...k9(r)):this.history.push(e),this.history.push(...i)}}function ok(n,e){const t={},r=p(e,["name"]);null!=r&&_(t,["name"],r);const i=p(e,["displayName"]);null!=i&&_(t,["displayName"],i);const s=p(e,["mimeType"]);null!=s&&_(t,["mimeType"],s);const o=p(e,["sizeBytes"]);null!=o&&_(t,["sizeBytes"],o);const a=p(e,["createTime"]);null!=a&&_(t,["createTime"],a);const l=p(e,["expirationTime"]);null!=l&&_(t,["expirationTime"],l);const u=p(e,["updateTime"]);null!=u&&_(t,["updateTime"],u);const c=p(e,["sha256Hash"]);null!=c&&_(t,["sha256Hash"],c);const d=p(e,["uri"]);null!=d&&_(t,["uri"],d);const f=p(e,["downloadUri"]);null!=f&&_(t,["downloadUri"],f);const y=p(e,["state"]);null!=y&&_(t,["state"],y);const E=p(e,["source"]);null!=E&&_(t,["source"],E);const I=p(e,["videoMetadata"]);null!=I&&_(t,["videoMetadata"],I);const T=p(e,["error"]);return null!=T&&_(t,["error"],function WTe(n,e){const t={},r=p(e,["details"]);null!=r&&_(t,["details"],r);const i=p(e,["message"]);null!=i&&_(t,["message"],i);const s=p(e,["code"]);return null!=s&&_(t,["code"],s),t}(0,T)),t}class KTe extends Jv{constructor(e){var t;super(),t=this,this.apiClient=e,this.list=(0,b.A)(function*(r={}){return new Xb(eE.PAGED_ITEM_FILES,i=>t.listInternal(i),yield t.listInternal(r),r)})}upload(e){var t=this;return(0,b.A)(function*(){if(t.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return t.apiClient.uploadFile(e.file,e.config).then(r=>ok(0,r))})()}download(e){var t=this;return(0,b.A)(function*(){yield t.apiClient.downloadFile(e)})()}listInternal(e){var t=this;return(0,b.A)(function*(){var r,i;let s,o="",a={};if(t.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=function VTe(n,e){const t={},r=p(e,["config"]);return null!=r&&_(t,["config"],function LTe(n,e,t){const i=p(e,["pageSize"]);void 0!==t&&null!=i&&_(t,["_query","pageSize"],i);const s=p(e,["pageToken"]);return void 0!==t&&null!=s&&_(t,["_query","pageToken"],s),{}}(0,r,t)),t}(0,e);return o=vt("files",l._url),a=l._query,delete l.config,delete l._url,delete l._query,s=t.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then(u=>u.json()),s.then(u=>{const c=function GTe(n,e){const t={},r=p(e,["nextPageToken"]);null!=r&&_(t,["nextPageToken"],r);const i=p(e,["files"]);if(null!=i){let s=i;Array.isArray(s)&&(s=s.map(o=>ok(0,o))),_(t,["files"],s)}return t}(0,u),d=new gwe;return Object.assign(d,c),d})}})()}createInternal(e){var t=this;return(0,b.A)(function*(){var r,i;let s,o="",a={};if(t.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=function $Te(n,e){const t={},r=p(e,["file"]);null!=r&&_(t,["file"],function BTe(n,e){const t={},r=p(e,["name"]);null!=r&&_(t,["name"],r);const i=p(e,["displayName"]);null!=i&&_(t,["displayName"],i);const s=p(e,["mimeType"]);null!=s&&_(t,["mimeType"],s);const o=p(e,["sizeBytes"]);null!=o&&_(t,["sizeBytes"],o);const a=p(e,["createTime"]);null!=a&&_(t,["createTime"],a);const l=p(e,["expirationTime"]);null!=l&&_(t,["expirationTime"],l);const u=p(e,["updateTime"]);null!=u&&_(t,["updateTime"],u);const c=p(e,["sha256Hash"]);null!=c&&_(t,["sha256Hash"],c);const d=p(e,["uri"]);null!=d&&_(t,["uri"],d);const f=p(e,["downloadUri"]);null!=f&&_(t,["downloadUri"],f);const y=p(e,["state"]);null!=y&&_(t,["state"],y);const E=p(e,["source"]);null!=E&&_(t,["source"],E);const I=p(e,["videoMetadata"]);null!=I&&_(t,["videoMetadata"],I);const T=p(e,["error"]);return null!=T&&_(t,["error"],function UTe(n,e){const t={},r=p(e,["details"]);null!=r&&_(t,["details"],r);const i=p(e,["message"]);null!=i&&_(t,["message"],i);const s=p(e,["code"]);return null!=s&&_(t,["code"],s),t}(0,T)),t}(0,r));const i=p(e,["config"]);return null!=i&&_(t,["config"],i),t}(0,e);return o=vt("upload/v1beta/files",l._url),a=l._query,delete l.config,delete l._url,delete l._query,s=t.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then(u=>u.json()),s.then(()=>{const c=new mwe;return Object.assign(c,{}),c})}})()}get(e){var t=this;return(0,b.A)(function*(){var r,i;let s,o="",a={};if(t.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=function HTe(n,e){const t={},r=p(e,["name"]);null!=r&&_(t,["_url","file"],S9(0,r));const i=p(e,["config"]);return null!=i&&_(t,["config"],i),t}(0,e);return o=vt("files/{file}",l._url),a=l._query,delete l.config,delete l._url,delete l._query,s=t.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then(u=>u.json()),s.then(u=>ok(0,u))}})()}delete(e){var t=this;return(0,b.A)(function*(){var r,i;let s,o="",a={};if(t.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=function zTe(n,e){const t={},r=p(e,["name"]);null!=r&&_(t,["_url","file"],S9(0,r));const i=p(e,["config"]);return null!=i&&_(t,["config"],i),t}(0,e);return o=vt("files/{file}",l._url),a=l._query,delete l.config,delete l._url,delete l._query,s=t.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then(u=>u.json()),s.then(()=>{const c=new _we;return Object.assign(c,{}),c})}})()}}function O9(n,e){const t={},r=p(e,["prebuiltVoiceConfig"]);return null!=r&&_(t,["prebuiltVoiceConfig"],function YTe(n,e){const t={},r=p(e,["voiceName"]);return null!=r&&_(t,["voiceName"],r),t}(0,r)),t}function bbe(n,e){const t={},r=p(e,["functionDeclarations"]);if(null!=r){let l=r;Array.isArray(l)&&(l=l.map(u=>function cbe(n,e){const t={},r=p(e,["behavior"]);null!=r&&_(t,["behavior"],r);const i=p(e,["description"]);null!=i&&_(t,["description"],i);const s=p(e,["name"]);null!=s&&_(t,["name"],s);const o=p(e,["parameters"]);null!=o&&_(t,["parameters"],o);const a=p(e,["response"]);return null!=a&&_(t,["response"],a),t}(0,u))),_(t,["functionDeclarations"],l)}if(void 0!==p(e,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(e,["googleSearch"]);null!=i&&_(t,["googleSearch"],function pbe(n,e){const t={},r=p(e,["timeRangeFilter"]);return null!=r&&_(t,["timeRangeFilter"],function hbe(n,e){const t={},r=p(e,["startTime"]);null!=r&&_(t,["startTime"],r);const i=p(e,["endTime"]);return null!=i&&_(t,["endTime"],i),t}(0,r)),t}(0,i));const s=p(e,["googleSearchRetrieval"]);if(null!=s&&_(t,["googleSearchRetrieval"],function ybe(n,e){const t={},r=p(e,["dynamicRetrievalConfig"]);return null!=r&&_(t,["dynamicRetrievalConfig"],function mbe(n,e){const t={},r=p(e,["mode"]);null!=r&&_(t,["mode"],r);const i=p(e,["dynamicThreshold"]);return null!=i&&_(t,["dynamicThreshold"],i),t}(0,r)),t}(0,s)),void 0!==p(e,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(void 0!==p(e,["googleMaps"]))throw new Error("googleMaps parameter is not supported in Gemini API.");null!=p(e,["urlContext"])&&_(t,["urlContext"],{});const a=p(e,["codeExecution"]);return null!=a&&_(t,["codeExecution"],a),t}function Abe(n,e){const t={},r=p(e,["functionDeclarations"]);if(null!=r){let c=r;Array.isArray(c)&&(c=c.map(d=>function dbe(n,e){const t={};if(void 0!==p(e,["behavior"]))throw new Error("behavior parameter is not supported in Vertex AI.");const r=p(e,["description"]);null!=r&&_(t,["description"],r);const i=p(e,["name"]);null!=i&&_(t,["name"],i);const s=p(e,["parameters"]);null!=s&&_(t,["parameters"],s);const o=p(e,["response"]);return null!=o&&_(t,["response"],o),t}(0,d))),_(t,["functionDeclarations"],c)}const i=p(e,["retrieval"]);null!=i&&_(t,["retrieval"],i);const s=p(e,["googleSearch"]);null!=s&&_(t,["googleSearch"],function gbe(n,e){const t={},r=p(e,["timeRangeFilter"]);return null!=r&&_(t,["timeRangeFilter"],function fbe(n,e){const t={},r=p(e,["startTime"]);null!=r&&_(t,["startTime"],r);const i=p(e,["endTime"]);return null!=i&&_(t,["endTime"],i),t}(0,r)),t}(0,s));const o=p(e,["googleSearchRetrieval"]);null!=o&&_(t,["googleSearchRetrieval"],function vbe(n,e){const t={},r=p(e,["dynamicRetrievalConfig"]);return null!=r&&_(t,["dynamicRetrievalConfig"],function _be(n,e){const t={},r=p(e,["mode"]);null!=r&&_(t,["mode"],r);const i=p(e,["dynamicThreshold"]);return null!=i&&_(t,["dynamicThreshold"],i),t}(0,r)),t}(0,o)),null!=p(e,["enterpriseWebSearch"])&&_(t,["enterpriseWebSearch"],{});const l=p(e,["googleMaps"]);if(null!=l&&_(t,["googleMaps"],function wbe(n,e){const t={},r=p(e,["authConfig"]);return null!=r&&_(t,["authConfig"],function Ibe(n,e){const t={},r=p(e,["apiKeyConfig"]);null!=r&&_(t,["apiKeyConfig"],function Cbe(n,e){const t={},r=p(e,["apiKeyString"]);return null!=r&&_(t,["apiKeyString"],r),t}(0,r));const i=p(e,["authType"]);null!=i&&_(t,["authType"],i);const s=p(e,["googleServiceAccountConfig"]);null!=s&&_(t,["googleServiceAccountConfig"],s);const o=p(e,["httpBasicAuthConfig"]);null!=o&&_(t,["httpBasicAuthConfig"],o);const a=p(e,["oauthConfig"]);null!=a&&_(t,["oauthConfig"],a);const l=p(e,["oidcConfig"]);return null!=l&&_(t,["oidcConfig"],l),t}(0,r)),t}(0,l)),void 0!==p(e,["urlContext"]))throw new Error("urlContext parameter is not supported in Vertex AI.");const u=p(e,["codeExecution"]);return null!=u&&_(t,["codeExecution"],u),t}function Ube(n,e,t){const i=p(e,["generationConfig"]);void 0!==t&&null!=i&&_(t,["setup","generationConfig"],i);const s=p(e,["responseModalities"]);void 0!==t&&null!=s&&_(t,["setup","generationConfig","responseModalities"],s);const o=p(e,["temperature"]);void 0!==t&&null!=o&&_(t,["setup","generationConfig","temperature"],o);const a=p(e,["topP"]);void 0!==t&&null!=a&&_(t,["setup","generationConfig","topP"],a);const l=p(e,["topK"]);void 0!==t&&null!=l&&_(t,["setup","generationConfig","topK"],l);const u=p(e,["maxOutputTokens"]);void 0!==t&&null!=u&&_(t,["setup","generationConfig","maxOutputTokens"],u);const c=p(e,["mediaResolution"]);void 0!==t&&null!=c&&_(t,["setup","generationConfig","mediaResolution"],c);const d=p(e,["seed"]);void 0!==t&&null!=d&&_(t,["setup","generationConfig","seed"],d);const f=p(e,["speechConfig"]);void 0!==t&&null!=f&&_(t,["setup","generationConfig","speechConfig"],function ebe(n,e){const t={},r=p(e,["voiceConfig"]);null!=r&&_(t,["voiceConfig"],O9(0,r));const i=p(e,["multiSpeakerVoiceConfig"]);null!=i&&_(t,["multiSpeakerVoiceConfig"],function ZTe(n,e){const t={},r=p(e,["speakerVoiceConfigs"]);if(null!=r){let i=r;Array.isArray(i)&&(i=i.map(s=>function XTe(n,e){const t={},r=p(e,["speaker"]);null!=r&&_(t,["speaker"],r);const i=p(e,["voiceConfig"]);return null!=i&&_(t,["voiceConfig"],O9(0,i)),t}(0,s))),_(t,["speakerVoiceConfigs"],i)}return t}(0,i));const s=p(e,["languageCode"]);return null!=s&&_(t,["languageCode"],s),t}(0,b9(0,f)));const y=p(e,["enableAffectiveDialog"]);void 0!==t&&null!=y&&_(t,["setup","generationConfig","enableAffectiveDialog"],y);const E=p(e,["systemInstruction"]);void 0!==t&&null!=E&&_(t,["setup","systemInstruction"],function lbe(n,e){const t={},r=p(e,["parts"]);if(null!=r){let s=r;Array.isArray(s)&&(s=s.map(o=>function obe(n,e){const t={},r=p(e,["videoMetadata"]);null!=r&&_(t,["videoMetadata"],function nbe(n,e){const t={},r=p(e,["fps"]);null!=r&&_(t,["fps"],r);const i=p(e,["endOffset"]);null!=i&&_(t,["endOffset"],i);const s=p(e,["startOffset"]);return null!=s&&_(t,["startOffset"],s),t}(0,r));const i=p(e,["thought"]);null!=i&&_(t,["thought"],i);const s=p(e,["inlineData"]);null!=s&&_(t,["inlineData"],function ibe(n,e){const t={};if(void 0!==p(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const r=p(e,["data"]);null!=r&&_(t,["data"],r);const i=p(e,["mimeType"]);return null!=i&&_(t,["mimeType"],i),t}(0,s));const o=p(e,["codeExecutionResult"]);null!=o&&_(t,["codeExecutionResult"],o);const a=p(e,["executableCode"]);null!=a&&_(t,["executableCode"],a);const l=p(e,["fileData"]);null!=l&&_(t,["fileData"],l);const u=p(e,["functionCall"]);null!=u&&_(t,["functionCall"],u);const c=p(e,["functionResponse"]);null!=c&&_(t,["functionResponse"],c);const d=p(e,["text"]);return null!=d&&_(t,["text"],d),t}(0,o))),_(t,["parts"],s)}const i=p(e,["role"]);return null!=i&&_(t,["role"],i),t}(0,ao(0,E)));const I=p(e,["tools"]);if(void 0!==t&&null!=I){let Y=Kb(0,I);Array.isArray(Y)&&(Y=Y.map(U=>bbe(0,jb(0,U)))),_(t,["setup","tools"],Y)}const T=p(e,["sessionResumption"]);void 0!==t&&null!=T&&_(t,["setup","sessionResumption"],function Sbe(n,e){const t={},r=p(e,["handle"]);if(null!=r&&_(t,["handle"],r),void 0!==p(e,["transparent"]))throw new Error("transparent parameter is not supported in Gemini API.");return t}(0,T));const P=p(e,["inputAudioTranscription"]);void 0!==t&&null!=P&&_(t,["setup","inputAudioTranscription"],{});const x=p(e,["outputAudioTranscription"]);void 0!==t&&null!=x&&_(t,["setup","outputAudioTranscription"],{});const V=p(e,["realtimeInputConfig"]);void 0!==t&&null!=V&&_(t,["setup","realtimeInputConfig"],function Pbe(n,e){const t={},r=p(e,["automaticActivityDetection"]);null!=r&&_(t,["automaticActivityDetection"],function xbe(n,e){const t={},r=p(e,["disabled"]);null!=r&&_(t,["disabled"],r);const i=p(e,["startOfSpeechSensitivity"]);null!=i&&_(t,["startOfSpeechSensitivity"],i);const s=p(e,["endOfSpeechSensitivity"]);null!=s&&_(t,["endOfSpeechSensitivity"],s);const o=p(e,["prefixPaddingMs"]);null!=o&&_(t,["prefixPaddingMs"],o);const a=p(e,["silenceDurationMs"]);return null!=a&&_(t,["silenceDurationMs"],a),t}(0,r));const i=p(e,["activityHandling"]);null!=i&&_(t,["activityHandling"],i);const s=p(e,["turnCoverage"]);return null!=s&&_(t,["turnCoverage"],s),t}(0,V));const W=p(e,["contextWindowCompression"]);void 0!==t&&null!=W&&_(t,["setup","contextWindowCompression"],function Obe(n,e){const t={},r=p(e,["triggerTokens"]);null!=r&&_(t,["triggerTokens"],r);const i=p(e,["slidingWindow"]);return null!=i&&_(t,["slidingWindow"],function Nbe(n,e){const t={},r=p(e,["targetTokens"]);return null!=r&&_(t,["targetTokens"],r),t}(0,i)),t}(0,W));const K=p(e,["proactivity"]);return void 0!==t&&null!=K&&_(t,["setup","proactivity"],function Lbe(n,e){const t={},r=p(e,["proactiveAudio"]);return null!=r&&_(t,["proactiveAudio"],r),t}(0,K)),{}}function Bbe(n,e,t){const i=p(e,["generationConfig"]);void 0!==t&&null!=i&&_(t,["setup","generationConfig"],i);const s=p(e,["responseModalities"]);void 0!==t&&null!=s&&_(t,["setup","generationConfig","responseModalities"],s);const o=p(e,["temperature"]);void 0!==t&&null!=o&&_(t,["setup","generationConfig","temperature"],o);const a=p(e,["topP"]);void 0!==t&&null!=a&&_(t,["setup","generationConfig","topP"],a);const l=p(e,["topK"]);void 0!==t&&null!=l&&_(t,["setup","generationConfig","topK"],l);const u=p(e,["maxOutputTokens"]);void 0!==t&&null!=u&&_(t,["setup","generationConfig","maxOutputTokens"],u);const c=p(e,["mediaResolution"]);void 0!==t&&null!=c&&_(t,["setup","generationConfig","mediaResolution"],c);const d=p(e,["seed"]);void 0!==t&&null!=d&&_(t,["setup","generationConfig","seed"],d);const f=p(e,["speechConfig"]);void 0!==t&&null!=f&&_(t,["setup","generationConfig","speechConfig"],function tbe(n,e){const t={},r=p(e,["voiceConfig"]);if(null!=r&&_(t,["voiceConfig"],function JTe(n,e){const t={},r=p(e,["prebuiltVoiceConfig"]);return null!=r&&_(t,["prebuiltVoiceConfig"],function QTe(n,e){const t={},r=p(e,["voiceName"]);return null!=r&&_(t,["voiceName"],r),t}(0,r)),t}(0,r)),void 0!==p(e,["multiSpeakerVoiceConfig"]))throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=p(e,["languageCode"]);return null!=i&&_(t,["languageCode"],i),t}(0,b9(0,f)));const y=p(e,["enableAffectiveDialog"]);void 0!==t&&null!=y&&_(t,["setup","generationConfig","enableAffectiveDialog"],y);const E=p(e,["systemInstruction"]);void 0!==t&&null!=E&&_(t,["setup","systemInstruction"],function ube(n,e){const t={},r=p(e,["parts"]);if(null!=r){let s=r;Array.isArray(s)&&(s=s.map(o=>function abe(n,e){const t={},r=p(e,["videoMetadata"]);null!=r&&_(t,["videoMetadata"],function rbe(n,e){const t={},r=p(e,["fps"]);null!=r&&_(t,["fps"],r);const i=p(e,["endOffset"]);null!=i&&_(t,["endOffset"],i);const s=p(e,["startOffset"]);return null!=s&&_(t,["startOffset"],s),t}(0,r));const i=p(e,["thought"]);null!=i&&_(t,["thought"],i);const s=p(e,["inlineData"]);null!=s&&_(t,["inlineData"],function sbe(n,e){const t={},r=p(e,["displayName"]);null!=r&&_(t,["displayName"],r);const i=p(e,["data"]);null!=i&&_(t,["data"],i);const s=p(e,["mimeType"]);return null!=s&&_(t,["mimeType"],s),t}(0,s));const o=p(e,["codeExecutionResult"]);null!=o&&_(t,["codeExecutionResult"],o);const a=p(e,["executableCode"]);null!=a&&_(t,["executableCode"],a);const l=p(e,["fileData"]);null!=l&&_(t,["fileData"],l);const u=p(e,["functionCall"]);null!=u&&_(t,["functionCall"],u);const c=p(e,["functionResponse"]);null!=c&&_(t,["functionResponse"],c);const d=p(e,["text"]);return null!=d&&_(t,["text"],d),t}(0,o))),_(t,["parts"],s)}const i=p(e,["role"]);return null!=i&&_(t,["role"],i),t}(0,ao(0,E)));const I=p(e,["tools"]);if(void 0!==t&&null!=I){let Y=Kb(0,I);Array.isArray(Y)&&(Y=Y.map(U=>Abe(0,jb(0,U)))),_(t,["setup","tools"],Y)}const T=p(e,["sessionResumption"]);void 0!==t&&null!=T&&_(t,["setup","sessionResumption"],function Dbe(n,e){const t={},r=p(e,["handle"]);null!=r&&_(t,["handle"],r);const i=p(e,["transparent"]);return null!=i&&_(t,["transparent"],i),t}(0,T));const P=p(e,["inputAudioTranscription"]);void 0!==t&&null!=P&&_(t,["setup","inputAudioTranscription"],{});const x=p(e,["outputAudioTranscription"]);void 0!==t&&null!=x&&_(t,["setup","outputAudioTranscription"],{});const V=p(e,["realtimeInputConfig"]);void 0!==t&&null!=V&&_(t,["setup","realtimeInputConfig"],function Mbe(n,e){const t={},r=p(e,["automaticActivityDetection"]);null!=r&&_(t,["automaticActivityDetection"],function Rbe(n,e){const t={},r=p(e,["disabled"]);null!=r&&_(t,["disabled"],r);const i=p(e,["startOfSpeechSensitivity"]);null!=i&&_(t,["startOfSpeechSensitivity"],i);const s=p(e,["endOfSpeechSensitivity"]);null!=s&&_(t,["endOfSpeechSensitivity"],s);const o=p(e,["prefixPaddingMs"]);null!=o&&_(t,["prefixPaddingMs"],o);const a=p(e,["silenceDurationMs"]);return null!=a&&_(t,["silenceDurationMs"],a),t}(0,r));const i=p(e,["activityHandling"]);null!=i&&_(t,["activityHandling"],i);const s=p(e,["turnCoverage"]);return null!=s&&_(t,["turnCoverage"],s),t}(0,V));const W=p(e,["contextWindowCompression"]);void 0!==t&&null!=W&&_(t,["setup","contextWindowCompression"],function Fbe(n,e){const t={},r=p(e,["triggerTokens"]);null!=r&&_(t,["triggerTokens"],r);const i=p(e,["slidingWindow"]);return null!=i&&_(t,["slidingWindow"],function kbe(n,e){const t={},r=p(e,["targetTokens"]);return null!=r&&_(t,["targetTokens"],r),t}(0,i)),t}(0,W));const K=p(e,["proactivity"]);return void 0!==t&&null!=K&&_(t,["setup","proactivity"],function Vbe(n,e){const t={},r=p(e,["proactiveAudio"]);return null!=r&&_(t,["proactiveAudio"],r),t}(0,K)),{}}function jbe(n,e){const t={},r=p(e,["media"]);null!=r&&_(t,["mediaChunks"],_9(0,r));const i=p(e,["audio"]);null!=i&&_(t,["audio"],function Cwe(n,e){const t=Gb(0,e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}(0,i));const s=p(e,["audioStreamEnd"]);null!=s&&_(t,["audioStreamEnd"],s);const o=p(e,["video"]);null!=o&&_(t,["video"],function Ewe(n,e){const t=Gb(0,e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}(0,o));const a=p(e,["text"]);return null!=a&&_(t,["text"],a),null!=p(e,["activityStart"])&&_(t,["activityStart"],{}),null!=p(e,["activityEnd"])&&_(t,["activityEnd"],{}),t}function Kbe(n,e){const t={},r=p(e,["media"]);if(null!=r&&_(t,["mediaChunks"],_9(0,r)),void 0!==p(e,["audio"]))throw new Error("audio parameter is not supported in Vertex AI.");const i=p(e,["audioStreamEnd"]);if(null!=i&&_(t,["audioStreamEnd"],i),void 0!==p(e,["video"]))throw new Error("video parameter is not supported in Vertex AI.");if(void 0!==p(e,["text"]))throw new Error("text parameter is not supported in Vertex AI.");return null!=p(e,["activityStart"])&&_(t,["activityStart"],{}),null!=p(e,["activityEnd"])&&_(t,["activityEnd"],{}),t}function V9(n,e){const t={},r=p(e,["text"]);null!=r&&_(t,["text"],r);const i=p(e,["weight"]);return null!=i&&_(t,["weight"],i),t}function U9(n,e){const t={},r=p(e,["temperature"]);null!=r&&_(t,["temperature"],r);const i=p(e,["topK"]);null!=i&&_(t,["topK"],i);const s=p(e,["seed"]);null!=s&&_(t,["seed"],s);const o=p(e,["guidance"]);null!=o&&_(t,["guidance"],o);const a=p(e,["bpm"]);null!=a&&_(t,["bpm"],a);const l=p(e,["density"]);null!=l&&_(t,["density"],l);const u=p(e,["brightness"]);null!=u&&_(t,["brightness"],u);const c=p(e,["scale"]);null!=c&&_(t,["scale"],c);const d=p(e,["muteBass"]);null!=d&&_(t,["muteBass"],d);const f=p(e,["muteDrums"]);null!=f&&_(t,["muteDrums"],f);const y=p(e,["onlyBassAndDrums"]);null!=y&&_(t,["onlyBassAndDrums"],y);const E=p(e,["musicGenerationMode"]);return null!=E&&_(t,["musicGenerationMode"],E),t}function B9(n,e){const t={},r=p(e,["model"]);return null!=r&&_(t,["model"],r),t}function $9(n,e){const t={},r=p(e,["weightedPrompts"]);if(null!=r){let i=r;Array.isArray(i)&&(i=i.map(s=>V9(0,s))),_(t,["weightedPrompts"],i)}return t}function ak(n,e){const t={},r=p(e,["setup"]);null!=r&&_(t,["setup"],B9(0,r));const i=p(e,["clientContent"]);null!=i&&_(t,["clientContent"],$9(0,i));const s=p(e,["musicGenerationConfig"]);null!=s&&_(t,["musicGenerationConfig"],U9(0,s));const o=p(e,["playbackControl"]);return null!=o&&_(t,["playbackControl"],o),t}function H9(n,e){const t={},r=p(e,["text"]);null!=r&&_(t,["text"],r);const i=p(e,["finished"]);return null!=i&&_(t,["finished"],i),t}function z9(n,e){const t={},r=p(e,["text"]);null!=r&&_(t,["text"],r);const i=p(e,["finished"]);return null!=i&&_(t,["finished"],i),t}function u0e(n,e){const t={},r=p(e,["modelTurn"]);null!=r&&_(t,["modelTurn"],function s0e(n,e){const t={},r=p(e,["parts"]);if(null!=r){let s=r;Array.isArray(s)&&(s=s.map(o=>function r0e(n,e){const t={},r=p(e,["videoMetadata"]);null!=r&&_(t,["videoMetadata"],function Zbe(n,e){const t={},r=p(e,["fps"]);null!=r&&_(t,["fps"],r);const i=p(e,["endOffset"]);null!=i&&_(t,["endOffset"],i);const s=p(e,["startOffset"]);return null!=s&&_(t,["startOffset"],s),t}(0,r));const i=p(e,["thought"]);null!=i&&_(t,["thought"],i);const s=p(e,["inlineData"]);null!=s&&_(t,["inlineData"],function t0e(n,e){const t={},r=p(e,["data"]);null!=r&&_(t,["data"],r);const i=p(e,["mimeType"]);return null!=i&&_(t,["mimeType"],i),t}(0,s));const o=p(e,["codeExecutionResult"]);null!=o&&_(t,["codeExecutionResult"],o);const a=p(e,["executableCode"]);null!=a&&_(t,["executableCode"],a);const l=p(e,["fileData"]);null!=l&&_(t,["fileData"],l);const u=p(e,["functionCall"]);null!=u&&_(t,["functionCall"],u);const c=p(e,["functionResponse"]);null!=c&&_(t,["functionResponse"],c);const d=p(e,["text"]);return null!=d&&_(t,["text"],d),t}(0,o))),_(t,["parts"],s)}const i=p(e,["role"]);return null!=i&&_(t,["role"],i),t}(0,r));const i=p(e,["turnComplete"]);null!=i&&_(t,["turnComplete"],i);const s=p(e,["interrupted"]);null!=s&&_(t,["interrupted"],s);const o=p(e,["groundingMetadata"]);null!=o&&_(t,["groundingMetadata"],o);const a=p(e,["generationComplete"]);null!=a&&_(t,["generationComplete"],a);const l=p(e,["inputTranscription"]);null!=l&&_(t,["inputTranscription"],H9(0,l));const u=p(e,["outputTranscription"]);null!=u&&_(t,["outputTranscription"],H9(0,u));const c=p(e,["urlContextMetadata"]);return null!=c&&_(t,["urlContextMetadata"],function l0e(n,e){const t={},r=p(e,["urlMetadata"]);if(null!=r){let i=r;Array.isArray(i)&&(i=i.map(s=>function a0e(n,e){const t={},r=p(e,["retrievedUrl"]);null!=r&&_(t,["retrievedUrl"],r);const i=p(e,["urlRetrievalStatus"]);return null!=i&&_(t,["urlRetrievalStatus"],i),t}(0,s))),_(t,["urlMetadata"],i)}return t}(0,c)),t}function c0e(n,e){const t={},r=p(e,["modelTurn"]);null!=r&&_(t,["modelTurn"],function o0e(n,e){const t={},r=p(e,["parts"]);if(null!=r){let s=r;Array.isArray(s)&&(s=s.map(o=>function i0e(n,e){const t={},r=p(e,["videoMetadata"]);null!=r&&_(t,["videoMetadata"],function e0e(n,e){const t={},r=p(e,["fps"]);null!=r&&_(t,["fps"],r);const i=p(e,["endOffset"]);null!=i&&_(t,["endOffset"],i);const s=p(e,["startOffset"]);return null!=s&&_(t,["startOffset"],s),t}(0,r));const i=p(e,["thought"]);null!=i&&_(t,["thought"],i);const s=p(e,["inlineData"]);null!=s&&_(t,["inlineData"],function n0e(n,e){const t={},r=p(e,["displayName"]);null!=r&&_(t,["displayName"],r);const i=p(e,["data"]);null!=i&&_(t,["data"],i);const s=p(e,["mimeType"]);return null!=s&&_(t,["mimeType"],s),t}(0,s));const o=p(e,["codeExecutionResult"]);null!=o&&_(t,["codeExecutionResult"],o);const a=p(e,["executableCode"]);null!=a&&_(t,["executableCode"],a);const l=p(e,["fileData"]);null!=l&&_(t,["fileData"],l);const u=p(e,["functionCall"]);null!=u&&_(t,["functionCall"],u);const c=p(e,["functionResponse"]);null!=c&&_(t,["functionResponse"],c);const d=p(e,["text"]);return null!=d&&_(t,["text"],d),t}(0,o))),_(t,["parts"],s)}const i=p(e,["role"]);return null!=i&&_(t,["role"],i),t}(0,r));const i=p(e,["turnComplete"]);null!=i&&_(t,["turnComplete"],i);const s=p(e,["interrupted"]);null!=s&&_(t,["interrupted"],s);const o=p(e,["groundingMetadata"]);null!=o&&_(t,["groundingMetadata"],o);const a=p(e,["generationComplete"]);null!=a&&_(t,["generationComplete"],a);const l=p(e,["inputTranscription"]);null!=l&&_(t,["inputTranscription"],z9(0,l));const u=p(e,["outputTranscription"]);return null!=u&&_(t,["outputTranscription"],z9(0,u)),t}function Zb(n,e){const t={},r=p(e,["modality"]);null!=r&&_(t,["modality"],r);const i=p(e,["tokenCount"]);return null!=i&&_(t,["tokenCount"],i),t}function e0(n,e){const t={},r=p(e,["modality"]);null!=r&&_(t,["modality"],r);const i=p(e,["tokenCount"]);return null!=i&&_(t,["tokenCount"],i),t}function w0e(n,e){const t={};null!=p(e,["setupComplete"])&&_(t,["setupComplete"],{});const i=p(e,["serverContent"]);null!=i&&_(t,["serverContent"],u0e(0,i));const s=p(e,["toolCall"]);null!=s&&_(t,["toolCall"],function f0e(n,e){const t={},r=p(e,["functionCalls"]);if(null!=r){let i=r;Array.isArray(i)&&(i=i.map(s=>function d0e(n,e){const t={},r=p(e,["id"]);null!=r&&_(t,["id"],r);const i=p(e,["args"]);null!=i&&_(t,["args"],i);const s=p(e,["name"]);return null!=s&&_(t,["name"],s),t}(0,s))),_(t,["functionCalls"],i)}return t}(0,s));const o=p(e,["toolCallCancellation"]);null!=o&&_(t,["toolCallCancellation"],function g0e(n,e){const t={},r=p(e,["ids"]);return null!=r&&_(t,["ids"],r),t}(0,o));const a=p(e,["usageMetadata"]);null!=a&&_(t,["usageMetadata"],function _0e(n,e){const t={},r=p(e,["promptTokenCount"]);null!=r&&_(t,["promptTokenCount"],r);const i=p(e,["cachedContentTokenCount"]);null!=i&&_(t,["cachedContentTokenCount"],i);const s=p(e,["responseTokenCount"]);null!=s&&_(t,["responseTokenCount"],s);const o=p(e,["toolUsePromptTokenCount"]);null!=o&&_(t,["toolUsePromptTokenCount"],o);const a=p(e,["thoughtsTokenCount"]);null!=a&&_(t,["thoughtsTokenCount"],a);const l=p(e,["totalTokenCount"]);null!=l&&_(t,["totalTokenCount"],l);const u=p(e,["promptTokensDetails"]);if(null!=u){let y=u;Array.isArray(y)&&(y=y.map(E=>Zb(0,E))),_(t,["promptTokensDetails"],y)}const c=p(e,["cacheTokensDetails"]);if(null!=c){let y=c;Array.isArray(y)&&(y=y.map(E=>Zb(0,E))),_(t,["cacheTokensDetails"],y)}const d=p(e,["responseTokensDetails"]);if(null!=d){let y=d;Array.isArray(y)&&(y=y.map(E=>Zb(0,E))),_(t,["responseTokensDetails"],y)}const f=p(e,["toolUsePromptTokensDetails"]);if(null!=f){let y=f;Array.isArray(y)&&(y=y.map(E=>Zb(0,E))),_(t,["toolUsePromptTokensDetails"],y)}return t}(0,a));const l=p(e,["goAway"]);null!=l&&_(t,["goAway"],function v0e(n,e){const t={},r=p(e,["timeLeft"]);return null!=r&&_(t,["timeLeft"],r),t}(0,l));const u=p(e,["sessionResumptionUpdate"]);return null!=u&&_(t,["sessionResumptionUpdate"],function C0e(n,e){const t={},r=p(e,["newHandle"]);null!=r&&_(t,["newHandle"],r);const i=p(e,["resumable"]);null!=i&&_(t,["resumable"],i);const s=p(e,["lastConsumedClientMessageIndex"]);return null!=s&&_(t,["lastConsumedClientMessageIndex"],s),t}(0,u)),t}function T0e(n,e){const t={};null!=p(e,["setupComplete"])&&_(t,["setupComplete"],{});const i=p(e,["serverContent"]);null!=i&&_(t,["serverContent"],c0e(0,i));const s=p(e,["toolCall"]);null!=s&&_(t,["toolCall"],function p0e(n,e){const t={},r=p(e,["functionCalls"]);if(null!=r){let i=r;Array.isArray(i)&&(i=i.map(s=>function h0e(n,e){const t={},r=p(e,["args"]);null!=r&&_(t,["args"],r);const i=p(e,["name"]);return null!=i&&_(t,["name"],i),t}(0,s))),_(t,["functionCalls"],i)}return t}(0,s));const o=p(e,["toolCallCancellation"]);null!=o&&_(t,["toolCallCancellation"],function m0e(n,e){const t={},r=p(e,["ids"]);return null!=r&&_(t,["ids"],r),t}(0,o));const a=p(e,["usageMetadata"]);null!=a&&_(t,["usageMetadata"],function y0e(n,e){const t={},r=p(e,["promptTokenCount"]);null!=r&&_(t,["promptTokenCount"],r);const i=p(e,["cachedContentTokenCount"]);null!=i&&_(t,["cachedContentTokenCount"],i);const s=p(e,["candidatesTokenCount"]);null!=s&&_(t,["responseTokenCount"],s);const o=p(e,["toolUsePromptTokenCount"]);null!=o&&_(t,["toolUsePromptTokenCount"],o);const a=p(e,["thoughtsTokenCount"]);null!=a&&_(t,["thoughtsTokenCount"],a);const l=p(e,["totalTokenCount"]);null!=l&&_(t,["totalTokenCount"],l);const u=p(e,["promptTokensDetails"]);if(null!=u){let E=u;Array.isArray(E)&&(E=E.map(I=>e0(0,I))),_(t,["promptTokensDetails"],E)}const c=p(e,["cacheTokensDetails"]);if(null!=c){let E=c;Array.isArray(E)&&(E=E.map(I=>e0(0,I))),_(t,["cacheTokensDetails"],E)}const d=p(e,["candidatesTokensDetails"]);if(null!=d){let E=d;Array.isArray(E)&&(E=E.map(I=>e0(0,I))),_(t,["responseTokensDetails"],E)}const f=p(e,["toolUsePromptTokensDetails"]);if(null!=f){let E=f;Array.isArray(E)&&(E=E.map(I=>e0(0,I))),_(t,["toolUsePromptTokensDetails"],E)}const y=p(e,["trafficType"]);return null!=y&&_(t,["trafficType"],y),t}(0,a));const l=p(e,["goAway"]);null!=l&&_(t,["goAway"],function E0e(n,e){const t={},r=p(e,["timeLeft"]);return null!=r&&_(t,["timeLeft"],r),t}(0,l));const u=p(e,["sessionResumptionUpdate"]);return null!=u&&_(t,["sessionResumptionUpdate"],function I0e(n,e){const t={},r=p(e,["newHandle"]);null!=r&&_(t,["newHandle"],r);const i=p(e,["resumable"]);null!=i&&_(t,["resumable"],i);const s=p(e,["lastConsumedClientMessageIndex"]);return null!=s&&_(t,["lastConsumedClientMessageIndex"],s),t}(0,u)),t}function x0e(n,e){const t={},r=p(e,["clientContent"]);null!=r&&_(t,["clientContent"],function S0e(n,e){const t={},r=p(e,["weightedPrompts"]);if(null!=r){let i=r;Array.isArray(i)&&(i=i.map(s=>function A0e(n,e){const t={},r=p(e,["text"]);null!=r&&_(t,["text"],r);const i=p(e,["weight"]);return null!=i&&_(t,["weight"],i),t}(0,s))),_(t,["weightedPrompts"],i)}return t}(0,r));const i=p(e,["musicGenerationConfig"]);return null!=i&&_(t,["musicGenerationConfig"],function D0e(n,e){const t={},r=p(e,["temperature"]);null!=r&&_(t,["temperature"],r);const i=p(e,["topK"]);null!=i&&_(t,["topK"],i);const s=p(e,["seed"]);null!=s&&_(t,["seed"],s);const o=p(e,["guidance"]);null!=o&&_(t,["guidance"],o);const a=p(e,["bpm"]);null!=a&&_(t,["bpm"],a);const l=p(e,["density"]);null!=l&&_(t,["density"],l);const u=p(e,["brightness"]);null!=u&&_(t,["brightness"],u);const c=p(e,["scale"]);null!=c&&_(t,["scale"],c);const d=p(e,["muteBass"]);null!=d&&_(t,["muteBass"],d);const f=p(e,["muteDrums"]);null!=f&&_(t,["muteDrums"],f);const y=p(e,["onlyBassAndDrums"]);null!=y&&_(t,["onlyBassAndDrums"],y);const E=p(e,["musicGenerationMode"]);return null!=E&&_(t,["musicGenerationMode"],E),t}(0,i)),t}function N0e(n,e){const t={};null!=p(e,["setupComplete"])&&_(t,["setupComplete"],{});const i=p(e,["serverContent"]);null!=i&&_(t,["serverContent"],function P0e(n,e){const t={},r=p(e,["audioChunks"]);if(null!=r){let i=r;Array.isArray(i)&&(i=i.map(s=>function R0e(n,e){const t={},r=p(e,["data"]);null!=r&&_(t,["data"],r);const i=p(e,["mimeType"]);null!=i&&_(t,["mimeType"],i);const s=p(e,["sourceMetadata"]);return null!=s&&_(t,["sourceMetadata"],x0e(0,s)),t}(0,s))),_(t,["audioChunks"],i)}return t}(0,i));const s=p(e,["filteredPrompt"]);return null!=s&&_(t,["filteredPrompt"],function M0e(n,e){const t={},r=p(e,["text"]);null!=r&&_(t,["text"],r);const i=p(e,["filteredReason"]);return null!=i&&_(t,["filteredReason"],i),t}(0,s)),t}function t0(n,e){const t={},r=p(e,["parts"]);if(null!=r){let s=r;Array.isArray(s)&&(s=s.map(o=>function F0e(n,e){const t={},r=p(e,["videoMetadata"]);null!=r&&_(t,["videoMetadata"],function k0e(n,e){const t={},r=p(e,["fps"]);null!=r&&_(t,["fps"],r);const i=p(e,["endOffset"]);null!=i&&_(t,["endOffset"],i);const s=p(e,["startOffset"]);return null!=s&&_(t,["startOffset"],s),t}(0,r));const i=p(e,["thought"]);null!=i&&_(t,["thought"],i);const s=p(e,["inlineData"]);null!=s&&_(t,["inlineData"],function O0e(n,e){const t={};if(void 0!==p(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const r=p(e,["data"]);null!=r&&_(t,["data"],r);const i=p(e,["mimeType"]);return null!=i&&_(t,["mimeType"],i),t}(0,s));const o=p(e,["codeExecutionResult"]);null!=o&&_(t,["codeExecutionResult"],o);const a=p(e,["executableCode"]);null!=a&&_(t,["executableCode"],a);const l=p(e,["fileData"]);null!=l&&_(t,["fileData"],l);const u=p(e,["functionCall"]);null!=u&&_(t,["functionCall"],u);const c=p(e,["functionResponse"]);null!=c&&_(t,["functionResponse"],c);const d=p(e,["text"]);return null!=d&&_(t,["text"],d),t}(0,o))),_(t,["parts"],s)}const i=p(e,["role"]);return null!=i&&_(t,["role"],i),t}function W0e(n,e){const t={},r=p(e,["functionDeclarations"]);if(null!=r){let l=r;Array.isArray(l)&&(l=l.map(u=>function V0e(n,e){const t={},r=p(e,["behavior"]);null!=r&&_(t,["behavior"],r);const i=p(e,["description"]);null!=i&&_(t,["description"],i);const s=p(e,["name"]);null!=s&&_(t,["name"],s);const o=p(e,["parameters"]);null!=o&&_(t,["parameters"],o);const a=p(e,["response"]);return null!=a&&_(t,["response"],a),t}(0,u))),_(t,["functionDeclarations"],l)}if(void 0!==p(e,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(e,["googleSearch"]);null!=i&&_(t,["googleSearch"],function B0e(n,e){const t={},r=p(e,["timeRangeFilter"]);return null!=r&&_(t,["timeRangeFilter"],function U0e(n,e){const t={},r=p(e,["startTime"]);null!=r&&_(t,["startTime"],r);const i=p(e,["endTime"]);return null!=i&&_(t,["endTime"],i),t}(0,r)),t}(0,i));const s=p(e,["googleSearchRetrieval"]);if(null!=s&&_(t,["googleSearchRetrieval"],function H0e(n,e){const t={},r=p(e,["dynamicRetrievalConfig"]);return null!=r&&_(t,["dynamicRetrievalConfig"],function $0e(n,e){const t={},r=p(e,["mode"]);null!=r&&_(t,["mode"],r);const i=p(e,["dynamicThreshold"]);return null!=i&&_(t,["dynamicThreshold"],i),t}(0,r)),t}(0,s)),void 0!==p(e,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(void 0!==p(e,["googleMaps"]))throw new Error("googleMaps parameter is not supported in Gemini API.");null!=p(e,["urlContext"])&&_(t,["urlContext"],{});const a=p(e,["codeExecution"]);return null!=a&&_(t,["codeExecution"],a),t}function K0e(n,e){const t={},r=p(e,["functionCallingConfig"]);null!=r&&_(t,["functionCallingConfig"],function G0e(n,e){const t={},r=p(e,["mode"]);null!=r&&_(t,["mode"],r);const i=p(e,["allowedFunctionNames"]);return null!=i&&_(t,["allowedFunctionNames"],i),t}(0,r));const i=p(e,["retrievalConfig"]);return null!=i&&_(t,["retrievalConfig"],function j0e(n,e){const t={},r=p(e,["latLng"]);return null!=r&&_(t,["latLng"],function q0e(n,e){const t={},r=p(e,["latitude"]);null!=r&&_(t,["latitude"],r);const i=p(e,["longitude"]);return null!=i&&_(t,["longitude"],i),t}(0,r)),t}(0,i)),t}function W9(n,e){const t={},r=p(e,["prebuiltVoiceConfig"]);return null!=r&&_(t,["prebuiltVoiceConfig"],function Y0e(n,e){const t={},r=p(e,["voiceName"]);return null!=r&&_(t,["voiceName"],r),t}(0,r)),t}function eAe(n,e,t){const r={},i=p(e,["systemInstruction"]);void 0!==t&&null!=i&&_(t,["systemInstruction"],t0(0,ao(0,i)));const s=p(e,["temperature"]);null!=s&&_(r,["temperature"],s);const o=p(e,["topP"]);null!=o&&_(r,["topP"],o);const a=p(e,["topK"]);null!=a&&_(r,["topK"],a);const l=p(e,["candidateCount"]);null!=l&&_(r,["candidateCount"],l);const u=p(e,["maxOutputTokens"]);null!=u&&_(r,["maxOutputTokens"],u);const c=p(e,["stopSequences"]);null!=c&&_(r,["stopSequences"],c);const d=p(e,["responseLogprobs"]);null!=d&&_(r,["responseLogprobs"],d);const f=p(e,["logprobs"]);null!=f&&_(r,["logprobs"],f);const y=p(e,["presencePenalty"]);null!=y&&_(r,["presencePenalty"],y);const E=p(e,["frequencyPenalty"]);null!=E&&_(r,["frequencyPenalty"],E);const I=p(e,["seed"]);null!=I&&_(r,["seed"],I);const T=p(e,["responseMimeType"]);null!=T&&_(r,["responseMimeType"],T);const P=p(e,["responseSchema"]);if(null!=P&&_(r,["responseSchema"],qb(0,P)),void 0!==p(e,["routingConfig"]))throw new Error("routingConfig parameter is not supported in Gemini API.");if(void 0!==p(e,["modelSelectionConfig"]))throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const x=p(e,["safetySettings"]);if(void 0!==t&&null!=x){let B=x;Array.isArray(B)&&(B=B.map(H=>function L0e(n,e){const t={};if(void 0!==p(e,["method"]))throw new Error("method parameter is not supported in Gemini API.");const r=p(e,["category"]);null!=r&&_(t,["category"],r);const i=p(e,["threshold"]);return null!=i&&_(t,["threshold"],i),t}(0,H))),_(t,["safetySettings"],B)}const V=p(e,["tools"]);if(void 0!==t&&null!=V){let B=Kb(0,V);Array.isArray(B)&&(B=B.map(H=>W0e(0,jb(0,H)))),_(t,["tools"],B)}const W=p(e,["toolConfig"]);if(void 0!==t&&null!=W&&_(t,["toolConfig"],K0e(0,W)),void 0!==p(e,["labels"]))throw new Error("labels parameter is not supported in Gemini API.");const K=p(e,["cachedContent"]);void 0!==t&&null!=K&&_(t,["cachedContent"],Uc(n,K));const Y=p(e,["responseModalities"]);null!=Y&&_(r,["responseModalities"],Y);const U=p(e,["mediaResolution"]);null!=U&&_(r,["mediaResolution"],U);const N=p(e,["speechConfig"]);if(null!=N&&_(r,["speechConfig"],function X0e(n,e){const t={},r=p(e,["voiceConfig"]);null!=r&&_(t,["voiceConfig"],W9(0,r));const i=p(e,["multiSpeakerVoiceConfig"]);null!=i&&_(t,["multiSpeakerVoiceConfig"],function J0e(n,e){const t={},r=p(e,["speakerVoiceConfigs"]);if(null!=r){let i=r;Array.isArray(i)&&(i=i.map(s=>function Q0e(n,e){const t={},r=p(e,["speaker"]);null!=r&&_(t,["speaker"],r);const i=p(e,["voiceConfig"]);return null!=i&&_(t,["voiceConfig"],W9(0,i)),t}(0,s))),_(t,["speakerVoiceConfigs"],i)}return t}(0,i));const s=p(e,["languageCode"]);return null!=s&&_(t,["languageCode"],s),t}(0,T9(0,N))),void 0!==p(e,["audioTimestamp"]))throw new Error("audioTimestamp parameter is not supported in Gemini API.");const F=p(e,["thinkingConfig"]);return null!=F&&_(r,["thinkingConfig"],function Z0e(n,e){const t={},r=p(e,["includeThoughts"]);null!=r&&_(t,["includeThoughts"],r);const i=p(e,["thinkingBudget"]);return null!=i&&_(t,["thinkingBudget"],i),t}(0,F)),r}function G9(n,e){const t={},r=p(e,["model"]);null!=r&&_(t,["_url","model"],dr(n,r));const i=p(e,["contents"]);if(null!=i){let o=La(0,i);Array.isArray(o)&&(o=o.map(a=>t0(0,a))),_(t,["contents"],o)}const s=p(e,["config"]);return null!=s&&_(t,["generationConfig"],eAe(n,s,t)),t}function kg(n,e){const t={},r=p(e,["parts"]);if(null!=r){let s=r;Array.isArray(s)&&(s=s.map(o=>function yAe(n,e){const t={},r=p(e,["videoMetadata"]);null!=r&&_(t,["videoMetadata"],function mAe(n,e){const t={},r=p(e,["fps"]);null!=r&&_(t,["fps"],r);const i=p(e,["endOffset"]);null!=i&&_(t,["endOffset"],i);const s=p(e,["startOffset"]);return null!=s&&_(t,["startOffset"],s),t}(0,r));const i=p(e,["thought"]);null!=i&&_(t,["thought"],i);const s=p(e,["inlineData"]);null!=s&&_(t,["inlineData"],function _Ae(n,e){const t={},r=p(e,["displayName"]);null!=r&&_(t,["displayName"],r);const i=p(e,["data"]);null!=i&&_(t,["data"],i);const s=p(e,["mimeType"]);return null!=s&&_(t,["mimeType"],s),t}(0,s));const o=p(e,["codeExecutionResult"]);null!=o&&_(t,["codeExecutionResult"],o);const a=p(e,["executableCode"]);null!=a&&_(t,["executableCode"],a);const l=p(e,["fileData"]);null!=l&&_(t,["fileData"],l);const u=p(e,["functionCall"]);null!=u&&_(t,["functionCall"],u);const c=p(e,["functionResponse"]);null!=c&&_(t,["functionResponse"],c);const d=p(e,["text"]);return null!=d&&_(t,["text"],d),t}(0,o))),_(t,["parts"],s)}const i=p(e,["role"]);return null!=i&&_(t,["role"],i),t}function q9(n,e){const t={},r=p(e,["functionDeclarations"]);if(null!=r){let c=r;Array.isArray(c)&&(c=c.map(d=>function CAe(n,e){const t={};if(void 0!==p(e,["behavior"]))throw new Error("behavior parameter is not supported in Vertex AI.");const r=p(e,["description"]);null!=r&&_(t,["description"],r);const i=p(e,["name"]);null!=i&&_(t,["name"],i);const s=p(e,["parameters"]);null!=s&&_(t,["parameters"],s);const o=p(e,["response"]);return null!=o&&_(t,["response"],o),t}(0,d))),_(t,["functionDeclarations"],c)}const i=p(e,["retrieval"]);null!=i&&_(t,["retrieval"],i);const s=p(e,["googleSearch"]);null!=s&&_(t,["googleSearch"],function wAe(n,e){const t={},r=p(e,["timeRangeFilter"]);return null!=r&&_(t,["timeRangeFilter"],function IAe(n,e){const t={},r=p(e,["startTime"]);null!=r&&_(t,["startTime"],r);const i=p(e,["endTime"]);return null!=i&&_(t,["endTime"],i),t}(0,r)),t}(0,s));const o=p(e,["googleSearchRetrieval"]);null!=o&&_(t,["googleSearchRetrieval"],function bAe(n,e){const t={},r=p(e,["dynamicRetrievalConfig"]);return null!=r&&_(t,["dynamicRetrievalConfig"],function TAe(n,e){const t={},r=p(e,["mode"]);null!=r&&_(t,["mode"],r);const i=p(e,["dynamicThreshold"]);return null!=i&&_(t,["dynamicThreshold"],i),t}(0,r)),t}(0,o)),null!=p(e,["enterpriseWebSearch"])&&_(t,["enterpriseWebSearch"],{});const l=p(e,["googleMaps"]);if(null!=l&&_(t,["googleMaps"],function xAe(n,e){const t={},r=p(e,["authConfig"]);return null!=r&&_(t,["authConfig"],function DAe(n,e){const t={},r=p(e,["apiKeyConfig"]);null!=r&&_(t,["apiKeyConfig"],function SAe(n,e){const t={},r=p(e,["apiKeyString"]);return null!=r&&_(t,["apiKeyString"],r),t}(0,r));const i=p(e,["authType"]);null!=i&&_(t,["authType"],i);const s=p(e,["googleServiceAccountConfig"]);null!=s&&_(t,["googleServiceAccountConfig"],s);const o=p(e,["httpBasicAuthConfig"]);null!=o&&_(t,["httpBasicAuthConfig"],o);const a=p(e,["oauthConfig"]);null!=a&&_(t,["oauthConfig"],a);const l=p(e,["oidcConfig"]);return null!=l&&_(t,["oidcConfig"],l),t}(0,r)),t}(0,l)),void 0!==p(e,["urlContext"]))throw new Error("urlContext parameter is not supported in Vertex AI.");const u=p(e,["codeExecution"]);return null!=u&&_(t,["codeExecution"],u),t}function NAe(n,e){const t={},r=p(e,["functionCallingConfig"]);null!=r&&_(t,["functionCallingConfig"],function RAe(n,e){const t={},r=p(e,["mode"]);null!=r&&_(t,["mode"],r);const i=p(e,["allowedFunctionNames"]);return null!=i&&_(t,["allowedFunctionNames"],i),t}(0,r));const i=p(e,["retrievalConfig"]);return null!=i&&_(t,["retrievalConfig"],function MAe(n,e){const t={},r=p(e,["latLng"]);return null!=r&&_(t,["latLng"],function PAe(n,e){const t={},r=p(e,["latitude"]);null!=r&&_(t,["latitude"],r);const i=p(e,["longitude"]);return null!=i&&_(t,["longitude"],i),t}(0,r)),t}(0,i)),t}function VAe(n,e,t){const r={},i=p(e,["systemInstruction"]);void 0!==t&&null!=i&&_(t,["systemInstruction"],kg(0,ao(0,i)));const s=p(e,["temperature"]);null!=s&&_(r,["temperature"],s);const o=p(e,["topP"]);null!=o&&_(r,["topP"],o);const a=p(e,["topK"]);null!=a&&_(r,["topK"],a);const l=p(e,["candidateCount"]);null!=l&&_(r,["candidateCount"],l);const u=p(e,["maxOutputTokens"]);null!=u&&_(r,["maxOutputTokens"],u);const c=p(e,["stopSequences"]);null!=c&&_(r,["stopSequences"],c);const d=p(e,["responseLogprobs"]);null!=d&&_(r,["responseLogprobs"],d);const f=p(e,["logprobs"]);null!=f&&_(r,["logprobs"],f);const y=p(e,["presencePenalty"]);null!=y&&_(r,["presencePenalty"],y);const E=p(e,["frequencyPenalty"]);null!=E&&_(r,["frequencyPenalty"],E);const I=p(e,["seed"]);null!=I&&_(r,["seed"],I);const T=p(e,["responseMimeType"]);null!=T&&_(r,["responseMimeType"],T);const P=p(e,["responseSchema"]);null!=P&&_(r,["responseSchema"],qb(0,P));const x=p(e,["routingConfig"]);null!=x&&_(r,["routingConfig"],x);const V=p(e,["modelSelectionConfig"]);null!=V&&_(r,["modelConfig"],function vAe(n,e){const t={},r=p(e,["featureSelectionPreference"]);return null!=r&&_(t,["featureSelectionPreference"],r),t}(0,V));const W=p(e,["safetySettings"]);if(void 0!==t&&null!=W){let nn=W;Array.isArray(nn)&&(nn=nn.map(Nt=>function EAe(n,e){const t={},r=p(e,["method"]);null!=r&&_(t,["method"],r);const i=p(e,["category"]);null!=i&&_(t,["category"],i);const s=p(e,["threshold"]);return null!=s&&_(t,["threshold"],s),t}(0,Nt))),_(t,["safetySettings"],nn)}const K=p(e,["tools"]);if(void 0!==t&&null!=K){let nn=Kb(0,K);Array.isArray(nn)&&(nn=nn.map(Nt=>q9(0,jb(0,Nt)))),_(t,["tools"],nn)}const Y=p(e,["toolConfig"]);void 0!==t&&null!=Y&&_(t,["toolConfig"],NAe(0,Y));const U=p(e,["labels"]);void 0!==t&&null!=U&&_(t,["labels"],U);const N=p(e,["cachedContent"]);void 0!==t&&null!=N&&_(t,["cachedContent"],Uc(n,N));const F=p(e,["responseModalities"]);null!=F&&_(r,["responseModalities"],F);const B=p(e,["mediaResolution"]);null!=B&&_(r,["mediaResolution"],B);const H=p(e,["speechConfig"]);null!=H&&_(r,["speechConfig"],function FAe(n,e){const t={},r=p(e,["voiceConfig"]);if(null!=r&&_(t,["voiceConfig"],function OAe(n,e){const t={},r=p(e,["prebuiltVoiceConfig"]);return null!=r&&_(t,["prebuiltVoiceConfig"],function kAe(n,e){const t={},r=p(e,["voiceName"]);return null!=r&&_(t,["voiceName"],r),t}(0,r)),t}(0,r)),void 0!==p(e,["multiSpeakerVoiceConfig"]))throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=p(e,["languageCode"]);return null!=i&&_(t,["languageCode"],i),t}(0,T9(0,H)));const J=p(e,["audioTimestamp"]);null!=J&&_(r,["audioTimestamp"],J);const q=p(e,["thinkingConfig"]);return null!=q&&_(r,["thinkingConfig"],function LAe(n,e){const t={},r=p(e,["includeThoughts"]);null!=r&&_(t,["includeThoughts"],r);const i=p(e,["thinkingBudget"]);return null!=i&&_(t,["thinkingBudget"],i),t}(0,q)),r}function j9(n,e){const t={},r=p(e,["model"]);null!=r&&_(t,["_url","model"],dr(n,r));const i=p(e,["contents"]);if(null!=i){let o=La(0,i);Array.isArray(o)&&(o=o.map(a=>kg(0,a))),_(t,["contents"],o)}const s=p(e,["config"]);return null!=s&&_(t,["generationConfig"],VAe(n,s,t)),t}function lk(n,e){const t={},r=p(e,["gcsUri"]);null!=r&&_(t,["gcsUri"],r);const i=p(e,["imageBytes"]);null!=i&&_(t,["bytesBase64Encoded"],Bc(0,i));const s=p(e,["mimeType"]);return null!=s&&_(t,["mimeType"],s),t}function YAe(n,e){const t={},r=p(e,["model"]);null!=r&&_(t,["_url","model"],dr(n,r));const i=p(e,["prompt"]);null!=i&&_(t,["instances[0]","prompt"],i);const s=p(e,["referenceImages"]);if(null!=s){let a=s;Array.isArray(a)&&(a=a.map(l=>function jAe(n,e){const t={},r=p(e,["referenceImage"]);null!=r&&_(t,["referenceImage"],lk(0,r));const i=p(e,["referenceId"]);null!=i&&_(t,["referenceId"],i);const s=p(e,["referenceType"]);null!=s&&_(t,["referenceType"],s);const o=p(e,["maskImageConfig"]);null!=o&&_(t,["maskImageConfig"],function zAe(n,e){const t={},r=p(e,["maskMode"]);null!=r&&_(t,["maskMode"],r);const i=p(e,["segmentationClasses"]);null!=i&&_(t,["maskClasses"],i);const s=p(e,["maskDilation"]);return null!=s&&_(t,["dilation"],s),t}(0,o));const a=p(e,["controlImageConfig"]);null!=a&&_(t,["controlImageConfig"],function WAe(n,e){const t={},r=p(e,["controlType"]);null!=r&&_(t,["controlType"],r);const i=p(e,["enableControlImageComputation"]);return null!=i&&_(t,["computeControl"],i),t}(0,a));const l=p(e,["styleImageConfig"]);null!=l&&_(t,["styleImageConfig"],function GAe(n,e){const t={},r=p(e,["styleDescription"]);return null!=r&&_(t,["styleDescription"],r),t}(0,l));const u=p(e,["subjectImageConfig"]);return null!=u&&_(t,["subjectImageConfig"],function qAe(n,e){const t={},r=p(e,["subjectType"]);null!=r&&_(t,["subjectType"],r);const i=p(e,["subjectDescription"]);return null!=i&&_(t,["subjectDescription"],i),t}(0,u)),t}(0,l))),_(t,["instances[0]","referenceImages"],a)}const o=p(e,["config"]);return null!=o&&_(t,["config"],function KAe(n,e,t){const i=p(e,["outputGcsUri"]);void 0!==t&&null!=i&&_(t,["parameters","storageUri"],i);const s=p(e,["negativePrompt"]);void 0!==t&&null!=s&&_(t,["parameters","negativePrompt"],s);const o=p(e,["numberOfImages"]);void 0!==t&&null!=o&&_(t,["parameters","sampleCount"],o);const a=p(e,["aspectRatio"]);void 0!==t&&null!=a&&_(t,["parameters","aspectRatio"],a);const l=p(e,["guidanceScale"]);void 0!==t&&null!=l&&_(t,["parameters","guidanceScale"],l);const u=p(e,["seed"]);void 0!==t&&null!=u&&_(t,["parameters","seed"],u);const c=p(e,["safetyFilterLevel"]);void 0!==t&&null!=c&&_(t,["parameters","safetySetting"],c);const d=p(e,["personGeneration"]);void 0!==t&&null!=d&&_(t,["parameters","personGeneration"],d);const f=p(e,["includeSafetyAttributes"]);void 0!==t&&null!=f&&_(t,["parameters","includeSafetyAttributes"],f);const y=p(e,["includeRaiReason"]);void 0!==t&&null!=y&&_(t,["parameters","includeRaiReason"],y);const E=p(e,["language"]);void 0!==t&&null!=E&&_(t,["parameters","language"],E);const I=p(e,["outputMimeType"]);void 0!==t&&null!=I&&_(t,["parameters","outputOptions","mimeType"],I);const T=p(e,["outputCompressionQuality"]);void 0!==t&&null!=T&&_(t,["parameters","outputOptions","compressionQuality"],T);const P=p(e,["editMode"]);void 0!==t&&null!=P&&_(t,["parameters","editMode"],P);const x=p(e,["baseSteps"]);return void 0!==t&&null!=x&&_(t,["parameters","editConfig","baseSteps"],x),{}}(0,o,t)),t}function mSe(n,e){const t={},r=p(e,["content"]);null!=r&&_(t,["content"],function hSe(n,e){const t={},r=p(e,["parts"]);if(null!=r){let s=r;Array.isArray(s)&&(s=s.map(o=>function dSe(n,e){const t={},r=p(e,["videoMetadata"]);null!=r&&_(t,["videoMetadata"],function uSe(n,e){const t={},r=p(e,["fps"]);null!=r&&_(t,["fps"],r);const i=p(e,["endOffset"]);null!=i&&_(t,["endOffset"],i);const s=p(e,["startOffset"]);return null!=s&&_(t,["startOffset"],s),t}(0,r));const i=p(e,["thought"]);null!=i&&_(t,["thought"],i);const s=p(e,["inlineData"]);null!=s&&_(t,["inlineData"],function cSe(n,e){const t={},r=p(e,["data"]);null!=r&&_(t,["data"],r);const i=p(e,["mimeType"]);return null!=i&&_(t,["mimeType"],i),t}(0,s));const o=p(e,["codeExecutionResult"]);null!=o&&_(t,["codeExecutionResult"],o);const a=p(e,["executableCode"]);null!=a&&_(t,["executableCode"],a);const l=p(e,["fileData"]);null!=l&&_(t,["fileData"],l);const u=p(e,["functionCall"]);null!=u&&_(t,["functionCall"],u);const c=p(e,["functionResponse"]);null!=c&&_(t,["functionResponse"],c);const d=p(e,["text"]);return null!=d&&_(t,["text"],d),t}(0,o))),_(t,["parts"],s)}const i=p(e,["role"]);return null!=i&&_(t,["role"],i),t}(0,r));const i=p(e,["citationMetadata"]);null!=i&&_(t,["citationMetadata"],function fSe(n,e){const t={},r=p(e,["citationSources"]);return null!=r&&_(t,["citations"],r),t}(0,i));const s=p(e,["tokenCount"]);null!=s&&_(t,["tokenCount"],s);const o=p(e,["finishReason"]);null!=o&&_(t,["finishReason"],o);const a=p(e,["urlContextMetadata"]);null!=a&&_(t,["urlContextMetadata"],function gSe(n,e){const t={},r=p(e,["urlMetadata"]);if(null!=r){let i=r;Array.isArray(i)&&(i=i.map(s=>function pSe(n,e){const t={},r=p(e,["retrievedUrl"]);null!=r&&_(t,["retrievedUrl"],r);const i=p(e,["urlRetrievalStatus"]);return null!=i&&_(t,["urlRetrievalStatus"],i),t}(0,s))),_(t,["urlMetadata"],i)}return t}(0,a));const l=p(e,["avgLogprobs"]);null!=l&&_(t,["avgLogprobs"],l);const u=p(e,["groundingMetadata"]);null!=u&&_(t,["groundingMetadata"],u);const c=p(e,["index"]);null!=c&&_(t,["index"],c);const d=p(e,["logprobsResult"]);null!=d&&_(t,["logprobsResult"],d);const f=p(e,["safetyRatings"]);return null!=f&&_(t,["safetyRatings"],f),t}function K9(n,e){const t={},r=p(e,["candidates"]);if(null!=r){let a=r;Array.isArray(a)&&(a=a.map(l=>mSe(0,l))),_(t,["candidates"],a)}const i=p(e,["modelVersion"]);null!=i&&_(t,["modelVersion"],i);const s=p(e,["promptFeedback"]);null!=s&&_(t,["promptFeedback"],s);const o=p(e,["usageMetadata"]);return null!=o&&_(t,["usageMetadata"],o),t}function Y9(n,e){const t={},r=p(e,["safetyAttributes","categories"]);null!=r&&_(t,["categories"],r);const i=p(e,["safetyAttributes","scores"]);null!=i&&_(t,["scores"],i);const s=p(e,["contentType"]);return null!=s&&_(t,["contentType"],s),t}function uk(n,e){const t={},r=p(e,["name"]);null!=r&&_(t,["name"],r);const i=p(e,["displayName"]);null!=i&&_(t,["displayName"],i);const s=p(e,["description"]);null!=s&&_(t,["description"],s);const o=p(e,["version"]);null!=o&&_(t,["version"],o);const a=p(e,["_self"]);null!=a&&_(t,["tunedModelInfo"],function wSe(n,e){const t={},r=p(e,["baseModel"]);null!=r&&_(t,["baseModel"],r);const i=p(e,["createTime"]);null!=i&&_(t,["createTime"],i);const s=p(e,["updateTime"]);return null!=s&&_(t,["updateTime"],s),t}(0,a));const l=p(e,["inputTokenLimit"]);null!=l&&_(t,["inputTokenLimit"],l);const u=p(e,["outputTokenLimit"]);null!=u&&_(t,["outputTokenLimit"],u);const c=p(e,["supportedGenerationMethods"]);return null!=c&&_(t,["supportedActions"],c),t}function RSe(n,e){const t={},r=p(e,["name"]);null!=r&&_(t,["name"],r);const i=p(e,["metadata"]);null!=i&&_(t,["metadata"],i);const s=p(e,["done"]);null!=s&&_(t,["done"],s);const o=p(e,["error"]);null!=o&&_(t,["error"],o);const a=p(e,["response","generateVideoResponse"]);return null!=a&&_(t,["response"],function xSe(n,e){const t={},r=p(e,["generatedSamples"]);if(null!=r){let o=r;Array.isArray(o)&&(o=o.map(a=>function DSe(n,e){const t={},r=p(e,["_self"]);return null!=r&&_(t,["video"],function SSe(n,e){const t={},r=p(e,["video","uri"]);null!=r&&_(t,["uri"],r);const i=p(e,["video","encodedVideo"]);null!=i&&_(t,["videoBytes"],Bc(0,i));const s=p(e,["encoding"]);return null!=s&&_(t,["mimeType"],s),t}(0,r)),t}(0,a))),_(t,["generatedVideos"],o)}const i=p(e,["raiMediaFilteredCount"]);null!=i&&_(t,["raiMediaFilteredCount"],i);const s=p(e,["raiMediaFilteredReasons"]);return null!=s&&_(t,["raiMediaFilteredReasons"],s),t}(0,a)),t}function FSe(n,e){const t={},r=p(e,["content"]);null!=r&&_(t,["content"],function kSe(n,e){const t={},r=p(e,["parts"]);if(null!=r){let s=r;Array.isArray(s)&&(s=s.map(o=>function NSe(n,e){const t={},r=p(e,["videoMetadata"]);null!=r&&_(t,["videoMetadata"],function PSe(n,e){const t={},r=p(e,["fps"]);null!=r&&_(t,["fps"],r);const i=p(e,["endOffset"]);null!=i&&_(t,["endOffset"],i);const s=p(e,["startOffset"]);return null!=s&&_(t,["startOffset"],s),t}(0,r));const i=p(e,["thought"]);null!=i&&_(t,["thought"],i);const s=p(e,["inlineData"]);null!=s&&_(t,["inlineData"],function MSe(n,e){const t={},r=p(e,["displayName"]);null!=r&&_(t,["displayName"],r);const i=p(e,["data"]);null!=i&&_(t,["data"],i);const s=p(e,["mimeType"]);return null!=s&&_(t,["mimeType"],s),t}(0,s));const o=p(e,["codeExecutionResult"]);null!=o&&_(t,["codeExecutionResult"],o);const a=p(e,["executableCode"]);null!=a&&_(t,["executableCode"],a);const l=p(e,["fileData"]);null!=l&&_(t,["fileData"],l);const u=p(e,["functionCall"]);null!=u&&_(t,["functionCall"],u);const c=p(e,["functionResponse"]);null!=c&&_(t,["functionResponse"],c);const d=p(e,["text"]);return null!=d&&_(t,["text"],d),t}(0,o))),_(t,["parts"],s)}const i=p(e,["role"]);return null!=i&&_(t,["role"],i),t}(0,r));const i=p(e,["citationMetadata"]);null!=i&&_(t,["citationMetadata"],function OSe(n,e){const t={},r=p(e,["citations"]);return null!=r&&_(t,["citations"],r),t}(0,i));const s=p(e,["finishMessage"]);null!=s&&_(t,["finishMessage"],s);const o=p(e,["finishReason"]);null!=o&&_(t,["finishReason"],o);const a=p(e,["avgLogprobs"]);null!=a&&_(t,["avgLogprobs"],a);const l=p(e,["groundingMetadata"]);null!=l&&_(t,["groundingMetadata"],l);const u=p(e,["index"]);null!=u&&_(t,["index"],u);const c=p(e,["logprobsResult"]);null!=c&&_(t,["logprobsResult"],c);const d=p(e,["safetyRatings"]);return null!=d&&_(t,["safetyRatings"],d),t}function Q9(n,e){const t={},r=p(e,["candidates"]);if(null!=r){let u=r;Array.isArray(u)&&(u=u.map(c=>FSe(0,c))),_(t,["candidates"],u)}const i=p(e,["createTime"]);null!=i&&_(t,["createTime"],i);const s=p(e,["responseId"]);null!=s&&_(t,["responseId"],s);const o=p(e,["modelVersion"]);null!=o&&_(t,["modelVersion"],o);const a=p(e,["promptFeedback"]);null!=a&&_(t,["promptFeedback"],a);const l=p(e,["usageMetadata"]);return null!=l&&_(t,["usageMetadata"],l),t}function BSe(n,e){const t={},r=p(e,["predictions[]","embeddings"]);if(null!=r){let s=r;Array.isArray(s)&&(s=s.map(o=>function VSe(n,e){const t={},r=p(e,["values"]);null!=r&&_(t,["values"],r);const i=p(e,["statistics"]);return null!=i&&_(t,["statistics"],function LSe(n,e){const t={},r=p(e,["truncated"]);null!=r&&_(t,["truncated"],r);const i=p(e,["token_count"]);return null!=i&&_(t,["tokenCount"],i),t}(0,i)),t}(0,o))),_(t,["embeddings"],s)}const i=p(e,["metadata"]);return null!=i&&_(t,["metadata"],function USe(n,e){const t={},r=p(e,["billableCharacterCount"]);return null!=r&&_(t,["billableCharacterCount"],r),t}(0,i)),t}function J9(n,e){const t={},r=p(e,["safetyAttributes","categories"]);null!=r&&_(t,["categories"],r);const i=p(e,["safetyAttributes","scores"]);null!=i&&_(t,["scores"],i);const s=p(e,["contentType"]);return null!=s&&_(t,["contentType"],s),t}function ck(n,e){const t={},r=p(e,["_self"]);null!=r&&_(t,["image"],function $Se(n,e){const t={},r=p(e,["gcsUri"]);null!=r&&_(t,["gcsUri"],r);const i=p(e,["bytesBase64Encoded"]);null!=i&&_(t,["imageBytes"],Bc(0,i));const s=p(e,["mimeType"]);return null!=s&&_(t,["mimeType"],s),t}(0,r));const i=p(e,["raiFilteredReason"]);null!=i&&_(t,["raiFilteredReason"],i);const s=p(e,["_self"]);null!=s&&_(t,["safetyAttributes"],J9(0,s));const o=p(e,["prompt"]);return null!=o&&_(t,["enhancedPrompt"],o),t}function dk(n,e){const t={},r=p(e,["name"]);null!=r&&_(t,["name"],r);const i=p(e,["displayName"]);null!=i&&_(t,["displayName"],i);const s=p(e,["description"]);null!=s&&_(t,["description"],s);const o=p(e,["versionId"]);null!=o&&_(t,["version"],o);const a=p(e,["deployedModels"]);if(null!=a){let f=a;Array.isArray(f)&&(f=f.map(y=>function GSe(n,e){const t={},r=p(e,["endpoint"]);null!=r&&_(t,["name"],r);const i=p(e,["deployedModelId"]);return null!=i&&_(t,["deployedModelId"],i),t}(0,y))),_(t,["endpoints"],f)}const l=p(e,["labels"]);null!=l&&_(t,["labels"],l);const u=p(e,["_self"]);null!=u&&_(t,["tunedModelInfo"],function qSe(n,e){const t={},r=p(e,["labels","google-vertex-llm-tuning-base-model-id"]);null!=r&&_(t,["baseModel"],r);const i=p(e,["createTime"]);null!=i&&_(t,["createTime"],i);const s=p(e,["updateTime"]);return null!=s&&_(t,["updateTime"],s),t}(0,u));const c=p(e,["defaultCheckpointId"]);null!=c&&_(t,["defaultCheckpointId"],c);const d=p(e,["checkpoints"]);if(null!=d){let f=d;Array.isArray(f)&&(f=f.map(y=>function jSe(n,e){const t={},r=p(e,["checkpointId"]);null!=r&&_(t,["checkpointId"],r);const i=p(e,["epoch"]);null!=i&&_(t,["epoch"],i);const s=p(e,["step"]);return null!=s&&_(t,["step"],s),t}(0,y))),_(t,["checkpoints"],f)}return t}function tDe(n,e){const t={},r=p(e,["name"]);null!=r&&_(t,["name"],r);const i=p(e,["metadata"]);null!=i&&_(t,["metadata"],i);const s=p(e,["done"]);null!=s&&_(t,["done"],s);const o=p(e,["error"]);null!=o&&_(t,["error"],o);const a=p(e,["response"]);return null!=a&&_(t,["response"],function eDe(n,e){const t={},r=p(e,["videos"]);if(null!=r){let o=r;Array.isArray(o)&&(o=o.map(a=>function ZSe(n,e){const t={},r=p(e,["_self"]);return null!=r&&_(t,["video"],function XSe(n,e){const t={},r=p(e,["gcsUri"]);null!=r&&_(t,["uri"],r);const i=p(e,["bytesBase64Encoded"]);null!=i&&_(t,["videoBytes"],Bc(0,i));const s=p(e,["mimeType"]);return null!=s&&_(t,["mimeType"],s),t}(0,r)),t}(0,a))),_(t,["generatedVideos"],o)}const i=p(e,["raiMediaFilteredCount"]);null!=i&&_(t,["raiMediaFilteredCount"],i);const s=p(e,["raiMediaFilteredReasons"]);return null!=s&&_(t,["raiMediaFilteredReasons"],s),t}(0,a)),t}const hk="x-goog-api-client",X9=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class Z9 extends Error{constructor(e,t){super(e,t?{cause:t}:{cause:(new Error).stack}),this.message=e,this.name="ClientError"}}class fk extends Error{constructor(e,t){super(e,t?{cause:t}:{cause:(new Error).stack}),this.message=e,this.name="ServerError"}}class lDe{constructor(e){var t,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=null!==(t=this.clientOptions.apiVersion)&&void 0!==t?t:"v1beta1",i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=null!==(r=this.clientOptions.apiVersion)&&void 0!==r?r:"v1beta",i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&"global"!==this.clientOptions.location?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:(this.clientOptions.project=void 0,this.clientOptions.location=void 0)}isVertexAI(){var e;return null!==(e=this.clientOptions.vertexai)&&void 0!==e&&e}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.apiVersion)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.baseUrl)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.headers)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||void 0===e.baseUrl||void 0===e.apiVersion)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&""!==e.apiVersion&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol="http:"==t.protocol?"ws":"wss",t.toString()}setBaseUrl(e){if(!this.clientOptions.httpOptions)throw new Error("HTTP options are not correctly set.");this.clientOptions.httpOptions.baseUrl=e}constructUrl(e,t,r){const i=[this.getRequestUrlInternal(t)];return r&&i.push(this.getBaseResourcePath()),""!==e&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||"GET"===e.httpMethod&&e.path.startsWith("publishers/google/models"))}request(e){var t=this;return(0,b.A)(function*(){let r=t.clientOptions.httpOptions;e.httpOptions&&(r=t.patchHttpOptions(t.clientOptions.httpOptions,e.httpOptions));const i=t.shouldPrependVertexProjectPath(e),s=t.constructUrl(e.path,r,i);if(e.queryParams)for(const[a,l]of Object.entries(e.queryParams))s.searchParams.append(a,String(l));let o={};if("GET"===e.httpMethod){if(e.body&&"{}"!==e.body)throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=yield t.includeExtraHttpOptionsToRequestInit(o,r,e.abortSignal),t.unaryApiCall(s,o,e.httpMethod)})()}patchHttpOptions(e,t){const r=JSON.parse(JSON.stringify(e));for(const[i,s]of Object.entries(t))"object"==typeof s?r[i]=Object.assign(Object.assign({},r[i]),s):void 0!==s&&(r[i]=s);return r}requestStream(e){var t=this;return(0,b.A)(function*(){let r=t.clientOptions.httpOptions;e.httpOptions&&(r=t.patchHttpOptions(t.clientOptions.httpOptions,e.httpOptions));const i=t.shouldPrependVertexProjectPath(e),s=t.constructUrl(e.path,r,i);(!s.searchParams.has("alt")||"sse"!==s.searchParams.get("alt"))&&s.searchParams.set("alt","sse");let o={};return o.body=e.body,o=yield t.includeExtraHttpOptionsToRequestInit(o,r,e.abortSignal),t.streamApiCall(s,o,e.httpMethod)})()}includeExtraHttpOptionsToRequestInit(e,t,r){var i=this;return(0,b.A)(function*(){if(t&&t.timeout||r){const s=new AbortController,o=s.signal;t.timeout&&t?.timeout>0&&setTimeout(()=>s.abort(),t.timeout),r&&r.addEventListener("abort",()=>{s.abort()}),e.signal=o}return e.headers=yield i.getHeadersInternal(t),e})()}unaryApiCall(e,t,r){var i=this;return(0,b.A)(function*(){return i.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:r})).then(function(){var s=(0,b.A)(function*(o){return yield e6(o),new ik(o)});return function(o){return s.apply(this,arguments)}}()).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})})()}streamApiCall(e,t,r){var i=this;return(0,b.A)(function*(){return i.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:r})).then(function(){var s=(0,b.A)(function*(o){return yield e6(o),i.processStreamResponse(o)});return function(o){return s.apply(this,arguments)}}()).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})})()}processStreamResponse(e){var t;return Ng(this,arguments,function*(){const i=null===(t=e?.body)||void 0===t?void 0:t.getReader(),s=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let o="";for(;;){const{done:a,value:l}=yield hr(i.read());if(a){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const u=s.decode(l);try{const d=JSON.parse(u);if("error"in d){const f=JSON.parse(JSON.stringify(d.error)),E=f.code,I=`got status: ${f.status}. ${JSON.stringify(d)}`;if(E>=400&&E<500)throw new Z9(I);if(E>=500&&E<600)throw new fk(I)}}catch(d){if("ClientError"===d.name||"ServerError"===d.name)throw d}o+=u;let c=o.match(X9);for(;c;){const d=c[1];try{const f=new Response(d,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield hr(new ik(f)),o=o.slice(c[0].length),c=o.match(X9)}catch(f){throw new Error(`exception parsing stream chunk ${d}. ${f}`)}}}}finally{i.releaseLock()}})}apiCall(e,t){return(0,b.A)(function*(){return fetch(e,t).catch(r=>{throw new Error(`exception ${r} sending request`)})})()}getDefaultHeaders(){const e={},t="google-genai-sdk/1.0.1 "+this.clientOptions.userAgentExtra;return e["User-Agent"]=t,e[hk]=t,e["Content-Type"]="application/json",e}getHeadersInternal(e){var t=this;return(0,b.A)(function*(){const r=new Headers;if(e&&e.headers){for(const[i,s]of Object.entries(e.headers))r.append(i,s);e.timeout&&e.timeout>0&&r.append("X-Server-Timeout",String(Math.ceil(e.timeout/1e3)))}return yield t.clientOptions.auth.addAuthHeaders(r),r})()}uploadFile(e,t){var r=this;return(0,b.A)(function*(){var i;const s={};null!=t&&(s.mimeType=t.mimeType,s.name=t.name,s.displayName=t.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const o=r.clientOptions.uploader,a=yield o.stat(e);s.sizeBytes=String(a.size);const l=null!==(i=t?.mimeType)&&void 0!==i?i:a.type;if(void 0===l||""===l)throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=l;const u=yield r.fetchUploadUrl(s,t);return o.upload(e,u,r)})()}downloadFile(e){var t=this;return(0,b.A)(function*(){yield t.clientOptions.downloader.download(e,t)})()}fetchUploadUrl(e,t){var r=this;return(0,b.A)(function*(){var i;let s={};s=t?.httpOptions?t.httpOptions:{apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const o={file:e},a=yield r.request({path:vt("upload/v1beta/files",o._url),body:JSON.stringify(o),httpMethod:"POST",httpOptions:s});if(!a||!a?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const l=null===(i=a?.headers)||void 0===i?void 0:i["x-goog-upload-url"];if(void 0===l)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return l})()}}function e6(n){return pk.apply(this,arguments)}function pk(){return pk=(0,b.A)(function*(n){var e;if(void 0===n)throw new fk("response is undefined");if(!n.ok){const t=n.status,r=n.statusText;let i;i=null!==(e=n.headers.get("content-type"))&&void 0!==e&&e.includes("application/json")?yield n.json():{error:{message:yield n.text(),code:n.status,status:n.statusText}};const s=`got status: ${t} ${r}. ${JSON.stringify(i)}`;throw t>=400&&t<500?new Z9(s):t>=500&&t<600?new fk(s):new Error(s)}}),pk.apply(this,arguments)}const t6="mcp_used/unknown";function n6(n){for(const e of n)if(gk(e)||"object"==typeof e&&"inputSchema"in e)return!0;return!1}function r6(n){var e;const t=null!==(e=n[hk])&&void 0!==e?e:"";t.includes(t6)||(n[hk]=(t+` ${t6}`).trimStart())}function gk(n){return null!==n&&"object"==typeof n&&"tool"in n&&"callTool"in n}function mk(){return(mk=(0,b.A)(function*(n,e,t){const r=new vwe;let i;i=t.data instanceof Blob?JSON.parse(yield t.data.text()):JSON.parse(t.data);const s=N0e(0,i);Object.assign(r,s),e(r)})).apply(this,arguments)}class pDe{constructor(e,t,r){this.apiClient=e,this.auth=t,this.webSocketFactory=r}connect(e){var t=this;return(0,b.A)(function*(){var r,i;if(t.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=t.apiClient.getWebsocketBaseUrl(),o=t.apiClient.getApiVersion(),a=function _De(n){const e=new Headers;for(const[t,r]of Object.entries(n))e.append(t,r);return e}(t.apiClient.getDefaultHeaders()),u=`${s}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${t.apiClient.getApiKey()}`;let c=()=>{};const d=new Promise(W=>{c=W}),f=e.callbacks,E=t.apiClient,I={onopen:function(){c({})},onmessage:W=>{!function fDe(n,e,t){mk.apply(this,arguments)}(E,f.onmessage,W)},onerror:null!==(r=f?.onerror)&&void 0!==r?r:function(W){},onclose:null!==(i=f?.onclose)&&void 0!==i?i:function(W){}},T=t.webSocketFactory.create(u,function mDe(n){const e={};return n.forEach((t,r)=>{e[r]=t}),e}(a),I);T.connect(),yield d;const V=ak(0,{setup:B9(0,{model:dr(t.apiClient,e.model)})});return T.send(JSON.stringify(V)),new gDe(T,t.apiClient)})()}}class gDe{constructor(e,t){this.conn=e,this.apiClient=t}setWeightedPrompts(e){var t=this;return(0,b.A)(function*(){if(!e.weightedPrompts||0===Object.keys(e.weightedPrompts).length)throw new Error("Weighted prompts must be set and contain at least one entry.");const r=function Ybe(n,e){const t={},r=p(e,["weightedPrompts"]);if(null!=r){let i=r;Array.isArray(i)&&(i=i.map(s=>V9(0,s))),_(t,["weightedPrompts"],i)}return t}(0,e),i=$9(0,r);t.conn.send(JSON.stringify({clientContent:i}))})()}setMusicGenerationConfig(e){var t=this;return(0,b.A)(function*(){e.musicGenerationConfig||(e.musicGenerationConfig={});const r=function Qbe(n,e){const t={},r=p(e,["musicGenerationConfig"]);return null!=r&&_(t,["musicGenerationConfig"],U9(0,r)),t}(0,e),i=ak(0,r);t.conn.send(JSON.stringify(i))})()}sendPlaybackControl(e){const t=ak(0,{playbackControl:e});this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(Xv.PLAY)}pause(){this.sendPlaybackControl(Xv.PAUSE)}stop(){this.sendPlaybackControl(Xv.STOP)}resetContext(){this.sendPlaybackControl(Xv.RESET_CONTEXT)}close(){this.conn.close()}}function _k(){return _k=(0,b.A)(function*(n,e,t){const r=new ywe;let i;if(i=t.data instanceof Blob?JSON.parse(yield t.data.text()):JSON.parse(t.data),n.isVertexAI()){const s=T0e(0,i);Object.assign(r,s)}else{const s=w0e(0,i);Object.assign(r,s)}e(r)}),_k.apply(this,arguments)}class EDe{constructor(e,t,r){this.apiClient=e,this.auth=t,this.webSocketFactory=r,this.music=new pDe(this.apiClient,this.auth,this.webSocketFactory)}connect(e){var t=this;return(0,b.A)(function*(){var r,i,s,o,a,l;const u=t.apiClient.getWebsocketBaseUrl(),c=t.apiClient.getApiVersion();let d;const f=t.apiClient.getDefaultHeaders();e.config&&e.config.tools&&n6(e.config.tools)&&r6(f);const y=function TDe(n){const e=new Headers;for(const[t,r]of Object.entries(n))e.append(t,r);return e}(f);t.apiClient.isVertexAI()?(d=`${u}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,yield t.auth.addAuthHeaders(y)):d=`${u}/ws/google.ai.generativelanguage.${c}.GenerativeService.BidiGenerateContent?key=${t.apiClient.getApiKey()}`;let E=()=>{};const I=new Promise(B=>{E=B}),T=e.callbacks,x=t.apiClient,V={onopen:function(){var B;null===(B=T?.onopen)||void 0===B||B.call(T),E({})},onmessage:B=>{!function vDe(n,e,t){_k.apply(this,arguments)}(x,T.onmessage,B)},onerror:null!==(r=T?.onerror)&&void 0!==r?r:function(B){},onclose:null!==(i=T?.onclose)&&void 0!==i?i:function(B){}},W=t.webSocketFactory.create(d,function wDe(n){const e={};return n.forEach((t,r)=>{e[r]=t}),e}(y),V);W.connect(),yield I;let K=dr(t.apiClient,e.model);t.apiClient.isVertexAI()&&K.startsWith("publishers/")&&(K=`projects/${t.apiClient.getProject()}/locations/${t.apiClient.getLocation()}/`+K);let Y={};t.apiClient.isVertexAI()&&void 0===(null===(s=e.config)||void 0===s?void 0:s.responseModalities)&&(void 0===e.config?e.config={responseModalities:[rk.AUDIO]}:e.config.responseModalities=[rk.AUDIO]),null!==(o=e.config)&&void 0!==o&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const U=null!==(l=null===(a=e.config)||void 0===a?void 0:a.tools)&&void 0!==l?l:[],N=[];for(const B of U)if(t.isCallableTool(B)){const H=B;N.push(yield H.tool())}else N.push(B);N.length>0&&(e.config.tools=N);const F={model:K,config:e.config,callbacks:e.callbacks};return Y=t.apiClient.isVertexAI()?function Hbe(n,e){const t={},r=p(e,["model"]);null!=r&&_(t,["setup","model"],dr(n,r));const i=p(e,["config"]);return null!=i&&_(t,["config"],Bbe(0,i,t)),t}(t.apiClient,F):function $be(n,e){const t={},r=p(e,["model"]);null!=r&&_(t,["setup","model"],dr(n,r));const i=p(e,["config"]);return null!=i&&_(t,["config"],Ube(0,i,t)),t}(t.apiClient,F),delete Y.config,W.send(JSON.stringify(Y)),new IDe(W,t.apiClient)})()}isCallableTool(e){return"callTool"in e&&"function"==typeof e.callTool}}const CDe={turnComplete:!0};class IDe{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(null!=t.turns){let r=[];try{r=La(0,t.turns),r=e.isVertexAI()?r.map(i=>kg(0,i)):r.map(i=>t0(0,i))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:r,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let r=[];if(null==t.functionResponses)throw new Error("functionResponses is required.");if(r=Array.isArray(t.functionResponses)?t.functionResponses:[t.functionResponses],0===r.length)throw new Error("functionResponses is required.");for(const s of r){if("object"!=typeof s||null===s||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!e.isVertexAI()&&!("id"in s))throw new Error("FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.")}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},CDe),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};t=this.apiClient.isVertexAI()?{realtimeInput:Kbe(0,e)}:{realtimeInput:jbe(0,e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(null==e.functionResponses)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function s6(n){var e,t,r;if(null!==(e=n?.automaticFunctionCalling)&&void 0!==e&&e.disable)return!0;let i=!1;for(const o of null!==(t=n?.tools)&&void 0!==t?t:[])if(r0(o)){i=!0;break}if(!i)return!0;const s=null===(r=n?.automaticFunctionCalling)||void 0===r?void 0:r.maximumRemoteCalls;return!!(s&&(s<0||!Number.isInteger(s))||0==s)&&(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",s),!0)}function r0(n){return"callTool"in n&&"function"==typeof n.callTool}function o6(n){var e;return!(null!==(e=n?.automaticFunctionCalling)&&void 0!==e&&e.ignoreCallHistory)}class bDe extends Jv{constructor(e){var t;super(),t=this,this.apiClient=e,this.generateContent=function(){var r=(0,b.A)(function*(i){var s,o,a,l,u;const c=yield t.processParamsForMcpUsage(i);if(!function uDe(n){var e,t,r;return null!==(r=null===(t=null===(e=n.config)||void 0===e?void 0:e.tools)||void 0===t?void 0:t.some(i=>gk(i)))&&void 0!==r&&r}(i)||s6(i.config))return yield t.generateContentInternal(c);if(function cDe(n){var e,t,r;return null!==(r=null===(t=null===(e=n.config)||void 0===e?void 0:e.tools)||void 0===t?void 0:t.some(i=>!gk(i)))&&void 0!==r&&r}(i))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let d,f;const y=La(0,c.contents),E=null!==(a=null===(o=null===(s=c.config)||void 0===s?void 0:s.automaticFunctionCalling)||void 0===o?void 0:o.maximumRemoteCalls)&&void 0!==a?a:10;let I=0;for(;I<E&&(d=yield t.generateContentInternal(c),d.functionCalls&&0!==d.functionCalls.length);){const T=d.candidates[0].content,P=[];for(const x of null!==(u=null===(l=i.config)||void 0===l?void 0:l.tools)&&void 0!==u?u:[])if(r0(x)){const W=yield x.callTool(d.functionCalls);P.push(...W)}I++,f={role:"user",parts:P},c.contents=La(0,c.contents),c.contents.push(T),c.contents.push(f),o6(c.config)&&(y.push(T),y.push(f))}return o6(c.config)&&(d.automaticFunctionCallingHistory=y),d});return function(i){return r.apply(this,arguments)}}(),this.generateContentStream=function(){var r=(0,b.A)(function*(i){if(s6(i.config)){const s=yield t.processParamsForMcpUsage(i);return yield t.generateContentStreamInternal(s)}return yield t.processAfcStream(i)});return function(i){return r.apply(this,arguments)}}(),this.generateImages=function(){var r=(0,b.A)(function*(i){return yield t.generateImagesInternal(i).then(s=>{var o;let a;const l=[];if(s?.generatedImages)for(const c of s.generatedImages)c&&c?.safetyAttributes&&"Positive Prompt"===(null===(o=c?.safetyAttributes)||void 0===o?void 0:o.contentType)?a=c?.safetyAttributes:l.push(c);let u;return u=a?{generatedImages:l,positivePromptSafetyAttributes:a}:{generatedImages:l},u})});return function(i){return r.apply(this,arguments)}}(),this.list=function(){var r=(0,b.A)(function*(i){var s;const l={config:Object.assign(Object.assign({},{queryBase:!0}),i?.config)};if(t.apiClient.isVertexAI()&&!l.config.queryBase){if(null!==(s=l.config)&&void 0!==s&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new Xb(eE.PAGED_ITEM_MODELS,u=>t.listInternal(u),yield t.listInternal(l),l)});return function(i){return r.apply(this,arguments)}}(),this.editImage=function(){var r=(0,b.A)(function*(i){const s={model:i.model,prompt:i.prompt,referenceImages:[],config:i.config};return i.referenceImages&&i.referenceImages&&(s.referenceImages=i.referenceImages.map(o=>o.toReferenceImageAPI())),yield t.editImageInternal(s)});return function(i){return r.apply(this,arguments)}}(),this.upscaleImage=function(){var r=(0,b.A)(function*(i){let s={numberOfImages:1,mode:"upscale"};i.config&&(s=Object.assign(Object.assign({},s),i.config));const o={model:i.model,image:i.image,upscaleFactor:i.upscaleFactor,config:s};return yield t.upscaleImageInternal(o)});return function(i){return r.apply(this,arguments)}}()}processParamsForMcpUsage(e){var t=this;return(0,b.A)(function*(){var r,i,s;const o=null===(r=e.config)||void 0===r?void 0:r.tools;if(!o)return e;const a=yield Promise.all(o.map(function(){var u=(0,b.A)(function*(c){return r0(c)?yield c.tool():c});return function(c){return u.apply(this,arguments)}}())),l={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:a})};if(l.config.tools=a,e.config&&e.config.tools&&n6(e.config.tools)){const u=null!==(s=null===(i=e.config.httpOptions)||void 0===i?void 0:i.headers)&&void 0!==s?s:{};let c=Object.assign({},u);0===Object.keys(c).length&&(c=t.apiClient.getDefaultHeaders()),r6(c),l.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return l})()}initAfcToolsMap(e){return(0,b.A)(function*(){var t,r,i;const s=new Map;for(const o of null!==(r=null===(t=e.config)||void 0===t?void 0:t.tools)&&void 0!==r?r:[])if(r0(o)){const a=o,l=yield a.tool();for(const u of null!==(i=l.functionDeclarations)&&void 0!==i?i:[]){if(!u.name)throw new Error("Function declaration name is required.");if(s.has(u.name))throw new Error(`Duplicate tool declaration name: ${u.name}`);s.set(u.name,a)}}return s})()}processAfcStream(e){var t=this;return(0,b.A)(function*(){var r,i,s;const o=null!==(s=null===(i=null===(r=e.config)||void 0===r?void 0:r.automaticFunctionCalling)||void 0===i?void 0:i.maximumRemoteCalls)&&void 0!==s?s:10;let a=!1,l=0;const u=yield t.initAfcToolsMap(e);return function(c,d,f){var y,E;return Ng(this,arguments,function*(){for(var I,T,P;l<o;){a&&(l++,a=!1);const Y=yield hr(c.processParamsForMcpUsage(f)),U=yield hr(c.generateContentStreamInternal(Y)),N=[],F=[];try{for(var K,V=!0,W=(T=void 0,tE(U));!(I=(K=yield hr(W.next())).done);V=!0){V=!1;const B=K.value;if(yield yield hr(B),B.candidates&&null!==(y=B.candidates[0])&&void 0!==y&&y.content){F.push(B.candidates[0].content);for(const H of null!==(E=B.candidates[0].content.parts)&&void 0!==E?E:[])if(l<o&&H.functionCall){if(!H.functionCall.name)throw new Error("Function call name was not returned by the model.");if(!d.has(H.functionCall.name))throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${d.keys()}, mising tool: ${H.functionCall.name}`);{const J=yield hr(d.get(H.functionCall.name).callTool([H.functionCall]));N.push(...J)}}}}}catch(B){T={error:B}}finally{try{!V&&!I&&(P=W.return)&&(yield hr(P.call(W)))}finally{if(T)throw T.error}}if(!(N.length>0))break;{a=!0;const B=new Zv;B.candidates=[{content:{role:"user",parts:N}}],yield yield hr(B);const H=[];H.push(...F),H.push({role:"user",parts:N});const J=La(0,f.contents).concat(H);f.contents=J}}})}(t,u,e)})()}generateContentInternal(e){var t=this;return(0,b.A)(function*(){var r,i,s,o;let a,l="",u={};if(t.apiClient.isVertexAI()){const c=j9(t.apiClient,e);return l=vt("{model}:generateContent",c._url),u=c._query,delete c.config,delete c._url,delete c._query,a=t.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>{const f=Q9(0,d),y=new Zv;return Object.assign(y,f),y})}{const c=G9(t.apiClient,e);return l=vt("{model}:generateContent",c._url),u=c._query,delete c.config,delete c._url,delete c._query,a=t.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:null===(s=e.config)||void 0===s?void 0:s.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(d=>d.json()),a.then(d=>{const f=K9(0,d),y=new Zv;return Object.assign(y,f),y})}})()}generateContentStreamInternal(e){var t=this;return(0,b.A)(function*(){var r,i,s,o;let a,l="",u={};if(t.apiClient.isVertexAI()){const c=j9(t.apiClient,e);l=vt("{model}:streamGenerateContent?alt=sse",c._url),u=c._query,delete c.config,delete c._url,delete c._query;return a=t.apiClient.requestStream({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}),a.then(function(f){return Ng(this,arguments,function*(){var y,E,I,T;try{for(var V,P=!0,x=tE(f);!(y=(V=yield hr(x.next())).done);P=!0){T=V.value,P=!1;const K=Q9(0,yield hr(T.json())),Y=new Zv;Object.assign(Y,K),yield yield hr(Y)}}catch(W){E={error:W}}finally{try{!P&&!y&&(I=x.return)&&(yield hr(I.call(x)))}finally{if(E)throw E.error}}})})}{const c=G9(t.apiClient,e);l=vt("{model}:streamGenerateContent?alt=sse",c._url),u=c._query,delete c.config,delete c._url,delete c._query;return a=t.apiClient.requestStream({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:null===(s=e.config)||void 0===s?void 0:s.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}),a.then(function(f){return Ng(this,arguments,function*(){var y,E,I,T;try{for(var V,P=!0,x=tE(f);!(y=(V=yield hr(x.next())).done);P=!0){T=V.value,P=!1;const K=K9(0,yield hr(T.json())),Y=new Zv;Object.assign(Y,K),yield yield hr(Y)}}catch(W){E={error:W}}finally{try{!P&&!y&&(I=x.return)&&(yield hr(I.call(x)))}finally{if(E)throw E.error}}})})}})()}embedContent(e){var t=this;return(0,b.A)(function*(){var r,i,s,o;let a,l="",u={};if(t.apiClient.isVertexAI()){const c=function BAe(n,e){const t={},r=p(e,["model"]);null!=r&&_(t,["_url","model"],dr(n,r));const i=p(e,["contents"]);null!=i&&_(t,["instances[]","content"],I9(n,i));const s=p(e,["config"]);return null!=s&&_(t,["config"],function UAe(n,e,t){const i=p(e,["taskType"]);void 0!==t&&null!=i&&_(t,["instances[]","task_type"],i);const s=p(e,["title"]);void 0!==t&&null!=s&&_(t,["instances[]","title"],s);const o=p(e,["outputDimensionality"]);void 0!==t&&null!=o&&_(t,["parameters","outputDimensionality"],o);const a=p(e,["mimeType"]);void 0!==t&&null!=a&&_(t,["instances[]","mimeType"],a);const l=p(e,["autoTruncate"]);return void 0!==t&&null!=l&&_(t,["parameters","autoTruncate"],l),{}}(0,s,t)),t}(t.apiClient,e);return l=vt("{model}:predict",c._url),u=c._query,delete c.config,delete c._url,delete c._query,a=t.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>{const f=BSe(0,d),y=new l9;return Object.assign(y,f),y})}{const c=function nAe(n,e){const t={},r=p(e,["model"]);null!=r&&_(t,["_url","model"],dr(n,r));const i=p(e,["contents"]);null!=i&&_(t,["requests[]","content"],I9(n,i));const s=p(e,["config"]);null!=s&&_(t,["config"],function tAe(n,e,t){const i=p(e,["taskType"]);void 0!==t&&null!=i&&_(t,["requests[]","taskType"],i);const s=p(e,["title"]);void 0!==t&&null!=s&&_(t,["requests[]","title"],s);const o=p(e,["outputDimensionality"]);if(void 0!==t&&null!=o&&_(t,["requests[]","outputDimensionality"],o),void 0!==p(e,["mimeType"]))throw new Error("mimeType parameter is not supported in Gemini API.");if(void 0!==p(e,["autoTruncate"]))throw new Error("autoTruncate parameter is not supported in Gemini API.");return{}}(0,s,t));const o=p(e,["model"]);return void 0!==o&&_(t,["requests[]","model"],dr(n,o)),t}(t.apiClient,e);return l=vt("{model}:batchEmbedContents",c._url),u=c._query,delete c.config,delete c._url,delete c._query,a=t.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:null===(s=e.config)||void 0===s?void 0:s.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(d=>d.json()),a.then(d=>{const f=function vSe(n,e){const t={},r=p(e,["embeddings"]);if(null!=r){let s=r;Array.isArray(s)&&(s=s.map(o=>function _Se(n,e){const t={},r=p(e,["values"]);return null!=r&&_(t,["values"],r),t}(0,o))),_(t,["embeddings"],s)}return null!=p(e,["metadata"])&&_(t,["metadata"],{}),t}(0,d),y=new l9;return Object.assign(y,f),y})}})()}generateImagesInternal(e){var t=this;return(0,b.A)(function*(){var r,i,s,o;let a,l="",u={};if(t.apiClient.isVertexAI()){const c=function HAe(n,e){const t={},r=p(e,["model"]);null!=r&&_(t,["_url","model"],dr(n,r));const i=p(e,["prompt"]);null!=i&&_(t,["instances[0]","prompt"],i);const s=p(e,["config"]);return null!=s&&_(t,["config"],function $Ae(n,e,t){const i=p(e,["outputGcsUri"]);void 0!==t&&null!=i&&_(t,["parameters","storageUri"],i);const s=p(e,["negativePrompt"]);void 0!==t&&null!=s&&_(t,["parameters","negativePrompt"],s);const o=p(e,["numberOfImages"]);void 0!==t&&null!=o&&_(t,["parameters","sampleCount"],o);const a=p(e,["aspectRatio"]);void 0!==t&&null!=a&&_(t,["parameters","aspectRatio"],a);const l=p(e,["guidanceScale"]);void 0!==t&&null!=l&&_(t,["parameters","guidanceScale"],l);const u=p(e,["seed"]);void 0!==t&&null!=u&&_(t,["parameters","seed"],u);const c=p(e,["safetyFilterLevel"]);void 0!==t&&null!=c&&_(t,["parameters","safetySetting"],c);const d=p(e,["personGeneration"]);void 0!==t&&null!=d&&_(t,["parameters","personGeneration"],d);const f=p(e,["includeSafetyAttributes"]);void 0!==t&&null!=f&&_(t,["parameters","includeSafetyAttributes"],f);const y=p(e,["includeRaiReason"]);void 0!==t&&null!=y&&_(t,["parameters","includeRaiReason"],y);const E=p(e,["language"]);void 0!==t&&null!=E&&_(t,["parameters","language"],E);const I=p(e,["outputMimeType"]);void 0!==t&&null!=I&&_(t,["parameters","outputOptions","mimeType"],I);const T=p(e,["outputCompressionQuality"]);void 0!==t&&null!=T&&_(t,["parameters","outputOptions","compressionQuality"],T);const P=p(e,["addWatermark"]);void 0!==t&&null!=P&&_(t,["parameters","addWatermark"],P);const x=p(e,["enhancePrompt"]);return void 0!==t&&null!=x&&_(t,["parameters","enhancePrompt"],x),{}}(0,s,t)),t}(t.apiClient,e);return l=vt("{model}:predict",c._url),u=c._query,delete c.config,delete c._url,delete c._query,a=t.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>{const f=function HSe(n,e){const t={},r=p(e,["predictions"]);if(null!=r){let s=r;Array.isArray(s)&&(s=s.map(o=>ck(0,o))),_(t,["generatedImages"],s)}const i=p(e,["positivePromptSafetyAttributes"]);return null!=i&&_(t,["positivePromptSafetyAttributes"],J9(0,i)),t}(0,d),y=new u9;return Object.assign(y,f),y})}{const c=function iAe(n,e){const t={},r=p(e,["model"]);null!=r&&_(t,["_url","model"],dr(n,r));const i=p(e,["prompt"]);null!=i&&_(t,["instances[0]","prompt"],i);const s=p(e,["config"]);return null!=s&&_(t,["config"],function rAe(n,e,t){if(void 0!==p(e,["outputGcsUri"]))throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(void 0!==p(e,["negativePrompt"]))throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=p(e,["numberOfImages"]);void 0!==t&&null!=i&&_(t,["parameters","sampleCount"],i);const s=p(e,["aspectRatio"]);void 0!==t&&null!=s&&_(t,["parameters","aspectRatio"],s);const o=p(e,["guidanceScale"]);if(void 0!==t&&null!=o&&_(t,["parameters","guidanceScale"],o),void 0!==p(e,["seed"]))throw new Error("seed parameter is not supported in Gemini API.");const a=p(e,["safetyFilterLevel"]);void 0!==t&&null!=a&&_(t,["parameters","safetySetting"],a);const l=p(e,["personGeneration"]);void 0!==t&&null!=l&&_(t,["parameters","personGeneration"],l);const u=p(e,["includeSafetyAttributes"]);void 0!==t&&null!=u&&_(t,["parameters","includeSafetyAttributes"],u);const c=p(e,["includeRaiReason"]);void 0!==t&&null!=c&&_(t,["parameters","includeRaiReason"],c);const d=p(e,["language"]);void 0!==t&&null!=d&&_(t,["parameters","language"],d);const f=p(e,["outputMimeType"]);void 0!==t&&null!=f&&_(t,["parameters","outputOptions","mimeType"],f);const y=p(e,["outputCompressionQuality"]);if(void 0!==t&&null!=y&&_(t,["parameters","outputOptions","compressionQuality"],y),void 0!==p(e,["addWatermark"]))throw new Error("addWatermark parameter is not supported in Gemini API.");if(void 0!==p(e,["enhancePrompt"]))throw new Error("enhancePrompt parameter is not supported in Gemini API.");return{}}(0,s,t)),t}(t.apiClient,e);return l=vt("{model}:predict",c._url),u=c._query,delete c.config,delete c._url,delete c._query,a=t.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:null===(s=e.config)||void 0===s?void 0:s.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(d=>d.json()),a.then(d=>{const f=function ISe(n,e){const t={},r=p(e,["predictions"]);if(null!=r){let s=r;Array.isArray(s)&&(s=s.map(o=>function CSe(n,e){const t={},r=p(e,["_self"]);null!=r&&_(t,["image"],function ESe(n,e){const t={},r=p(e,["bytesBase64Encoded"]);null!=r&&_(t,["imageBytes"],Bc(0,r));const i=p(e,["mimeType"]);return null!=i&&_(t,["mimeType"],i),t}(0,r));const i=p(e,["raiFilteredReason"]);null!=i&&_(t,["raiFilteredReason"],i);const s=p(e,["_self"]);return null!=s&&_(t,["safetyAttributes"],Y9(0,s)),t}(0,o))),_(t,["generatedImages"],s)}const i=p(e,["positivePromptSafetyAttributes"]);return null!=i&&_(t,["positivePromptSafetyAttributes"],Y9(0,i)),t}(0,d),y=new u9;return Object.assign(y,f),y})}})()}editImageInternal(e){var t=this;return(0,b.A)(function*(){var r,i;let s,o="",a={};if(t.apiClient.isVertexAI()){const l=YAe(t.apiClient,e);return o=vt("{model}:predict",l._url),a=l._query,delete l.config,delete l._url,delete l._query,s=t.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then(u=>u.json()),s.then(u=>{const c=function zSe(n,e){const t={},r=p(e,["predictions"]);if(null!=r){let i=r;Array.isArray(i)&&(i=i.map(s=>ck(0,s))),_(t,["generatedImages"],i)}return t}(0,u),d=new hwe;return Object.assign(d,c),d})}throw new Error("This method is only supported by the Vertex AI.")})()}upscaleImageInternal(e){var t=this;return(0,b.A)(function*(){var r,i;let s,o="",a={};if(t.apiClient.isVertexAI()){const l=function JAe(n,e){const t={},r=p(e,["model"]);null!=r&&_(t,["_url","model"],dr(n,r));const i=p(e,["image"]);null!=i&&_(t,["instances[0]","image"],lk(0,i));const s=p(e,["upscaleFactor"]);null!=s&&_(t,["parameters","upscaleConfig","upscaleFactor"],s);const o=p(e,["config"]);return null!=o&&_(t,["config"],function QAe(n,e,t){const i=p(e,["includeRaiReason"]);void 0!==t&&null!=i&&_(t,["parameters","includeRaiReason"],i);const s=p(e,["outputMimeType"]);void 0!==t&&null!=s&&_(t,["parameters","outputOptions","mimeType"],s);const o=p(e,["outputCompressionQuality"]);void 0!==t&&null!=o&&_(t,["parameters","outputOptions","compressionQuality"],o);const a=p(e,["numberOfImages"]);void 0!==t&&null!=a&&_(t,["parameters","sampleCount"],a);const l=p(e,["mode"]);return void 0!==t&&null!=l&&_(t,["parameters","mode"],l),{}}(0,o,t)),t}(t.apiClient,e);return o=vt("{model}:predict",l._url),a=l._query,delete l.config,delete l._url,delete l._query,s=t.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then(u=>u.json()),s.then(u=>{const c=function WSe(n,e){const t={},r=p(e,["predictions"]);if(null!=r){let i=r;Array.isArray(i)&&(i=i.map(s=>ck(0,s))),_(t,["generatedImages"],i)}return t}(0,u),d=new fwe;return Object.assign(d,c),d})}throw new Error("This method is only supported by the Vertex AI.")})()}get(e){var t=this;return(0,b.A)(function*(){var r,i,s,o;let a,l="",u={};if(t.apiClient.isVertexAI()){const c=function XAe(n,e){const t={},r=p(e,["model"]);null!=r&&_(t,["_url","name"],dr(n,r));const i=p(e,["config"]);return null!=i&&_(t,["config"],i),t}(t.apiClient,e);return l=vt("{name}",c._url),u=c._query,delete c.config,delete c._url,delete c._query,a=t.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>dk(0,d))}{const c=function sAe(n,e){const t={},r=p(e,["model"]);null!=r&&_(t,["_url","name"],dr(n,r));const i=p(e,["config"]);return null!=i&&_(t,["config"],i),t}(t.apiClient,e);return l=vt("{name}",c._url),u=c._query,delete c.config,delete c._url,delete c._query,a=t.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:null===(s=e.config)||void 0===s?void 0:s.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(d=>d.json()),a.then(d=>uk(0,d))}})()}listInternal(e){var t=this;return(0,b.A)(function*(){var r,i,s,o;let a,l="",u={};if(t.apiClient.isVertexAI()){const c=function eSe(n,e){const t={},r=p(e,["config"]);return null!=r&&_(t,["config"],function ZAe(n,e,t){const i=p(e,["pageSize"]);void 0!==t&&null!=i&&_(t,["_query","pageSize"],i);const s=p(e,["pageToken"]);void 0!==t&&null!=s&&_(t,["_query","pageToken"],s);const o=p(e,["filter"]);void 0!==t&&null!=o&&_(t,["_query","filter"],o);const a=p(e,["queryBase"]);return void 0!==t&&null!=a&&_(t,["_url","models_url"],D9(n,a)),{}}(n,r,t)),t}(t.apiClient,e);return l=vt("{models_url}",c._url),u=c._query,delete c.config,delete c._url,delete c._query,a=t.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>{const f=function KSe(n,e){const t={},r=p(e,["nextPageToken"]);null!=r&&_(t,["nextPageToken"],r);const i=p(e,["_self"]);if(null!=i){let s=x9(0,i);Array.isArray(s)&&(s=s.map(o=>dk(0,o))),_(t,["models"],s)}return t}(0,d),y=new c9;return Object.assign(y,f),y})}{const c=function aAe(n,e){const t={},r=p(e,["config"]);return null!=r&&_(t,["config"],function oAe(n,e,t){const i=p(e,["pageSize"]);void 0!==t&&null!=i&&_(t,["_query","pageSize"],i);const s=p(e,["pageToken"]);void 0!==t&&null!=s&&_(t,["_query","pageToken"],s);const o=p(e,["filter"]);void 0!==t&&null!=o&&_(t,["_query","filter"],o);const a=p(e,["queryBase"]);return void 0!==t&&null!=a&&_(t,["_url","models_url"],D9(n,a)),{}}(n,r,t)),t}(t.apiClient,e);return l=vt("{models_url}",c._url),u=c._query,delete c.config,delete c._url,delete c._query,a=t.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:null===(s=e.config)||void 0===s?void 0:s.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(d=>d.json()),a.then(d=>{const f=function TSe(n,e){const t={},r=p(e,["nextPageToken"]);null!=r&&_(t,["nextPageToken"],r);const i=p(e,["_self"]);if(null!=i){let s=x9(0,i);Array.isArray(s)&&(s=s.map(o=>uk(0,o))),_(t,["models"],s)}return t}(0,d),y=new c9;return Object.assign(y,f),y})}})()}update(e){var t=this;return(0,b.A)(function*(){var r,i,s,o;let a,l="",u={};if(t.apiClient.isVertexAI()){const c=function nSe(n,e){const t={},r=p(e,["model"]);null!=r&&_(t,["_url","model"],dr(n,r));const i=p(e,["config"]);return null!=i&&_(t,["config"],function tSe(n,e,t){const i=p(e,["displayName"]);void 0!==t&&null!=i&&_(t,["displayName"],i);const s=p(e,["description"]);void 0!==t&&null!=s&&_(t,["description"],s);const o=p(e,["defaultCheckpointId"]);return void 0!==t&&null!=o&&_(t,["defaultCheckpointId"],o),{}}(0,i,t)),t}(t.apiClient,e);return l=vt("{model}",c._url),u=c._query,delete c.config,delete c._url,delete c._query,a=t.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>dk(0,d))}{const c=function uAe(n,e){const t={},r=p(e,["model"]);null!=r&&_(t,["_url","name"],dr(n,r));const i=p(e,["config"]);return null!=i&&_(t,["config"],function lAe(n,e,t){const i=p(e,["displayName"]);void 0!==t&&null!=i&&_(t,["displayName"],i);const s=p(e,["description"]);void 0!==t&&null!=s&&_(t,["description"],s);const o=p(e,["defaultCheckpointId"]);return void 0!==t&&null!=o&&_(t,["defaultCheckpointId"],o),{}}(0,i,t)),t}(t.apiClient,e);return l=vt("{name}",c._url),u=c._query,delete c.config,delete c._url,delete c._query,a=t.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:null===(s=e.config)||void 0===s?void 0:s.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(d=>d.json()),a.then(d=>uk(0,d))}})()}delete(e){var t=this;return(0,b.A)(function*(){var r,i,s,o;let a,l="",u={};if(t.apiClient.isVertexAI()){const c=function rSe(n,e){const t={},r=p(e,["model"]);null!=r&&_(t,["_url","name"],dr(n,r));const i=p(e,["config"]);return null!=i&&_(t,["config"],i),t}(t.apiClient,e);return l=vt("{name}",c._url),u=c._query,delete c.config,delete c._url,delete c._query,a=t.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then(d=>d.json()),a.then(()=>{const f=new d9;return Object.assign(f,{}),f})}{const c=function cAe(n,e){const t={},r=p(e,["model"]);null!=r&&_(t,["_url","name"],dr(n,r));const i=p(e,["config"]);return null!=i&&_(t,["config"],i),t}(t.apiClient,e);return l=vt("{name}",c._url),u=c._query,delete c.config,delete c._url,delete c._query,a=t.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:null===(s=e.config)||void 0===s?void 0:s.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(d=>d.json()),a.then(()=>{const f=new d9;return Object.assign(f,{}),f})}})()}countTokens(e){var t=this;return(0,b.A)(function*(){var r,i,s,o;let a,l="",u={};if(t.apiClient.isVertexAI()){const c=function sSe(n,e){const t={},r=p(e,["model"]);null!=r&&_(t,["_url","model"],dr(n,r));const i=p(e,["contents"]);if(null!=i){let o=La(0,i);Array.isArray(o)&&(o=o.map(a=>kg(0,a))),_(t,["contents"],o)}const s=p(e,["config"]);return null!=s&&_(t,["config"],function iSe(n,e,t){const i=p(e,["systemInstruction"]);void 0!==t&&null!=i&&_(t,["systemInstruction"],kg(0,ao(0,i)));const s=p(e,["tools"]);if(void 0!==t&&null!=s){let a=s;Array.isArray(a)&&(a=a.map(l=>q9(0,l))),_(t,["tools"],a)}const o=p(e,["generationConfig"]);return void 0!==t&&null!=o&&_(t,["generationConfig"],o),{}}(0,s,t)),t}(t.apiClient,e);return l=vt("{model}:countTokens",c._url),u=c._query,delete c.config,delete c._url,delete c._query,a=t.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>{const f=function QSe(n,e){const t={},r=p(e,["totalTokens"]);return null!=r&&_(t,["totalTokens"],r),t}(0,d),y=new h9;return Object.assign(y,f),y})}{const c=function hAe(n,e){const t={},r=p(e,["model"]);null!=r&&_(t,["_url","model"],dr(n,r));const i=p(e,["contents"]);if(null!=i){let o=La(0,i);Array.isArray(o)&&(o=o.map(a=>t0(0,a))),_(t,["contents"],o)}const s=p(e,["config"]);return null!=s&&_(t,["config"],function dAe(n,e){if(void 0!==p(e,["systemInstruction"]))throw new Error("systemInstruction parameter is not supported in Gemini API.");if(void 0!==p(e,["tools"]))throw new Error("tools parameter is not supported in Gemini API.");if(void 0!==p(e,["generationConfig"]))throw new Error("generationConfig parameter is not supported in Gemini API.");return{}}(0,s)),t}(t.apiClient,e);return l=vt("{model}:countTokens",c._url),u=c._query,delete c.config,delete c._url,delete c._query,a=t.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:null===(s=e.config)||void 0===s?void 0:s.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(d=>d.json()),a.then(d=>{const f=function ASe(n,e){const t={},r=p(e,["totalTokens"]);null!=r&&_(t,["totalTokens"],r);const i=p(e,["cachedContentTokenCount"]);return null!=i&&_(t,["cachedContentTokenCount"],i),t}(0,d),y=new h9;return Object.assign(y,f),y})}})()}computeTokens(e){var t=this;return(0,b.A)(function*(){var r,i;let s,o="",a={};if(t.apiClient.isVertexAI()){const l=function oSe(n,e){const t={},r=p(e,["model"]);null!=r&&_(t,["_url","model"],dr(n,r));const i=p(e,["contents"]);if(null!=i){let o=La(0,i);Array.isArray(o)&&(o=o.map(a=>kg(0,a))),_(t,["contents"],o)}const s=p(e,["config"]);return null!=s&&_(t,["config"],s),t}(t.apiClient,e);return o=vt("{model}:computeTokens",l._url),a=l._query,delete l.config,delete l._url,delete l._query,s=t.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then(u=>u.json()),s.then(u=>{const c=function JSe(n,e){const t={},r=p(e,["tokensInfo"]);return null!=r&&_(t,["tokensInfo"],r),t}(0,u),d=new pwe;return Object.assign(d,c),d})}throw new Error("This method is only supported by the Vertex AI.")})()}generateVideos(e){var t=this;return(0,b.A)(function*(){var r,i,s,o;let a,l="",u={};if(t.apiClient.isVertexAI()){const c=function lSe(n,e){const t={},r=p(e,["model"]);null!=r&&_(t,["_url","model"],dr(n,r));const i=p(e,["prompt"]);null!=i&&_(t,["instances[0]","prompt"],i);const s=p(e,["image"]);null!=s&&_(t,["instances[0]","image"],lk(0,s));const o=p(e,["config"]);return null!=o&&_(t,["config"],function aSe(n,e,t){const i=p(e,["numberOfVideos"]);void 0!==t&&null!=i&&_(t,["parameters","sampleCount"],i);const s=p(e,["outputGcsUri"]);void 0!==t&&null!=s&&_(t,["parameters","storageUri"],s);const o=p(e,["fps"]);void 0!==t&&null!=o&&_(t,["parameters","fps"],o);const a=p(e,["durationSeconds"]);void 0!==t&&null!=a&&_(t,["parameters","durationSeconds"],a);const l=p(e,["seed"]);void 0!==t&&null!=l&&_(t,["parameters","seed"],l);const u=p(e,["aspectRatio"]);void 0!==t&&null!=u&&_(t,["parameters","aspectRatio"],u);const c=p(e,["resolution"]);void 0!==t&&null!=c&&_(t,["parameters","resolution"],c);const d=p(e,["personGeneration"]);void 0!==t&&null!=d&&_(t,["parameters","personGeneration"],d);const f=p(e,["pubsubTopic"]);void 0!==t&&null!=f&&_(t,["parameters","pubsubTopic"],f);const y=p(e,["negativePrompt"]);void 0!==t&&null!=y&&_(t,["parameters","negativePrompt"],y);const E=p(e,["enhancePrompt"]);return void 0!==t&&null!=E&&_(t,["parameters","enhancePrompt"],E),{}}(0,o,t)),t}(t.apiClient,e);return l=vt("{model}:predictLongRunning",c._url),u=c._query,delete c.config,delete c._url,delete c._query,a=t.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>tDe(0,d))}{const c=function gAe(n,e){const t={},r=p(e,["model"]);null!=r&&_(t,["_url","model"],dr(n,r));const i=p(e,["prompt"]);null!=i&&_(t,["instances[0]","prompt"],i);const s=p(e,["image"]);null!=s&&_(t,["instances[0]","image"],function fAe(n,e){const t={};if(void 0!==p(e,["gcsUri"]))throw new Error("gcsUri parameter is not supported in Gemini API.");const r=p(e,["imageBytes"]);null!=r&&_(t,["bytesBase64Encoded"],Bc(0,r));const i=p(e,["mimeType"]);return null!=i&&_(t,["mimeType"],i),t}(0,s));const o=p(e,["config"]);return null!=o&&_(t,["config"],function pAe(n,e,t){const i=p(e,["numberOfVideos"]);if(void 0!==t&&null!=i&&_(t,["parameters","sampleCount"],i),void 0!==p(e,["outputGcsUri"]))throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(void 0!==p(e,["fps"]))throw new Error("fps parameter is not supported in Gemini API.");const s=p(e,["durationSeconds"]);if(void 0!==t&&null!=s&&_(t,["parameters","durationSeconds"],s),void 0!==p(e,["seed"]))throw new Error("seed parameter is not supported in Gemini API.");const o=p(e,["aspectRatio"]);if(void 0!==t&&null!=o&&_(t,["parameters","aspectRatio"],o),void 0!==p(e,["resolution"]))throw new Error("resolution parameter is not supported in Gemini API.");const a=p(e,["personGeneration"]);if(void 0!==t&&null!=a&&_(t,["parameters","personGeneration"],a),void 0!==p(e,["pubsubTopic"]))throw new Error("pubsubTopic parameter is not supported in Gemini API.");const l=p(e,["negativePrompt"]);if(void 0!==t&&null!=l&&_(t,["parameters","negativePrompt"],l),void 0!==p(e,["enhancePrompt"]))throw new Error("enhancePrompt parameter is not supported in Gemini API.");return{}}(0,o,t)),t}(t.apiClient,e);return l=vt("{model}:predictLongRunning",c._url),u=c._query,delete c.config,delete c._url,delete c._query,a=t.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:null===(s=e.config)||void 0===s?void 0:s.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(d=>d.json()),a.then(d=>RSe(0,d))}})()}}function MDe(n,e){const t={},r=p(e,["name"]);null!=r&&_(t,["name"],r);const i=p(e,["metadata"]);null!=i&&_(t,["metadata"],i);const s=p(e,["done"]);null!=s&&_(t,["done"],s);const o=p(e,["error"]);null!=o&&_(t,["error"],o);const a=p(e,["response","generateVideoResponse"]);return null!=a&&_(t,["response"],function PDe(n,e){const t={},r=p(e,["generatedSamples"]);if(null!=r){let o=r;Array.isArray(o)&&(o=o.map(a=>function RDe(n,e){const t={},r=p(e,["_self"]);return null!=r&&_(t,["video"],function xDe(n,e){const t={},r=p(e,["video","uri"]);null!=r&&_(t,["uri"],r);const i=p(e,["video","encodedVideo"]);null!=i&&_(t,["videoBytes"],Bc(0,i));const s=p(e,["encoding"]);return null!=s&&_(t,["mimeType"],s),t}(0,r)),t}(0,a))),_(t,["generatedVideos"],o)}const i=p(e,["raiMediaFilteredCount"]);null!=i&&_(t,["raiMediaFilteredCount"],i);const s=p(e,["raiMediaFilteredReasons"]);return null!=s&&_(t,["raiMediaFilteredReasons"],s),t}(0,a)),t}function a6(n,e){const t={},r=p(e,["name"]);null!=r&&_(t,["name"],r);const i=p(e,["metadata"]);null!=i&&_(t,["metadata"],i);const s=p(e,["done"]);null!=s&&_(t,["done"],s);const o=p(e,["error"]);null!=o&&_(t,["error"],o);const a=p(e,["response"]);return null!=a&&_(t,["response"],function ODe(n,e){const t={},r=p(e,["videos"]);if(null!=r){let o=r;Array.isArray(o)&&(o=o.map(a=>function kDe(n,e){const t={},r=p(e,["_self"]);return null!=r&&_(t,["video"],function NDe(n,e){const t={},r=p(e,["gcsUri"]);null!=r&&_(t,["uri"],r);const i=p(e,["bytesBase64Encoded"]);null!=i&&_(t,["videoBytes"],Bc(0,i));const s=p(e,["mimeType"]);return null!=s&&_(t,["mimeType"],s),t}(0,r)),t}(0,a))),_(t,["generatedVideos"],o)}const i=p(e,["raiMediaFilteredCount"]);null!=i&&_(t,["raiMediaFilteredCount"],i);const s=p(e,["raiMediaFilteredReasons"]);return null!=s&&_(t,["raiMediaFilteredReasons"],s),t}(0,a)),t}class FDe extends Jv{constructor(e){super(),this.apiClient=e}getVideosOperation(e){var t=this;return(0,b.A)(function*(){const r=e.operation,i=e.config;if(void 0===r.name||""===r.name)throw new Error("Operation name is required.");if(t.apiClient.isVertexAI()){const s=r.name.split("/operations/")[0];let o;return i&&"httpOptions"in i&&(o=i.httpOptions),t.fetchPredictVideosOperationInternal({operationName:r.name,resourceName:s,config:{httpOptions:o}})}return t.getVideosOperationInternal({operationName:r.name,config:i})})()}getVideosOperationInternal(e){var t=this;return(0,b.A)(function*(){var r,i,s,o;let a,l="",u={};if(t.apiClient.isVertexAI()){const c=function SDe(n,e){const t={},r=p(e,["operationName"]);null!=r&&_(t,["_url","operationName"],r);const i=p(e,["config"]);return null!=i&&_(t,["config"],i),t}(0,e);return l=vt("{operationName}",c._url),u=c._query,delete c.config,delete c._url,delete c._query,a=t.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>a6(0,d))}{const c=function ADe(n,e){const t={},r=p(e,["operationName"]);null!=r&&_(t,["_url","operationName"],r);const i=p(e,["config"]);return null!=i&&_(t,["config"],i),t}(0,e);return l=vt("{operationName}",c._url),u=c._query,delete c.config,delete c._url,delete c._query,a=t.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:null===(s=e.config)||void 0===s?void 0:s.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(d=>d.json()),a.then(d=>MDe(0,d))}})()}fetchPredictVideosOperationInternal(e){var t=this;return(0,b.A)(function*(){var r,i;let s,o="",a={};if(t.apiClient.isVertexAI()){const l=function DDe(n,e){const t={},r=p(e,["operationName"]);null!=r&&_(t,["operationName"],r);const i=p(e,["resourceName"]);null!=i&&_(t,["_url","resourceName"],i);const s=p(e,["config"]);return null!=s&&_(t,["config"],s),t}(0,e);return o=vt("{resourceName}:fetchPredictOperation",l._url),a=l._query,delete l.config,delete l._url,delete l._query,s=t.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then(u=>u.json()),s.then(u=>a6(0,u))}throw new Error("This method is only supported by the Vertex AI.")})()}}function zDe(n,e){const t={},r=p(e,["baseModel"]);null!=r&&_(t,["baseModel"],r);const i=p(e,["trainingDataset"]);null!=i&&_(t,["tuningTask","trainingData"],function $De(n,e){const t={};if(void 0!==p(e,["gcsUri"]))throw new Error("gcsUri parameter is not supported in Gemini API.");const r=p(e,["examples"]);if(null!=r){let i=r;Array.isArray(i)&&(i=i.map(s=>function BDe(n,e){const t={},r=p(e,["textInput"]);null!=r&&_(t,["textInput"],r);const i=p(e,["output"]);return null!=i&&_(t,["output"],i),t}(0,s))),_(t,["examples","examples"],i)}return t}(0,i));const s=p(e,["config"]);return null!=s&&_(t,["config"],function HDe(n,e,t){const r={};if(void 0!==p(e,["validationDataset"]))throw new Error("validationDataset parameter is not supported in Gemini API.");const i=p(e,["tunedModelDisplayName"]);if(void 0!==t&&null!=i&&_(t,["displayName"],i),void 0!==p(e,["description"]))throw new Error("description parameter is not supported in Gemini API.");const s=p(e,["epochCount"]);void 0!==t&&null!=s&&_(t,["tuningTask","hyperparameters","epochCount"],s);const o=p(e,["learningRateMultiplier"]);if(null!=o&&_(r,["tuningTask","hyperparameters","learningRateMultiplier"],o),void 0!==p(e,["exportLastCheckpointOnly"]))throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(void 0!==p(e,["adapterSize"]))throw new Error("adapterSize parameter is not supported in Gemini API.");const a=p(e,["batchSize"]);void 0!==t&&null!=a&&_(t,["tuningTask","hyperparameters","batchSize"],a);const l=p(e,["learningRate"]);return void 0!==t&&null!=l&&_(t,["tuningTask","hyperparameters","learningRate"],l),r}(0,s,t)),t}function QDe(n,e){const t={},r=p(e,["baseModel"]);null!=r&&_(t,["baseModel"],r);const i=p(e,["trainingDataset"]);null!=i&&_(t,["supervisedTuningSpec","trainingDatasetUri"],function jDe(n,e,t){const i=p(e,["gcsUri"]);if(void 0!==t&&null!=i&&_(t,["supervisedTuningSpec","trainingDatasetUri"],i),void 0!==p(e,["examples"]))throw new Error("examples parameter is not supported in Vertex AI.");return{}}(0,i,t));const s=p(e,["config"]);return null!=s&&_(t,["config"],function YDe(n,e,t){const i=p(e,["validationDataset"]);void 0!==t&&null!=i&&_(t,["supervisedTuningSpec"],function KDe(n,e){const t={},r=p(e,["gcsUri"]);return null!=r&&_(t,["validationDatasetUri"],r),t}(0,i));const s=p(e,["tunedModelDisplayName"]);void 0!==t&&null!=s&&_(t,["tunedModelDisplayName"],s);const o=p(e,["description"]);void 0!==t&&null!=o&&_(t,["description"],o);const a=p(e,["epochCount"]);void 0!==t&&null!=a&&_(t,["supervisedTuningSpec","hyperParameters","epochCount"],a);const l=p(e,["learningRateMultiplier"]);void 0!==t&&null!=l&&_(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],l);const u=p(e,["exportLastCheckpointOnly"]);void 0!==t&&null!=u&&_(t,["supervisedTuningSpec","exportLastCheckpointOnly"],u);const c=p(e,["adapterSize"]);if(void 0!==t&&null!=c&&_(t,["supervisedTuningSpec","hyperParameters","adapterSize"],c),void 0!==p(e,["batchSize"]))throw new Error("batchSize parameter is not supported in Vertex AI.");if(void 0!==p(e,["learningRate"]))throw new Error("learningRate parameter is not supported in Vertex AI.");return{}}(0,s,t)),t}function l6(n,e){const t={},r=p(e,["name"]);null!=r&&_(t,["name"],r);const i=p(e,["state"]);null!=i&&_(t,["state"],A9(0,i));const s=p(e,["createTime"]);null!=s&&_(t,["createTime"],s);const o=p(e,["tuningTask","startTime"]);null!=o&&_(t,["startTime"],o);const a=p(e,["tuningTask","completeTime"]);null!=a&&_(t,["endTime"],a);const l=p(e,["updateTime"]);null!=l&&_(t,["updateTime"],l);const u=p(e,["description"]);null!=u&&_(t,["description"],u);const c=p(e,["baseModel"]);null!=c&&_(t,["baseModel"],c);const d=p(e,["_self"]);null!=d&&_(t,["tunedModel"],function JDe(n,e){const t={},r=p(e,["name"]);null!=r&&_(t,["model"],r);const i=p(e,["name"]);return null!=i&&_(t,["endpoint"],i),t}(0,d));const f=p(e,["distillationSpec"]);null!=f&&_(t,["distillationSpec"],f);const y=p(e,["experiment"]);null!=y&&_(t,["experiment"],y);const E=p(e,["labels"]);null!=E&&_(t,["labels"],E);const I=p(e,["pipelineJob"]);null!=I&&_(t,["pipelineJob"],I);const T=p(e,["tunedModelDisplayName"]);return null!=T&&_(t,["tunedModelDisplayName"],T),t}function yk(n,e){const t={},r=p(e,["name"]);null!=r&&_(t,["name"],r);const i=p(e,["state"]);null!=i&&_(t,["state"],A9(0,i));const s=p(e,["createTime"]);null!=s&&_(t,["createTime"],s);const o=p(e,["startTime"]);null!=o&&_(t,["startTime"],o);const a=p(e,["endTime"]);null!=a&&_(t,["endTime"],a);const l=p(e,["updateTime"]);null!=l&&_(t,["updateTime"],l);const u=p(e,["error"]);null!=u&&_(t,["error"],u);const c=p(e,["description"]);null!=c&&_(t,["description"],c);const d=p(e,["baseModel"]);null!=d&&_(t,["baseModel"],d);const f=p(e,["tunedModel"]);null!=f&&_(t,["tunedModel"],function txe(n,e){const t={},r=p(e,["model"]);null!=r&&_(t,["model"],r);const i=p(e,["endpoint"]);null!=i&&_(t,["endpoint"],i);const s=p(e,["checkpoints"]);if(null!=s){let o=s;Array.isArray(o)&&(o=o.map(a=>function exe(n,e){const t={},r=p(e,["checkpointId"]);null!=r&&_(t,["checkpointId"],r);const i=p(e,["epoch"]);null!=i&&_(t,["epoch"],i);const s=p(e,["step"]);null!=s&&_(t,["step"],s);const o=p(e,["endpoint"]);return null!=o&&_(t,["endpoint"],o),t}(0,a))),_(t,["checkpoints"],o)}return t}(0,f));const y=p(e,["supervisedTuningSpec"]);null!=y&&_(t,["supervisedTuningSpec"],y);const E=p(e,["tuningDataStats"]);null!=E&&_(t,["tuningDataStats"],E);const I=p(e,["encryptionSpec"]);null!=I&&_(t,["encryptionSpec"],I);const T=p(e,["partnerModelTuningSpec"]);null!=T&&_(t,["partnerModelTuningSpec"],T);const P=p(e,["distillationSpec"]);null!=P&&_(t,["distillationSpec"],P);const x=p(e,["experiment"]);null!=x&&_(t,["experiment"],x);const V=p(e,["labels"]);null!=V&&_(t,["labels"],V);const W=p(e,["pipelineJob"]);null!=W&&_(t,["pipelineJob"],W);const K=p(e,["tunedModelDisplayName"]);return null!=K&&_(t,["tunedModelDisplayName"],K),t}class rxe extends Jv{constructor(e){var t;super(),t=this,this.apiClient=e,this.get=function(){var r=(0,b.A)(function*(i){return yield t.getInternal(i)});return function(i){return r.apply(this,arguments)}}(),this.list=(0,b.A)(function*(r={}){return new Xb(eE.PAGED_ITEM_TUNING_JOBS,i=>t.listInternal(i),yield t.listInternal(r),r)}),this.tune=function(){var r=(0,b.A)(function*(i){if(t.apiClient.isVertexAI())return yield t.tuneInternal(i);{const s=yield t.tuneMldevInternal(i);let o="";return void 0!==s.metadata&&void 0!==s.metadata.tunedModel?o=s.metadata.tunedModel:void 0!==s.name&&s.name.includes("/operations/")&&(o=s.name.split("/operations/")[0]),{name:o,state:i9.JOB_STATE_QUEUED}}});return function(i){return r.apply(this,arguments)}}()}getInternal(e){var t=this;return(0,b.A)(function*(){var r,i,s,o;let a,l="",u={};if(t.apiClient.isVertexAI()){const c=function WDe(n,e){const t={},r=p(e,["name"]);null!=r&&_(t,["_url","name"],r);const i=p(e,["config"]);return null!=i&&_(t,["config"],i),t}(0,e);return l=vt("{name}",c._url),u=c._query,delete c.config,delete c._url,delete c._query,a=t.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>yk(0,d))}{const c=function LDe(n,e){const t={},r=p(e,["name"]);null!=r&&_(t,["_url","name"],r);const i=p(e,["config"]);return null!=i&&_(t,["config"],i),t}(0,e);return l=vt("{name}",c._url),u=c._query,delete c.config,delete c._url,delete c._query,a=t.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:null===(s=e.config)||void 0===s?void 0:s.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(d=>d.json()),a.then(d=>l6(0,d))}})()}listInternal(e){var t=this;return(0,b.A)(function*(){var r,i,s,o;let a,l="",u={};if(t.apiClient.isVertexAI()){const c=function qDe(n,e){const t={},r=p(e,["config"]);return null!=r&&_(t,["config"],function GDe(n,e,t){const i=p(e,["pageSize"]);void 0!==t&&null!=i&&_(t,["_query","pageSize"],i);const s=p(e,["pageToken"]);void 0!==t&&null!=s&&_(t,["_query","pageToken"],s);const o=p(e,["filter"]);return void 0!==t&&null!=o&&_(t,["_query","filter"],o),{}}(0,r,t)),t}(0,e);return l=vt("tuningJobs",c._url),u=c._query,delete c.config,delete c._url,delete c._query,a=t.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>{const f=function nxe(n,e){const t={},r=p(e,["nextPageToken"]);null!=r&&_(t,["nextPageToken"],r);const i=p(e,["tuningJobs"]);if(null!=i){let s=i;Array.isArray(s)&&(s=s.map(o=>yk(0,o))),_(t,["tuningJobs"],s)}return t}(0,d),y=new f9;return Object.assign(y,f),y})}{const c=function UDe(n,e){const t={},r=p(e,["config"]);return null!=r&&_(t,["config"],function VDe(n,e,t){const i=p(e,["pageSize"]);void 0!==t&&null!=i&&_(t,["_query","pageSize"],i);const s=p(e,["pageToken"]);void 0!==t&&null!=s&&_(t,["_query","pageToken"],s);const o=p(e,["filter"]);return void 0!==t&&null!=o&&_(t,["_query","filter"],o),{}}(0,r,t)),t}(0,e);return l=vt("tunedModels",c._url),u=c._query,delete c.config,delete c._url,delete c._query,a=t.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:null===(s=e.config)||void 0===s?void 0:s.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(d=>d.json()),a.then(d=>{const f=function XDe(n,e){const t={},r=p(e,["nextPageToken"]);null!=r&&_(t,["nextPageToken"],r);const i=p(e,["tunedModels"]);if(null!=i){let s=i;Array.isArray(s)&&(s=s.map(o=>l6(0,o))),_(t,["tuningJobs"],s)}return t}(0,d),y=new f9;return Object.assign(y,f),y})}})()}tuneInternal(e){var t=this;return(0,b.A)(function*(){var r,i;let s,o="",a={};if(t.apiClient.isVertexAI()){const l=QDe(0,e);return o=vt("tuningJobs",l._url),a=l._query,delete l.config,delete l._url,delete l._query,s=t.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then(u=>u.json()),s.then(u=>yk(0,u))}throw new Error("This method is only supported by the Vertex AI.")})()}tuneMldevInternal(e){var t=this;return(0,b.A)(function*(){var r,i;let s,o="",a={};if(t.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=zDe(0,e);return o=vt("tunedModels",l._url),a=l._query,delete l.config,delete l._url,delete l._query,s=t.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then(u=>u.json()),s.then(u=>function ZDe(n,e){const t={},r=p(e,["name"]);null!=r&&_(t,["name"],r);const i=p(e,["metadata"]);null!=i&&_(t,["metadata"],i);const s=p(e,["done"]);null!=s&&_(t,["done"],s);const o=p(e,["error"]);return null!=o&&_(t,["error"],o),t}(0,u))}})()}}class ixe{download(e,t){return(0,b.A)(function*(){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")})()}}const vk="x-goog-upload-status";function Ek(){return Ek=(0,b.A)(function*(n,e,t){var r,i,s;let o=0,a=0,l=new ik(new Response),u="upload";for(o=n.size;a<o;){const d=Math.min(8388608,o-a),f=n.slice(a,a+d);a+d>=o&&(u+=", finalize");let y=0,E=1e3;for(;y<3&&(l=yield t.request({path:"",body:f,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":u,"X-Goog-Upload-Offset":String(a),"Content-Length":String(d)}}}),null===(r=l?.headers)||void 0===r||!r[vk]);)y++,yield dxe(E),E*=2;if(a+=d,"active"!==(null===(i=l?.headers)||void 0===i?void 0:i[vk]))break;if(o<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const c=yield l?.json();if("final"!==(null===(s=l?.headers)||void 0===s?void 0:s[vk]))throw new Error("Failed to upload file: Upload status is not finalized.");return c.file}),Ek.apply(this,arguments)}function Ck(){return Ck=(0,b.A)(function*(n){return{size:n.size,type:n.type}}),Ck.apply(this,arguments)}function dxe(n){return new Promise(e=>setTimeout(e,n))}class hxe{upload(e,t,r){return(0,b.A)(function*(){if("string"==typeof e)throw new Error("File path is not supported in browser uploader.");return yield function uxe(n,e,t){return Ek.apply(this,arguments)}(e,t,r)})()}stat(e){return(0,b.A)(function*(){if("string"==typeof e)throw new Error("File path is not supported in browser uploader.");return yield function cxe(n){return Ck.apply(this,arguments)}(e)})()}}class fxe{create(e,t,r){return new pxe(e,t,r)}}class pxe{constructor(e,t,r){this.url=e,this.headers=t,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(void 0===this.ws)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(void 0===this.ws)throw new Error("WebSocket is not connected");this.ws.close()}}const u6="x-goog-api-key";class gxe{constructor(e){this.apiKey=e}addAuthHeaders(e){var t=this;return(0,b.A)(function*(){null===e.get(u6)&&e.append(u6,t.apiKey)})()}}class c6{constructor(e){var t;if(null==e.apiKey)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=null!==(t=e.vertexai)&&void 0!==t&&t,this.apiKey=e.apiKey;const r=function xIe(n,e,t){var r,i,s;if(null===(r=n.httpOptions)||void 0===r||!r.baseUrl){const o={geminiUrl:void 0,vertexUrl:void 0};return n.vertexai?null!==(i=o.vertexUrl)&&void 0!==i?i:e:null!==(s=o.geminiUrl)&&void 0!==s?s:t}return n.httpOptions.baseUrl}(e,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion;const i=new gxe(this.apiKey);this.apiClient=new lDe({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:"gl-node/web",uploader:new hxe,downloader:new ixe}),this.models=new bDe(this.apiClient),this.live=new EDe(this.apiClient,i,new fxe),this.chats=new OTe(this.models,this.apiClient),this.caches=new MTe(this.apiClient),this.files=new KTe(this.apiClient),this.operations=new FDe(this.apiClient),this.tunings=new rxe(this.apiClient)}}const Ik="RFC3986",wk={RFC1738:n=>String(n).replace(/%20/g,"+"),RFC3986:n=>String(n)},Rh=Array.isArray,wl=(()=>{const n=[];for(let e=0;e<256;++e)n.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return n})();function h6(n,e){if(Rh(n)){const t=[];for(let r=0;r<n.length;r+=1)t.push(e(n[r]));return t}return e(n)}const Ixe=Object.prototype.hasOwnProperty,f6={brackets:n=>String(n)+"[]",comma:"comma",indices:(n,e)=>String(n)+"["+e+"]",repeat:n=>String(n)},Tl=Array.isArray,wxe=Array.prototype.push,p6=function(n,e){wxe.apply(n,Tl(e)?e:[e])},Txe=Date.prototype.toISOString,Ii={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:(n,e,t,r,i)=>{if(0===n.length)return n;let s=n;if("symbol"==typeof n?s=Symbol.prototype.toString.call(n):"string"!=typeof n&&(s=String(n)),"iso-8859-1"===t)return escape(s).replace(/%u[0-9a-f]{4}/gi,function(a){return"%26%23"+parseInt(a.slice(2),16)+"%3B"});let o="";for(let a=0;a<s.length;a+=1024){const l=s.length>=1024?s.slice(a,a+1024):s,u=[];for(let c=0;c<l.length;++c){let d=l.charCodeAt(c);45===d||46===d||95===d||126===d||d>=48&&d<=57||d>=65&&d<=90||d>=97&&d<=122||"RFC1738"===i&&(40===d||41===d)?u[u.length]=l.charAt(c):d<128?u[u.length]=wl[d]:d<2048?u[u.length]=wl[192|d>>6]+wl[128|63&d]:d<55296||d>=57344?u[u.length]=wl[224|d>>12]+wl[128|d>>6&63]+wl[128|63&d]:(c+=1,d=65536+((1023&d)<<10|1023&l.charCodeAt(c)),u[u.length]=wl[240|d>>18]+wl[128|d>>12&63]+wl[128|d>>6&63]+wl[128|63&d])}o+=u.join("")}return o},encodeValuesOnly:!1,format:Ik,formatter:wk[Ik],indices:!1,serializeDate:n=>Txe.call(n),skipNulls:!1,strictNullHandling:!1},Ak={};function g6(n,e,t,r,i,s,o,a,l,u,c,d,f,y,E,I,T,P){let x=n,V=P,W=0,K=!1;for(;void 0!==(V=V.get(Ak))&&!K;){const B=V.get(n);if(W+=1,typeof B<"u"){if(B===W)throw new RangeError("Cyclic object value");K=!0}typeof V.get(Ak)>"u"&&(W=0)}if("function"==typeof u?x=u(e,x):x instanceof Date?x=f?.(x):"comma"===t&&Tl(x)&&(x=h6(x,function(B){return B instanceof Date?f?.(B):B})),null===x){if(s)return l&&!I?l(e,Ii.encoder,T,"key",y):e;x=""}if(function bxe(n){return"string"==typeof n||"number"==typeof n||"boolean"==typeof n||"symbol"==typeof n||"bigint"==typeof n}(x)||function Cxe(n){return!(!n||"object"!=typeof n||!(n.constructor&&n.constructor.isBuffer&&n.constructor.isBuffer(n)))}(x)){if(l){const B=I?e:l(e,Ii.encoder,T,"key",y);return[E?.(B)+"="+E?.(l(x,Ii.encoder,T,"value",y))]}return[E?.(e)+"="+E?.(String(x))]}const Y=[];if(typeof x>"u")return Y;let U;if("comma"===t&&Tl(x))I&&l&&(x=h6(x,l)),U=[{value:x.length>0?x.join(",")||null:void 0}];else if(Tl(u))U=u;else{const B=Object.keys(x);U=c?B.sort(c):B}const N=a?String(e).replace(/\./g,"%2E"):String(e),F=r&&Tl(x)&&1===x.length?N+"[]":N;if(i&&Tl(x)&&0===x.length)return F+"[]";for(let B=0;B<U.length;++B){const H=U[B],J="object"==typeof H&&typeof H.value<"u"?H.value:x[H];if(o&&null===J)continue;const q=d&&a?H.replace(/\./g,"%2E"):H,nn=Tl(x)?"function"==typeof t?t(F,q):F:F+(d?"."+q:"["+q+"]");P.set(n,W);const Nt=new WeakMap;Nt.set(Ak,P),p6(Y,g6(J,nn,t,r,i,s,o,a,"comma"===t&&I&&Tl(x)?null:l,u,c,d,f,y,E,I,T,Nt))}return Y}function Us(n){var e,t,r,i=2;for(typeof Symbol<"u"&&(t=Symbol.asyncIterator,r=Symbol.iterator);i--;){if(t&&null!=(e=n[t]))return e.call(n);if(r&&null!=(e=n[r]))return new s0(e.call(n));t="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function s0(n){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var r=t.done;return Promise.resolve(t.value).then(function(i){return{value:i,done:r}})}return(s0=function(r){this.s=r,this.n=r.next}).prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(r){var i=this.s.return;return void 0===i?Promise.resolve({value:r,done:!0}):e(i.apply(this.s,arguments))},throw:function(r){var i=this.s.return;return void 0===i?Promise.reject(r):e(i.apply(this.s,arguments))}},new s0(n)}function m6(n,e){this.v=n,this.k=e}function us(n){return new m6(n,0)}function nE(n){var e,t;function r(s,o){try{var a=n[s](o),l=a.value,u=l instanceof m6;Promise.resolve(u?l.v:l).then(function(c){if(u){var d="return"===s?"return":"next";if(!l.k||c.done)return r(d,c);c=n[d](c).value}i(a.done?"return":"normal",c)},function(c){r("throw",c)})}catch(c){i("throw",c)}}function i(s,o){switch(s){case"return":e.resolve({value:o,done:!0});break;case"throw":e.reject(o);break;default:e.resolve({value:o,done:!1})}(e=e.next)?r(e.key,e.arg):t=null}this._invoke=function(s,o){return new Promise(function(a,l){var u={key:s,arg:o,resolve:a,reject:l,next:null};t?t=t.next=u:(e=t=u,r(s,o))})},"function"!=typeof n.return&&(this.return=void 0)}function $c(n){return function(){return new nE(n.apply(this,arguments))}}nE.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},nE.prototype.next=function(n){return this._invoke("next",n)},nE.prototype.throw=function(n){return this._invoke("throw",n)},nE.prototype.return=function(n){return this._invoke("return",n)};const Og="4.103.0";let rE,y6,v6,Sk,E6,C6,I6,w6,T6,_6=!1,Dxe=null,xxe=null,Rxe=null,Pxe=null;class Nxe{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}const b6=()=>{rE||function Mxe(n,e={auto:!1}){if(_6)throw new Error(`you must \`import 'openai/shims/${n.kind}'\` before importing anything else from openai`);if(rE)throw new Error(`can't \`import 'openai/shims/${n.kind}'\` after \`import 'openai/shims/${rE}'\``);_6=e.auto,rE=n.kind,y6=n.fetch,Dxe=n.Request,xxe=n.Response,Rxe=n.Headers,v6=n.FormData,Pxe=n.Blob,Sk=n.File,E6=n.ReadableStream,C6=n.getMultipartRequestOptions,I6=n.getDefaultAgent,w6=n.fileFromPath,T6=n.isFsReadStream}(function kxe({manuallyImported:n}={}){const e=n?"You may need to use polyfills":"Add one of these imports before your first `import \u2026 from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let t,r,i,s;try{t=fetch,r=Request,i=Response,s=Headers}catch(o){throw new Error(`this environment is missing the following Web Fetch API type: ${o.message}. ${e}`)}return{kind:"web",fetch:t,Request:r,Response:i,Headers:s,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${e}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${e}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${e}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${e}`)}},getMultipartRequestOptions:(o=(0,b.A)(function*(a,l){return{...l,body:new Nxe(a)}}),function(l,u){return o.apply(this,arguments)}),getDefaultAgent:o=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:o=>!1};var o}(),{auto:!0})};b6();class et extends Error{}class qi extends et{constructor(e,t,r,i){super(`${qi.makeMessage(e,t,r)}`),this.status=e,this.headers=i,this.request_id=i?.["x-request-id"],this.error=t;const s=t;this.code=s?.code,this.param=s?.param,this.type=s?.type}static makeMessage(e,t,r){const i=t?.message?"string"==typeof t.message?t.message:JSON.stringify(t.message):t?JSON.stringify(t):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,t,r,i){if(!e||!i)return new o0({message:r,cause:Lk(t)});const s=t?.error;return 400===e?new A6(e,s,r,i):401===e?new S6(e,s,r,i):403===e?new D6(e,s,r,i):404===e?new x6(e,s,r,i):409===e?new R6(e,s,r,i):422===e?new P6(e,s,r,i):429===e?new M6(e,s,r,i):e>=500?new N6(e,s,r,i):new qi(e,s,r,i)}}class ra extends qi{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class o0 extends qi{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class Dk extends o0{constructor({message:e}={}){super({message:e??"Request timed out."})}}class A6 extends qi{}class S6 extends qi{}class D6 extends qi{}class x6 extends qi{}class R6 extends qi{}class P6 extends qi{}class M6 extends qi{}class N6 extends qi{}class k6 extends et{constructor(){super("Could not parse response content as the length limit was reached")}}class O6 extends et{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}var No,a0=function(n,e,t,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(n,t):i?i.value=t:e.set(n,t),t},Ph=function(n,e,t,r){if("a"===t&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===t?r:"a"===t?r.call(n):r?r.value:e.get(n)};class l0{constructor(){No.set(this,void 0),this.buffer=new Uint8Array,a0(this,No,null,"f")}decode(e){if(null==e)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):"string"==typeof e?(new TextEncoder).encode(e):e;let r=new Uint8Array(this.buffer.length+t.length);r.set(this.buffer),r.set(t,this.buffer.length),this.buffer=r;const i=[];let s;for(;null!=(s=Oxe(this.buffer,Ph(this,No,"f")));){if(s.carriage&&null==Ph(this,No,"f")){a0(this,No,s.index,"f");continue}if(null!=Ph(this,No,"f")&&(s.index!==Ph(this,No,"f")+1||s.carriage)){i.push(this.decodeText(this.buffer.slice(0,Ph(this,No,"f")-1))),this.buffer=this.buffer.slice(Ph(this,No,"f")),a0(this,No,null,"f");continue}const o=null!==Ph(this,No,"f")?s.preceding-1:s.preceding,a=this.decodeText(this.buffer.slice(0,o));i.push(a),this.buffer=this.buffer.slice(s.index),a0(this,No,null,"f")}return i}decodeText(e){if(null==e)return"";if("string"==typeof e)return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new et(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new et(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new et("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){return this.buffer.length?this.decode("\n"):[]}}function Oxe(n,e){for(let i=e??0;i<n.length;i++){if(10===n[i])return{preceding:i,index:i+1,carriage:!1};if(13===n[i])return{preceding:i,index:i+1,carriage:!0}}return null}function Fxe(n){for(let r=0;r<n.length-1;r++){if(10===n[r]&&10===n[r+1]||13===n[r]&&13===n[r+1])return r+2;if(13===n[r]&&10===n[r+1]&&r+3<n.length&&13===n[r+2]&&10===n[r+3])return r+4}return-1}function F6(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{next:()=>(0,b.A)(function*(){try{const t=yield e.read();return t?.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}})(),return:()=>(0,b.A)(function*(){const t=e.cancel();return e.releaseLock(),yield t,{done:!0,value:void 0}})(),[Symbol.asyncIterator](){return this}}}No=new WeakMap,l0.NEWLINE_CHARS=new Set(["\n","\r"]),l0.NEWLINE_REGEXP=/\r\n|[\n\r]/g;class bl{constructor(e,t){this.iterator=e,this.controller=t}static fromSSEResponse(e,t){let r=!1;function s(){return s=$c(function*(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let o=!1;try{var u,a=!1,l=!1;try{for(var d,c=Us(function Lxe(n,e){return xk.apply(this,arguments)}(e,t));a=!(d=yield us(c.next())).done;a=!1){const f=d.value;if(!o)if(f.data.startsWith("[DONE]"))o=!0;else if(null===f.event||f.event.startsWith("response.")||f.event.startsWith("transcript.")){let y;try{y=JSON.parse(f.data)}catch(E){throw console.error("Could not parse message into JSON:",f.data),console.error("From chunk:",f.raw),E}if(y&&y.error)throw new qi(void 0,y.error,void 0,q6(e.headers));yield y}else{let y;try{y=JSON.parse(f.data)}catch(E){throw console.error("Could not parse message into JSON:",f.data),console.error("From chunk:",f.raw),E}if("error"==f.event)throw new qi(void 0,y.error,y.message,void 0);yield{event:f.event,data:y}}}}catch(f){l=!0,u=f}finally{try{a&&null!=c.return&&(yield us(c.return()))}finally{if(l)throw u}}o=!0}catch(f){if(f instanceof Error&&"AbortError"===f.name)return;throw f}finally{o||t.abort()}}),s.apply(this,arguments)}return new bl(function i(){return s.apply(this,arguments)},t)}static fromReadableStream(e,t){let r=!1;function s(){return(s=$c(function*(){const l=new l0,u=F6(e);var f,c=!1,d=!1;try{for(var E,y=Us(u);c=!(E=yield us(y.next())).done;c=!1){const I=E.value;for(const T of l.decode(I))yield T}}catch(I){d=!0,f=I}finally{try{c&&null!=y.return&&(yield us(y.return()))}finally{if(d)throw f}}for(const I of l.flush())yield I})).apply(this,arguments)}function a(){return a=$c(function*(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let l=!1;try{var d,u=!1,c=!1;try{for(var y,f=Us(function i(){return s.apply(this,arguments)}());u=!(y=yield us(f.next())).done;u=!1){const E=y.value;l||E&&(yield JSON.parse(E))}}catch(E){c=!0,d=E}finally{try{u&&null!=f.return&&(yield us(f.return()))}finally{if(c)throw d}}l=!0}catch(E){if(E instanceof Error&&"AbortError"===E.name)return;throw E}finally{l||t.abort()}}),a.apply(this,arguments)}return new bl(function o(){return a.apply(this,arguments)},t)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],r=this.iterator(),i=s=>({next:()=>{if(0===s.length){const o=r.next();e.push(o),t.push(o)}return s.shift()}});return[new bl(()=>i(e),this.controller),new bl(()=>i(t),this.controller)]}toReadableStream(){const e=this;let t;const r=new TextEncoder;return new E6({start:()=>(0,b.A)(function*(){t=e[Symbol.asyncIterator]()})(),pull:i=>(0,b.A)(function*(){try{const{value:s,done:o}=yield t.next();if(o)return i.close();const a=r.encode(JSON.stringify(s)+"\n");i.enqueue(a)}catch(s){i.error(s)}})(),cancel:()=>(0,b.A)(function*(){yield t.return?.()})()})}}function xk(){return xk=$c(function*(n,e){if(!n.body)throw e.abort(),new et("Attempted to iterate over a response with no body");const t=new Uxe,r=new l0,i=F6(n.body);var a,s=!1,o=!1;try{for(var u,l=Us(function Vxe(n){return Rk.apply(this,arguments)}(i));s=!(u=yield us(l.next())).done;s=!1){const c=u.value;for(const d of r.decode(c)){const f=t.decode(d);f&&(yield f)}}}catch(c){o=!0,a=c}finally{try{s&&null!=l.return&&(yield us(l.return()))}finally{if(o)throw a}}for(const c of r.flush()){const d=t.decode(c);d&&(yield d)}}),xk.apply(this,arguments)}function Rk(){return Rk=$c(function*(n){let e=new Uint8Array;var i,t=!1,r=!1;try{for(var o,s=Us(n);t=!(o=yield us(s.next())).done;t=!1){const a=o.value;{if(null==a)continue;const l=a instanceof ArrayBuffer?new Uint8Array(a):"string"==typeof a?(new TextEncoder).encode(a):a;let c,u=new Uint8Array(e.length+l.length);for(u.set(e),u.set(l,e.length),e=u;-1!==(c=Fxe(e));)yield e.slice(0,c),e=e.slice(c)}}}catch(a){r=!0,i=a}finally{try{t&&null!=s.return&&(yield us(s.return()))}finally{if(r)throw i}}e.length>0&&(yield e)}),Rk.apply(this,arguments)}class Uxe{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const s={event:this.event,data:this.data.join("\n"),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,r,i]=function Bxe(n,e){const t=n.indexOf(e);return-1!==t?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}(e,":");return i.startsWith(" ")&&(i=i.substring(1)),"event"===t?this.event=i:"data"===t&&this.data.push(i),null}}const L6=n=>null!=n&&"object"==typeof n&&"string"==typeof n.url&&"function"==typeof n.blob,V6=n=>null!=n&&"object"==typeof n&&"string"==typeof n.name&&"number"==typeof n.lastModified&&u0(n),u0=n=>null!=n&&"object"==typeof n&&"number"==typeof n.size&&"string"==typeof n.type&&"function"==typeof n.text&&"function"==typeof n.slice&&"function"==typeof n.arrayBuffer;function B6(n,e,t){return Pk.apply(this,arguments)}function Pk(){return Pk=(0,b.A)(function*(n,e,t){if(n=yield n,V6(n))return n;if(L6(n)){const i=yield n.blob();e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()??"unknown_file");const s=u0(i)?[yield i.arrayBuffer()]:[i];return new Sk(s,e,t)}const r=yield function $xe(n){return Mk.apply(this,arguments)}(n);if(e||(e=function zxe(n){return Nk(n.name)||Nk(n.filename)||Nk(n.path)?.split(/[\\/]/).pop()}(n)??"unknown_file"),!t?.type){const i=r[0]?.type;"string"==typeof i&&(t={...t,type:i})}return new Sk(r,e,t)}),Pk.apply(this,arguments)}function Mk(){return Mk=(0,b.A)(function*(n){let e=[];if("string"==typeof n||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)e.push(n);else if(u0(n))e.push(yield n.arrayBuffer());else{if(!Wxe(n))throw new Error(`Unexpected data type: ${typeof n}; constructor: ${n?.constructor?.name}; props: ${function Hxe(n){return`[${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}(n)}`);var i,t=!1,r=!1;try{for(var o,s=Us(n);t=!(o=yield s.next()).done;t=!1)e.push(o.value)}catch(a){r=!0,i=a}finally{try{t&&null!=s.return&&(yield s.return())}finally{if(r)throw i}}}return e}),Mk.apply(this,arguments)}const Nk=n=>"string"==typeof n?n:typeof Buffer<"u"&&n instanceof Buffer?String(n):void 0,Wxe=n=>null!=n&&"object"==typeof n&&"function"==typeof n[Symbol.asyncIterator],$6=n=>n&&"object"==typeof n&&n.body&&"MultipartBody"===n[Symbol.toStringTag],Mh=function(){var n=(0,b.A)(function*(e){const t=yield Gxe(e.body);return C6(t,e)});return function(t){return n.apply(this,arguments)}}(),Gxe=function(){var n=(0,b.A)(function*(e){const t=new v6;return yield Promise.all(Object.entries(e||{}).map(([r,i])=>kk(t,r,i))),t});return function(t){return n.apply(this,arguments)}}(),kk=function(){var n=(0,b.A)(function*(e,t,r){if(void 0!==r){if(null==r)throw new TypeError(`Received null for "${t}"; to pass null in FormData, you must use the string 'null'`);if("string"==typeof r||"number"==typeof r||"boolean"==typeof r)e.append(t,String(r));else if((n=>V6(n)||L6(n)||T6(n))(r)){const i=yield B6(r);e.append(t,i)}else if(Array.isArray(r))yield Promise.all(r.map(i=>kk(e,t+"[]",i)));else{if("object"!=typeof r)throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${r} instead`);yield Promise.all(Object.entries(r).map(([i,s])=>kk(e,`${t}[${i}]`,s)))}}});return function(t,r,i){return n.apply(this,arguments)}}();var c0;function z6(n){return Ok.apply(this,arguments)}function Ok(){return Ok=(0,b.A)(function*(n){const{response:e}=n;if(n.options.stream)return Hc("response",e.status,e.url,e.headers,e.body),n.options.__streamClass?n.options.__streamClass.fromSSEResponse(e,n.controller):bl.fromSSEResponse(e,n.controller);if(204===e.status)return null;if(n.options.__binaryResponse)return e;const r=e.headers.get("content-type")?.split(";")[0]?.trim();if(r?.includes("application/json")||r?.endsWith("+json")){const o=yield e.json();return Hc("response",e.status,e.url,e.headers,o),W6(o,e)}const s=yield e.text();return Hc("response",e.status,e.url,e.headers,s),s}),Ok.apply(this,arguments)}function W6(n,e){return!n||"object"!=typeof n||Array.isArray(n)?n:Object.defineProperty(n,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}b6();class d0 extends Promise{constructor(e,t=z6){super(r=>{r(null)}),this.responsePromise=e,this.parseResponse=t}_thenUnwrap(e){var t=this;return new d0(this.responsePromise,function(){var r=(0,b.A)(function*(i){return W6(e(yield t.parseResponse(i),i),i.response)});return function(i){return r.apply(this,arguments)}}())}asResponse(){return this.responsePromise.then(e=>e.response)}withResponse(){var e=this;return(0,b.A)(function*(){const[t,r]=yield Promise.all([e.parse(),e.asResponse()]);return{data:t,response:r,request_id:r.headers.get("x-request-id")}})()}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class Kxe{constructor({baseURL:e,maxRetries:t=2,timeout:r=6e5,httpAgent:i,fetch:s}){this.baseURL=e,this.maxRetries=Fk("maxRetries",t),this.timeout=Fk("timeout",r),this.httpAgent=i,this.fetch=s??y6}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...Zxe(),...this.authHeaders(e)}}validateHeaders(e,t){}defaultIdempotencyKey(){return`stainless-node-retry-${oRe()}`}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,r){return this.request(Promise.resolve(r).then(function(){var i=(0,b.A)(function*(s){const o=s&&u0(s?.body)?new DataView(yield s.body.arrayBuffer()):s?.body instanceof DataView?s.body:s?.body instanceof ArrayBuffer?new DataView(s.body):s&&ArrayBuffer.isView(s?.body)?new DataView(s.body.buffer):s?.body;return{method:e,path:t,...s,body:o}});return function(s){return i.apply(this,arguments)}}()))}getAPIList(e,t,r){return this.requestAPIList(t,{method:"get",path:e,...r})}calculateContentLength(e){if("string"==typeof e){if(typeof Buffer<"u")return Buffer.byteLength(e,"utf8").toString();if(typeof TextEncoder<"u")return(new TextEncoder).encode(e).length.toString()}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e,{retryCount:t=0}={}){const r={...e},{method:i,path:s,query:o,headers:a={}}=r,l=ArrayBuffer.isView(r.body)||r.__binaryRequest&&"string"==typeof r.body?r.body:$6(r.body)?r.body.body:r.body?JSON.stringify(r.body,null,2):null,u=this.calculateContentLength(l),c=this.buildURL(s,o);"timeout"in r&&Fk("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const d=r.httpAgent??this.httpAgent??I6(c),f=r.timeout+1e3;return"number"==typeof d?.options?.timeout&&f>(d.options.timeout??0)&&(d.options.timeout=f),this.idempotencyHeader&&"get"!==i&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey),{req:{method:i,...l&&{body:l},headers:this.buildHeaders({options:r,headers:a,contentLength:u,retryCount:t}),...d&&{agent:d},signal:r.signal??null},url:c,timeout:r.timeout}}buildHeaders({options:e,headers:t,contentLength:r,retryCount:i}){const s={};r&&(s["content-length"]=r);const o=this.defaultHeaders(e);return X6(s,o),X6(s,t),$6(e.body)&&"node"!==rE&&delete s["content-type"],void 0===sE(o,"x-stainless-retry-count")&&void 0===sE(t,"x-stainless-retry-count")&&(s["x-stainless-retry-count"]=String(i)),void 0===sE(o,"x-stainless-timeout")&&void 0===sE(t,"x-stainless-timeout")&&e.timeout&&(s["x-stainless-timeout"]=String(Math.trunc(e.timeout/1e3))),this.validateHeaders(s,t),s}prepareOptions(e){return(0,b.A)(function*(){})()}prepareRequest(e,{}){return(0,b.A)(function*(){})()}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(t=>[...t])):{...e}:{}}makeStatusError(e,t,r,i){return qi.generate(e,t,r,i)}request(e,t=null){return new d0(this.makeRequest(e,t))}makeRequest(e,t){var r=this;return(0,b.A)(function*(){const i=yield e,s=i.maxRetries??r.maxRetries;null==t&&(t=s),yield r.prepareOptions(i);const{req:o,url:a,timeout:l}=r.buildRequest(i,{retryCount:s-t});if(yield r.prepareRequest(o,{url:a,options:i}),Hc("request",a,i,o.headers),i.signal?.aborted)throw new ra;const u=new AbortController,c=yield r.fetchWithTimeout(a,o,l,u).catch(Lk);if(c instanceof Error){if(i.signal?.aborted)throw new ra;if(t)return r.retryRequest(i,t);throw"AbortError"===c.name?new Dk:new o0({cause:c})}const d=q6(c.headers);if(!c.ok){if(t&&r.shouldRetry(c))return Hc(`response (error; retrying, ${t} attempts remaining)`,c.status,a,d),r.retryRequest(i,t,d);const f=yield c.text().catch(P=>Lk(P).message),y=eRe(f),E=y?void 0:f;throw Hc(`response (error; ${t?"(error; no more retries left)":"(error; not retryable)"})`,c.status,a,d,E),r.makeStatusError(c.status,y,E,d)}return{response:c,options:i,controller:u}})()}requestAPIList(e,t){const r=this.makeRequest(t,null);return new Yxe(this,r,e)}buildURL(e,t){const r=nRe(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),i=this.defaultQuery();return Q6(i)||(t={...i,...t}),"object"==typeof t&&t&&!Array.isArray(t)&&(r.search=this.stringifyQuery(t)),r.toString()}stringifyQuery(e){return Object.entries(e).filter(([t,r])=>typeof r<"u").map(([t,r])=>{if("string"==typeof r||"number"==typeof r||"boolean"==typeof r)return`${encodeURIComponent(t)}=${encodeURIComponent(r)}`;if(null===r)return`${encodeURIComponent(t)}=`;throw new et(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}fetchWithTimeout(e,t,r,i){var s=this;return(0,b.A)(function*(){const{signal:o,...a}=t||{};o&&o.addEventListener("abort",()=>i.abort());const l=setTimeout(()=>i.abort(),r),u={signal:i.signal,...a};return u.method&&(u.method=u.method.toUpperCase()),s.fetch.call(void 0,e,u).finally(()=>{clearTimeout(l)})})()}shouldRetry(e){const t=e.headers.get("x-should-retry");return"true"===t||"false"!==t&&(408===e.status||409===e.status||429===e.status||e.status>=500)}retryRequest(e,t,r){var i=this;return(0,b.A)(function*(){let s;const o=r?.["retry-after-ms"];if(o){const l=parseFloat(o);Number.isNaN(l)||(s=l)}const a=r?.["retry-after"];if(a&&!s){const l=parseFloat(a);s=Number.isNaN(l)?Date.parse(a)-Date.now():1e3*l}return s&&0<=s&&s<6e4||(s=i.calculateDefaultRetryTimeoutMillis(t,e.maxRetries??i.maxRetries)),yield iE(s),i.makeRequest(e,t-1)})()}calculateDefaultRetryTimeoutMillis(e,t){return Math.min(.5*Math.pow(2,t-e),8)*(1-.25*Math.random())*1e3}getUserAgent(){return`${this.constructor.name}/JS ${Og}`}}class G6{constructor(e,t,r,i){c0.set(this,void 0),function(n,e,t,r,i){if("function"==typeof e||!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");e.set(n,t)}(this,c0,e),this.options=i,this.response=t,this.body=r}hasNextPage(){return!!this.getPaginatedItems().length&&null!=this.nextPageInfo()}getNextPage(){var e=this;return(0,b.A)(function*(){const t=e.nextPageInfo();if(!t)throw new et("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const r={...e.options};if("params"in t&&"object"==typeof r.query)r.query={...r.query,...t.params};else if("url"in t){const i=[...Object.entries(r.query||{}),...t.url.searchParams.entries()];for(const[s,o]of i)t.url.searchParams.set(s,o);r.query=void 0,r.path=t.url.toString()}return yield function(n,e,t,r){if("function"==typeof e||!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(n)}(e,c0).requestAPIList(e.constructor,r)})()}iterPages(){var e=this;return $c(function*(){let t=e;for(yield t;t.hasNextPage();)t=yield us(t.getNextPage()),yield t})()}[(c0=new WeakMap,Symbol.asyncIterator)](){var e=this;return $c(function*(){var i,t=!1,r=!1;try{for(var o,s=Us(e.iterPages());t=!(o=yield us(s.next())).done;t=!1){const a=o.value;for(const l of a.getPaginatedItems())yield l}}catch(a){r=!0,i=a}finally{try{t&&null!=s.return&&(yield us(s.return()))}finally{if(r)throw i}}})()}}class Yxe extends d0{constructor(e,t,r){super(t,function(){var i=(0,b.A)(function*(s){return new r(e,s.response,yield z6(s),s.options)});return function(s){return i.apply(this,arguments)}}())}[Symbol.asyncIterator](){var e=this;return $c(function*(){const t=yield us(e);var s,r=!1,i=!1;try{for(var a,o=Us(t);r=!(a=yield us(o.next())).done;r=!1)yield a.value}catch(l){i=!0,s=l}finally{try{r&&null!=o.return&&(yield us(o.return()))}finally{if(i)throw s}}})()}}const q6=n=>new Proxy(Object.fromEntries(n.entries()),{get(e,t){const r=t.toString();return e[r.toLowerCase()]||e[r]}}),Qxe={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__metadata:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},Er=n=>"object"==typeof n&&null!==n&&!Q6(n)&&Object.keys(n).every(e=>J6(Qxe,e)),j6=n=>"x32"===n?"x32":"x86_64"===n||"x64"===n?"x64":"arm"===n?"arm":"aarch64"===n||"arm64"===n?"arm64":n?`other:${n}`:"unknown",K6=n=>(n=n.toLowerCase()).includes("ios")?"iOS":"android"===n?"Android":"darwin"===n?"MacOS":"win32"===n?"Windows":"freebsd"===n?"FreeBSD":"openbsd"===n?"OpenBSD":"linux"===n?"Linux":n?`Other:${n}`:"Unknown";let Y6;const Zxe=()=>Y6??(Y6=(()=>{if(typeof Deno<"u"&&null!=Deno.build)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Og,"X-Stainless-OS":K6(Deno.build.os),"X-Stainless-Arch":j6(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":"string"==typeof Deno.version?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Og,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if("[object process]"===Object.prototype.toString.call(typeof process<"u"?process:0))return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Og,"X-Stainless-OS":K6(process.platform),"X-Stainless-Arch":j6(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const n=function Xxe(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const r=t.exec(navigator.userAgent);if(r)return{browser:e,version:`${r[1]||0}.${r[2]||0}.${r[3]||0}`}}return null}();return n?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Og,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${n.browser}`,"X-Stainless-Runtime-Version":n.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Og,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}})()),eRe=n=>{try{return JSON.parse(n)}catch{return}},tRe=/^[a-z][a-z0-9+.-]*:/i,nRe=n=>tRe.test(n),iE=n=>new Promise(e=>setTimeout(e,n)),Fk=(n,e)=>{if("number"!=typeof e||!Number.isInteger(e))throw new et(`${n} must be an integer`);if(e<0)throw new et(`${n} must be a positive integer`);return e},Lk=n=>{if(n instanceof Error)return n;if("object"==typeof n&&null!==n)try{return new Error(JSON.stringify(n))}catch{}return new Error(n)},Nh=n=>typeof process<"u"?process.env?.[n]?.trim()??void 0:typeof Deno<"u"?Deno.env?.get?.(n)?.trim():void 0;function Q6(n){if(!n)return!0;for(const e in n)return!1;return!0}function J6(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function X6(n,e){for(const t in e){if(!J6(e,t))continue;const r=t.toLowerCase();if(!r)continue;const i=e[t];null===i?delete n[r]:void 0!==i&&(n[r]=i)}}const Z6=new Set(["authorization","api-key"]);function Hc(n,...e){if(typeof process<"u"&&"true"===process?.env?.DEBUG){const t=e.map(r=>{if(!r)return r;if(r.headers){const s={...r,headers:{...r.headers}};for(const o in r.headers)Z6.has(o.toLowerCase())&&(s.headers[o]="REDACTED");return s}let i=null;for(const s in r)Z6.has(s.toLowerCase())&&(i??(i={...r}),i[s]="REDACTED");return i??r});console.log(`OpenAI:DEBUG:${n}`,...t)}}const oRe=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,n=>{const e=16*Math.random()|0;return("x"===n?e:3&e|8).toString(16)}),sE=(n,e)=>{const t=e.toLowerCase();if((n=>"function"==typeof n?.get)(n)){const r=e[0]?.toUpperCase()+e.substring(1).replace(/([^\w])(\w)/g,(i,s,o)=>s+o.toUpperCase());for(const i of[e,t,e.toUpperCase(),r]){const s=n.get(i);if(s)return s}}for(const[r,i]of Object.entries(n))if(r.toLowerCase()===t)return Array.isArray(i)?(i.length<=1||console.warn(`Received ${i.length} entries for the ${e} header, using the first entry.`),i[0]):i};function h0(n){return null!=n&&"object"==typeof n&&!Array.isArray(n)}class ft{constructor(e){this._client=e}}class e8 extends ft{create(e,t){return this._client.post("/completions",{body:e,...t,stream:e.stream??!1})}}class t8 extends ft{list(e,t={},r){return Er(t)?this.list(e,{},t):this._client.getAPIList(`/chat/completions/${e}/messages`,cRe,{query:t,...r})}}class f0 extends G6{constructor(e,t,r,i){super(e,t,r,i),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class wi extends G6{constructor(e,t,r,i){super(e,t,r,i),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return!1!==this.has_more&&super.hasNextPage()}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const t=Object.fromEntries(e.url.searchParams);return Object.keys(t).length?t:null}nextPageInfo(){const e=this.getPaginatedItems();if(!e.length)return null;const t=e[e.length-1]?.id;return t?{params:{after:t}}:null}}class p0 extends ft{constructor(){super(...arguments),this.messages=new t8(this._client)}create(e,t){return this._client.post("/chat/completions",{body:e,...t,stream:e.stream??!1})}retrieve(e,t){return this._client.get(`/chat/completions/${e}`,t)}update(e,t,r){return this._client.post(`/chat/completions/${e}`,{body:t,...r})}list(e={},t){return Er(e)?this.list({},e):this._client.getAPIList("/chat/completions",g0,{query:e,...t})}del(e,t){return this._client.delete(`/chat/completions/${e}`,t)}}class g0 extends wi{}class cRe extends wi{}p0.ChatCompletionsPage=g0,p0.Messages=t8;let n8=(()=>{class n extends ft{constructor(){super(...arguments),this.completions=new p0(this._client)}}return n.Completions=p0,n.ChatCompletionsPage=g0,n})();class r8 extends ft{create(e,t){const r=!!e.encoding_format;let i=r?e.encoding_format:"base64";r&&Hc("Request","User defined encoding_format:",e.encoding_format);const s=this._client.post("/embeddings",{body:{...e,encoding_format:i},...t});return r?s:(Hc("response","Decoding base64 embeddings to float32 array"),s._thenUnwrap(o=>(o&&o.data&&o.data.forEach(a=>{a.embedding=(n=>{if(typeof Buffer<"u"){const e=Buffer.from(n,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}{const e=atob(n),t=e.length,r=new Uint8Array(t);for(let i=0;i<t;i++)r[i]=e.charCodeAt(i);return Array.from(new Float32Array(r.buffer))}})(a.embedding)}),o)))}}class Vk extends ft{create(e,t){return this._client.post("/files",Mh({body:e,...t}))}retrieve(e,t){return this._client.get(`/files/${e}`,t)}list(e={},t){return Er(e)?this.list({},e):this._client.getAPIList("/files",Uk,{query:e,...t})}del(e,t){return this._client.delete(`/files/${e}`,t)}content(e,t){return this._client.get(`/files/${e}/content`,{...t,headers:{Accept:"application/binary",...t?.headers},__binaryResponse:!0})}retrieveContent(e,t){return this._client.get(`/files/${e}/content`,t)}waitForProcessing(e,{pollInterval:t=5e3,maxWait:r=18e5}={}){var i=this;return(0,b.A)(function*(){const s=new Set(["processed","error","deleted"]),o=Date.now();let a=yield i.retrieve(e);for(;!a.status||!s.has(a.status);)if(yield iE(t),a=yield i.retrieve(e),Date.now()-o>r)throw new Dk({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return a})()}}class Uk extends wi{}Vk.FileObjectsPage=Uk;class i8 extends ft{createVariation(e,t){return this._client.post("/images/variations",Mh({body:e,...t}))}edit(e,t){return this._client.post("/images/edits",Mh({body:e,...t}))}generate(e,t){return this._client.post("/images/generations",{body:e,...t})}}class s8 extends ft{create(e,t){return this._client.post("/audio/speech",{body:e,...t,headers:{Accept:"application/octet-stream",...t?.headers},__binaryResponse:!0})}}class o8 extends ft{create(e,t){return this._client.post("/audio/transcriptions",Mh({body:e,...t,stream:e.stream??!1,__metadata:{model:e.model}}))}}class a8 extends ft{create(e,t){return this._client.post("/audio/translations",Mh({body:e,...t,__metadata:{model:e.model}}))}}let l8=(()=>{class n extends ft{constructor(){super(...arguments),this.transcriptions=new o8(this._client),this.translations=new a8(this._client),this.speech=new s8(this._client)}}return n.Transcriptions=o8,n.Translations=a8,n.Speech=s8,n})();class u8 extends ft{create(e,t){return this._client.post("/moderations",{body:e,...t})}}class Bk extends ft{retrieve(e,t){return this._client.get(`/models/${e}`,t)}list(e){return this._client.getAPIList("/models",$k,e)}del(e,t){return this._client.delete(`/models/${e}`,t)}}class $k extends f0{}Bk.ModelsPage=$k;class c8 extends ft{}class d8 extends ft{run(e,t){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...t})}validate(e,t){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...t})}}let h8=(()=>{class n extends ft{constructor(){super(...arguments),this.graders=new d8(this._client)}}return n.Graders=d8,n})();class Hk extends ft{create(e,t,r){return this._client.getAPIList(`/fine_tuning/checkpoints/${e}/permissions`,zk,{body:t,method:"post",...r})}retrieve(e,t={},r){return Er(t)?this.retrieve(e,{},t):this._client.get(`/fine_tuning/checkpoints/${e}/permissions`,{query:t,...r})}del(e,t,r){return this._client.delete(`/fine_tuning/checkpoints/${e}/permissions/${t}`,r)}}class zk extends f0{}Hk.PermissionCreateResponsesPage=zk;let f8=(()=>{class n extends ft{constructor(){super(...arguments),this.permissions=new Hk(this._client)}}return n.Permissions=Hk,n.PermissionCreateResponsesPage=zk,n})();class Wk extends ft{list(e,t={},r){return Er(t)?this.list(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/checkpoints`,Gk,{query:t,...r})}}class Gk extends wi{}Wk.FineTuningJobCheckpointsPage=Gk;class Fg extends ft{constructor(){super(...arguments),this.checkpoints=new Wk(this._client)}create(e,t){return this._client.post("/fine_tuning/jobs",{body:e,...t})}retrieve(e,t){return this._client.get(`/fine_tuning/jobs/${e}`,t)}list(e={},t){return Er(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",qk,{query:e,...t})}cancel(e,t){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,t)}listEvents(e,t={},r){return Er(t)?this.listEvents(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,jk,{query:t,...r})}pause(e,t){return this._client.post(`/fine_tuning/jobs/${e}/pause`,t)}resume(e,t){return this._client.post(`/fine_tuning/jobs/${e}/resume`,t)}}class qk extends wi{}class jk extends wi{}Fg.FineTuningJobsPage=qk,Fg.FineTuningJobEventsPage=jk,Fg.Checkpoints=Wk,Fg.FineTuningJobCheckpointsPage=Gk;let p8=(()=>{class n extends ft{constructor(){super(...arguments),this.methods=new c8(this._client),this.jobs=new Fg(this._client),this.checkpoints=new f8(this._client),this.alpha=new h8(this._client)}}return n.Methods=c8,n.Jobs=Fg,n.FineTuningJobsPage=qk,n.FineTuningJobEventsPage=jk,n.Checkpoints=f8,n.Alpha=h8,n})();class g8 extends ft{}let m8=(()=>{class n extends ft{constructor(){super(...arguments),this.graderModels=new g8(this._client)}}return n.GraderModels=g8,n})();const dRe=function(){var n=(0,b.A)(function*(e){const t=yield Promise.allSettled(e),r=t.filter(s=>"rejected"===s.status);if(r.length){for(const s of r)console.error(s.reason);throw new Error(`${r.length} promise(s) failed - see the above errors`)}const i=[];for(const s of t)"fulfilled"===s.status&&i.push(s.value);return i});return function(t){return n.apply(this,arguments)}}();class m0 extends ft{create(e,t,r){return this._client.post(`/vector_stores/${e}/files`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}retrieve(e,t,r){return this._client.get(`/vector_stores/${e}/files/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}update(e,t,r,i){return this._client.post(`/vector_stores/${e}/files/${t}`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i?.headers}})}list(e,t={},r){return Er(t)?this.list(e,{},t):this._client.getAPIList(`/vector_stores/${e}/files`,_0,{query:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}del(e,t,r){return this._client.delete(`/vector_stores/${e}/files/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}createAndPoll(e,t,r){var i=this;return(0,b.A)(function*(){const s=yield i.create(e,t,r);return yield i.poll(e,s.id,r)})()}poll(e,t,r){var i=this;return(0,b.A)(function*(){const s={...r?.headers,"X-Stainless-Poll-Helper":"true"};for(r?.pollIntervalMs&&(s["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const o=yield i.retrieve(e,t,{...r,headers:s}).withResponse(),a=o.data;switch(a.status){case"in_progress":let l=5e3;if(r?.pollIntervalMs)l=r.pollIntervalMs;else{const u=o.response.headers.get("openai-poll-after-ms");if(u){const c=parseInt(u);isNaN(c)||(l=c)}}yield iE(l);break;case"failed":case"completed":return a}}})()}upload(e,t,r){var i=this;return(0,b.A)(function*(){const s=yield i._client.files.create({file:t,purpose:"assistants"},r);return i.create(e,{file_id:s.id},r)})()}uploadAndPoll(e,t,r){var i=this;return(0,b.A)(function*(){const s=yield i.upload(e,t,r);return yield i.poll(e,s.id,r)})()}content(e,t,r){return this._client.getAPIList(`/vector_stores/${e}/files/${t}/content`,Kk,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}}class _0 extends wi{}class Kk extends f0{}m0.VectorStoreFilesPage=_0,m0.FileContentResponsesPage=Kk;class _8 extends ft{create(e,t,r){return this._client.post(`/vector_stores/${e}/file_batches`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}retrieve(e,t,r){return this._client.get(`/vector_stores/${e}/file_batches/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}cancel(e,t,r){return this._client.post(`/vector_stores/${e}/file_batches/${t}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}createAndPoll(e,t,r){var i=this;return(0,b.A)(function*(){const s=yield i.create(e,t);return yield i.poll(e,s.id,r)})()}listFiles(e,t,r={},i){return Er(r)?this.listFiles(e,t,{},r):this._client.getAPIList(`/vector_stores/${e}/file_batches/${t}/files`,_0,{query:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i?.headers}})}poll(e,t,r){var i=this;return(0,b.A)(function*(){const s={...r?.headers,"X-Stainless-Poll-Helper":"true"};for(r?.pollIntervalMs&&(s["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:o,response:a}=yield i.retrieve(e,t,{...r,headers:s}).withResponse();switch(o.status){case"in_progress":let l=5e3;if(r?.pollIntervalMs)l=r.pollIntervalMs;else{const u=a.headers.get("openai-poll-after-ms");if(u){const c=parseInt(u);isNaN(c)||(l=c)}}yield iE(l);break;case"failed":case"cancelled":case"completed":return o}}})()}uploadAndPoll(e,{files:t,fileIds:r=[]},i){var s=this;return(0,b.A)(function*(){if(null==t||0==t.length)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const a=Math.min(i?.maxConcurrency??5,t.length),l=s._client,u=t.values(),c=[...r];function f(){return(f=(0,b.A)(function*(E){for(let I of E){const T=yield l.files.create({file:I,purpose:"assistants"},i);c.push(T.id)}})).apply(this,arguments)}const y=Array(a).fill(u).map(function d(E){return f.apply(this,arguments)});return yield dRe(y),yield s.createAndPoll(e,{file_ids:c})})()}}class zc extends ft{constructor(){super(...arguments),this.files=new m0(this._client),this.fileBatches=new _8(this._client)}create(e,t){return this._client.post("/vector_stores",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}retrieve(e,t){return this._client.get(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}update(e,t,r){return this._client.post(`/vector_stores/${e}`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}list(e={},t){return Er(e)?this.list({},e):this._client.getAPIList("/vector_stores",Yk,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}del(e,t){return this._client.delete(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}search(e,t,r){return this._client.getAPIList(`/vector_stores/${e}/search`,Qk,{body:t,method:"post",...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}}class Yk extends wi{}class Qk extends f0{}zc.VectorStoresPage=Yk,zc.VectorStoreSearchResponsesPage=Qk,zc.Files=m0,zc.VectorStoreFilesPage=_0,zc.FileContentResponsesPage=Kk,zc.FileBatches=_8;class Jk extends ft{create(e,t){return this._client.post("/assistants",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}retrieve(e,t){return this._client.get(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}update(e,t,r){return this._client.post(`/assistants/${e}`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}list(e={},t){return Er(e)?this.list({},e):this._client.getAPIList("/assistants",Xk,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}del(e,t){return this._client.delete(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}}class Xk extends wi{}function y8(n){return"function"==typeof n.parse}Jk.AssistantsPage=Xk;const Lg=n=>"assistant"===n?.role,v8=n=>"function"===n?.role,E8=n=>"tool"===n?.role;var Zk,y0,v0,oE,aE,E0,lE,lu,uE,C0,I0,Vg,C8,Va=function(n,e,t,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(n,t):i?i.value=t:e.set(n,t),t},Rr=function(n,e,t,r){if("a"===t&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===t?r:"a"===t?r.call(n):r?r.value:e.get(n)};class eO{constructor(){Zk.add(this),this.controller=new AbortController,y0.set(this,void 0),v0.set(this,()=>{}),oE.set(this,()=>{}),aE.set(this,void 0),E0.set(this,()=>{}),lE.set(this,()=>{}),lu.set(this,{}),uE.set(this,!1),C0.set(this,!1),I0.set(this,!1),Vg.set(this,!1),Va(this,y0,new Promise((e,t)=>{Va(this,v0,e,"f"),Va(this,oE,t,"f")}),"f"),Va(this,aE,new Promise((e,t)=>{Va(this,E0,e,"f"),Va(this,lE,t,"f")}),"f"),Rr(this,y0,"f").catch(()=>{}),Rr(this,aE,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},Rr(this,Zk,"m",C8).bind(this))},0)}_connected(){this.ended||(Rr(this,v0,"f").call(this),this._emit("connect"))}get ended(){return Rr(this,uE,"f")}get errored(){return Rr(this,C0,"f")}get aborted(){return Rr(this,I0,"f")}abort(){this.controller.abort()}on(e,t){return(Rr(this,lu,"f")[e]||(Rr(this,lu,"f")[e]=[])).push({listener:t}),this}off(e,t){const r=Rr(this,lu,"f")[e];if(!r)return this;const i=r.findIndex(s=>s.listener===t);return i>=0&&r.splice(i,1),this}once(e,t){return(Rr(this,lu,"f")[e]||(Rr(this,lu,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,r)=>{Va(this,Vg,!0,"f"),"error"!==e&&this.once("error",r),this.once(e,t)})}done(){var e=this;return(0,b.A)(function*(){Va(e,Vg,!0,"f"),yield Rr(e,aE,"f")})()}_emit(e,...t){if(Rr(this,uE,"f"))return;"end"===e&&(Va(this,uE,!0,"f"),Rr(this,E0,"f").call(this));const r=Rr(this,lu,"f")[e];if(r&&(Rr(this,lu,"f")[e]=r.filter(i=>!i.once),r.forEach(({listener:i})=>i(...t))),"abort"===e){const i=t[0];return!Rr(this,Vg,"f")&&!r?.length&&Promise.reject(i),Rr(this,oE,"f").call(this,i),Rr(this,lE,"f").call(this,i),void this._emit("end")}if("error"===e){const i=t[0];!Rr(this,Vg,"f")&&!r?.length&&Promise.reject(i),Rr(this,oE,"f").call(this,i),Rr(this,lE,"f").call(this,i),this._emit("end")}}_emitFinal(){}}function tO(n){return"auto-parseable-response-format"===n?.$brand}function cE(n){return"auto-parseable-tool"===n?.$brand}function nO(n,e){const t=n.choices.map(r=>{if("length"===r.finish_reason)throw new k6;if("content_filter"===r.finish_reason)throw new O6;return{...r,message:{...r.message,...r.message.tool_calls?{tool_calls:r.message.tool_calls?.map(i=>function pRe(n,e){const t=n.tools?.find(r=>r.function?.name===e.function.name);return{...e,function:{...e.function,parsed_arguments:cE(t)?t.$parseRaw(e.function.arguments):t?.function.strict?JSON.parse(e.function.arguments):null}}}(e,i))??void 0}:void 0,parsed:r.message.content&&!r.message.refusal?fRe(e,r.message.content):null}}});return{...n,choices:t}}function fRe(n,e){return"json_schema"!==n.response_format?.type?null:"json_schema"===n.response_format?.type?"$parseRaw"in n.response_format?n.response_format.$parseRaw(e):JSON.parse(e):null}function gRe(n,e){if(!n)return!1;const t=n.tools?.find(r=>r.function?.name===e.function.name);return cE(t)||t?.function.strict||!1}function I8(n){return!!tO(n.response_format)||(n.tools?.some(e=>cE(e)||"function"===e.type&&!0===e.function.strict)??!1)}y0=new WeakMap,v0=new WeakMap,oE=new WeakMap,aE=new WeakMap,E0=new WeakMap,lE=new WeakMap,lu=new WeakMap,uE=new WeakMap,C0=new WeakMap,I0=new WeakMap,Vg=new WeakMap,Zk=new WeakSet,C8=function(e){if(Va(this,C0,!0,"f"),e instanceof Error&&"AbortError"===e.name&&(e=new ra),e instanceof ra)return Va(this,I0,!0,"f"),this._emit("abort",e);if(e instanceof et)return this._emit("error",e);if(e instanceof Error){const t=new et(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new et(String(e)))};var cs,rO,w0,iO,sO,oO,w8,aO,lo=function(n,e,t,r){if("a"===t&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===t?r:"a"===t?r.call(n):r?r.value:e.get(n)};const T8=10;class b8 extends eO{constructor(){super(...arguments),cs.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);const t=e.choices[0]?.message;return t&&this._addMessage(t),e}_addMessage(e,t=!0){if("content"in e||(e.content=null),this.messages.push(e),t)if(this._emit("message",e),(v8(e)||E8(e))&&e.content)this._emit("functionCallResult",e.content);else if(Lg(e)&&e.function_call)this._emit("functionCall",e.function_call);else if(Lg(e)&&e.tool_calls)for(const r of e.tool_calls)"function"===r.type&&this._emit("functionCall",r.function)}finalChatCompletion(){var e=this;return(0,b.A)(function*(){yield e.done();const t=e._chatCompletions[e._chatCompletions.length-1];if(!t)throw new et("stream ended without producing a ChatCompletion");return t})()}finalContent(){var e=this;return(0,b.A)(function*(){return yield e.done(),lo(e,cs,"m",rO).call(e)})()}finalMessage(){var e=this;return(0,b.A)(function*(){return yield e.done(),lo(e,cs,"m",w0).call(e)})()}finalFunctionCall(){var e=this;return(0,b.A)(function*(){return yield e.done(),lo(e,cs,"m",iO).call(e)})()}finalFunctionCallResult(){var e=this;return(0,b.A)(function*(){return yield e.done(),lo(e,cs,"m",sO).call(e)})()}totalUsage(){var e=this;return(0,b.A)(function*(){return yield e.done(),lo(e,cs,"m",oO).call(e)})()}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const t=lo(this,cs,"m",w0).call(this);t&&this._emit("finalMessage",t);const r=lo(this,cs,"m",rO).call(this);r&&this._emit("finalContent",r);const i=lo(this,cs,"m",iO).call(this);i&&this._emit("finalFunctionCall",i);const s=lo(this,cs,"m",sO).call(this);null!=s&&this._emit("finalFunctionCallResult",s),this._chatCompletions.some(o=>o.usage)&&this._emit("totalUsage",lo(this,cs,"m",oO).call(this))}_createChatCompletion(e,t,r){var i=this;return(0,b.A)(function*(){const s=r?.signal;s&&(s.aborted&&i.controller.abort(),s.addEventListener("abort",()=>i.controller.abort())),lo(i,cs,"m",w8).call(i,t);const o=yield e.chat.completions.create({...t,stream:!1},{...r,signal:i.controller.signal});return i._connected(),i._addChatCompletion(nO(o,t))})()}_runChatCompletion(e,t,r){var i=this;return(0,b.A)(function*(){for(const s of t.messages)i._addMessage(s,!1);return yield i._createChatCompletion(e,t,r)})()}_runFunctions(e,t,r){var i=this;return(0,b.A)(function*(){const s="function",{function_call:o="auto",stream:a,...l}=t,u="string"!=typeof o&&o?.name,{maxChatCompletions:c=T8}=r||{},d={};for(const y of t.functions)d[y.name||y.function.name]=y;const f=t.functions.map(y=>({name:y.name||y.function.name,parameters:y.parameters,description:y.description}));for(const y of t.messages)i._addMessage(y,!1);for(let y=0;y<c;++y){const I=(yield i._createChatCompletion(e,{...l,function_call:o,functions:f,messages:[...i.messages]},r)).choices[0]?.message;if(!I)throw new et("missing message in ChatCompletion response");if(!I.function_call)return;const{name:T,arguments:P}=I.function_call,x=d[T];if(!x){const Y=`Invalid function_call: ${JSON.stringify(T)}. Available options are: ${f.map(U=>JSON.stringify(U.name)).join(", ")}. Please try again`;i._addMessage({role:s,name:T,content:Y});continue}if(u&&u!==T){const Y=`Invalid function_call: ${JSON.stringify(T)}. ${JSON.stringify(u)} requested. Please try again`;i._addMessage({role:s,name:T,content:Y});continue}let V;try{V=y8(x)?yield x.parse(P):P}catch(Y){i._addMessage({role:s,name:T,content:Y instanceof Error?Y.message:String(Y)});continue}const W=yield x.function(V,i),K=lo(i,cs,"m",aO).call(i,W);if(i._addMessage({role:s,name:T,content:K}),u)return}})()}_runTools(e,t,r){var i=this;return(0,b.A)(function*(){const s="tool",{tool_choice:o="auto",stream:a,...l}=t,u="string"!=typeof o&&o?.function?.name,{maxChatCompletions:c=T8}=r||{},d=t.tools.map(E=>{if(cE(E)){if(!E.$callback)throw new et("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:E.$callback,name:E.function.name,description:E.function.description||"",parameters:E.function.parameters,parse:E.$parseRaw,strict:!0}}}return E}),f={};for(const E of d)"function"===E.type&&(f[E.function.name||E.function.function.name]=E.function);const y="tools"in t?d.map(E=>"function"===E.type?{type:"function",function:{name:E.function.name||E.function.function.name,parameters:E.function.parameters,description:E.function.description,strict:E.function.strict}}:E):void 0;for(const E of t.messages)i._addMessage(E,!1);for(let E=0;E<c;++E){const T=(yield i._createChatCompletion(e,{...l,tool_choice:o,tools:y,messages:[...i.messages]},r)).choices[0]?.message;if(!T)throw new et("missing message in ChatCompletion response");if(!T.tool_calls?.length)return;for(const P of T.tool_calls){if("function"!==P.type)continue;const x=P.id,{name:V,arguments:W}=P.function,K=f[V];if(!K){const F=`Invalid tool_call: ${JSON.stringify(V)}. Available options are: ${Object.keys(f).map(B=>JSON.stringify(B)).join(", ")}. Please try again`;i._addMessage({role:s,tool_call_id:x,content:F});continue}if(u&&u!==V){const F=`Invalid tool_call: ${JSON.stringify(V)}. ${JSON.stringify(u)} requested. Please try again`;i._addMessage({role:s,tool_call_id:x,content:F});continue}let Y;try{Y=y8(K)?yield K.parse(W):W}catch(F){const B=F instanceof Error?F.message:String(F);i._addMessage({role:s,tool_call_id:x,content:B});continue}const U=yield K.function(Y,i),N=lo(i,cs,"m",aO).call(i,U);if(i._addMessage({role:s,tool_call_id:x,content:N}),u)return}}})()}}cs=new WeakSet,rO=function(){return lo(this,cs,"m",w0).call(this).content??null},w0=function(){let e=this.messages.length;for(;e-- >0;){const t=this.messages[e];if(Lg(t)){const{function_call:r,...i}=t,s={...i,content:t.content??null,refusal:t.refusal??null};return r&&(s.function_call=r),s}}throw new et("stream ended without producing a ChatCompletionMessage with role=assistant")},iO=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(Lg(t)&&t?.function_call)return t.function_call;if(Lg(t)&&t?.tool_calls?.length)return t.tool_calls.at(-1)?.function}},sO=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(v8(t)&&null!=t.content||E8(t)&&null!=t.content&&"string"==typeof t.content&&this.messages.some(r=>"assistant"===r.role&&r.tool_calls?.some(i=>"function"===i.type&&i.id===t.tool_call_id)))return t.content}},oO=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:t}of this._chatCompletions)t&&(e.completion_tokens+=t.completion_tokens,e.prompt_tokens+=t.prompt_tokens,e.total_tokens+=t.total_tokens);return e},w8=function(e){if(null!=e.n&&e.n>1)throw new et("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},aO=function(e){return"string"==typeof e?e:void 0===e?"undefined":JSON.stringify(e)};class dE extends b8{static runFunctions(e,t,r){const i=new dE,s={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runFunctions"}};return i._run(()=>i._runFunctions(e,t,s)),i}static runTools(e,t,r){const i=new dE,s={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,t,s)),i}_addMessage(e,t=!0){super._addMessage(e,t),Lg(e)&&e.content&&this._emit("content",e.content)}}class yRe extends Error{}class vRe extends Error{}const U8=n=>function ERe(n,e=511){if("string"!=typeof n)throw new TypeError("expecting str, got "+typeof n);if(!n.trim())throw new Error(`${n} is empty`);return((n,e)=>{const t=n.length;let r=0;const i=f=>{throw new yRe(`${f} at position ${r}`)},s=f=>{throw new vRe(`${f} at position ${r}`)},o=()=>(d(),r>=t&&i("Unexpected end of input"),'"'===n[r]?a():"{"===n[r]?l():"["===n[r]?u():"null"===n.substring(r,r+4)||16&e&&t-r<4&&"null".startsWith(n.substring(r))?(r+=4,null):"true"===n.substring(r,r+4)||32&e&&t-r<4&&"true".startsWith(n.substring(r))?(r+=4,!0):"false"===n.substring(r,r+5)||32&e&&t-r<5&&"false".startsWith(n.substring(r))?(r+=5,!1):"Infinity"===n.substring(r,r+8)||128&e&&t-r<8&&"Infinity".startsWith(n.substring(r))?(r+=8,1/0):"-Infinity"===n.substring(r,r+9)||256&e&&1<t-r&&t-r<9&&"-Infinity".startsWith(n.substring(r))?(r+=9,-1/0):"NaN"===n.substring(r,r+3)||64&e&&t-r<3&&"NaN".startsWith(n.substring(r))?(r+=3,NaN):c()),a=()=>{const f=r;let y=!1;for(r++;r<t&&('"'!==n[r]||y&&"\\"===n[r-1]);)y="\\"===n[r]&&!y,r++;if('"'==n.charAt(r))try{return JSON.parse(n.substring(f,++r-Number(y)))}catch(E){s(String(E))}else if(1&e)try{return JSON.parse(n.substring(f,r-Number(y))+'"')}catch{return JSON.parse(n.substring(f,n.lastIndexOf("\\"))+'"')}i("Unterminated string literal")},l=()=>{r++,d();const f={};try{for(;"}"!==n[r];){if(d(),r>=t&&8&e)return f;const y=a();d(),r++;try{const E=o();Object.defineProperty(f,y,{value:E,writable:!0,enumerable:!0,configurable:!0})}catch(E){if(8&e)return f;throw E}d(),","===n[r]&&r++}}catch{if(8&e)return f;i("Expected '}' at end of object")}return r++,f},u=()=>{r++;const f=[];try{for(;"]"!==n[r];)f.push(o()),d(),","===n[r]&&r++}catch{if(4&e)return f;i("Expected ']' at end of array")}return r++,f},c=()=>{if(0===r){"-"===n&&2&e&&i("Not sure what '-' is");try{return JSON.parse(n)}catch(y){if(2&e)try{return"."===n[n.length-1]?JSON.parse(n.substring(0,n.lastIndexOf("."))):JSON.parse(n.substring(0,n.lastIndexOf("e")))}catch{}s(String(y))}}const f=r;for("-"===n[r]&&r++;n[r]&&!",]}".includes(n[r]);)r++;r==t&&!(2&e)&&i("Unterminated number literal");try{return JSON.parse(n.substring(f,r))}catch{"-"===n.substring(f,r)&&2&e&&i("Not sure what '-' is");try{return JSON.parse(n.substring(f,n.lastIndexOf("e")))}catch(E){s(String(E))}}},d=()=>{for(;r<t&&" \n\r\t".includes(n[r]);)r++};return o()})(n.trim(),e)}(n,509);var Ti,uu,Bg,Wc,lO,T0,uO,cO,dO,b0,hO,B8,Ug=function(n,e,t,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(n,t):i?i.value=t:e.set(n,t),t},Un=function(n,e,t,r){if("a"===t&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===t?r:"a"===t?r.call(n):r?r.value:e.get(n)};class hE extends b8{constructor(e){super(),Ti.add(this),uu.set(this,void 0),Bg.set(this,void 0),Wc.set(this,void 0),Ug(this,uu,e,"f"),Ug(this,Bg,[],"f")}get currentChatCompletionSnapshot(){return Un(this,Wc,"f")}static fromReadableStream(e){const t=new hE(null);return t._run(()=>t._fromReadableStream(e)),t}static createChatCompletion(e,t,r){const i=new hE(t);return i._run(()=>i._runChatCompletion(e,{...t,stream:!0},{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),i}_createChatCompletion(e,t,r){var i=()=>super._createChatCompletion,s=this;return(0,b.A)(function*(){i();const o=r?.signal;o&&(o.aborted&&s.controller.abort(),o.addEventListener("abort",()=>s.controller.abort())),Un(s,Ti,"m",lO).call(s);const a=yield e.chat.completions.create({...t,stream:!0},{...r,signal:s.controller.signal});s._connected();var c,l=!1,u=!1;try{for(var f,d=Us(a);l=!(f=yield d.next()).done;l=!1){const y=f.value;Un(s,Ti,"m",uO).call(s,y)}}catch(y){u=!0,c=y}finally{try{l&&null!=d.return&&(yield d.return())}finally{if(u)throw c}}if(a.controller.signal?.aborted)throw new ra;return s._addChatCompletion(Un(s,Ti,"m",b0).call(s))})()}_fromReadableStream(e,t){var r=this;return(0,b.A)(function*(){const i=t?.signal;i&&(i.aborted&&r.controller.abort(),i.addEventListener("abort",()=>r.controller.abort())),Un(r,Ti,"m",lO).call(r),r._connected();const s=bl.fromReadableStream(e,r.controller);let o;var u,a=!1,l=!1;try{for(var d,c=Us(s);a=!(d=yield c.next()).done;a=!1){const f=d.value;o&&o!==f.id&&r._addChatCompletion(Un(r,Ti,"m",b0).call(r)),Un(r,Ti,"m",uO).call(r,f),o=f.id}}catch(f){l=!0,u=f}finally{try{a&&null!=c.return&&(yield c.return())}finally{if(l)throw u}}if(s.controller.signal?.aborted)throw new ra;return r._addChatCompletion(Un(r,Ti,"m",b0).call(r))})()}[(uu=new WeakMap,Bg=new WeakMap,Wc=new WeakMap,Ti=new WeakSet,lO=function(){this.ended||Ug(this,Wc,void 0,"f")},T0=function(t){let r=Un(this,Bg,"f")[t.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},Un(this,Bg,"f")[t.index]=r,r)},uO=function(t){if(this.ended)return;const r=Un(this,Ti,"m",B8).call(this,t);this._emit("chunk",t,r);for(const i of t.choices){const s=r.choices[i.index];null!=i.delta.content&&"assistant"===s.message?.role&&s.message?.content&&(this._emit("content",i.delta.content,s.message.content),this._emit("content.delta",{delta:i.delta.content,snapshot:s.message.content,parsed:s.message.parsed})),null!=i.delta.refusal&&"assistant"===s.message?.role&&s.message?.refusal&&this._emit("refusal.delta",{delta:i.delta.refusal,snapshot:s.message.refusal}),null!=i.logprobs?.content&&"assistant"===s.message?.role&&this._emit("logprobs.content.delta",{content:i.logprobs?.content,snapshot:s.logprobs?.content??[]}),null!=i.logprobs?.refusal&&"assistant"===s.message?.role&&this._emit("logprobs.refusal.delta",{refusal:i.logprobs?.refusal,snapshot:s.logprobs?.refusal??[]});const o=Un(this,Ti,"m",T0).call(this,s);s.finish_reason&&(Un(this,Ti,"m",dO).call(this,s),null!=o.current_tool_call_index&&Un(this,Ti,"m",cO).call(this,s,o.current_tool_call_index));for(const a of i.delta.tool_calls??[])o.current_tool_call_index!==a.index&&(Un(this,Ti,"m",dO).call(this,s),null!=o.current_tool_call_index&&Un(this,Ti,"m",cO).call(this,s,o.current_tool_call_index)),o.current_tool_call_index=a.index;for(const a of i.delta.tool_calls??[]){const l=s.message.tool_calls?.[a.index];l?.type&&"function"===l?.type&&this._emit("tool_calls.function.arguments.delta",{name:l.function?.name,index:a.index,arguments:l.function.arguments,parsed_arguments:l.function.parsed_arguments,arguments_delta:a.function?.arguments??""})}}},cO=function(t,r){if(Un(this,Ti,"m",T0).call(this,t).done_tool_calls.has(r))return;const s=t.message.tool_calls?.[r];if(!s)throw new Error("no tool call snapshot");if(!s.type)throw new Error("tool call snapshot missing `type`");if("function"===s.type){const o=Un(this,uu,"f")?.tools?.find(a=>"function"===a.type&&a.function.name===s.function.name);this._emit("tool_calls.function.arguments.done",{name:s.function.name,index:r,arguments:s.function.arguments,parsed_arguments:cE(o)?o.$parseRaw(s.function.arguments):o?.function.strict?JSON.parse(s.function.arguments):null})}},dO=function(t){const r=Un(this,Ti,"m",T0).call(this,t);if(t.message.content&&!r.content_done){r.content_done=!0;const i=Un(this,Ti,"m",hO).call(this);this._emit("content.done",{content:t.message.content,parsed:i?i.$parseRaw(t.message.content):null})}t.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:t.message.refusal})),t.logprobs?.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:t.logprobs.content})),t.logprobs?.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:t.logprobs.refusal}))},b0=function(){if(this.ended)throw new et("stream has ended, this shouldn't happen");const t=Un(this,Wc,"f");if(!t)throw new et("request ended without sending any chunks");return Ug(this,Wc,void 0,"f"),Ug(this,Bg,[],"f"),function IRe(n,e){const{id:t,choices:r,created:i,model:s,system_fingerprint:o,...a}=n;return function hRe(n,e){return e&&I8(e)?nO(n,e):{...n,choices:n.choices.map(t=>({...t,message:{...t.message,parsed:null,...t.message.tool_calls?{tool_calls:t.message.tool_calls}:void 0}}))}}({...a,id:t,choices:r.map(({message:u,finish_reason:c,index:d,logprobs:f,...y})=>{if(!c)throw new et(`missing finish_reason for choice ${d}`);const{content:E=null,function_call:I,tool_calls:T,...P}=u,x=u.role;if(!x)throw new et(`missing role for choice ${d}`);if(I){const{arguments:V,name:W}=I;if(null==V)throw new et(`missing function_call.arguments for choice ${d}`);if(!W)throw new et(`missing function_call.name for choice ${d}`);return{...y,message:{content:E,function_call:{arguments:V,name:W},role:x,refusal:u.refusal??null},finish_reason:c,index:d,logprobs:f}}return T?{...y,index:d,finish_reason:c,logprobs:f,message:{...P,role:x,content:E,refusal:u.refusal??null,tool_calls:T.map((V,W)=>{const{function:K,type:Y,id:U,...N}=V,{arguments:F,name:B,...H}=K||{};if(null==U)throw new et(`missing choices[${d}].tool_calls[${W}].id\n${A0(n)}`);if(null==Y)throw new et(`missing choices[${d}].tool_calls[${W}].type\n${A0(n)}`);if(null==B)throw new et(`missing choices[${d}].tool_calls[${W}].function.name\n${A0(n)}`);if(null==F)throw new et(`missing choices[${d}].tool_calls[${W}].function.arguments\n${A0(n)}`);return{...N,id:U,type:Y,function:{...H,name:B,arguments:F}}})}}:{...y,message:{...P,content:E,role:x,refusal:u.refusal??null},finish_reason:c,index:d,logprobs:f}}),created:i,model:s,object:"chat.completion",...o?{system_fingerprint:o}:{}},e)}(t,Un(this,uu,"f"))},hO=function(){const t=Un(this,uu,"f")?.response_format;return tO(t)?t:null},B8=function(t){var r,i,s,o;let a=Un(this,Wc,"f");const{choices:l,...u}=t;a?Object.assign(a,u):a=Ug(this,Wc,{...u,choices:[]},"f");for(const{delta:c,finish_reason:d,index:f,logprobs:y=null,...E}of t.choices){let I=a.choices[f];if(I||(I=a.choices[f]={finish_reason:d,index:f,message:{},logprobs:y,...E}),y)if(I.logprobs){const{content:Y,refusal:U,...N}=y;Object.assign(I.logprobs,N),Y&&((r=I.logprobs).content??(r.content=[]),I.logprobs.content.push(...Y)),U&&((i=I.logprobs).refusal??(i.refusal=[]),I.logprobs.refusal.push(...U))}else I.logprobs=Object.assign({},y);if(d&&(I.finish_reason=d,Un(this,uu,"f")&&I8(Un(this,uu,"f")))){if("length"===d)throw new k6;if("content_filter"===d)throw new O6}if(Object.assign(I,E),!c)continue;const{content:T,refusal:P,function_call:x,role:V,tool_calls:W,...K}=c;if(Object.assign(I.message,K),P&&(I.message.refusal=(I.message.refusal||"")+P),V&&(I.message.role=V),x&&(I.message.function_call?(x.name&&(I.message.function_call.name=x.name),x.arguments&&((s=I.message.function_call).arguments??(s.arguments=""),I.message.function_call.arguments+=x.arguments)):I.message.function_call=x),T&&(I.message.content=(I.message.content||"")+T,!I.message.refusal&&Un(this,Ti,"m",hO).call(this)&&(I.message.parsed=U8(I.message.content))),W){I.message.tool_calls||(I.message.tool_calls=[]);for(const{index:Y,id:U,type:N,function:F,...B}of W){const H=(o=I.message.tool_calls)[Y]??(o[Y]={});Object.assign(H,B),U&&(H.id=U),N&&(H.type=N),F&&(H.function??(H.function={name:F.name??"",arguments:""})),F?.name&&(H.function.name=F.name),F?.arguments&&(H.function.arguments+=F.arguments,gRe(Un(this,uu,"f"),H)&&(H.function.parsed_arguments=U8(H.function.arguments)))}}}return a},Symbol.asyncIterator)](){var e=this;const t=[],r=[];let i=!1;return this.on("chunk",s=>{const o=r.shift();o?o.resolve(s):t.push(s)}),this.on("end",()=>{i=!0;for(const s of r)s.resolve(void 0);r.length=0}),this.on("abort",s=>{i=!0;for(const o of r)o.reject(s);r.length=0}),this.on("error",s=>{i=!0;for(const o of r)o.reject(s);r.length=0}),{next:(s=(0,b.A)(function*(){return t.length?{value:t.shift(),done:!1}:i?{value:void 0,done:!0}:new Promise((a,l)=>r.push({resolve:a,reject:l})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0})}),function(){return s.apply(this,arguments)}),return:function(){var s=(0,b.A)(function*(){return e.abort(),{value:void 0,done:!0}});return function(){return s.apply(this,arguments)}}()};var s}toReadableStream(){return new bl(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function A0(n){return JSON.stringify(n)}class $g extends hE{static fromReadableStream(e){const t=new $g(null);return t._run(()=>t._fromReadableStream(e)),t}static runFunctions(e,t,r){const i=new $g(null),s={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runFunctions"}};return i._run(()=>i._runFunctions(e,t,s)),i}static runTools(e,t,r){const i=new $g(t),s={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,t,s)),i}}class $8 extends ft{parse(e,t){return function mRe(n){for(const e of n??[]){if("function"!==e.type)throw new et(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(!0!==e.function.strict)throw new et(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}(e.tools),this._client.chat.completions.create(e,{...t,headers:{...t?.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(r=>nO(r,e))}runFunctions(e,t){return e.stream?$g.runFunctions(this._client,e,t):dE.runFunctions(this._client,e,t)}runTools(e,t){return e.stream?$g.runTools(this._client,e,t):dE.runTools(this._client,e,t)}stream(e,t){return hE.createChatCompletion(this._client,e,t)}}class fO extends ft{constructor(){super(...arguments),this.completions=new $8(this._client)}}!function(n){n.Completions=$8}(fO||(fO={}));class H8 extends ft{create(e,t){return this._client.post("/realtime/sessions",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}}class z8 extends ft{create(e,t){return this._client.post("/realtime/transcription_sessions",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}}let W8=(()=>{class n extends ft{constructor(){super(...arguments),this.sessions=new H8(this._client),this.transcriptionSessions=new z8(this._client)}}return n.Sessions=H8,n.TranscriptionSessions=z8,n})();var ji,pO,Al,S0,Ua,kh,Hg,Oh,D0,Oo,x0,R0,fE,pE,gE,G8,q8,j8,K8,Y8,Q8,J8,tt=function(n,e,t,r){if("a"===t&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===t?r:"a"===t?r.call(n):r?r.value:e.get(n)},ko=function(n,e,t,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(n,t):i?i.value=t:e.set(n,t),t};class Ba extends eO{constructor(){super(...arguments),ji.add(this),pO.set(this,[]),Al.set(this,{}),S0.set(this,{}),Ua.set(this,void 0),kh.set(this,void 0),Hg.set(this,void 0),Oh.set(this,void 0),D0.set(this,void 0),Oo.set(this,void 0),x0.set(this,void 0),R0.set(this,void 0),fE.set(this,void 0)}[(pO=new WeakMap,Al=new WeakMap,S0=new WeakMap,Ua=new WeakMap,kh=new WeakMap,Hg=new WeakMap,Oh=new WeakMap,D0=new WeakMap,Oo=new WeakMap,x0=new WeakMap,R0=new WeakMap,fE=new WeakMap,ji=new WeakSet,Symbol.asyncIterator)](){var e=this;const t=[],r=[];let i=!1;return this.on("event",s=>{const o=r.shift();o?o.resolve(s):t.push(s)}),this.on("end",()=>{i=!0;for(const s of r)s.resolve(void 0);r.length=0}),this.on("abort",s=>{i=!0;for(const o of r)o.reject(s);r.length=0}),this.on("error",s=>{i=!0;for(const o of r)o.reject(s);r.length=0}),{next:(s=(0,b.A)(function*(){return t.length?{value:t.shift(),done:!1}:i?{value:void 0,done:!0}:new Promise((a,l)=>r.push({resolve:a,reject:l})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0})}),function(){return s.apply(this,arguments)}),return:function(){var s=(0,b.A)(function*(){return e.abort(),{value:void 0,done:!0}});return function(){return s.apply(this,arguments)}}()};var s}static fromReadableStream(e){const t=new Ba;return t._run(()=>t._fromReadableStream(e)),t}_fromReadableStream(e,t){var r=this;return(0,b.A)(function*(){const i=t?.signal;i&&(i.aborted&&r.controller.abort(),i.addEventListener("abort",()=>r.controller.abort())),r._connected();const s=bl.fromReadableStream(e,r.controller);var l,o=!1,a=!1;try{for(var c,u=Us(s);o=!(c=yield u.next()).done;o=!1){const d=c.value;tt(r,ji,"m",pE).call(r,d)}}catch(d){a=!0,l=d}finally{try{o&&null!=u.return&&(yield u.return())}finally{if(a)throw l}}if(s.controller.signal?.aborted)throw new ra;return r._addRun(tt(r,ji,"m",gE).call(r))})()}toReadableStream(){return new bl(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,t,r,i,s){const o=new Ba;return o._run(()=>o._runToolAssistantStream(e,t,r,i,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),o}_createToolAssistantStream(e,t,r,i,s){var o=this;return(0,b.A)(function*(){const a=s?.signal;a&&(a.aborted&&o.controller.abort(),a.addEventListener("abort",()=>o.controller.abort()));const l={...i,stream:!0},u=yield e.submitToolOutputs(t,r,l,{...s,signal:o.controller.signal});o._connected();var f,c=!1,d=!1;try{for(var E,y=Us(u);c=!(E=yield y.next()).done;c=!1){const I=E.value;tt(o,ji,"m",pE).call(o,I)}}catch(I){d=!0,f=I}finally{try{c&&null!=y.return&&(yield y.return())}finally{if(d)throw f}}if(u.controller.signal?.aborted)throw new ra;return o._addRun(tt(o,ji,"m",gE).call(o))})()}static createThreadAssistantStream(e,t,r){const i=new Ba;return i._run(()=>i._threadAssistantStream(e,t,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),i}static createAssistantStream(e,t,r,i){const s=new Ba;return s._run(()=>s._runAssistantStream(e,t,r,{...i,headers:{...i?.headers,"X-Stainless-Helper-Method":"stream"}})),s}currentEvent(){return tt(this,x0,"f")}currentRun(){return tt(this,R0,"f")}currentMessageSnapshot(){return tt(this,Ua,"f")}currentRunStepSnapshot(){return tt(this,fE,"f")}finalRunSteps(){var e=this;return(0,b.A)(function*(){return yield e.done(),Object.values(tt(e,Al,"f"))})()}finalMessages(){var e=this;return(0,b.A)(function*(){return yield e.done(),Object.values(tt(e,S0,"f"))})()}finalRun(){var e=this;return(0,b.A)(function*(){if(yield e.done(),!tt(e,kh,"f"))throw Error("Final run was not received.");return tt(e,kh,"f")})()}_createThreadAssistantStream(e,t,r){var i=this;return(0,b.A)(function*(){const s=r?.signal;s&&(s.aborted&&i.controller.abort(),s.addEventListener("abort",()=>i.controller.abort()));const o={...t,stream:!0},a=yield e.createAndRun(o,{...r,signal:i.controller.signal});i._connected();var c,l=!1,u=!1;try{for(var f,d=Us(a);l=!(f=yield d.next()).done;l=!1){const y=f.value;tt(i,ji,"m",pE).call(i,y)}}catch(y){u=!0,c=y}finally{try{l&&null!=d.return&&(yield d.return())}finally{if(u)throw c}}if(a.controller.signal?.aborted)throw new ra;return i._addRun(tt(i,ji,"m",gE).call(i))})()}_createAssistantStream(e,t,r,i){var s=this;return(0,b.A)(function*(){const o=i?.signal;o&&(o.aborted&&s.controller.abort(),o.addEventListener("abort",()=>s.controller.abort()));const a={...r,stream:!0},l=yield e.create(t,a,{...i,signal:s.controller.signal});s._connected();var d,u=!1,c=!1;try{for(var y,f=Us(l);u=!(y=yield f.next()).done;u=!1){const E=y.value;tt(s,ji,"m",pE).call(s,E)}}catch(E){c=!0,d=E}finally{try{u&&null!=f.return&&(yield f.return())}finally{if(c)throw d}}if(l.controller.signal?.aborted)throw new ra;return s._addRun(tt(s,ji,"m",gE).call(s))})()}static accumulateDelta(e,t){for(const[r,i]of Object.entries(t)){if(!e.hasOwnProperty(r)){e[r]=i;continue}let s=e[r];if(null!=s)if("index"!==r&&"type"!==r){if("string"==typeof s&&"string"==typeof i)s+=i;else if("number"==typeof s&&"number"==typeof i)s+=i;else{if(!h0(s)||!h0(i)){if(Array.isArray(s)&&Array.isArray(i)){if(s.every(o=>"string"==typeof o||"number"==typeof o)){s.push(...i);continue}for(const o of i){if(!h0(o))throw new Error(`Expected array delta entry to be an object but got: ${o}`);const a=o.index;if(null==a)throw console.error(o),new Error("Expected array delta entry to have an `index` property");if("number"!=typeof a)throw new Error(`Expected array delta entry \`index\` property to be a number but got ${a}`);const l=s[a];null==l?s.push(o):s[a]=this.accumulateDelta(l,o)}continue}throw Error(`Unhandled record type: ${r}, deltaValue: ${i}, accValue: ${s}`)}s=this.accumulateDelta(s,i)}e[r]=s}else e[r]=i;else e[r]=i}return e}_addRun(e){return e}_threadAssistantStream(e,t,r){var i=this;return(0,b.A)(function*(){return yield i._createThreadAssistantStream(t,e,r)})()}_runAssistantStream(e,t,r,i){var s=this;return(0,b.A)(function*(){return yield s._createAssistantStream(t,e,r,i)})()}_runToolAssistantStream(e,t,r,i,s){var o=this;return(0,b.A)(function*(){return yield o._createToolAssistantStream(r,e,t,i,s)})()}}pE=function(e){if(!this.ended)switch(ko(this,x0,e,"f"),tt(this,ji,"m",j8).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":tt(this,ji,"m",J8).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":tt(this,ji,"m",q8).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":tt(this,ji,"m",G8).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},gE=function(){if(this.ended)throw new et("stream has ended, this shouldn't happen");if(!tt(this,kh,"f"))throw Error("Final run has not been received");return tt(this,kh,"f")},G8=function(e){const[t,r]=tt(this,ji,"m",Y8).call(this,e,tt(this,Ua,"f"));ko(this,Ua,t,"f"),tt(this,S0,"f")[t.id]=t;for(const i of r){const s=t.content[i.index];"text"==s?.type&&this._emit("textCreated",s.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,t),e.data.delta.content)for(const i of e.data.delta.content){if("text"==i.type&&i.text){let s=i.text,o=t.content[i.index];if(!o||"text"!=o.type)throw Error("The snapshot associated with this text delta is not text or missing");this._emit("textDelta",s,o.text)}if(i.index!=tt(this,Hg,"f")){if(tt(this,Oh,"f"))switch(tt(this,Oh,"f").type){case"text":this._emit("textDone",tt(this,Oh,"f").text,tt(this,Ua,"f"));break;case"image_file":this._emit("imageFileDone",tt(this,Oh,"f").image_file,tt(this,Ua,"f"))}ko(this,Hg,i.index,"f")}ko(this,Oh,t.content[i.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(void 0!==tt(this,Hg,"f")){const i=e.data.content[tt(this,Hg,"f")];if(i)switch(i.type){case"image_file":this._emit("imageFileDone",i.image_file,tt(this,Ua,"f"));break;case"text":this._emit("textDone",i.text,tt(this,Ua,"f"))}}tt(this,Ua,"f")&&this._emit("messageDone",e.data),ko(this,Ua,void 0,"f")}},q8=function(e){const t=tt(this,ji,"m",K8).call(this,e);switch(ko(this,fE,t,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const r=e.data.delta;if(r.step_details&&"tool_calls"==r.step_details.type&&r.step_details.tool_calls&&"tool_calls"==t.step_details.type)for(const s of r.step_details.tool_calls)s.index==tt(this,D0,"f")?this._emit("toolCallDelta",s,t.step_details.tool_calls[s.index]):(tt(this,Oo,"f")&&this._emit("toolCallDone",tt(this,Oo,"f")),ko(this,D0,s.index,"f"),ko(this,Oo,t.step_details.tool_calls[s.index],"f"),tt(this,Oo,"f")&&this._emit("toolCallCreated",tt(this,Oo,"f")));this._emit("runStepDelta",e.data.delta,t);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":ko(this,fE,void 0,"f"),"tool_calls"==e.data.step_details.type&&tt(this,Oo,"f")&&(this._emit("toolCallDone",tt(this,Oo,"f")),ko(this,Oo,void 0,"f")),this._emit("runStepDone",e.data,t)}},j8=function(e){tt(this,pO,"f").push(e),this._emit("event",e)},K8=function(e){switch(e.event){case"thread.run.step.created":return tt(this,Al,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let t=tt(this,Al,"f")[e.data.id];if(!t)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){const i=Ba.accumulateDelta(t,r.delta);tt(this,Al,"f")[e.data.id]=i}return tt(this,Al,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":tt(this,Al,"f")[e.data.id]=e.data}if(tt(this,Al,"f")[e.data.id])return tt(this,Al,"f")[e.data.id];throw new Error("No snapshot available")},Y8=function(e,t){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!t)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let i=e.data;if(i.delta.content)for(const s of i.delta.content)if(s.index in t.content){let o=t.content[s.index];t.content[s.index]=tt(this,ji,"m",Q8).call(this,s,o)}else t.content[s.index]=s,r.push(s);return[t,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(t)return[t,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},Q8=function(e,t){return Ba.accumulateDelta(t,e)},J8=function(e){switch(ko(this,R0,e.data,"f"),e.event){case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.cancelling":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":ko(this,kh,e.data,"f"),tt(this,Oo,"f")&&(this._emit("toolCallDone",tt(this,Oo,"f")),ko(this,Oo,void 0,"f"))}};class gO extends ft{create(e,t,r){return this._client.post(`/threads/${e}/messages`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}retrieve(e,t,r){return this._client.get(`/threads/${e}/messages/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}update(e,t,r,i){return this._client.post(`/threads/${e}/messages/${t}`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i?.headers}})}list(e,t={},r){return Er(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/messages`,mO,{query:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}del(e,t,r){return this._client.delete(`/threads/${e}/messages/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}}class mO extends wi{}gO.MessagesPage=mO;class _O extends ft{retrieve(e,t,r,i={},s){return Er(i)?this.retrieve(e,t,r,{},i):this._client.get(`/threads/${e}/runs/${t}/steps/${r}`,{query:i,...s,headers:{"OpenAI-Beta":"assistants=v2",...s?.headers}})}list(e,t,r={},i){return Er(r)?this.list(e,t,{},r):this._client.getAPIList(`/threads/${e}/runs/${t}/steps`,yO,{query:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i?.headers}})}}class yO extends wi{}_O.RunStepsPage=yO;class mE extends ft{constructor(){super(...arguments),this.steps=new _O(this._client)}create(e,t,r){const{include:i,...s}=t;return this._client.post(`/threads/${e}/runs`,{query:{include:i},body:s,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers},stream:t.stream??!1})}retrieve(e,t,r){return this._client.get(`/threads/${e}/runs/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}update(e,t,r,i){return this._client.post(`/threads/${e}/runs/${t}`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i?.headers}})}list(e,t={},r){return Er(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/runs`,vO,{query:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}cancel(e,t,r){return this._client.post(`/threads/${e}/runs/${t}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}createAndPoll(e,t,r){var i=this;return(0,b.A)(function*(){const s=yield i.create(e,t,r);return yield i.poll(e,s.id,r)})()}createAndStream(e,t,r){return Ba.createAssistantStream(e,this._client.beta.threads.runs,t,r)}poll(e,t,r){var i=this;return(0,b.A)(function*(){const s={...r?.headers,"X-Stainless-Poll-Helper":"true"};for(r?.pollIntervalMs&&(s["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:o,response:a}=yield i.retrieve(e,t,{...r,headers:{...r?.headers,...s}}).withResponse();switch(o.status){case"queued":case"in_progress":case"cancelling":let l=5e3;if(r?.pollIntervalMs)l=r.pollIntervalMs;else{const u=a.headers.get("openai-poll-after-ms");if(u){const c=parseInt(u);isNaN(c)||(l=c)}}yield iE(l);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return o}}})()}stream(e,t,r){return Ba.createAssistantStream(e,this._client.beta.threads.runs,t,r)}submitToolOutputs(e,t,r,i){return this._client.post(`/threads/${e}/runs/${t}/submit_tool_outputs`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i?.headers},stream:r.stream??!1})}submitToolOutputsAndPoll(e,t,r,i){var s=this;return(0,b.A)(function*(){const o=yield s.submitToolOutputs(e,t,r,i);return yield s.poll(e,o.id,i)})()}submitToolOutputsStream(e,t,r,i){return Ba.createToolAssistantStream(e,t,this._client.beta.threads.runs,r,i)}}class vO extends wi{}mE.RunsPage=vO,mE.Steps=_O,mE.RunStepsPage=yO;let X8=(()=>{class n extends ft{constructor(){super(...arguments),this.runs=new mE(this._client),this.messages=new gO(this._client)}create(t={},r){return Er(t)?this.create({},t):this._client.post("/threads",{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}retrieve(t,r){return this._client.get(`/threads/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}update(t,r,i){return this._client.post(`/threads/${t}`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i?.headers}})}del(t,r){return this._client.delete(`/threads/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}createAndRun(t,r){return this._client.post("/threads/runs",{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers},stream:t.stream??!1})}createAndRunPoll(t,r){var i=this;return(0,b.A)(function*(){const s=yield i.createAndRun(t,r);return yield i.runs.poll(s.thread_id,s.id,r)})()}createAndRunStream(t,r){return Ba.createThreadAssistantStream(t,this._client.beta.threads,r)}}return n.Runs=mE,n.RunsPage=vO,n.Messages=gO,n.MessagesPage=mO,n})(),Z8=(()=>{class n extends ft{constructor(){super(...arguments),this.realtime=new W8(this._client),this.chat=new fO(this._client),this.assistants=new Jk(this._client),this.threads=new X8(this._client)}}return n.Realtime=W8,n.Assistants=Jk,n.AssistantsPage=Xk,n.Threads=X8,n})();class EO extends ft{create(e,t){return this._client.post("/batches",{body:e,...t})}retrieve(e,t){return this._client.get(`/batches/${e}`,t)}list(e={},t){return Er(e)?this.list({},e):this._client.getAPIList("/batches",CO,{query:e,...t})}cancel(e,t){return this._client.post(`/batches/${e}/cancel`,t)}}class CO extends wi{}EO.BatchesPage=CO;class eK extends ft{create(e,t,r){return this._client.post(`/uploads/${e}/parts`,Mh({body:t,...r}))}}let tK=(()=>{class n extends ft{constructor(){super(...arguments),this.parts=new eK(this._client)}create(t,r){return this._client.post("/uploads",{body:t,...r})}cancel(t,r){return this._client.post(`/uploads/${t}/cancel`,r)}complete(t,r,i){return this._client.post(`/uploads/${t}/complete`,{body:r,...i})}}return n.Parts=eK,n})();function nK(n,e){const t=n.output.map(i=>{if("function_call"===i.type)return{...i,parsed_arguments:ARe(e,i)};if("message"===i.type){const s=i.content.map(o=>"output_text"===o.type?{...o,parsed:TRe(e,o.text)}:o);return{...i,content:s}}return i}),r=Object.assign({},n,{output:t});return Object.getOwnPropertyDescriptor(n,"output_text")||IO(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const i of r.output)if("message"===i.type)for(const s of i.content)if("output_text"===s.type&&null!==s.parsed)return s.parsed;return null}}),r}function TRe(n,e){return"json_schema"!==n.text?.format?.type?null:"$parseRaw"in n.text?.format?(n.text?.format).$parseRaw(e):JSON.parse(e)}function rK(n){return"auto-parseable-tool"===n?.$brand}function ARe(n,e){const t=function iK(n,e){return n.find(t=>"function"===t.type&&t.name===e)}(n.tools??[],e.name);return{...e,...e,parsed_arguments:rK(t)?t.$parseRaw(e.arguments):t?.strict?JSON.parse(e.arguments):null}}function IO(n){const e=[];for(const t of n.output)if("message"===t.type)for(const r of t.content)"output_text"===r.type&&e.push(r.text);n.output_text=e.join("")}class sK extends ft{list(e,t={},r){return Er(t)?this.list(e,{},t):this._client.getAPIList(`/responses/${e}/input_items`,DRe,{query:t,...r})}}var Wg,P0,qc,M0,oK,aK,lK,uK,zg=function(n,e,t,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(n,t):i?i.value=t:e.set(n,t),t},Gc=function(n,e,t,r){if("a"===t&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===t?r:"a"===t?r.call(n):r?r.value:e.get(n)};class wO extends eO{constructor(e){super(),Wg.add(this),P0.set(this,void 0),qc.set(this,void 0),M0.set(this,void 0),zg(this,P0,e,"f")}static createResponse(e,t,r){const i=new wO(t);return i._run(()=>i._createOrRetrieveResponse(e,t,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),i}_createOrRetrieveResponse(e,t,r){var i=this;return(0,b.A)(function*(){const s=r?.signal;s&&(s.aborted&&i.controller.abort(),s.addEventListener("abort",()=>i.controller.abort())),Gc(i,Wg,"m",oK).call(i);let o,a=null;"response_id"in t?(o=yield e.responses.retrieve(t.response_id,{stream:!0},{...r,signal:i.controller.signal,stream:!0}),a=t.starting_after??null):o=yield e.responses.create({...t,stream:!0},{...r,signal:i.controller.signal}),i._connected();var c,l=!1,u=!1;try{for(var f,d=Us(o);l=!(f=yield d.next()).done;l=!1){const y=f.value;Gc(i,Wg,"m",aK).call(i,y,a)}}catch(y){u=!0,c=y}finally{try{l&&null!=d.return&&(yield d.return())}finally{if(u)throw c}}if(o.controller.signal?.aborted)throw new ra;return Gc(i,Wg,"m",lK).call(i)})()}[(P0=new WeakMap,qc=new WeakMap,M0=new WeakMap,Wg=new WeakSet,oK=function(){this.ended||zg(this,qc,void 0,"f")},aK=function(t,r){if(this.ended)return;const i=(o,a)=>{(null==r||a.sequence_number>r)&&this._emit(o,a)},s=Gc(this,Wg,"m",uK).call(this,t);switch(i("event",t),t.type){case"response.output_text.delta":{const o=s.output[t.output_index];if(!o)throw new et(`missing output at index ${t.output_index}`);if("message"===o.type){const a=o.content[t.content_index];if(!a)throw new et(`missing content at index ${t.content_index}`);if("output_text"!==a.type)throw new et(`expected content to be 'output_text', got ${a.type}`);i("response.output_text.delta",{...t,snapshot:a.text})}break}case"response.function_call_arguments.delta":{const o=s.output[t.output_index];if(!o)throw new et(`missing output at index ${t.output_index}`);"function_call"===o.type&&i("response.function_call_arguments.delta",{...t,snapshot:o.arguments});break}default:i(t.type,t)}},lK=function(){if(this.ended)throw new et("stream has ended, this shouldn't happen");const t=Gc(this,qc,"f");if(!t)throw new et("request ended without sending any events");zg(this,qc,void 0,"f");const r=function SRe(n,e){return function wRe(n,e){return e&&function bRe(n){return!!tO(n.text?.format)}(e)?nK(n,e):{...n,output_parsed:null,output:n.output.map(t=>"function_call"===t.type?{...t,parsed_arguments:null}:"message"===t.type?{...t,content:t.content.map(r=>({...r,parsed:null}))}:t)}}(n,e)}(t,Gc(this,P0,"f"));return zg(this,M0,r,"f"),r},uK=function(t){let r=Gc(this,qc,"f");if(!r){if("response.created"!==t.type)throw new et(`When snapshot hasn't been set yet, expected 'response.created' event, got ${t.type}`);return r=zg(this,qc,t.response,"f"),r}switch(t.type){case"response.output_item.added":r.output.push(t.item);break;case"response.content_part.added":{const i=r.output[t.output_index];if(!i)throw new et(`missing output at index ${t.output_index}`);"message"===i.type&&i.content.push(t.part);break}case"response.output_text.delta":{const i=r.output[t.output_index];if(!i)throw new et(`missing output at index ${t.output_index}`);if("message"===i.type){const s=i.content[t.content_index];if(!s)throw new et(`missing content at index ${t.content_index}`);if("output_text"!==s.type)throw new et(`expected content to be 'output_text', got ${s.type}`);s.text+=t.delta}break}case"response.function_call_arguments.delta":{const i=r.output[t.output_index];if(!i)throw new et(`missing output at index ${t.output_index}`);"function_call"===i.type&&(i.arguments+=t.delta);break}case"response.completed":zg(this,qc,t.response,"f")}return r},Symbol.asyncIterator)](){var e=this;const t=[],r=[];let i=!1;return this.on("event",s=>{const o=r.shift();o?o.resolve(s):t.push(s)}),this.on("end",()=>{i=!0;for(const s of r)s.resolve(void 0);r.length=0}),this.on("abort",s=>{i=!0;for(const o of r)o.reject(s);r.length=0}),this.on("error",s=>{i=!0;for(const o of r)o.reject(s);r.length=0}),{next:(s=(0,b.A)(function*(){return t.length?{value:t.shift(),done:!1}:i?{value:void 0,done:!0}:new Promise((a,l)=>r.push({resolve:a,reject:l})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0})}),function(){return s.apply(this,arguments)}),return:function(){var s=(0,b.A)(function*(){return e.abort(),{value:void 0,done:!0}});return function(){return s.apply(this,arguments)}}()};var s}finalResponse(){var e=this;return(0,b.A)(function*(){yield e.done();const t=Gc(e,M0,"f");if(!t)throw new et("stream ended without producing a ChatCompletion");return t})()}}class TO extends ft{constructor(){super(...arguments),this.inputItems=new sK(this._client)}create(e,t){return this._client.post("/responses",{body:e,...t,stream:e.stream??!1})._thenUnwrap(r=>("object"in r&&"response"===r.object&&IO(r),r))}retrieve(e,t={},r){return Er(t)&&void 0===r?this.retrieve(e,{},t):this._client.get(`/responses/${e}`,{query:t,...r,stream:t.stream??!1})._thenUnwrap(i=>("object"in i&&"response"===i.object&&IO(i),i))}del(e,t){return this._client.delete(`/responses/${e}`,{...t,headers:{Accept:"*/*",...t?.headers}})}parse(e,t){return this._client.responses.create(e,t)._thenUnwrap(r=>nK(r,e))}stream(e,t){return wO.createResponse(this._client,e,t)}cancel(e,t){return this._client.post(`/responses/${e}/cancel`,{...t,headers:{Accept:"*/*",...t?.headers}})}}class DRe extends wi{}TO.InputItems=sK;class bO extends ft{retrieve(e,t,r,i){return this._client.get(`/evals/${e}/runs/${t}/output_items/${r}`,i)}list(e,t,r={},i){return Er(r)?this.list(e,t,{},r):this._client.getAPIList(`/evals/${e}/runs/${t}/output_items`,AO,{query:r,...i})}}class AO extends wi{}bO.OutputItemListResponsesPage=AO;class _E extends ft{constructor(){super(...arguments),this.outputItems=new bO(this._client)}create(e,t,r){return this._client.post(`/evals/${e}/runs`,{body:t,...r})}retrieve(e,t,r){return this._client.get(`/evals/${e}/runs/${t}`,r)}list(e,t={},r){return Er(t)?this.list(e,{},t):this._client.getAPIList(`/evals/${e}/runs`,SO,{query:t,...r})}del(e,t,r){return this._client.delete(`/evals/${e}/runs/${t}`,r)}cancel(e,t,r){return this._client.post(`/evals/${e}/runs/${t}`,r)}}class SO extends wi{}_E.RunListResponsesPage=SO,_E.OutputItems=bO,_E.OutputItemListResponsesPage=AO;class yE extends ft{constructor(){super(...arguments),this.runs=new _E(this._client)}create(e,t){return this._client.post("/evals",{body:e,...t})}retrieve(e,t){return this._client.get(`/evals/${e}`,t)}update(e,t,r){return this._client.post(`/evals/${e}`,{body:t,...r})}list(e={},t){return Er(e)?this.list({},e):this._client.getAPIList("/evals",DO,{query:e,...t})}del(e,t){return this._client.delete(`/evals/${e}`,t)}}class DO extends wi{}yE.EvalListResponsesPage=DO,yE.Runs=_E,yE.RunListResponsesPage=SO;class cK extends ft{retrieve(e,t,r){return this._client.get(`/containers/${e}/files/${t}/content`,{...r,headers:{Accept:"*/*",...r?.headers}})}}class N0 extends ft{constructor(){super(...arguments),this.content=new cK(this._client)}create(e,t,r){return this._client.post(`/containers/${e}/files`,Mh({body:t,...r}))}retrieve(e,t,r){return this._client.get(`/containers/${e}/files/${t}`,r)}list(e,t={},r){return Er(t)?this.list(e,{},t):this._client.getAPIList(`/containers/${e}/files`,xO,{query:t,...r})}del(e,t,r){return this._client.delete(`/containers/${e}/files/${t}`,{...r,headers:{Accept:"*/*",...r?.headers}})}}class xO extends wi{}N0.FileListResponsesPage=xO,N0.Content=cK;class vE extends ft{constructor(){super(...arguments),this.files=new N0(this._client)}create(e,t){return this._client.post("/containers",{body:e,...t})}retrieve(e,t){return this._client.get(`/containers/${e}`,t)}list(e={},t){return Er(e)?this.list({},e):this._client.getAPIList("/containers",RO,{query:e,...t})}del(e,t){return this._client.delete(`/containers/${e}`,{...t,headers:{Accept:"*/*",...t?.headers}})}}class RO extends wi{}vE.ContainerListResponsesPage=RO,vE.Files=N0,vE.FileListResponsesPage=xO;class Tt extends Kxe{constructor({baseURL:e=Nh("OPENAI_BASE_URL"),apiKey:t=Nh("OPENAI_API_KEY"),organization:r=Nh("OPENAI_ORG_ID")??null,project:i=Nh("OPENAI_PROJECT_ID")??null,...s}={}){if(void 0===t)throw new et("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const o={apiKey:t,organization:r,project:i,...s,baseURL:e||"https://api.openai.com/v1"};if(!o.dangerouslyAllowBrowser&&typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u")throw new et("It looks like you're running in a browser-like environment.\n\nThis is disabled by default, as it risks exposing your secret API credentials to attackers.\nIf you understand the risks and have appropriate mitigations in place,\nyou can set the `dangerouslyAllowBrowser` option to `true`, e.g.,\n\nnew OpenAI({ apiKey, dangerouslyAllowBrowser: true });\n\nhttps://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety\n");super({baseURL:o.baseURL,timeout:o.timeout??6e5,httpAgent:o.httpAgent,maxRetries:o.maxRetries,fetch:o.fetch}),this.completions=new e8(this),this.chat=new n8(this),this.embeddings=new r8(this),this.files=new Vk(this),this.images=new i8(this),this.audio=new l8(this),this.moderations=new u8(this),this.models=new Bk(this),this.fineTuning=new p8(this),this.graders=new m8(this),this.vectorStores=new zc(this),this.beta=new Z8(this),this.batches=new EO(this),this.uploads=new tK(this),this.responses=new TO(this),this.evals=new yE(this),this.containers=new vE(this),this._options=o,this.apiKey=t,this.organization=r,this.project=i}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(e){return function Sxe(n,e={}){let t=n;const r=function Axe(n=Ii){if(typeof n.allowEmptyArrays<"u"&&"boolean"!=typeof n.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof n.encodeDotInKeys<"u"&&"boolean"!=typeof n.encodeDotInKeys)throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==n.encoder&&typeof n.encoder<"u"&&"function"!=typeof n.encoder)throw new TypeError("Encoder has to be a function.");const e=n.charset||Ii.charset;if(typeof n.charset<"u"&&"utf-8"!==n.charset&&"iso-8859-1"!==n.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let t=Ik;if(typeof n.format<"u"){if(!Ixe.call(wk,n.format))throw new TypeError("Unknown format option provided.");t=n.format}const r=wk[t];let s,i=Ii.filter;if(("function"==typeof n.filter||Tl(n.filter))&&(i=n.filter),s=n.arrayFormat&&n.arrayFormat in f6?n.arrayFormat:"indices"in n?n.indices?"indices":"repeat":Ii.arrayFormat,"commaRoundTrip"in n&&"boolean"!=typeof n.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");return{addQueryPrefix:"boolean"==typeof n.addQueryPrefix?n.addQueryPrefix:Ii.addQueryPrefix,allowDots:typeof n.allowDots>"u"?!!n.encodeDotInKeys||Ii.allowDots:!!n.allowDots,allowEmptyArrays:"boolean"==typeof n.allowEmptyArrays?!!n.allowEmptyArrays:Ii.allowEmptyArrays,arrayFormat:s,charset:e,charsetSentinel:"boolean"==typeof n.charsetSentinel?n.charsetSentinel:Ii.charsetSentinel,commaRoundTrip:!!n.commaRoundTrip,delimiter:typeof n.delimiter>"u"?Ii.delimiter:n.delimiter,encode:"boolean"==typeof n.encode?n.encode:Ii.encode,encodeDotInKeys:"boolean"==typeof n.encodeDotInKeys?n.encodeDotInKeys:Ii.encodeDotInKeys,encoder:"function"==typeof n.encoder?n.encoder:Ii.encoder,encodeValuesOnly:"boolean"==typeof n.encodeValuesOnly?n.encodeValuesOnly:Ii.encodeValuesOnly,filter:i,format:t,formatter:r,serializeDate:"function"==typeof n.serializeDate?n.serializeDate:Ii.serializeDate,skipNulls:"boolean"==typeof n.skipNulls?n.skipNulls:Ii.skipNulls,sort:"function"==typeof n.sort?n.sort:null,strictNullHandling:"boolean"==typeof n.strictNullHandling?n.strictNullHandling:Ii.strictNullHandling}}(e);let i,s;"function"==typeof r.filter?(s=r.filter,t=s("",t)):Tl(r.filter)&&(s=r.filter,i=s);const o=[];if("object"!=typeof t||null===t)return"";const a=f6[r.arrayFormat],l="comma"===a&&r.commaRoundTrip;i||(i=Object.keys(t)),r.sort&&i.sort(r.sort);const u=new WeakMap;for(let f=0;f<i.length;++f){const y=i[f];r.skipNulls&&null===t[y]||p6(o,g6(t[y],y,a,l,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,u))}const c=o.join(r.delimiter);let d=!0===r.addQueryPrefix?"?":"";return r.charsetSentinel&&(d+="iso-8859-1"===r.charset?"utf8=%26%2310003%3B&":"utf8=%E2%9C%93&"),c.length>0?d+c:""}(e,{arrayFormat:"brackets"})}}Tt.OpenAI=Tt,Tt.DEFAULT_TIMEOUT=6e5,Tt.OpenAIError=et,Tt.APIError=qi,Tt.APIConnectionError=o0,Tt.APIConnectionTimeoutError=Dk,Tt.APIUserAbortError=ra,Tt.NotFoundError=x6,Tt.ConflictError=R6,Tt.RateLimitError=M6,Tt.BadRequestError=A6,Tt.AuthenticationError=S6,Tt.InternalServerError=N6,Tt.PermissionDeniedError=D6,Tt.UnprocessableEntityError=P6,Tt.toFile=B6,Tt.fileFromPath=w6,Tt.Completions=e8,Tt.Chat=n8,Tt.ChatCompletionsPage=g0,Tt.Embeddings=r8,Tt.Files=Vk,Tt.FileObjectsPage=Uk,Tt.Images=i8,Tt.Audio=l8,Tt.Moderations=u8,Tt.Models=Bk,Tt.ModelsPage=$k,Tt.FineTuning=p8,Tt.Graders=m8,Tt.VectorStores=zc,Tt.VectorStoresPage=Yk,Tt.VectorStoreSearchResponsesPage=Qk,Tt.Beta=Z8,Tt.Batches=EO,Tt.BatchesPage=CO,Tt.Uploads=tK,Tt.Responses=TO,Tt.Evals=yE,Tt.EvalListResponsesPage=DO,Tt.Containers=vE,Tt.ContainerListResponsesPage=RO;let RRe=(()=>{class n{constructor(){this.ai=new c6({apiKey:"AIzaSyDwoRM82oUXz85ML2Qs-hywfFjOxgIncs0"}),this.openai=new Tt({baseURL:"https://api.deepseek.com",dangerouslyAllowBrowser:!0,apiKey:mh_apiKeyDeepSeek})}getGeminiResponsePromise(t){var r=this;return(0,b.A)(function*(){try{r.response=yield r.ai.models.generateContent({model:"gemini-2.0-flash",contents:t})}catch(i){console.log(i)}return r.response.text})()}getGeminiResponse(t,r){return Pn(r?["Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."]:this.getGeminiResponsePromise(t))}getDeepSeekResponsePromise(t){var r=this;return(0,b.A)(function*(){return console.log(mh_apiKeyDeepSeek),(yield r.openai.chat.completions.create({messages:[{role:"system",content:t}],model:"deepseek-chat"})).choices[0].message.content})()}getDeepseekResponse(t,r){return Pn(r?["Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."]:this.getDeepSeekResponsePromise(t))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function PRe(n,e){if(1&n&&(Ye(0,"div",17)(1,"label",18),hn(2,"Response"),je(),Ye(3,"p",19),hn(4),je()()),2&n){const t=Jl();Kt(4),Xl(t.aiGeminiResponse)}}function MRe(n,e){1&n&&(Ye(0,"div",20),yi(1,"span",21),je())}function NRe(n,e){if(1&n&&(Ye(0,"div",17)(1,"label",18),hn(2,"Response"),je(),Ye(3,"p",19),hn(4),je()()),2&n){const t=Jl();Kt(4),Xl(t.aiDeepSeekResponse)}}function kRe(n,e){1&n&&(Ye(0,"div",20),yi(1,"span",21),je())}let ORe=(()=>{class n{constructor(t){this.PromptAiService=t,this.prompt="",this.aiGeminiResponse="",this.aiDeepSeekResponse="",this.showInProgress=!1}getResponse(){this.aiGeminiResponse="",this.aiDeepSeekResponse="",this.showInProgress=!0,this.PromptAiService.getGeminiResponse(this.prompt).pipe(Ci(t=>console.log(t)),uh(()=>this.showInProgress=!1)).subscribe(t=>this.aiGeminiResponse=t),this.PromptAiService.getDeepseekResponse(this.prompt).pipe(Ci(t=>console.log(t)),uh(()=>this.showInProgress=!1)).subscribe(t=>this.aiDeepSeekResponse=t)}static{this.\u0275fac=function(r){return new(r||n)(Ce(RRe))}}static{this.\u0275cmp=Ds({type:n,selectors:[["app-google-ai"]],standalone:!0,features:[Ln([]),Aa],decls:30,vars:6,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-6","mx-auto","mt-5"],[1,"card"],[1,"card-body","bg-light","bg-gradient"],[1,"card-title"],[1,"mb-3"],["for","prompt",1,"form-label"],["type","text",1,"form-control",3,"ngModelChange","keyup.enter","ngModel"],[1,"btn","btn-primary","bg-gradient",3,"click","disabled"],[1,"text-center","mt-5","justify-content-between"],[1,"col-sm-4","mx-auto"],[1,"card-header"],[1,"card-body","text-start"],["style","white-space: pre-wrap",4,"ngIf"],["class","spinner-border block","role","status",4,"ngIf"],[1,"col-sm-4","container-fluid"],[2,"white-space","pre-wrap"],[1,"form-label"],[1,"card-text"],["role","status",1,"spinner-border","block"],[1,"sr-only"]],template:function(r,i){1&r&&(Ye(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h5",5),hn(6,"Ask Gemini AI"),je(),Ye(7,"div",6)(8,"label",7),hn(9,"Prompt"),je(),Ye(10,"input",8),hc("ngModelChange",function(o){return ih(i.prompt,o)||(i.prompt=o),o}),yn("keyup.enter",function(){return i.getResponse()}),je()(),Ye(11,"div")(12,"button",9),yn("click",function(){return i.getResponse()}),hn(13," Submit "),je()()()()()(),Ye(14,"div",10)(15,"div",1)(16,"div",11)(17,"div",3)(18,"h5",12),hn(19,"Gemini AI Response"),je(),Ye(20,"div",13),wa(21,PRe,5,1,"div",14)(22,MRe,2,0,"div",15),je()()(),Ye(23,"div",16)(24,"div",3)(25,"h5",12),hn(26,"DeepSeek AI Response"),je(),Ye(27,"div",13),wa(28,NRe,5,1,"div",14)(29,kRe,2,0,"div",15),je()()()()()()),2&r&&(Kt(10),dc("ngModel",i.prompt),Kt(2),Dr("disabled",i.showInProgress),Kt(9),Dr("ngIf",!i.showInProgress),Kt(),Dr("ngIf",i.showInProgress),Kt(6),Dr("ngIf",!i.showInProgress),Kt(),Dr("ngIf",i.showInProgress))},dependencies:[ah,yP,gg,fh,ov,pg]})}}return n})();const FRe=["*"];let LRe=(()=>{class n{constructor(){this.amountChanged=new xn,this.isChecked=!0}ngOnChanges(t){t.diner&&this.amountChanged.emit()}get isValid(){return this.form.controls[this.diner.key].valid}validateInput(t,r=null){const i=t.replace(/a/g,"");this.diner.amount=i}incrementValue(){this.diner.amount=+this.diner.amount+1,this.amountChanged.emit()}decrementValue(){this.diner.amount-=1,this.amountChanged.emit()}onValueChange(t){this.amountChanged.emit()}formatAmount(t){return t.toFixed(2)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Ds({type:n,selectors:[["app-diner"]],inputs:{diner:"diner",form:"form"},outputs:{amountChanged:"amountChanged"},standalone:!0,features:[Ln([oG]),Ps,Aa],ngContentSelectors:FRe,decls:13,vars:9,consts:[[1,"row","ml-5","mr-5"],[1,"input-group","col-sm"],["name","diner.key","type","text",3,"ngModelChange","id","ngModel"],["type","button",1,"btn","btn-outline-danger",3,"click","disabled"],["type","text",3,"ngModelChange","id","disabled","ngModel"],["type","button",1,"btn","btn-outline-success",3,"click","disabled"],[1,"col-sm"],[1,"form-check","form-switch"],["type","checkbox",1,"form-check-input",3,"ngModelChange","id","ngModel"]],template:function(r,i){1&r&&(function zH(n){const e=de()[cr][Pi];if(!e.projection){const r=e.projection=function Pd(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}(n?n.length:1,null),i=r.slice();let s=e.child;for(;null!==s;){const o=n?Jae(s,n):0;null!==o&&(i[o]?i[o].projectionNext=s:r[o]=s,i[o]=s),s=s.next}}}(),Ye(0,"div",0)(1,"div",1),function WH(n,e=0,t){const r=de(),i=Bt(),s=_p(i,mt+n,16,null,t||null);null===s.projection&&(s.projection=e),jd(),(!r[xs]||Zu())&&32&~s.flags&&function ore(n,e,t){LU(e[ut],0,e,t,yx(n,t,e),PU(t.parent||e[Pi],t,e))}(i,r,s)}(2),Ye(3,"input",2),hc("ngModelChange",function(o){return ih(i.diner.name,o)||(i.diner.name=o),o}),je()(),Ye(4,"div",1)(5,"button",3),yn("click",function(){return i.decrementValue()}),hn(6,"-"),je(),Ye(7,"input",4),hc("ngModelChange",function(o){return ih(i.diner.amount,o)||(i.diner.amount=o),o}),yn("ngModelChange",function(o){return i.onValueChange(o)}),je(),Ye(8,"button",5),yn("click",function(){return i.incrementValue()}),hn(9,"+"),je()(),Ye(10,"div",6)(11,"div",7)(12,"input",8),hc("ngModelChange",function(o){return ih(i.diner.locked,o)||(i.diner.locked=o),o}),yn("ngModelChange",function(o){return i.onValueChange(o)}),je()()()()),2&r&&(Kt(3),Dr("id",i.diner.key),dc("ngModel",i.diner.name),Kt(2),Dr("disabled",i.diner.locked),Kt(2),Dr("id",i.diner.key)("disabled",i.diner.locked),dc("ngModel",i.diner.amount),Kt(),Dr("disabled",i.diner.locked),Kt(4),Dr("id",i.diner.key),dc("ngModel",i.diner.locked))},dependencies:[ah,nb,fh,gM,ov,gg,pg]})}}return n})(),fK=(()=>{class n{constructor(){this.randomNames=["Nora","Alyson","Tracey ","Jake","Susan","Regina","Louise","Stefan","Bethany","Josephine","Arthur","Bruce","Elle","Ernest","Katie","Mildred","Jonathan","Marcus","Tamara","Sarah-Jane","Winston","Kelly","Denis","Walter","Sara","Celia","Val","Derek","Vijay","Paul ","Kevin","Victor","Samantha","Catriona","Rhys","Juliette","Mitchell","Brett","Katy","Monique","Antoinette","Alicia","Darrell","Norah","Alex","Sunil","Ursula","Wendy","Tomas","Dennis","Paola","Nikia","Anusha","Clare","Toni","Branson","Conor"],this.defaultDiners=[{key:Math.floor(100*Math.random()),name:"",amount:50,order:1,locked:!1},{key:Math.floor(100*Math.random()),name:"",amount:50,order:2,locked:!1},{key:Math.floor(100*Math.random()),name:"",amount:50,order:3,locked:!1},{key:Math.floor(100*Math.random()),name:"",amount:50,order:4,locked:!1},{key:Math.floor(100*Math.random()),name:"",amount:50,order:5,locked:!1},{key:Math.floor(100*Math.random()),name:"",amount:50,order:6,locked:!1}]}getDefaultDiners(){return rt(this.defaultDiners.sort((t,r)=>t.order-r.order))}getTotal(t,r=null){return null!=r?t.filter(i=>i.locked==r).reduce((i,s)=>i+Number(s.amount),0):t?.reduce((i,s)=>i+Number(s.amount),0)}divideAmount(t,r){const i=t.filter(u=>!1===u.locked).length||1,s=this.getTotal(t,!0),a=Math.round((r-s)/i*100)/100;t.forEach(u=>{u.locked||(u.amount=a)});const l=Math.round(100*(r-(s+i*a)))/100;if(0!==l){const u=t.findIndex(c=>!0!==c.locked);t[u].amount=Math.round(100*(t[u].amount+l))/100}}setRandomNames(t){for(let r of t){let i=Math.floor(49*Math.random()+1);r.name=this.randomNames[i]}}getRandomName(){let t=Math.floor(49*Math.random()+1);return this.randomNames[t]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function VRe(n,e){if(1&n){const t=DR();Ye(0,"app-diner",17),yn("amountChanged",function(){return ec(t),tc(Jl().onAmountChanged())}),Ye(1,"button",18),yn("click",function(){const i=ec(t).$implicit;return tc(Jl().onRemoveDiner(i.name))}),yi(2,"i",19),je()()}2&n&&Dr("diner",e.$implicit)}function URe(n,e){if(1&n&&(Ye(0,"div",16)(1,"strong"),hn(2,"saved the following values"),je(),yi(3,"br"),hn(4),je()),2&n){const t=Jl();Kt(4),jw(" ",t.payLoad," ")}}let BRe=(()=>{class n{constructor(t){this.dinersService=t,this.diners=[],this.totalAmount=0,this.updatechart=new xn,this.divideamount=new xn,this.insertdiner=new xn,this.removediner=new xn,this.generateRandomNames=new xn,this.payLoad=""}ngOnInit(){}onSubmit(){this.payLoad=JSON.stringify(this.form.getRawValue())}onAmountChanged(){this.updatechart.emit()}onDivideAmount(){this.divideamount.emit(this.totalAmount)}onGenerateRandomNames(){this.generateRandomNames.emit()}onInsertDiner(){this.insertdiner.emit()}onRemoveDiner(t){this.removediner.emit(t)}static{this.\u0275fac=function(r){return new(r||n)(Ce(fK))}}static{this.\u0275cmp=Ds({type:n,selectors:[["app-dynamic-form"]],inputs:{diners:"diners",totalAmount:"totalAmount"},outputs:{updatechart:"updatechart",divideamount:"divideamount",insertdiner:"insertdiner",removediner:"removediner",generateRandomNames:"generateRandomNames"},standalone:!0,features:[Aa],decls:31,vars:2,consts:[[1,"container","pl-5"],[3,"ngSubmit"],[1,"row","pl-5","pr-5"],[1,"col-sm",2,"text-align","left"],[3,"diner"],[1,"row","ml-5","mr-5"],["type","button",1,"btn","btn-outline-success",3,"click"],[1,"bi","bi-person-plus-fill"],[1,"col-sm"],[1,"form-group",2,"text-align","left"],["for","totalAmount"],["id","totalAmount","name","totalAmount","type","text",1,"form-control",3,"ngModelChange","ngModel"],["id","emailHelp",1,"form-text","text-muted"],[1,"row"],["name","refreshPie","type","button",1,"btn","btn-outline-primary","mt-2",3,"click"],["type","button",1,"btn","btn-outline-primary",3,"click"],[1,"form-row"],[3,"amountChanged","diner"],["type","button",1,"btn","btn-outline-danger",3,"click"],[1,"bi","bi-trash"]],template:function(r,i){1&r&&(Ye(0,"div",0)(1,"form",1),yn("ngSubmit",function(){return i.onSubmit()}),Ye(2,"div",2)(3,"div",3),hn(4," Name "),je(),Ye(5,"div",3),hn(6," Amount "),je(),Ye(7,"div",3),hn(8," Locked "),je()(),function sH(n,e,t,r,i,s,o,a,l,u,c,d,f){ol("NgControlFlow");const y=void 0!==l,E=de(),I=a?o.bind(E[cr][Dn]):o,T=new Hoe(y,I);E[mt+n]=T,wa(n+1,e,t,r,i,s),y&&wa(n+2,l,u,c,d,f)}(9,VRe,3,1,"app-diner",4,iH),Ye(11,"div",5)(12,"div",3)(13,"button",6),yn("click",function(){return i.onInsertDiner()}),yi(14,"i",7),je()(),yi(15,"div",8),Ye(16,"div",8)(17,"div",9)(18,"label",10),hn(19,"Total Amount"),je(),Ye(20,"input",11),hc("ngModelChange",function(o){return ih(i.totalAmount,o)||(i.totalAmount=o),o}),je(),Ye(21,"small",12),hn(22,"The overall cost"),je()()()(),Ye(23,"div",13)(24,"div",8)(25,"button",14),yn("click",function(){return i.onGenerateRandomNames()}),hn(26,"Generate Random Names"),je()(),Ye(27,"div",8)(28,"button",15),yn("click",function(){return i.onDivideAmount()}),hn(29,"Divide Amount"),je()()()(),wa(30,URe,5,1,"div",16),je()),2&r&&(Kt(9),function oH(n){const e=Ke(null),t=Se();try{const r=de(),i=r[Ae],s=r[t];if(void 0===s.liveCollection){const a=t+1,l=TR(r,a),u=bR(i,a);s.liveCollection=new zoe(l,r,u)}else s.liveCollection.reset();const o=s.liveCollection;if(function Uoe(n,e,t){let r,i,s=0,o=n.length-1;if(Array.isArray(e)){let a=e.length-1;for(;s<=o&&s<=a;){const l=n.at(s),u=e[s],c=IR(s,l,s,u,t);if(0!==c){c<0&&n.updateValue(s,u),s++;continue}const d=n.at(o),f=e[a],y=IR(o,d,a,f,t);if(0!==y){y<0&&n.updateValue(o,f),o--,a--;continue}const E=t(s,l),I=t(o,d),T=t(s,u);if(Object.is(T,I)){const P=t(a,f);Object.is(P,E)?(n.swap(s,o),n.updateValue(o,f),a--,o--):n.move(o,s),n.updateValue(s,u),s++}else if(r??=new nH,i??=tH(n,s,o,t),wR(n,r,s,T))n.updateValue(s,u),s++,o++;else if(i.has(T))r.set(E,n.detach(s)),o--;else{const P=n.create(s,e[s]);n.attach(s,P),s++,o++}}for(;s<=a;)eH(n,r,t,s,e[s]),s++}else if(null!=e){const a=e[Symbol.iterator]();let l=a.next();for(;!l.done&&s<=o;){const u=n.at(s),c=l.value,d=IR(s,u,s,c,t);if(0!==d)d<0&&n.updateValue(s,c),s++,l=a.next();else{r??=new nH,i??=tH(n,s,o,t);const f=t(s,c);if(wR(n,r,s,f))n.updateValue(s,c),s++,o++,l=a.next();else if(i.has(f)){const y=t(s,u);r.set(y,n.detach(s)),o--}else n.attach(s,n.create(s,c)),s++,o++,l=a.next()}}for(;!l.done;)eH(n,r,t,n.length,l.value),l=a.next()}for(;s<=o;)n.destroy(n.detach(o--));r?.forEach(a=>{n.destroy(a)})}(o,n,s.trackByFn),o.updateIndexes(),s.hasEmptyBlock){const a=Js(),l=0===o.length;if(Yr(r,a,l)){const u=t+2,c=TR(r,u);if(l){const d=bR(i,u),f=vp(c,d.tView.ssrId);sy(c,iy(r,d,void 0,{dehydratedView:f}),0,yp(d,f))}else Nx(c,0)}}}finally{Ke(e)}}(i.diners),Kt(11),dc("ngModel",i.totalAmount),Kt(10),function rH(n,e,t){ol("NgControlFlow");const r=de(),i=Js(),s=TR(r,mt+n);if(Yr(r,i,e)){const a=Ke(null);try{if(Nx(s,0),-1!==e){const l=bR(r[Ae],mt+e),u=vp(s,l.tView.ssrId);sy(s,iy(r,l,t,{dehydratedView:u}),0,yp(l,u))}}finally{Ke(a)}}else{const a=tB(s,0);void 0!==a&&(a[Dn]=t)}}(30,i.payLoad?30:-1))},dependencies:[ah,nb,Lj,fh,ov,Tj,LRe,gg,pg,tb]})}}return n})();function Gg(n){return n+.5|0}const cu=(n,e,t)=>Math.max(Math.min(n,t),e);function EE(n){return cu(Gg(2.55*n),0,255)}function jc(n){return cu(Gg(255*n),0,255)}function du(n){return cu(Gg(n/2.55)/100,0,1)}function pK(n){return cu(Gg(100*n),0,100)}const ia={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},PO=[..."0123456789ABCDEF"],$Re=n=>PO[15&n],HRe=n=>PO[(240&n)>>4]+PO[15&n],k0=n=>(240&n)>>4==(15&n);const jRe=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function gK(n,e,t){const r=e*Math.min(t,1-t),i=(s,o=(s+n/30)%12)=>t-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function KRe(n,e,t){const r=(i,s=(i+n/60)%6)=>t-t*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function YRe(n,e,t){const r=gK(n,1,.5);let i;for(e+t>1&&(i=1/(e+t),e*=i,t*=i),i=0;i<3;i++)r[i]*=1-e-t,r[i]+=e;return r}function MO(n){const t=n.r/255,r=n.g/255,i=n.b/255,s=Math.max(t,r,i),o=Math.min(t,r,i),a=(s+o)/2;let l,u,c;return s!==o&&(c=s-o,u=a>.5?c/(2-s-o):c/(s+o),l=function QRe(n,e,t,r,i){return n===i?(e-t)/r+(e<t?6:0):e===i?(t-n)/r+2:(n-e)/r+4}(t,r,i,c,s),l=60*l+.5),[0|l,u||0,a]}function NO(n,e,t,r){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,r)).map(jc)}function kO(n,e,t){return NO(gK,n,e,t)}function mK(n){return(n%360+360)%360}const _K={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},yK={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let O0;const iPe=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,OO=n=>n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055,qg=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function F0(n,e,t){if(n){let r=MO(n);r[e]=Math.max(0,Math.min(r[e]+r[e]*t,0===e?360:1)),r=kO(r),n.r=r[0],n.g=r[1],n.b=r[2]}}function vK(n,e){return n&&Object.assign(e||{},n)}function EK(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=jc(n[3]))):(e=vK(n,{r:0,g:0,b:0,a:1})).a=jc(e.a),e}function lPe(n){return"r"===n.charAt(0)?function sPe(n){const e=iPe.exec(n);let r,i,s,t=255;if(e){if(e[7]!==r){const o=+e[7];t=e[8]?EE(o):cu(255*o,0,255)}return r=+e[1],i=+e[3],s=+e[5],r=255&(e[2]?EE(r):cu(r,0,255)),i=255&(e[4]?EE(i):cu(i,0,255)),s=255&(e[6]?EE(s):cu(s,0,255)),{r,g:i,b:s,a:t}}}(n):function ZRe(n){const e=jRe.exec(n);let r,t=255;if(!e)return;e[5]!==r&&(t=e[6]?EE(+e[5]):jc(+e[5]));const i=mK(+e[2]),s=+e[3]/100,o=+e[4]/100;return r="hwb"===e[1]?function JRe(n,e,t){return NO(YRe,n,e,t)}(i,s,o):"hsv"===e[1]?function XRe(n,e,t){return NO(KRe,n,e,t)}(i,s,o):kO(i,s,o),{r:r[0],g:r[1],b:r[2],a:t}}(n)}class jg{constructor(e){if(e instanceof jg)return e;const t=typeof e;let r;"object"===t?r=EK(e):"string"===t&&(r=function WRe(n){var t,e=n.length;return"#"===n[0]&&(4===e||5===e?t={r:255&17*ia[n[1]],g:255&17*ia[n[2]],b:255&17*ia[n[3]],a:5===e?17*ia[n[4]]:255}:(7===e||9===e)&&(t={r:ia[n[1]]<<4|ia[n[2]],g:ia[n[3]]<<4|ia[n[4]],b:ia[n[5]]<<4|ia[n[6]],a:9===e?ia[n[7]]<<4|ia[n[8]]:255})),t}(e)||function rPe(n){O0||(O0=function nPe(){const n={},e=Object.keys(yK),t=Object.keys(_K);let r,i,s,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],i=0;i<t.length;i++)s=t[i],a=a.replace(s,_K[s]);s=parseInt(yK[o],16),n[a]=[s>>16&255,s>>8&255,255&s]}return n}(),O0.transparent=[0,0,0,0]);const e=O0[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:4===e.length?e[3]:255}}(e)||lPe(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=vK(this._rgb);return e&&(e.a=du(e.a)),e}set rgb(e){this._rgb=EK(e)}rgbString(){return this._valid?function oPe(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${du(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}(this._rgb):void 0}hexString(){return this._valid?function qRe(n){var e=(n=>k0(n.r)&&k0(n.g)&&k0(n.b)&&k0(n.a))(n)?$Re:HRe;return n?"#"+e(n.r)+e(n.g)+e(n.b)+((n,e)=>n<255?e(n):"")(n.a,e):void 0}(this._rgb):void 0}hslString(){return this._valid?function tPe(n){if(!n)return;const e=MO(n),t=e[0],r=pK(e[1]),i=pK(e[2]);return n.a<255?`hsla(${t}, ${r}%, ${i}%, ${du(n.a)})`:`hsl(${t}, ${r}%, ${i}%)`}(this._rgb):void 0}mix(e,t){if(e){const r=this.rgb,i=e.rgb;let s;const o=t===s?.5:t,a=2*o-1,l=r.a-i.a,u=((a*l==-1?a:(a+l)/(1+a*l))+1)/2;s=1-u,r.r=255&u*r.r+s*i.r+.5,r.g=255&u*r.g+s*i.g+.5,r.b=255&u*r.b+s*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(e,t){return e&&(this._rgb=function aPe(n,e,t){const r=qg(du(n.r)),i=qg(du(n.g)),s=qg(du(n.b));return{r:jc(OO(r+t*(qg(du(e.r))-r))),g:jc(OO(i+t*(qg(du(e.g))-i))),b:jc(OO(s+t*(qg(du(e.b))-s))),a:n.a+t*(e.a-n.a)}}(this._rgb,e._rgb,t)),this}clone(){return new jg(this.rgb)}alpha(e){return this._rgb.a=jc(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=Gg(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return F0(this._rgb,2,e),this}darken(e){return F0(this._rgb,2,-e),this}saturate(e){return F0(this._rgb,1,e),this}desaturate(e){return F0(this._rgb,1,-e),this}rotate(e){return function ePe(n,e){var t=MO(n);t[0]=mK(t[0]+e),t=kO(t),n.r=t[0],n.g=t[1],n.b=t[2]}(this._rgb,e),this}}function hu(){}const uPe=(()=>{let n=0;return()=>n++})();function cn(n){return null==n}function fr(n){if(Array.isArray&&Array.isArray(n))return!0;const e=Object.prototype.toString.call(n);return"[object"===e.slice(0,7)&&"Array]"===e.slice(-6)}function Xt(n){return null!==n&&"[object Object]"===Object.prototype.toString.call(n)}function Ur(n){return("number"==typeof n||n instanceof Number)&&isFinite(+n)}function Fo(n,e){return Ur(n)?n:e}function Rt(n,e){return typeof n>"u"?e:n}const CK=(n,e)=>"string"==typeof n&&n.endsWith("%")?parseFloat(n)/100*e:+n;function ir(n,e,t){if(n&&"function"==typeof n.call)return n.apply(t,e)}function Mn(n,e,t,r){let i,s,o;if(fr(n))if(s=n.length,r)for(i=s-1;i>=0;i--)e.call(t,n[i],i);else for(i=0;i<s;i++)e.call(t,n[i],i);else if(Xt(n))for(o=Object.keys(n),s=o.length,i=0;i<s;i++)e.call(t,n[o[i]],o[i])}function L0(n,e){let t,r,i,s;if(!n||!e||n.length!==e.length)return!1;for(t=0,r=n.length;t<r;++t)if(i=n[t],s=e[t],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function V0(n){if(fr(n))return n.map(V0);if(Xt(n)){const e=Object.create(null),t=Object.keys(n),r=t.length;let i=0;for(;i<r;++i)e[t[i]]=V0(n[t[i]]);return e}return n}function IK(n){return-1===["__proto__","prototype","constructor"].indexOf(n)}function dPe(n,e,t,r){if(!IK(n))return;const i=e[n],s=t[n];Xt(i)&&Xt(s)?CE(i,s,r):e[n]=V0(s)}function CE(n,e,t){const r=fr(e)?e:[e],i=r.length;if(!Xt(n))return n;const s=(t=t||{}).merger||dPe;let o;for(let a=0;a<i;++a){if(o=r[a],!Xt(o))continue;const l=Object.keys(o);for(let u=0,c=l.length;u<c;++u)s(l[u],n,o,t)}return n}function IE(n,e){return CE(n,e,{merger:hPe})}function hPe(n,e,t){if(!IK(n))return;const r=e[n],i=t[n];Xt(r)&&Xt(i)?IE(r,i):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=V0(i))}const wK={"":n=>n,x:n=>n.x,y:n=>n.y};function Kc(n,e){return(wK[e]||(wK[e]=function pPe(n){const e=function fPe(n){const e=n.split("."),t=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(t.push(r),r="");return t}(n);return t=>{for(const r of e){if(""===r)break;t=t&&t[r]}return t}}(e)))(n)}function FO(n){return n.charAt(0).toUpperCase()+n.slice(1)}const wE=n=>typeof n<"u",Yc=n=>"function"==typeof n,TK=(n,e)=>{if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0},pr=Math.PI,gr=2*pr,mPe=gr+pr,U0=Number.POSITIVE_INFINITY,_Pe=pr/180,Xr=pr/2,Fh=pr/4,bK=2*pr/3,Qc=Math.log10,Sl=Math.sign;function TE(n,e,t){return Math.abs(n-e)<t}function AK(n){const e=Math.round(n);n=TE(n,e,n/1e3)?e:n;const t=Math.pow(10,Math.floor(Qc(n))),r=n/t;return(r<=1?1:r<=2?2:r<=5?5:10)*t}function Kg(n){return!isNaN(parseFloat(n))&&isFinite(n)}function SK(n,e,t){let r,i,s;for(r=0,i=n.length;r<i;r++)s=n[r][t],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function $a(n){return n*(pr/180)}function LO(n){return n*(180/pr)}function DK(n){if(!Ur(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function xK(n,e){const t=e.x-n.x,r=e.y-n.y,i=Math.sqrt(t*t+r*r);let s=Math.atan2(r,t);return s<-.5*pr&&(s+=gr),{angle:s,distance:i}}function VO(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function EPe(n,e){return(n-e+mPe)%gr-pr}function Lo(n){return(n%gr+gr)%gr}function bE(n,e,t,r){const i=Lo(n),s=Lo(e),o=Lo(t),a=Lo(s-i),l=Lo(o-i),u=Lo(i-s),c=Lo(i-o);return i===s||i===o||r&&s===o||a>l&&u<c}function Ui(n,e,t){return Math.max(e,Math.min(t,n))}function fu(n,e,t,r=1e-6){return n>=Math.min(e,t)-r&&n<=Math.max(e,t)+r}function UO(n,e,t){t=t||(o=>n[o]<e);let s,r=n.length-1,i=0;for(;r-i>1;)s=i+r>>1,t(s)?i=s:r=s;return{lo:i,hi:r}}const pu=(n,e,t,r)=>UO(n,t,r?i=>{const s=n[i][e];return s<t||s===t&&n[i+1][e]===t}:i=>n[i][e]<t),IPe=(n,e,t)=>UO(n,t,r=>n[r][e]>=t),RK=["push","pop","shift","splice","unshift"];function PK(n,e){const t=n._chartjs;if(!t)return;const r=t.listeners,i=r.indexOf(e);-1!==i&&r.splice(i,1),!(r.length>0)&&(RK.forEach(s=>{delete n[s]}),delete n._chartjs)}function MK(n){const e=new Set(n);return e.size===n.length?n:Array.from(e)}const NK=typeof window>"u"?function(n){return n()}:window.requestAnimationFrame;function kK(n,e){let t=[],r=!1;return function(...i){t=i,r||(r=!0,NK.call(window,()=>{r=!1,n.apply(e,t)}))}}const BO=n=>"start"===n?"left":"end"===n?"right":"center",ds=(n,e,t)=>"start"===n?e:"end"===n?t:(e+t)/2;function OK(n,e,t){const r=e.length;let i=0,s=r;if(n._sorted){const{iScale:o,_parsed:a}=n,l=o.axis,{min:u,max:c,minDefined:d,maxDefined:f}=o.getUserBounds();d&&(i=Ui(Math.min(pu(a,l,u).lo,t?r:pu(e,l,o.getPixelForValue(u)).lo),0,r-1)),s=f?Ui(Math.max(pu(a,o.axis,c,!0).hi+1,t?0:pu(e,l,o.getPixelForValue(c),!0).hi+1),i,r)-i:r-i}return{start:i,count:s}}function FK(n){const{xScale:e,yScale:t,_scaleRanges:r}=n,i={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!r)return n._scaleRanges=i,!0;const s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==t.min||r.ymax!==t.max;return Object.assign(r,i),s}const B0=n=>0===n||1===n,LK=(n,e,t)=>-Math.pow(2,10*(n-=1))*Math.sin((n-e)*gr/t),VK=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*gr/t)+1,AE={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>1-Math.cos(n*Xr),easeOutSine:n=>Math.sin(n*Xr),easeInOutSine:n=>-.5*(Math.cos(pr*n)-1),easeInExpo:n=>0===n?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>1===n?1:1-Math.pow(2,-10*n),easeInOutExpo:n=>B0(n)?n:n<.5?.5*Math.pow(2,10*(2*n-1)):.5*(2-Math.pow(2,-10*(2*n-1))),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>B0(n)?n:LK(n,.075,.3),easeOutElastic:n=>B0(n)?n:VK(n,.075,.3),easeInOutElastic:n=>B0(n)?n:n<.5?.5*LK(2*n,.1125,.45):.5+.5*VK(2*n-1,.1125,.45),easeInBack:n=>n*n*(2.70158*n-1.70158),easeOutBack:n=>(n-=1)*n*(2.70158*n+1.70158)+1,easeInOutBack(n){let e=1.70158;return(n/=.5)<1?n*n*((1+(e*=1.525))*n-e)*.5:.5*((n-=2)*n*((1+(e*=1.525))*n+e)+2)},easeInBounce:n=>1-AE.easeOutBounce(1-n),easeOutBounce:n=>n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375,easeInOutBounce:n=>n<.5?.5*AE.easeInBounce(2*n):.5*AE.easeOutBounce(2*n-1)+.5};function $O(n){if(n&&"object"==typeof n){const e=n.toString();return"[object CanvasPattern]"===e||"[object CanvasGradient]"===e}return!1}function UK(n){return $O(n)?n:new jg(n)}function HO(n){return $O(n)?n:new jg(n).saturate(.5).darken(.1).hexString()}const SPe=["x","y","borderWidth","radius","tension"],DPe=["color","borderColor","backgroundColor"],BK=new Map;function SE(n,e,t){return function PPe(n,e){e=e||{};const t=n+JSON.stringify(e);let r=BK.get(t);return r||(r=new Intl.NumberFormat(n,e),BK.set(t,r)),r}(e,t).format(n)}const $K={values:n=>fr(n)?n:""+n,numeric(n,e,t){if(0===n)return"0";const r=this.chart.options.locale;let i,s=n;if(t.length>1){const u=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(u<1e-4||u>1e15)&&(i="scientific"),s=function MPe(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}(n,t)}const o=Qc(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),SE(n,r,l)},logarithmic(n,e,t){if(0===n)return"0";const r=t[e].significand||n/Math.pow(10,Math.floor(Qc(n)));return[1,2,3,5,10,15].includes(r)||e>.8*t.length?$K.numeric.call(this,n,e,t):""}};var $0={formatters:$K};const Lh=Object.create(null),zO=Object.create(null);function DE(n,e){if(!e)return n;const t=e.split(".");for(let r=0,i=t.length;r<i;++r){const s=t[r];n=n[s]||(n[s]=Object.create(null))}return n}function WO(n,e,t){return"string"==typeof e?CE(DE(n,e),t):CE(DE(n,""),e)}class kPe{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>HO(i.backgroundColor),this.hoverBorderColor=(r,i)=>HO(i.borderColor),this.hoverColor=(r,i)=>HO(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return WO(this,e,t)}get(e){return DE(this,e)}describe(e,t){return WO(zO,e,t)}override(e,t){return WO(Lh,e,t)}route(e,t,r,i){const s=DE(this,e),o=DE(this,r),a="_"+t;Object.defineProperties(s,{[a]:{value:s[t],writable:!0},[t]:{enumerable:!0,get(){const l=this[a],u=o[i];return Xt(l)?Object.assign({},u,l):Rt(l,u)},set(l){this[a]=l}}})}apply(e){e.forEach(t=>t(this))}}var Cr=new kPe({_scriptable:n=>!n.startsWith("on"),_indexable:n=>"events"!==n,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function xPe(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),n.set("animations",{colors:{type:"color",properties:DPe},numbers:{type:"number",properties:SPe}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function RPe(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function NPe(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:$0.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function H0(n,e,t,r,i){let s=e[i];return s||(s=e[i]=n.measureText(i).width,t.push(i)),s>r&&(r=s),r}function FPe(n,e,t,r){let i=(r=r||{}).data=r.data||{},s=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(i=r.data={},s=r.garbageCollect=[],r.font=e),n.save(),n.font=e;let o=0;const a=t.length;let l,u,c,d,f;for(l=0;l<a;l++)if(d=t[l],null==d||fr(d)){if(fr(d))for(u=0,c=d.length;u<c;u++)f=d[u],null!=f&&!fr(f)&&(o=H0(n,i,s,o,f))}else o=H0(n,i,s,o,d);n.restore();const y=s.length/2;if(y>t.length){for(l=0;l<y;l++)delete i[s[l]];s.splice(0,y)}return o}function Vh(n,e,t){const r=n.currentDevicePixelRatio,i=0!==t?Math.max(t/2,.5):0;return Math.round((e-i)*r)/r+i}function HK(n,e){!e&&!n||((e=e||n.getContext("2d")).save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function GO(n,e,t,r){zK(n,e,t,r,null)}function zK(n,e,t,r,i){let s,o,a,l,u,c,d,f;const y=e.pointStyle,E=e.rotation,I=e.radius;let T=(E||0)*_Pe;if(y&&"object"==typeof y&&(s=y.toString(),"[object HTMLImageElement]"===s||"[object HTMLCanvasElement]"===s))return n.save(),n.translate(t,r),n.rotate(T),n.drawImage(y,-y.width/2,-y.height/2,y.width,y.height),void n.restore();if(!(isNaN(I)||I<=0)){switch(n.beginPath(),y){default:i?n.ellipse(t,r,i/2,I,0,0,gr):n.arc(t,r,I,0,gr),n.closePath();break;case"triangle":c=i?i/2:I,n.moveTo(t+Math.sin(T)*c,r-Math.cos(T)*I),T+=bK,n.lineTo(t+Math.sin(T)*c,r-Math.cos(T)*I),T+=bK,n.lineTo(t+Math.sin(T)*c,r-Math.cos(T)*I),n.closePath();break;case"rectRounded":u=.516*I,l=I-u,o=Math.cos(T+Fh)*l,d=Math.cos(T+Fh)*(i?i/2-u:l),a=Math.sin(T+Fh)*l,f=Math.sin(T+Fh)*(i?i/2-u:l),n.arc(t-d,r-a,u,T-pr,T-Xr),n.arc(t+f,r-o,u,T-Xr,T),n.arc(t+d,r+a,u,T,T+Xr),n.arc(t-f,r+o,u,T+Xr,T+pr),n.closePath();break;case"rect":if(!E){l=Math.SQRT1_2*I,c=i?i/2:l,n.rect(t-c,r-l,2*c,2*l);break}T+=Fh;case"rectRot":d=Math.cos(T)*(i?i/2:I),o=Math.cos(T)*I,a=Math.sin(T)*I,f=Math.sin(T)*(i?i/2:I),n.moveTo(t-d,r-a),n.lineTo(t+f,r-o),n.lineTo(t+d,r+a),n.lineTo(t-f,r+o),n.closePath();break;case"crossRot":T+=Fh;case"cross":d=Math.cos(T)*(i?i/2:I),o=Math.cos(T)*I,a=Math.sin(T)*I,f=Math.sin(T)*(i?i/2:I),n.moveTo(t-d,r-a),n.lineTo(t+d,r+a),n.moveTo(t+f,r-o),n.lineTo(t-f,r+o);break;case"star":d=Math.cos(T)*(i?i/2:I),o=Math.cos(T)*I,a=Math.sin(T)*I,f=Math.sin(T)*(i?i/2:I),n.moveTo(t-d,r-a),n.lineTo(t+d,r+a),n.moveTo(t+f,r-o),n.lineTo(t-f,r+o),T+=Fh,d=Math.cos(T)*(i?i/2:I),o=Math.cos(T)*I,a=Math.sin(T)*I,f=Math.sin(T)*(i?i/2:I),n.moveTo(t-d,r-a),n.lineTo(t+d,r+a),n.moveTo(t+f,r-o),n.lineTo(t-f,r+o);break;case"line":o=i?i/2:Math.cos(T)*I,a=Math.sin(T)*I,n.moveTo(t-o,r-a),n.lineTo(t+o,r+a);break;case"dash":n.moveTo(t,r),n.lineTo(t+Math.cos(T)*(i?i/2:I),r+Math.sin(T)*I);break;case!1:n.closePath()}n.fill(),e.borderWidth>0&&n.stroke()}}function gu(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function z0(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function W0(n){n.restore()}function LPe(n,e,t,r,i){if(!e)return n.lineTo(t.x,t.y);if("middle"===i){const s=(e.x+t.x)/2;n.lineTo(s,e.y),n.lineTo(s,t.y)}else"after"===i!=!!r?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function VPe(n,e,t,r){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?t.cp2x:t.cp1x,r?t.cp2y:t.cp1y,t.x,t.y)}function BPe(n,e,t,r,i){if(i.strikethrough||i.underline){const s=n.measureText(r),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,u=t+s.actualBoundingBoxDescent,c=i.strikethrough?(t-s.actualBoundingBoxAscent+u)/2:u;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=i.decorationWidth||2,n.moveTo(o,c),n.lineTo(a,c),n.stroke()}}function $Pe(n,e){const t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function Uh(n,e,t,r,i,s={}){const o=fr(e)?e:[e],a=s.strokeWidth>0&&""!==s.strokeColor;let l,u;for(n.save(),n.font=i.string,function UPe(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),cn(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}(n,s),l=0;l<o.length;++l)u=o[l],s.backdrop&&$Pe(n,s.backdrop),a&&(s.strokeColor&&(n.strokeStyle=s.strokeColor),cn(s.strokeWidth)||(n.lineWidth=s.strokeWidth),n.strokeText(u,t,r,s.maxWidth)),n.fillText(u,t,r,s.maxWidth),BPe(n,t,r,u,s),r+=Number(i.lineHeight);n.restore()}function xE(n,e){const{x:t,y:r,w:i,h:s,radius:o}=e;n.arc(t+o.topLeft,r+o.topLeft,o.topLeft,1.5*pr,pr,!0),n.lineTo(t,r+s-o.bottomLeft),n.arc(t+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,pr,Xr,!0),n.lineTo(t+i-o.bottomRight,r+s),n.arc(t+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,Xr,0,!0),n.lineTo(t+i,r+o.topRight),n.arc(t+i-o.topRight,r+o.topRight,o.topRight,0,-Xr,!0),n.lineTo(t+o.topLeft,r)}const HPe=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,zPe=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function WPe(n,e){const t=(""+n).match(HPe);if(!t||"normal"===t[1])return 1.2*e;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100}return e*n}const GPe=n=>+n||0;function qO(n,e){const t={},r=Xt(e),i=r?Object.keys(e):e,s=Xt(n)?r?o=>Rt(n[o],n[e[o]]):o=>n[o]:()=>n;for(const o of i)t[o]=GPe(s(o));return t}function WK(n){return qO(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Bh(n){return qO(n,["topLeft","topRight","bottomLeft","bottomRight"])}function hs(n){const e=WK(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function bi(n,e){let t=Rt((n=n||{}).size,(e=e||Cr.font).size);"string"==typeof t&&(t=parseInt(t,10));let r=Rt(n.style,e.style);r&&!(""+r).match(zPe)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:Rt(n.family,e.family),lineHeight:WPe(Rt(n.lineHeight,e.lineHeight),t),size:t,style:r,weight:Rt(n.weight,e.weight),string:""};return i.string=function OPe(n){return!n||cn(n.size)||cn(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}(i),i}function RE(n,e,t,r){let s,o,a,i=!0;for(s=0,o=n.length;s<o;++s)if(a=n[s],void 0!==a&&(void 0!==e&&"function"==typeof a&&(a=a(e),i=!1),void 0!==t&&fr(a)&&(a=a[t%a.length],i=!1),void 0!==a))return r&&!i&&(r.cacheable=!1),a}function Jc(n,e){return Object.assign(Object.create(n),e)}function jO(n,e=[""],t,r,i=(()=>n[0])){const s=t||n;typeof r>"u"&&(r=YK("_fallback",n));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:s,_fallback:r,_getTarget:i,override:a=>jO([a,...n],e,s,r)};return new Proxy(o,{deleteProperty:(a,l)=>(delete a[l],delete a._keys,delete n[0][l],!0),get:(a,l)=>qK(a,l,()=>function eMe(n,e,t,r){let i;for(const s of e)if(i=YK(jPe(s,n),t),typeof i<"u")return KO(n,i)?YO(t,r,n,i):i}(l,e,n,a)),getOwnPropertyDescriptor:(a,l)=>Reflect.getOwnPropertyDescriptor(a._scopes[0],l),getPrototypeOf:()=>Reflect.getPrototypeOf(n[0]),has:(a,l)=>QK(a).includes(l),ownKeys:a=>QK(a),set(a,l,u){const c=a._storage||(a._storage=i());return a[l]=c[l]=u,delete a._keys,!0}})}function Yg(n,e,t,r){const i={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:GK(n,r),setContext:s=>Yg(n,s,t,r),override:s=>Yg(n.override(s),e,t,r)};return new Proxy(i,{deleteProperty:(s,o)=>(delete s[o],delete n[o],!0),get:(s,o,a)=>qK(s,o,()=>function KPe(n,e,t){const{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=n;let a=r[e];return Yc(a)&&o.isScriptable(e)&&(a=function YPe(n,e,t,r){const{_proxy:i,_context:s,_subProxy:o,_stack:a}=t;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);a.add(n);let l=e(s,o||r);return a.delete(n),KO(n,l)&&(l=YO(i._scopes,i,n,l)),l}(e,a,n,t)),fr(a)&&a.length&&(a=function QPe(n,e,t,r){const{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=t;if(typeof s.index<"u"&&r(n))return e[s.index%e.length];if(Xt(e[0])){const l=e,u=i._scopes.filter(c=>c!==l);e=[];for(const c of l){const d=YO(u,i,n,c);e.push(Yg(d,s,o&&o[n],a))}}return e}(e,a,n,o.isIndexable)),KO(e,a)&&(a=Yg(a,i,s&&s[e],o)),a}(s,o,a)),getOwnPropertyDescriptor:(s,o)=>s._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o),getPrototypeOf:()=>Reflect.getPrototypeOf(n),has:(s,o)=>Reflect.has(n,o),ownKeys:()=>Reflect.ownKeys(n),set:(s,o,a)=>(n[o]=a,delete s[o],!0)})}function GK(n,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=n;return{allKeys:i,scriptable:t,indexable:r,isScriptable:Yc(t)?t:()=>t,isIndexable:Yc(r)?r:()=>r}}const jPe=(n,e)=>n?n+FO(e):e,KO=(n,e)=>Xt(e)&&"adapters"!==n&&(null===Object.getPrototypeOf(e)||e.constructor===Object);function qK(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e)||"constructor"===e)return n[e];const r=t();return n[e]=r,r}function jK(n,e,t){return Yc(n)?n(e,t):n}const JPe=(n,e)=>!0===n?e:"string"==typeof n?Kc(e,n):void 0;function XPe(n,e,t,r,i){for(const s of e){const o=JPe(t,s);if(o){n.add(o);const a=jK(o._fallback,t,i);if(typeof a<"u"&&a!==t&&a!==r)return a}else if(!1===o&&typeof r<"u"&&t!==r)return null}return!1}function YO(n,e,t,r){const i=e._rootScopes,s=jK(e._fallback,t,r),o=[...n,...i],a=new Set;a.add(r);let l=KK(a,o,t,s||t,r);return!(null===l||typeof s<"u"&&s!==t&&(l=KK(a,o,s,l,r),null===l))&&jO(Array.from(a),[""],i,s,()=>function ZPe(n,e,t){const r=n._getTarget();e in r||(r[e]={});const i=r[e];return fr(i)&&Xt(t)?t:i||{}}(e,t,r))}function KK(n,e,t,r,i){for(;t;)t=XPe(n,e,t,r,i);return t}function YK(n,e){for(const t of e){if(!t)continue;const r=t[n];if(typeof r<"u")return r}}function QK(n){let e=n._keys;return e||(e=n._keys=function tMe(n){const e=new Set;for(const t of n)for(const r of Object.keys(t).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}(n._scopes)),e}function JK(n,e,t,r){const{iScale:i}=n,{key:s="r"}=this._parsing,o=new Array(r);let a,l,u,c;for(a=0,l=r;a<l;++a)u=a+t,c=e[u],o[a]={r:i.parse(Kc(c,s),u)};return o}const nMe=Number.EPSILON||1e-14,Qg=(n,e)=>e<n.length&&!n[e].skip&&n[e],XK=n=>"x"===n?"y":"x";function rMe(n,e,t,r){const i=n.skip?e:n,s=e,o=t.skip?e:t,a=VO(s,i),l=VO(o,s);let u=a/(a+l),c=l/(a+l);u=isNaN(u)?0:u,c=isNaN(c)?0:c;const d=r*u,f=r*c;return{previous:{x:s.x-d*(o.x-i.x),y:s.y-d*(o.y-i.y)},next:{x:s.x+f*(o.x-i.x),y:s.y+f*(o.y-i.y)}}}function G0(n,e,t){return Math.max(Math.min(n,t),e)}function lMe(n,e,t,r,i){let s,o,a,l;if(e.spanGaps&&(n=n.filter(u=>!u.skip)),"monotone"===e.cubicInterpolationMode)!function oMe(n,e="x"){const t=XK(e),r=n.length,i=Array(r).fill(0),s=Array(r);let o,a,l,u=Qg(n,0);for(o=0;o<r;++o)if(a=l,l=u,u=Qg(n,o+1),l){if(u){const c=u[e]-l[e];i[o]=0!==c?(u[t]-l[t])/c:0}s[o]=a?u?Sl(i[o-1])!==Sl(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}(function iMe(n,e,t){const r=n.length;let i,s,o,a,l,u=Qg(n,0);for(let c=0;c<r-1;++c)if(l=u,u=Qg(n,c+1),l&&u){if(TE(e[c],0,nMe)){t[c]=t[c+1]=0;continue}i=t[c]/e[c],s=t[c+1]/e[c],a=Math.pow(i,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),t[c]=i*o*e[c],t[c+1]=s*o*e[c])}})(n,i,s),function sMe(n,e,t="x"){const r=XK(t),i=n.length;let s,o,a,l=Qg(n,0);for(let u=0;u<i;++u){if(o=a,a=l,l=Qg(n,u+1),!a)continue;const c=a[t],d=a[r];o&&(s=(c-o[t])/3,a[`cp1${t}`]=c-s,a[`cp1${r}`]=d-s*e[u]),l&&(s=(l[t]-c)/3,a[`cp2${t}`]=c+s,a[`cp2${r}`]=d+s*e[u])}}(n,s,e)}(n,i);else{let u=r?n[n.length-1]:n[0];for(s=0,o=n.length;s<o;++s)a=n[s],l=rMe(u,a,n[Math.min(s+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,u=a}e.capBezierPoints&&function aMe(n,e){let t,r,i,s,o,a=gu(n[0],e);for(t=0,r=n.length;t<r;++t)o=s,s=a,a=t<r-1&&gu(n[t+1],e),s&&(i=n[t],o&&(i.cp1x=G0(i.cp1x,e.left,e.right),i.cp1y=G0(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=G0(i.cp2x,e.left,e.right),i.cp2y=G0(i.cp2y,e.top,e.bottom)))}(n,t)}function QO(){return typeof window<"u"&&typeof document<"u"}function JO(n){let e=n.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e}function q0(n,e,t){let r;return"string"==typeof n?(r=parseInt(n,10),-1!==n.indexOf("%")&&(r=r/100*e.parentNode[t])):r=n,r}const j0=n=>n.ownerDocument.defaultView.getComputedStyle(n,null),cMe=["top","right","bottom","left"];function $h(n,e,t){const r={};t=t?"-"+t:"";for(let i=0;i<4;i++){const s=cMe[i];r[s]=parseFloat(n[e+"-"+s+t])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const dMe=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function Hh(n,e){if("native"in n)return n;const{canvas:t,currentDevicePixelRatio:r}=e,i=j0(t),s="border-box"===i.boxSizing,o=$h(i,"padding"),a=$h(i,"border","width"),{x:l,y:u,box:c}=function hMe(n,e){const t=n.touches,r=t&&t.length?t[0]:n,{offsetX:i,offsetY:s}=r;let a,l,o=!1;if(dMe(i,s,n.target))a=i,l=s;else{const u=e.getBoundingClientRect();a=r.clientX-u.left,l=r.clientY-u.top,o=!0}return{x:a,y:l,box:o}}(n,t),d=o.left+(c&&a.left),f=o.top+(c&&a.top);let{width:y,height:E}=e;return s&&(y-=o.width+a.width,E-=o.height+a.height),{x:Math.round((l-d)/y*t.width/r),y:Math.round((u-f)/E*t.height/r)}}const K0=n=>Math.round(10*n)/10;function ZK(n,e,t){const r=e||1,i=Math.floor(n.height*r),s=Math.floor(n.width*r);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const o=n.canvas;return o.style&&(t||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),(n.currentDevicePixelRatio!==r||o.height!==i||o.width!==s)&&(n.currentDevicePixelRatio=r,o.height=i,o.width=s,n.ctx.setTransform(r,0,0,r,0,0),!0)}const gMe=function(){let n=!1;try{const e={get passive(){return n=!0,!1}};QO()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n}();function e7(n,e){const t=function uMe(n,e){return j0(n).getPropertyValue(e)}(n,e),r=t&&t.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function zh(n,e,t,r){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function mMe(n,e,t,r){return{x:n.x+t*(e.x-n.x),y:"middle"===r?t<.5?n.y:e.y:"after"===r?t<1?n.y:e.y:t>0?e.y:n.y}}function _Me(n,e,t,r){const i={x:n.cp2x,y:n.cp2y},s={x:e.cp1x,y:e.cp1y},o=zh(n,i,t),a=zh(i,s,t),l=zh(s,e,t),u=zh(o,a,t),c=zh(a,l,t);return zh(u,c,t)}function Jg(n,e,t){return n?function(n,e){return{x:t=>n+n+e-t,setWidth(t){e=t},textAlign:t=>"center"===t?t:"right"===t?"left":"right",xPlus:(t,r)=>t-r,leftForLtr:(t,r)=>t-r}}(e,t):{x:n=>n,setWidth(n){},textAlign:n=>n,xPlus:(n,e)=>n+e,leftForLtr:(n,e)=>n}}function t7(n,e){let t,r;("ltr"===e||"rtl"===e)&&(t=n.canvas.style,r=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=r)}function n7(n,e){void 0!==e&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function r7(n){return"angle"===n?{between:bE,compare:EPe,normalize:Lo}:{between:fu,compare:(e,t)=>e-t,normalize:e=>e}}function i7({start:n,end:e,count:t,loop:r,style:i}){return{start:n%t,end:e%t,loop:r&&(e-n+1)%t==0,style:i}}function s7(n,e,t){if(!t)return[n];const{property:r,start:i,end:s}=t,o=e.length,{compare:a,between:l,normalize:u}=r7(r),{start:c,end:d,loop:f,style:y}=function EMe(n,e,t){const{property:r,start:i,end:s}=t,{between:o,normalize:a}=r7(r),l=e.length;let f,y,{start:u,end:c,loop:d}=n;if(d){for(u+=l,c+=l,f=0,y=l;f<y&&o(a(e[u%l][r]),i,s);++f)u--,c--;u%=l,c%=l}return c<u&&(c+=l),{start:u,end:c,loop:d,style:n.style}}(n,e,t),E=[];let P,x,V,I=!1,T=null;for(let N=c,F=c;N<=d;++N)x=e[N%o],!x.skip&&(P=u(x[r]),P!==V&&(I=l(P,i,s),null===T&&(I||l(i,V,P)&&0!==a(i,V))&&(T=0===a(P,i)?N:F),null!==T&&(!I||0===a(s,P)||l(s,V,P))&&(E.push(i7({start:T,end:N,loop:f,count:o,style:y})),T=null),F=N,V=P));return null!==T&&E.push(i7({start:T,end:d,loop:f,count:o,style:y})),E}function o7(n,e){const t=[],r=n.segments;for(let i=0;i<r.length;i++){const s=s7(r[i],n.points,e);s.length&&t.push(...s)}return t}function l7(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function bMe(n,e){if(!e)return!1;const t=[],r=function(i,s){return $O(s)?(t.includes(s)||t.push(s),t.indexOf(s)):s};return JSON.stringify(n,r)!==JSON.stringify(e,r)}class AMe{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,r,i){const o=t.duration;t.listeners[i].forEach(a=>a({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(r-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=NK.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let l,o=s.length-1,a=!1;for(;o>=0;--o)l=s[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(i.draw(),this._notify(i,r,e,"progress")),s.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),t+=s.length}),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let r=t.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,r)),r}listen(e,t,r){this._getAnims(e).listeners[t].push(r)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const r=t.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var mu=new AMe;const u7="transparent",SMe={boolean:(n,e,t)=>t>.5?e:n,color(n,e,t){const r=UK(n||u7),i=r.valid&&UK(e||u7);return i&&i.valid?i.mix(r,t).hexString():e},number:(n,e,t)=>n+(e-n)*t};class DMe{constructor(e,t,r,i){const s=t[r];i=RE([e.to,i,s,e.from]);const o=RE([e.from,s,i]);this._active=!0,this._fn=e.fn||SMe[e.type||typeof o],this._easing=AE[e.easing]||AE.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,t,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,o=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=RE([e.to,t,i,e.from]),this._from=RE([e.from,i,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,r=this._duration,i=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||t<r),!this._active)return this._target[i]=a,void this._notify(!0);t<0?this._target[i]=s:(l=t/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(s,a,l))}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,r)=>{e.push({res:t,rej:r})})}_notify(e){const t=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][t]()}}class c7{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!Xt(e))return;const t=Object.keys(Cr.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const s=e[i];if(!Xt(s))return;const o={};for(const a of t)o[a]=s[a];(fr(s.properties)&&s.properties||[i]).forEach(a=>{(a===i||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,t){const r=t.options,i=function RMe(n,e){if(!e)return;let t=n.options;if(t)return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t;n.options=e}(e,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&function xMe(n,e){const t=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const s=n[r[i]];s&&s.active()&&t.push(s.wait())}return Promise.all(t)}(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,t){const r=this._properties,i=[],s=e.$animations||(e.$animations={}),o=Object.keys(t),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const u=o[l];if("$"===u.charAt(0))continue;if("options"===u){i.push(...this._animateOptions(e,t));continue}const c=t[u];let d=s[u];const f=r.get(u);if(d){if(f&&d.active()){d.update(f,c,a);continue}d.cancel()}f&&f.duration?(s[u]=d=new DMe(f,e,u,c),i.push(d)):e[u]=c}return i}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const r=this._createAnimations(e,t);return r.length?(mu.add(this._chart,r),!0):void 0}}function d7(n,e){const t=n&&n.options||{},r=t.reverse,i=void 0===t.min?e:0,s=void 0===t.max?e:0;return{start:r?s:i,end:r?i:s}}function h7(n,e){const t=[],r=n._getSortedDatasetMetas(e);let i,s;for(i=0,s=r.length;i<s;++i)t.push(r[i].index);return t}function f7(n,e,t,r={}){const i=n.keys,s="single"===r.mode;let o,a,l,u;if(null===e)return;let c=!1;for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===t){if(c=!0,r.all)continue;break}u=n.values[l],Ur(u)&&(s||0===e||Sl(e)===Sl(u))&&(e+=u)}return c||r.all?e:0}function XO(n,e){const t=n&&n.options.stacked;return t||void 0===t&&void 0!==e.stack}function FMe(n,e,t){const r=n[e]||(n[e]={});return r[t]||(r[t]={})}function p7(n,e,t,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const s=n[i.index];if(t&&s>0||!t&&s<0)return i.index}return null}function g7(n,e){const{chart:t,_cachedMeta:r}=n,i=t._stacks||(t._stacks={}),{iScale:s,vScale:o,index:a}=r,l=s.axis,u=o.axis,c=function kMe(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}(s,o,r),d=e.length;let f;for(let y=0;y<d;++y){const E=e[y],{[l]:I,[u]:T}=E;f=(E._stacks||(E._stacks={}))[u]=FMe(i,c,I),f[a]=T,f._top=p7(f,o,!0,r.type),f._bottom=p7(f,o,!1,r.type),(f._visualValues||(f._visualValues={}))[a]=T}}function ZO(n,e){const t=n.scales;return Object.keys(t).filter(r=>t[r].axis===e).shift()}function PE(n,e){const t=n.controller.index,r=n.vScale&&n.vScale.axis;if(r){e=e||n._parsed;for(const i of e){const s=i._stacks;if(!s||void 0===s[r]||void 0===s[r][t])return;delete s[r][t],void 0!==s[r]._visualValues&&void 0!==s[r]._visualValues[t]&&delete s[r]._visualValues[t]}}}const e1=n=>"reset"===n||"none"===n,m7=(n,e)=>e?n:Object.assign({},n);let Xc=(()=>class n{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,r){this.chart=t,this._ctx=t.ctx,this.index=r,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=XO(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&PE(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,r=this._cachedMeta,i=this.getDataset(),s=(f,y,E,I)=>"x"===f?y:"r"===f?I:E,o=r.xAxisID=Rt(i.xAxisID,ZO(t,"x")),a=r.yAxisID=Rt(i.yAxisID,ZO(t,"y")),l=r.rAxisID=Rt(i.rAxisID,ZO(t,"r")),u=r.indexAxis,c=r.iAxisID=s(u,o,a,l),d=r.vAxisID=s(u,a,o,l);r.xScale=this.getScaleForId(o),r.yScale=this.getScaleForId(a),r.rScale=this.getScaleForId(l),r.iScale=this.getScaleForId(c),r.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const r=this._cachedMeta;return t===r.iScale?r.vScale:r.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&PK(this._data,this),t._stacked&&PE(t)}_dataCheck(){const t=this.getDataset(),r=t.data||(t.data=[]),i=this._data;if(Xt(r))this._data=function NMe(n,e){const{iScale:t,vScale:r}=e,i="x"===t.axis?"x":"y",s="x"===r.axis?"x":"y",o=Object.keys(n),a=new Array(o.length);let l,u,c;for(l=0,u=o.length;l<u;++l)c=o[l],a[l]={[i]:c,[s]:n[c]};return a}(r,this._cachedMeta);else if(i!==r){if(i){PK(i,this);const s=this._cachedMeta;PE(s),s._parsed=[]}r&&Object.isExtensible(r)&&function TPe(n,e){n._chartjs?n._chartjs.listeners.push(e):(Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),RK.forEach(t=>{const r="_onData"+FO(t),i=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...s){const o=i.apply(this,s);return n._chartjs.listeners.forEach(a=>{"function"==typeof a[r]&&a[r](...s)}),o}})}))}(r,this),this._syncList=[],this._data=r}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const r=this._cachedMeta,i=this.getDataset();let s=!1;this._dataCheck();const o=r._stacked;r._stacked=XO(r.vScale,r),r.stack!==i.stack&&(s=!0,PE(r),r.stack=i.stack),this._resyncElements(t),(s||o!==r._stacked)&&(g7(this,r._parsed),r._stacked=XO(r.vScale,r))}configure(){const t=this.chart.config,r=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),r,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,r){const{_cachedMeta:i,_data:s}=this,{iScale:o,_stacked:a}=i,l=o.axis;let d,f,y,u=0===t&&r===s.length||i._sorted,c=t>0&&i._parsed[t-1];if(!1===this._parsing)i._parsed=s,i._sorted=!0,y=s;else{y=fr(s[t])?this.parseArrayData(i,s,t,r):Xt(s[t])?this.parseObjectData(i,s,t,r):this.parsePrimitiveData(i,s,t,r);const E=()=>null===f[l]||c&&f[l]<c[l];for(d=0;d<r;++d)i._parsed[d+t]=f=y[d],u&&(E()&&(u=!1),c=f);i._sorted=u}a&&g7(this,y)}parsePrimitiveData(t,r,i,s){const{iScale:o,vScale:a}=t,l=o.axis,u=a.axis,c=o.getLabels(),d=o===a,f=new Array(s);let y,E,I;for(y=0,E=s;y<E;++y)I=y+i,f[y]={[l]:d||o.parse(c[I],I),[u]:a.parse(r[I],I)};return f}parseArrayData(t,r,i,s){const{xScale:o,yScale:a}=t,l=new Array(s);let u,c,d,f;for(u=0,c=s;u<c;++u)d=u+i,f=r[d],l[u]={x:o.parse(f[0],d),y:a.parse(f[1],d)};return l}parseObjectData(t,r,i,s){const{xScale:o,yScale:a}=t,{xAxisKey:l="x",yAxisKey:u="y"}=this._parsing,c=new Array(s);let d,f,y,E;for(d=0,f=s;d<f;++d)y=d+i,E=r[y],c[d]={x:o.parse(Kc(E,l),y),y:a.parse(Kc(E,u),y)};return c}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,r,i){const o=this._cachedMeta,a=r[t.axis];return f7({keys:h7(this.chart,!0),values:r._stacks[t.axis]._visualValues},a,o.index,{mode:i})}updateRangeFromParsed(t,r,i,s){const o=i[r.axis];let a=null===o?NaN:o;const l=s&&i._stacks[r.axis];s&&l&&(s.values=l,a=f7(s,o,this._cachedMeta.index)),t.min=Math.min(t.min,a),t.max=Math.max(t.max,a)}getMinMax(t,r){const i=this._cachedMeta,s=i._parsed,o=i._sorted&&t===i.iScale,a=s.length,l=this._getOtherScale(t),u=((n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:h7(this.chart,!0),values:null})(r,i),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:f}=function OMe(n){const{min:e,max:t,minDefined:r,maxDefined:i}=n.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?t:Number.POSITIVE_INFINITY}}(l);let y,E;function I(){E=s[y];const T=E[l.axis];return!Ur(E[t.axis])||d>T||f<T}for(y=0;y<a&&(I()||(this.updateRangeFromParsed(c,t,E,u),!o));++y);if(o)for(y=a-1;y>=0;--y)if(!I()){this.updateRangeFromParsed(c,t,E,u);break}return c}getAllParsedValues(t){const r=this._cachedMeta._parsed,i=[];let s,o,a;for(s=0,o=r.length;s<o;++s)a=r[s][t.axis],Ur(a)&&i.push(a);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const r=this._cachedMeta,i=r.iScale,s=r.vScale,o=this.getParsed(t);return{label:i?""+i.getLabelForValue(o[i.axis]):"",value:s?""+s.getLabelForValue(o[s.axis]):""}}_update(t){const r=this._cachedMeta;this.update(t||"default"),r._clip=function MMe(n){let e,t,r,i;return Xt(n)?(e=n.top,t=n.right,r=n.bottom,i=n.left):e=t=r=i=n,{top:e,right:t,bottom:r,left:i,disabled:!1===n}}(Rt(this.options.clip,function PMe(n,e,t){if(!1===t)return!1;const r=d7(n,t),i=d7(e,t);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}(r.xScale,r.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,i=this._cachedMeta,s=i.data||[],o=this.chart.chartArea,a=[],l=this._drawStart||0,u=this._drawCount||s.length-l,c=this.options.drawActiveElementsOnTop;let d;for(i.dataset&&i.dataset.draw(t,o,l,u),d=l;d<l+u;++d){const f=s[d];f.hidden||(f.active&&c?a.push(f):f.draw(t,o))}for(d=0;d<a.length;++d)a[d].draw(t,o)}getStyle(t,r){const i=r?"active":"default";return void 0===t&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,r,i){const s=this.getDataset();let o;if(t>=0&&t<this._cachedMeta.data.length){const a=this._cachedMeta.data[t];o=a.$context||(a.$context=function VMe(n,e,t){return Jc(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}(this.getContext(),t,a)),o.parsed=this.getParsed(t),o.raw=s.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=function LMe(n,e){return Jc(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),o.dataset=s,o.index=o.datasetIndex=this.index;return o.active=!!r,o.mode=i,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,r){return this._resolveElementOptions(this.dataElementType.id,r,t)}_resolveElementOptions(t,r="default",i){const s="active"===r,o=this._cachedDataOpts,a=t+"-"+r,l=o[a],u=this.enableOptionSharing&&wE(i);if(l)return m7(l,u);const c=this.chart.config,d=c.datasetElementScopeKeys(this._type,t),f=s?[`${t}Hover`,"hover",t,""]:[t,""],y=c.getOptionScopes(this.getDataset(),d),E=Object.keys(Cr.elements[t]),T=c.resolveNamedOptions(y,E,()=>this.getContext(i,s,r),f);return T.$shared&&(T.$shared=u,o[a]=Object.freeze(m7(T,u))),T}_resolveAnimations(t,r,i){const s=this.chart,o=this._cachedDataOpts,a=`animation-${r}`,l=o[a];if(l)return l;let u;if(!1!==s.options.animation){const d=this.chart.config,f=d.datasetAnimationScopeKeys(this._type,r),y=d.getOptionScopes(this.getDataset(),f);u=d.createResolver(y,this.getContext(t,i,r))}const c=new c7(s,u&&u.animations);return u&&u._cacheable&&(o[a]=Object.freeze(c)),c}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,r){return!r||e1(t)||this.chart._animationsDisabled}_getSharedOptions(t,r){const i=this.resolveDataElementOptions(t,r),s=this._sharedOptions,o=this.getSharedOptions(i),a=this.includeOptions(r,o)||o!==s;return this.updateSharedOptions(o,r,i),{sharedOptions:o,includeOptions:a}}updateElement(t,r,i,s){e1(s)?Object.assign(t,i):this._resolveAnimations(r,s).update(t,i)}updateSharedOptions(t,r,i){t&&!e1(r)&&this._resolveAnimations(void 0,r).update(t,i)}_setStyle(t,r,i,s){t.active=s;const o=this.getStyle(r,s);this._resolveAnimations(r,i,s).update(t,{options:!s&&this.getSharedOptions(o)||o})}removeHoverStyle(t,r,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,r,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const r=this._data,i=this._cachedMeta.data;for(const[l,u,c]of this._syncList)this[l](u,c);this._syncList=[];const s=i.length,o=r.length,a=Math.min(o,s);a&&this.parse(0,a),o>s?this._insertElements(s,o-s,t):o<s&&this._removeElements(o,s-o)}_insertElements(t,r,i=!0){const s=this._cachedMeta,o=s.data,a=t+r;let l;const u=c=>{for(c.length+=r,l=c.length-1;l>=a;l--)c[l]=c[l-r]};for(u(o),l=t;l<a;++l)o[l]=new this.dataElementType;this._parsing&&u(s._parsed),this.parse(t,r),i&&this.updateElements(o,t,r,"reset")}updateElements(t,r,i,s){}_removeElements(t,r){const i=this._cachedMeta;if(this._parsing){const s=i._parsed.splice(t,r);i._stacked&&PE(i,s)}i.data.splice(t,r)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[r,i,s]=t;this[r](i,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,r){r&&this._sync(["_removeElements",t,r]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}})();function $Me(n){const e=n.iScale,t=function BMe(n,e){if(!n._cache.$bar){const t=n.getMatchingVisibleMetas(e);let r=[];for(let i=0,s=t.length;i<s;i++)r=r.concat(t[i].controller.getAllParsedValues(n));n._cache.$bar=MK(r.sort((i,s)=>i-s))}return n._cache.$bar}(e,n.type);let i,s,o,a,r=e._length;const l=()=>{32767===o||-32768===o||(wE(a)&&(r=Math.min(r,Math.abs(o-a)||r)),a=o)};for(i=0,s=t.length;i<s;++i)o=e.getPixelForValue(t[i]),l();for(a=void 0,i=0,s=e.ticks.length;i<s;++i)o=e.getPixelForTick(i),l();return r}function _7(n,e,t,r){return fr(n)?function WMe(n,e,t,r){const i=t.parse(n[0],r),s=t.parse(n[1],r),o=Math.min(i,s),a=Math.max(i,s);let l=o,u=a;Math.abs(o)>Math.abs(a)&&(l=a,u=o),e[t.axis]=u,e._custom={barStart:l,barEnd:u,start:i,end:s,min:o,max:a}}(n,e,t,r):e[t.axis]=t.parse(n,r),e}function y7(n,e,t,r){const i=n.iScale,s=n.vScale,o=i.getLabels(),a=i===s,l=[];let u,c,d,f;for(u=t,c=t+r;u<c;++u)f=e[u],d={},d[i.axis]=a||i.parse(o[u],u),l.push(_7(f,d,s,u));return l}function t1(n){return n&&void 0!==n.barStart&&void 0!==n.barEnd}function jMe(n,e,t,r){let i=e.borderSkipped;const s={};if(!i)return void(n.borderSkipped=s);if(!0===i)return void(n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:o,end:a,reverse:l,top:u,bottom:c}=function qMe(n){let e,t,r,i,s;return n.horizontal?(e=n.base>n.x,t="left",r="right"):(e=n.base<n.y,t="bottom",r="top"),e?(i="end",s="start"):(i="start",s="end"),{start:t,end:r,reverse:e,top:i,bottom:s}}(n);"middle"===i&&t&&(n.enableBorderRadius=!0,(t._top||0)===r?i=u:(t._bottom||0)===r?i=c:(s[v7(c,o,a,l)]=!0,i=u)),s[v7(i,o,a,l)]=!0,n.borderSkipped=s}function v7(n,e,t,r){return r?(n=function KMe(n,e,t){return n===e?t:n===t?e:n}(n,e,t),n=E7(n,t,e)):n=E7(n,e,t),n}function E7(n,e,t){return"start"===n?e:"end"===n?t:n}function YMe(n,{inflateAmount:e},t){n.inflateAmount="auto"===e?1===t?.33:0:e}let QMe=(()=>class n extends Xc{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,r,i,s){return y7(t,r,i,s)}parseArrayData(t,r,i,s){return y7(t,r,i,s)}parseObjectData(t,r,i,s){const{iScale:o,vScale:a}=t,{xAxisKey:l="x",yAxisKey:u="y"}=this._parsing,c="x"===o.axis?l:u,d="x"===a.axis?l:u,f=[];let y,E,I,T;for(y=i,E=i+s;y<E;++y)T=r[y],I={},I[o.axis]=o.parse(Kc(T,c),y),f.push(_7(Kc(T,d),I,a,y));return f}updateRangeFromParsed(t,r,i,s){super.updateRangeFromParsed(t,r,i,s);const o=i._custom;o&&r===this._cachedMeta.vScale&&(t.min=Math.min(t.min,o.min),t.max=Math.max(t.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const r=this._cachedMeta,{iScale:i,vScale:s}=r,o=this.getParsed(t),a=o._custom,l=t1(a)?"["+a.start+", "+a.end+"]":""+s.getLabelForValue(o[s.axis]);return{label:""+i.getLabelForValue(o[i.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(t){const r=this._cachedMeta;this.updateElements(r.data,0,r.data.length,t)}updateElements(t,r,i,s){const o="reset"===s,{index:a,_cachedMeta:{vScale:l}}=this,u=l.getBasePixel(),c=l.isHorizontal(),d=this._getRuler(),{sharedOptions:f,includeOptions:y}=this._getSharedOptions(r,s);for(let E=r;E<r+i;E++){const I=this.getParsed(E),T=o||cn(I[l.axis])?{base:u,head:u}:this._calculateBarValuePixels(E),P=this._calculateBarIndexPixels(E,d),x=(I._stacks||{})[l.axis],V={horizontal:c,base:T.base,enableBorderRadius:!x||t1(I._custom)||a===x._top||a===x._bottom,x:c?T.head:P.center,y:c?P.center:T.head,height:c?P.size:Math.abs(T.size),width:c?Math.abs(T.size):P.size};y&&(V.options=f||this.resolveDataElementOptions(E,t[E].active?"active":s));const W=V.options||t[E].options;jMe(V,W,x,a),YMe(V,W,d.ratio),this.updateElement(t[E],E,V,s)}}_getStacks(t,r){const{iScale:i}=this._cachedMeta,s=i.getMatchingVisibleMetas(this._type).filter(d=>d.controller.options.grouped),o=i.options.stacked,a=[],l=this._cachedMeta.controller.getParsed(r),u=l&&l[i.axis],c=d=>{const f=d._parsed.find(E=>E[i.axis]===u),y=f&&f[d.vScale.axis];if(cn(y)||isNaN(y))return!0};for(const d of s)if((void 0===r||!c(d))&&((!1===o||-1===a.indexOf(d.stack)||void 0===o&&void 0===d.stack)&&a.push(d.stack),d.index===t))break;return a.length||a.push(void 0),a}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,r,i){const s=this._getStacks(t,i),o=void 0!==r?s.indexOf(r):-1;return-1===o?s.length-1:o}_getRuler(){const t=this.options,r=this._cachedMeta,i=r.iScale,s=[];let o,a;for(o=0,a=r.data.length;o<a;++o)s.push(i.getPixelForValue(this.getParsed(o)[i.axis],o));const l=t.barThickness;return{min:l||$Me(r),pixels:s,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:l?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:r,_stacked:i,index:s},options:{base:o,minBarLength:a}}=this,l=o||0,u=this.getParsed(t),c=u._custom,d=t1(c);let I,T,f=u[r.axis],y=0,E=i?this.applyStack(r,u,i):f;E!==f&&(y=E-f,E=f),d&&(f=c.barStart,E=c.barEnd-c.barStart,0!==f&&Sl(f)!==Sl(c.barEnd)&&(y=0),y+=f);const P=cn(o)||d?y:o;let x=r.getPixelForValue(P);if(I=this.chart.getDataVisibility(t)?r.getPixelForValue(y+E):x,T=I-x,Math.abs(T)<a){T=function GMe(n,e,t){return 0!==n?Sl(n):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}(T,r,l)*a,f===l&&(x-=T/2);const V=r.getPixelForDecimal(0),W=r.getPixelForDecimal(1),K=Math.min(V,W),Y=Math.max(V,W);x=Math.max(Math.min(x,Y),K),I=x+T,i&&!d&&(u._stacks[r.axis]._visualValues[s]=r.getValueForPixel(I)-r.getValueForPixel(x))}if(x===r.getPixelForValue(l)){const V=Sl(T)*r.getLineWidthForValue(l)/2;x+=V,T-=V}return{size:T,base:x,head:I,center:I+T/2}}_calculateBarIndexPixels(t,r){const i=r.scale,s=this.options,o=s.skipNull,a=Rt(s.maxBarThickness,1/0);let l,u;if(r.grouped){const c=o?this._getStackCount(t):r.stackCount,d="flex"===s.barThickness?function zMe(n,e,t,r){const i=e.pixels,s=i[n];let o=n>0?i[n-1]:null,a=n<i.length-1?i[n+1]:null;const l=t.categoryPercentage;null===o&&(o=s-(null===a?e.end-e.start:a-s)),null===a&&(a=s+s-o);const u=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/r,ratio:t.barPercentage,start:u}}(t,r,s,c):function HMe(n,e,t,r){const i=t.barThickness;let s,o;return cn(i)?(s=e.min*t.categoryPercentage,o=t.barPercentage):(s=i*r,o=1),{chunk:s/r,ratio:o,start:e.pixels[n]-s/2}}(t,r,s,c),f=this._getStackIndex(this.index,this._cachedMeta.stack,o?t:void 0);l=d.start+d.chunk*f+d.chunk/2,u=Math.min(a,d.chunk*d.ratio)}else l=i.getPixelForValue(this.getParsed(t)[i.axis],t),u=Math.min(a,r.min*r.ratio);return{base:l-u/2,head:l+u/2,center:l,size:u}}draw(){const t=this._cachedMeta,r=t.vScale,i=t.data,s=i.length;let o=0;for(;o<s;++o)null!==this.getParsed(o)[r.axis]&&!i[o].hidden&&i[o].draw(this._ctx)}})(),JMe=(()=>class n extends Xc{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,r,i,s){const o=super.parsePrimitiveData(t,r,i,s);for(let a=0;a<o.length;a++)o[a]._custom=this.resolveDataElementOptions(a+i).radius;return o}parseArrayData(t,r,i,s){const o=super.parseArrayData(t,r,i,s);for(let a=0;a<o.length;a++)o[a]._custom=Rt(r[i+a][2],this.resolveDataElementOptions(a+i).radius);return o}parseObjectData(t,r,i,s){const o=super.parseObjectData(t,r,i,s);for(let a=0;a<o.length;a++){const l=r[i+a];o[a]._custom=Rt(l&&l.r&&+l.r,this.resolveDataElementOptions(a+i).radius)}return o}getMaxOverflow(){const t=this._cachedMeta.data;let r=0;for(let i=t.length-1;i>=0;--i)r=Math.max(r,t[i].size(this.resolveDataElementOptions(i))/2);return r>0&&r}getLabelAndValue(t){const r=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:o}=r,a=this.getParsed(t),l=s.getLabelForValue(a.x),u=o.getLabelForValue(a.y),c=a._custom;return{label:i[t]||"",value:"("+l+", "+u+(c?", "+c:"")+")"}}update(t){const r=this._cachedMeta.data;this.updateElements(r,0,r.length,t)}updateElements(t,r,i,s){const o="reset"===s,{iScale:a,vScale:l}=this._cachedMeta,{sharedOptions:u,includeOptions:c}=this._getSharedOptions(r,s),d=a.axis,f=l.axis;for(let y=r;y<r+i;y++){const E=t[y],I=!o&&this.getParsed(y),T={},P=T[d]=o?a.getPixelForDecimal(.5):a.getPixelForValue(I[d]),x=T[f]=o?l.getBasePixel():l.getPixelForValue(I[f]);T.skip=isNaN(P)||isNaN(x),c&&(T.options=u||this.resolveDataElementOptions(y,E.active?"active":s),o&&(T.options.radius=0)),this.updateElement(E,y,T,s)}}resolveDataElementOptions(t,r){const i=this.getParsed(t);let s=super.resolveDataElementOptions(t,r);s.$shared&&(s=Object.assign({},s,{$shared:!1}));const o=s.radius;return"active"!==r&&(s.radius=0),s.radius+=Rt(i&&i._custom,o),s}})(),n1=(()=>class n extends Xc{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>"spacing"!==t,_indexable:t=>"spacing"!==t&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const r=t.data;if(r.labels.length&&r.datasets.length){const{labels:{pointStyle:i,color:s}}=t.legend.options;return r.labels.map((o,a)=>{const u=t.getDatasetMeta(0).controller.getStyle(a);return{text:o,fillStyle:u.backgroundColor,strokeStyle:u.borderColor,fontColor:s,lineWidth:u.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(a),index:a}})}return[]}},onClick(t,r,i){i.chart.toggleDataVisibility(r.index),i.chart.update()}}}};constructor(t,r){super(t,r),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,r){const i=this.getDataset().data,s=this._cachedMeta;if(!1===this._parsing)s._parsed=i;else{let a,l,o=u=>+i[u];if(Xt(i[t])){const{key:u="value"}=this._parsing;o=c=>+Kc(i[c],u)}for(a=t,l=t+r;a<l;++a)s._parsed[a]=o(a)}}_getRotation(){return $a(this.options.rotation-90)}_getCircumference(){return $a(this.options.circumference)}_getRotationExtents(){let t=gr,r=-gr;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const s=this.chart.getDatasetMeta(i).controller,o=s._getRotation(),a=s._getCircumference();t=Math.min(t,o),r=Math.max(r,o+a)}return{rotation:t,circumference:r-t}}update(t){const r=this.chart,{chartArea:i}=r,s=this._cachedMeta,o=s.data,a=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,l=Math.max((Math.min(i.width,i.height)-a)/2,0),u=Math.min(((n,e)=>"string"==typeof n&&n.endsWith("%")?parseFloat(n)/100:+n/e)(this.options.cutout,l),1),c=this._getRingWeight(this.index),{circumference:d,rotation:f}=this._getRotationExtents(),{ratioX:y,ratioY:E,offsetX:I,offsetY:T}=function XMe(n,e,t){let r=1,i=1,s=0,o=0;if(e<gr){const a=n,l=a+e,u=Math.cos(a),c=Math.sin(a),d=Math.cos(l),f=Math.sin(l),y=(V,W,K)=>bE(V,a,l,!0)?1:Math.max(W,W*t,K,K*t),E=(V,W,K)=>bE(V,a,l,!0)?-1:Math.min(W,W*t,K,K*t),I=y(0,u,d),T=y(Xr,c,f),P=E(pr,u,d),x=E(pr+Xr,c,f);r=(I-P)/2,i=(T-x)/2,s=-(I+P)/2,o=-(T+x)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:o}}(f,d,u),V=Math.max(Math.min((i.width-a)/y,(i.height-a)/E)/2,0),W=CK(this.options.radius,V),Y=(W-Math.max(W*u,0))/this._getVisibleDatasetWeightTotal();this.offsetX=I*W,this.offsetY=T*W,s.total=this.calculateTotal(),this.outerRadius=W-Y*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-Y*c,0),this.updateElements(o,0,o.length,t)}_circumference(t,r){const i=this.options,s=this._cachedMeta,o=this._getCircumference();return r&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||null===s._parsed[t]||s.data[t].hidden?0:this.calculateCircumference(s._parsed[t]*o/gr)}updateElements(t,r,i,s){const o="reset"===s,a=this.chart,l=a.chartArea,d=(l.left+l.right)/2,f=(l.top+l.bottom)/2,y=o&&a.options.animation.animateScale,E=y?0:this.innerRadius,I=y?0:this.outerRadius,{sharedOptions:T,includeOptions:P}=this._getSharedOptions(r,s);let V,x=this._getRotation();for(V=0;V<r;++V)x+=this._circumference(V,o);for(V=r;V<r+i;++V){const W=this._circumference(V,o),K=t[V],Y={x:d+this.offsetX,y:f+this.offsetY,startAngle:x,endAngle:x+W,circumference:W,outerRadius:I,innerRadius:E};P&&(Y.options=T||this.resolveDataElementOptions(V,K.active?"active":s)),x+=W,this.updateElement(K,V,Y,s)}}calculateTotal(){const t=this._cachedMeta,r=t.data;let s,i=0;for(s=0;s<r.length;s++){const o=t._parsed[s];null!==o&&!isNaN(o)&&this.chart.getDataVisibility(s)&&!r[s].hidden&&(i+=Math.abs(o))}return i}calculateCircumference(t){const r=this._cachedMeta.total;return r>0&&!isNaN(t)?gr*(Math.abs(t)/r):0}getLabelAndValue(t){const i=this.chart,s=i.data.labels||[],o=SE(this._cachedMeta._parsed[t],i.options.locale);return{label:s[t]||"",value:o}}getMaxBorderWidth(t){let r=0;const i=this.chart;let s,o,a,l,u;if(!t)for(s=0,o=i.data.datasets.length;s<o;++s)if(i.isDatasetVisible(s)){a=i.getDatasetMeta(s),t=a.data,l=a.controller;break}if(!t)return 0;for(s=0,o=t.length;s<o;++s)u=l.resolveDataElementOptions(s),"inner"!==u.borderAlign&&(r=Math.max(r,u.borderWidth||0,u.hoverBorderWidth||0));return r}getMaxOffset(t){let r=0;for(let i=0,s=t.length;i<s;++i){const o=this.resolveDataElementOptions(i);r=Math.max(r,o.offset||0,o.hoverOffset||0)}return r}_getRingWeightOffset(t){let r=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(r+=this._getRingWeight(i));return r}_getRingWeight(t){return Math.max(Rt(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}})(),ZMe=(()=>class n extends Xc{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const r=this._cachedMeta,{dataset:i,data:s=[],_dataset:o}=r,a=this.chart._animationsDisabled;let{start:l,count:u}=OK(r,s,a);this._drawStart=l,this._drawCount=u,FK(r)&&(l=0,u=s.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!o._decimated,i.points=s;const c=this.resolveDatasetElementOptions(t);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(i,void 0,{animated:!a,options:c},t),this.updateElements(s,l,u,t)}updateElements(t,r,i,s){const o="reset"===s,{iScale:a,vScale:l,_stacked:u,_dataset:c}=this._cachedMeta,{sharedOptions:d,includeOptions:f}=this._getSharedOptions(r,s),y=a.axis,E=l.axis,{spanGaps:I,segment:T}=this.options,P=Kg(I)?I:Number.POSITIVE_INFINITY,x=this.chart._animationsDisabled||o||"none"===s,V=r+i,W=t.length;let K=r>0&&this.getParsed(r-1);for(let Y=0;Y<W;++Y){const U=t[Y],N=x?U:{};if(Y<r||Y>=V){N.skip=!0;continue}const F=this.getParsed(Y),B=cn(F[E]),H=N[y]=a.getPixelForValue(F[y],Y),J=N[E]=o||B?l.getBasePixel():l.getPixelForValue(u?this.applyStack(l,F,u):F[E],Y);N.skip=isNaN(H)||isNaN(J)||B,N.stop=Y>0&&Math.abs(F[y]-K[y])>P,T&&(N.parsed=F,N.raw=c.data[Y]),f&&(N.options=d||this.resolveDataElementOptions(Y,U.active?"active":s)),x||this.updateElement(U,Y,N,s),K=F}}getMaxOverflow(){const t=this._cachedMeta,r=t.dataset,i=r.options&&r.options.borderWidth||0,s=t.data||[];if(!s.length)return i;const o=s[0].size(this.resolveDataElementOptions(0)),a=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,o,a)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}})(),C7=(()=>class n extends Xc{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const r=t.data;if(r.labels.length&&r.datasets.length){const{labels:{pointStyle:i,color:s}}=t.legend.options;return r.labels.map((o,a)=>{const u=t.getDatasetMeta(0).controller.getStyle(a);return{text:o,fillStyle:u.backgroundColor,strokeStyle:u.borderColor,fontColor:s,lineWidth:u.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(a),index:a}})}return[]}},onClick(t,r,i){i.chart.toggleDataVisibility(r.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(t,r){super(t,r),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const i=this.chart,s=i.data.labels||[],o=SE(this._cachedMeta._parsed[t].r,i.options.locale);return{label:s[t]||"",value:o}}parseObjectData(t,r,i,s){return JK.bind(this)(t,r,i,s)}update(t){const r=this._cachedMeta.data;this._updateRadius(),this.updateElements(r,0,r.length,t)}getMinMax(){const r={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return this._cachedMeta.data.forEach((i,s)=>{const o=this.getParsed(s).r;!isNaN(o)&&this.chart.getDataVisibility(s)&&(o<r.min&&(r.min=o),o>r.max&&(r.max=o))}),r}_updateRadius(){const t=this.chart,r=t.chartArea,i=t.options,s=Math.min(r.right-r.left,r.bottom-r.top),o=Math.max(s/2,0),l=(o-Math.max(i.cutoutPercentage?o/100*i.cutoutPercentage:1,0))/t.getVisibleDatasetCount();this.outerRadius=o-l*this.index,this.innerRadius=this.outerRadius-l}updateElements(t,r,i,s){const o="reset"===s,a=this.chart,u=a.options.animation,c=this._cachedMeta.rScale,d=c.xCenter,f=c.yCenter,y=c.getIndexAngle(0)-.5*pr;let I,E=y;const T=360/this.countVisibleElements();for(I=0;I<r;++I)E+=this._computeAngle(I,s,T);for(I=r;I<r+i;I++){const P=t[I];let x=E,V=E+this._computeAngle(I,s,T),W=a.getDataVisibility(I)?c.getDistanceFromCenterForValue(this.getParsed(I).r):0;E=V,o&&(u.animateScale&&(W=0),u.animateRotate&&(x=V=y));const K={x:d,y:f,innerRadius:0,outerRadius:W,startAngle:x,endAngle:V,options:this.resolveDataElementOptions(I,P.active?"active":s)};this.updateElement(P,I,K,s)}}countVisibleElements(){let r=0;return this._cachedMeta.data.forEach((i,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&r++}),r}_computeAngle(t,r,i){return this.chart.getDataVisibility(t)?$a(this.resolveDataElementOptions(t,r).angle||i):0}})();var eNe=Object.freeze({__proto__:null,BarController:QMe,BubbleController:JMe,DoughnutController:n1,LineController:ZMe,PieController:(()=>class n extends n1{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}})(),PolarAreaController:C7,RadarController:(()=>class n extends Xc{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(t){const r=this._cachedMeta.vScale,i=this.getParsed(t);return{label:r.getLabels()[t],value:""+r.getLabelForValue(i[r.axis])}}parseObjectData(t,r,i,s){return JK.bind(this)(t,r,i,s)}update(t){const r=this._cachedMeta,i=r.dataset,s=r.data||[],o=r.iScale.getLabels();if(i.points=s,"resize"!==t){const a=this.resolveDatasetElementOptions(t);this.options.showLine||(a.borderWidth=0),this.updateElement(i,void 0,{_loop:!0,_fullLoop:o.length===s.length,options:a},t)}this.updateElements(s,0,s.length,t)}updateElements(t,r,i,s){const o=this._cachedMeta.rScale,a="reset"===s;for(let l=r;l<r+i;l++){const u=t[l],c=this.resolveDataElementOptions(l,u.active?"active":s),d=o.getPointPositionForValue(l,this.getParsed(l).r),f=a?o.xCenter:d.x,y=a?o.yCenter:d.y,E={x:f,y,angle:d.angle,skip:isNaN(f)||isNaN(y),options:c};this.updateElement(u,l,E,s)}}})(),ScatterController:(()=>class n extends Xc{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(t){const r=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:o}=r,a=this.getParsed(t),l=s.getLabelForValue(a.x),u=o.getLabelForValue(a.y);return{label:i[t]||"",value:"("+l+", "+u+")"}}update(t){const r=this._cachedMeta,{data:i=[]}=r,s=this.chart._animationsDisabled;let{start:o,count:a}=OK(r,i,s);if(this._drawStart=o,this._drawCount=a,FK(r)&&(o=0,a=i.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:l,_dataset:u}=r;l._chart=this.chart,l._datasetIndex=this.index,l._decimated=!!u._decimated,l.points=i;const c=this.resolveDatasetElementOptions(t);c.segment=this.options.segment,this.updateElement(l,void 0,{animated:!s,options:c},t)}else this.datasetElementType&&(delete r.dataset,this.datasetElementType=!1);this.updateElements(i,o,a,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,r,i,s){const o="reset"===s,{iScale:a,vScale:l,_stacked:u,_dataset:c}=this._cachedMeta,d=this.resolveDataElementOptions(r,s),f=this.getSharedOptions(d),y=this.includeOptions(s,f),E=a.axis,I=l.axis,{spanGaps:T,segment:P}=this.options,x=Kg(T)?T:Number.POSITIVE_INFINITY,V=this.chart._animationsDisabled||o||"none"===s;let W=r>0&&this.getParsed(r-1);for(let K=r;K<r+i;++K){const Y=t[K],U=this.getParsed(K),N=V?Y:{},F=cn(U[I]),B=N[E]=a.getPixelForValue(U[E],K),H=N[I]=o||F?l.getBasePixel():l.getPixelForValue(u?this.applyStack(l,U,u):U[I],K);N.skip=isNaN(B)||isNaN(H)||F,N.stop=K>0&&Math.abs(U[E]-W[E])>x,P&&(N.parsed=U,N.raw=c.data[K]),y&&(N.options=f||this.resolveDataElementOptions(K,Y.active?"active":s)),V||this.updateElement(Y,K,N,s),W=U}this.updateSharedOptions(f,s,d)}getMaxOverflow(){const t=this._cachedMeta,r=t.data||[];if(!this.options.showLine){let l=0;for(let u=r.length-1;u>=0;--u)l=Math.max(l,r[u].size(this.resolveDataElementOptions(u))/2);return l>0&&l}const i=t.dataset,s=i.options&&i.options.borderWidth||0;if(!r.length)return s;const o=r[0].size(this.resolveDataElementOptions(0)),a=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(s,o,a)/2}})()});function Wh(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class r1{static override(e){Object.assign(r1.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return Wh()}parse(){return Wh()}format(){return Wh()}add(){return Wh()}diff(){return Wh()}startOf(){return Wh()}endOf(){return Wh()}}var tNe__date=r1;function nNe(n,e,t,r){const{controller:i,data:s,_sorted:o}=n,a=i._cachedMeta.iScale;if(a&&e===a.axis&&"r"!==e&&o&&s.length){const l=a._reversePixels?IPe:pu;if(!r)return l(s,e,t);if(i._sharedOptions){const u=s[0],c="function"==typeof u.getRange&&u.getRange(e);if(c){const d=l(s,e,t-c),f=l(s,e,t+c);return{lo:d.lo,hi:f.hi}}}}return{lo:0,hi:s.length-1}}function ME(n,e,t,r,i){const s=n.getSortedVisibleDatasetMetas(),o=t[e];for(let a=0,l=s.length;a<l;++a){const{index:u,data:c}=s[a],{lo:d,hi:f}=nNe(s[a],e,o,i);for(let y=d;y<=f;++y){const E=c[y];E.skip||r(E,u,y)}}}function s1(n,e,t,r,i){const s=[];return!i&&!n.isPointInArea(e)||ME(n,t,e,function(a,l,u){!i&&!gu(a,n.chartArea,0)||a.inRange(e.x,e.y,r)&&s.push({element:a,datasetIndex:l,index:u})},!0),s}function o1(n,e,t,r,i,s){return s||n.isPointInArea(e)?"r"!==t||r?function sNe(n,e,t,r,i,s){let o=[];const a=function rNe(n){const e=-1!==n.indexOf("x"),t=-1!==n.indexOf("y");return function(r,i){const s=e?Math.abs(r.x-i.x):0,o=t?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}(t);let l=Number.POSITIVE_INFINITY;return ME(n,t,e,function u(c,d,f){const y=c.inRange(e.x,e.y,i);if(r&&!y)return;const E=c.getCenterPoint(i);if(!s&&!n.isPointInArea(E)&&!y)return;const T=a(e,E);T<l?(o=[{element:c,datasetIndex:d,index:f}],l=T):T===l&&o.push({element:c,datasetIndex:d,index:f})}),o}(n,e,t,r,i,s):function iNe(n,e,t,r){let i=[];return ME(n,t,e,function s(o,a,l){const{startAngle:u,endAngle:c}=o.getProps(["startAngle","endAngle"],r),{angle:d}=xK(o,{x:e.x,y:e.y});bE(d,u,c)&&i.push({element:o,datasetIndex:a,index:l})}),i}(n,e,t,i):[]}function I7(n,e,t,r,i){const s=[],o="x"===t?"inXRange":"inYRange";let a=!1;return ME(n,t,e,(l,u,c)=>{l[o]&&l[o](e[t],i)&&(s.push({element:l,datasetIndex:u,index:c}),a=a||l.inRange(e.x,e.y,i))}),r&&!a?[]:s}var oNe={evaluateInteractionItems:ME,modes:{index(n,e,t,r){const i=Hh(e,n),s=t.axis||"x",o=t.includeInvisible||!1,a=t.intersect?s1(n,i,s,r,o):o1(n,i,s,!1,r,o),l=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(u=>{const c=a[0].index,d=u.data[c];d&&!d.skip&&l.push({element:d,datasetIndex:u.index,index:c})}),l):[]},dataset(n,e,t,r){const i=Hh(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;let a=t.intersect?s1(n,i,s,r,o):o1(n,i,s,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,u=n.getDatasetMeta(l).data;a=[];for(let c=0;c<u.length;++c)a.push({element:u[c],datasetIndex:l,index:c})}return a},point:(n,e,t,r)=>s1(n,Hh(e,n),t.axis||"xy",r,t.includeInvisible||!1),nearest:(n,e,t,r)=>o1(n,Hh(e,n),t.axis||"xy",t.intersect,r,t.includeInvisible||!1),x:(n,e,t,r)=>I7(n,Hh(e,n),"x",t.intersect,r),y:(n,e,t,r)=>I7(n,Hh(e,n),"y",t.intersect,r)}};const w7=["left","top","right","bottom"];function NE(n,e){return n.filter(t=>t.pos===e)}function T7(n,e){return n.filter(t=>-1===w7.indexOf(t.pos)&&t.box.axis===e)}function kE(n,e){return n.sort((t,r)=>{const i=e?r:t,s=e?t:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function b7(n,e,t,r){return Math.max(n[t],e[t])+Math.max(n[r],e[r])}function A7(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function dNe(n,e,t,r){const{pos:i,box:s}=t,o=n.maxPadding;if(!Xt(i)){t.size&&(n[i]-=t.size);const d=r[t.stack]||{size:0,count:1};d.size=Math.max(d.size,t.horizontal?s.height:s.width),t.size=d.size/d.count,n[i]+=t.size}s.getPadding&&A7(o,s.getPadding());const a=Math.max(0,e.outerWidth-b7(o,n,"left","right")),l=Math.max(0,e.outerHeight-b7(o,n,"top","bottom")),u=a!==n.w,c=l!==n.h;return n.w=a,n.h=l,t.horizontal?{same:u,other:c}:{same:c,other:u}}function fNe(n,e){const t=e.maxPadding;return function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{s[o]=Math.max(e[o],t[o])}),s}(n?["left","right"]:["top","bottom"])}function OE(n,e,t,r){const i=[];let s,o,a,l,u,c;for(s=0,o=n.length,u=0;s<o;++s){a=n[s],l=a.box,l.update(a.width||e.w,a.height||e.h,fNe(a.horizontal,e));const{same:d,other:f}=dNe(e,t,a,r);u|=d&&i.length,c=c||f,l.fullSize||i.push(a)}return u&&OE(i,e,t,r)||c}function Y0(n,e,t,r,i){n.top=t,n.left=e,n.right=e+r,n.bottom=t+i,n.width=r,n.height=i}function S7(n,e,t,r){const i=t.padding;let{x:s,y:o}=e;for(const a of n){const l=a.box,u=r[a.stack]||{count:1,placed:0,weight:1},c=a.stackWeight/u.weight||1;if(a.horizontal){const d=e.w*c,f=u.size||l.height;wE(u.start)&&(o=u.start),l.fullSize?Y0(l,i.left,o,t.outerWidth-i.right-i.left,f):Y0(l,e.left+u.placed,o,d,f),u.start=o,u.placed+=d,o=l.bottom}else{const d=e.h*c,f=u.size||l.width;wE(u.start)&&(s=u.start),l.fullSize?Y0(l,s,i.top,f,t.outerHeight-i.bottom-i.top):Y0(l,s,e.top+u.placed,f,d),u.start=s,u.placed+=d,s=l.right}}e.x=s,e.y=o}var fs={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){const t=n.boxes?n.boxes.indexOf(e):-1;-1!==t&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,r){if(!n)return;const i=hs(n.options.layout.padding),s=Math.max(e-i.width,0),o=Math.max(t-i.height,0),a=function cNe(n){const e=function aNe(n){const e=[];let t,r,i,s,o,a;for(t=0,r=(n||[]).length;t<r;++t)i=n[t],({position:s,options:{stack:o,stackWeight:a=1}}=i),e.push({index:t,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:a});return e}(n),t=kE(e.filter(u=>u.box.fullSize),!0),r=kE(NE(e,"left"),!0),i=kE(NE(e,"right")),s=kE(NE(e,"top"),!0),o=kE(NE(e,"bottom")),a=T7(e,"x"),l=T7(e,"y");return{fullSize:t,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:NE(e,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(o).concat(a)}}(n.boxes),l=a.vertical,u=a.horizontal;Mn(n.boxes,I=>{"function"==typeof I.beforeLayout&&I.beforeLayout()});const c=l.reduce((I,T)=>T.box.options&&!1===T.box.options.display?I:I+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:t,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/c,hBoxMaxHeight:o/2}),f=Object.assign({},i);A7(f,hs(r));const y=Object.assign({maxPadding:f,w:s,h:o,x:i.left,y:i.top},i),E=function uNe(n,e){const t=function lNe(n){const e={};for(const t of n){const{stack:r,pos:i,stackWeight:s}=t;if(!r||!w7.includes(i))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}(n),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let s,o,a;for(s=0,o=n.length;s<o;++s){a=n[s];const{fullSize:l}=a.box,u=t[a.stack],c=u&&a.stackWeight/u.weight;a.horizontal?(a.width=c?c*r:l&&e.availableWidth,a.height=i):(a.width=r,a.height=c?c*i:l&&e.availableHeight)}return t}(l.concat(u),d);OE(a.fullSize,y,d,E),OE(l,y,d,E),OE(u,y,d,E)&&OE(l,y,d,E),function hNe(n){const e=n.maxPadding;function t(r){const i=Math.max(e[r]-n[r],0);return n[r]+=i,i}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}(y),S7(a.leftAndTop,y,d,E),y.x+=y.w,y.y+=y.h,S7(a.rightAndBottom,y,d,E),n.chartArea={left:y.left,top:y.top,right:y.left+y.w,bottom:y.top+y.h,height:y.h,width:y.w},Mn(a.chartArea,I=>{const T=I.box;Object.assign(T,n.chartArea),T.update(y.w,y.h,{left:0,top:0,right:0,bottom:0})})}};class D7{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,r){}removeEventListener(e,t,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,r,i){return t=Math.max(0,t||e.width),r=r||e.height,{width:t,height:Math.max(0,i?Math.floor(t/i):r)}}isAttached(e){return!0}updateConfig(e){}}class pNe extends D7{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Q0="$chartjs",gNe={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},x7=n=>null===n||""===n,R7=!!gMe&&{passive:!0};function yNe(n,e,t){n&&n.canvas&&n.canvas.removeEventListener(e,t,R7)}function J0(n,e){for(const t of n)if(t===e||t.contains(e))return!0}function ENe(n,e,t){const r=n.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||J0(a.addedNodes,r),o=o&&!J0(a.removedNodes,r);o&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}function CNe(n,e,t){const r=n.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||J0(a.removedNodes,r),o=o&&!J0(a.addedNodes,r);o&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}const FE=new Map;let P7=0;function M7(){const n=window.devicePixelRatio;n!==P7&&(P7=n,FE.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function TNe(n,e,t){const r=n.canvas,i=r&&JO(r);if(!i)return;const s=kK((a,l)=>{const u=i.clientWidth;t(a,l),u<i.clientWidth&&t()},window),o=new ResizeObserver(a=>{const l=a[0],u=l.contentRect.width,c=l.contentRect.height;0===u&&0===c||s(u,c)});return o.observe(i),function INe(n,e){FE.size||window.addEventListener("resize",M7),FE.set(n,e)}(n,s),o}function a1(n,e,t){t&&t.disconnect(),"resize"===e&&function wNe(n){FE.delete(n),FE.size||window.removeEventListener("resize",M7)}(n)}function bNe(n,e,t){const r=n.canvas,i=kK(s=>{null!==n.ctx&&t(function vNe(n,e){const t=gNe[n.type]||n.type,{x:r,y:i}=Hh(n,e);return{type:t,chart:e,native:n,x:void 0!==r?r:null,y:void 0!==i?i:null}}(s,n))},n);return function _Ne(n,e,t){n&&n.addEventListener(e,t,R7)}(r,e,i),i}class ANe extends D7{acquireContext(e,t){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(function mNe(n,e){const t=n.style,r=n.getAttribute("height"),i=n.getAttribute("width");if(n[Q0]={initial:{height:r,width:i,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",x7(i)){const s=e7(n,"width");void 0!==s&&(n.width=s)}if(x7(r))if(""===n.style.height)n.height=n.width/(e||2);else{const s=e7(n,"height");void 0!==s&&(n.height=s)}}(e,t),r):null}releaseContext(e){const t=e.canvas;if(!t[Q0])return!1;const r=t[Q0].initial;["height","width"].forEach(s=>{const o=r[s];cn(o)?t.removeAttribute(s):t.setAttribute(s,o)});const i=r.style||{};return Object.keys(i).forEach(s=>{t.style[s]=i[s]}),t.width=t.width,delete t[Q0],!0}addEventListener(e,t,r){this.removeEventListener(e,t),(e.$proxies||(e.$proxies={}))[t]=({attach:ENe,detach:CNe,resize:TNe}[t]||bNe)(e,t,r)}removeEventListener(e,t){const r=e.$proxies||(e.$proxies={}),i=r[t];i&&(({attach:a1,detach:a1,resize:a1}[t]||yNe)(e,t,i),r[t]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,r,i){return function pMe(n,e,t,r){const i=j0(n),s=$h(i,"margin"),o=q0(i.maxWidth,n,"clientWidth")||U0,a=q0(i.maxHeight,n,"clientHeight")||U0,l=function fMe(n,e,t){let r,i;if(void 0===e||void 0===t){const s=n&&JO(n);if(s){const o=s.getBoundingClientRect(),a=j0(s),l=$h(a,"border","width"),u=$h(a,"padding");e=o.width-u.width-l.width,t=o.height-u.height-l.height,r=q0(a.maxWidth,s,"clientWidth"),i=q0(a.maxHeight,s,"clientHeight")}else e=n.clientWidth,t=n.clientHeight}return{width:e,height:t,maxWidth:r||U0,maxHeight:i||U0}}(n,e,t);let{width:u,height:c}=l;if("content-box"===i.boxSizing){const f=$h(i,"border","width"),y=$h(i,"padding");u-=y.width+f.width,c-=y.height+f.height}return u=Math.max(0,u-s.width),c=Math.max(0,r?u/r:c-s.height),u=K0(Math.min(u,o,l.maxWidth)),c=K0(Math.min(c,a,l.maxHeight)),u&&!c&&(c=K0(u/2)),(void 0!==e||void 0!==t)&&r&&l.height&&c>l.height&&(c=l.height,u=K0(Math.floor(c*r))),{width:u,height:c}}(e,t,r,i)}isAttached(e){const t=e&&JO(e);return!(!t||!t.isConnected)}}class _u{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:t,y:r}=this.getProps(["x","y"],e);return{x:t,y:r}}hasValue(){return Kg(this.x)&&Kg(this.y)}getProps(e,t){const r=this.$animations;if(!t||!r)return this;const i={};return e.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}}function X0(n,e,t,r,i){const s=Rt(r,0),o=Math.min(Rt(i,n.length),n.length);let l,u,c,a=0;for(t=Math.ceil(t),i&&(l=i-r,t=l/Math.floor(l/t)),c=s;c<0;)a++,c=Math.round(s+a*t);for(u=Math.max(s,0);u<o;u++)u===c&&(e.push(n[u]),a++,c=Math.round(s+a*t))}const N7=(n,e,t)=>"top"===e||"left"===e?n[e]+t:n[e]-t,k7=(n,e)=>Math.min(e||n,n);function O7(n,e){const t=[],r=n.length/e,i=n.length;let s=0;for(;s<i;s+=r)t.push(n[Math.floor(s)]);return t}function ONe(n,e,t){const r=n.ticks.length,i=Math.min(e,r-1),s=n._startPixel,o=n._endPixel,a=1e-6;let u,l=n.getPixelForTick(i);if(!(t&&(u=1===r?Math.max(l-s,o-l):0===e?(n.getPixelForTick(1)-l)/2:(l-n.getPixelForTick(i-1))/2,l+=i<e?u:-u,l<s-a||l>o+a)))return l}function LE(n){return n.drawTicks?n.tickLength:0}function F7(n,e){if(!n.display)return 0;const t=bi(n.font,e),r=hs(n.padding);return(fr(n.text)?n.text.length:1)*t.lineHeight+r.height}function UNe(n,e,t){let r=BO(n);return(t&&"right"!==e||!t&&"right"===e)&&(r=(n=>"left"===n?"right":"right"===n?"left":n)(r)),r}class Gh extends _u{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:r,_suggestedMax:i}=this;return e=Fo(e,Number.POSITIVE_INFINITY),t=Fo(t,Number.NEGATIVE_INFINITY),r=Fo(r,Number.POSITIVE_INFINITY),i=Fo(i,Number.NEGATIVE_INFINITY),{min:Fo(e,r),max:Fo(t,i),minDefined:Ur(e),maxDefined:Ur(t)}}getMinMax(e){let o,{min:t,max:r,minDefined:i,maxDefined:s}=this.getUserBounds();if(i&&s)return{min:t,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,u=a.length;l<u;++l)o=a[l].controller.getMinMax(this,e),i||(t=Math.min(t,o.min)),s||(r=Math.max(r,o.max));return t=s&&t>r?r:t,r=i&&t>r?t:r,{min:Fo(t,Fo(r,t)),max:Fo(r,Fo(t,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ir(this.options.beforeUpdate,[this])}update(e,t,r){const{beginAtZero:i,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function qPe(n,e,t){const{min:r,max:i}=n,s=CK(e,(i-r)/2),o=(a,l)=>t&&0===a?0:a+l;return{min:o(r,-Math.abs(s)),max:o(i,s)}}(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?O7(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||"auto"===o.source)&&(this.ticks=function DNe(n,e){const t=n.options.ticks,r=function xNe(n){const e=n.options.offset,t=n._tickSize();return Math.floor(Math.min(n._length/t+(e?0:1),n._maxLength/t))}(n),i=Math.min(t.maxTicksLimit||r,r),s=t.major.enabled?function PNe(n){const e=[];let t,r;for(t=0,r=n.length;t<r;t++)n[t].major&&e.push(t);return e}(e):[],o=s.length,a=s[0],l=s[o-1],u=[];if(o>i)return function MNe(n,e,t,r){let o,i=0,s=t[0];for(r=Math.ceil(r),o=0;o<n.length;o++)o===s&&(e.push(n[o]),i++,s=t[i*r])}(e,u,s,o/i),u;const c=function RNe(n,e,t){const r=function NNe(n){const e=n.length;let t,r;if(e<2)return!1;for(r=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==r)return!1;return r}(n),i=e.length/t;if(!r)return Math.max(i,1);const s=function yPe(n){const e=[],t=Math.sqrt(n);let r;for(r=1;r<t;r++)n%r==0&&(e.push(r),e.push(n/r));return t===(0|t)&&e.push(t),e.sort((i,s)=>i-s).pop(),e}(r);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>i)return l}return Math.max(i,1)}(s,e,i);if(o>0){let d,f;const y=o>1?Math.round((l-a)/(o-1)):null;for(X0(e,u,c,cn(y)?0:a-y,a),d=0,f=o-1;d<f;d++)X0(e,u,c,s[d],s[d+1]);return X0(e,u,c,l,cn(y)?e.length:l+y),u}return X0(e,u,c),u}(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t,r,e=this.options.reverse;this.isHorizontal()?(t=this.left,r=this.right):(t=this.top,r=this.bottom,e=!e),this._startPixel=t,this._endPixel=r,this._reversePixels=e,this._length=r-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ir(this.options.afterUpdate,[this])}beforeSetDimensions(){ir(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ir(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),ir(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ir(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],s.label=ir(t.callback,[s.value,r,e],this)}afterTickToLabelConversion(){ir(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ir(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,r=k7(this.ticks.length,e.ticks.maxTicksLimit),i=t.minRotation||0,s=t.maxRotation;let a,l,u,o=i;if(!this._isVisible()||!t.display||i>=s||r<=1||!this.isHorizontal())return void(this.labelRotation=i);const c=this._getLabelSizes(),d=c.widest.width,f=c.highest.height,y=Ui(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/r:y/(r-1),d+6>a&&(a=y/(r-(e.offset?.5:1)),l=this.maxHeight-LE(e.grid)-t.padding-F7(e.title,this.chart.options.font),u=Math.sqrt(d*d+f*f),o=LO(Math.min(Math.asin(Ui((c.highest.height+6)/a,-1,1)),Math.asin(Ui(l/u,-1,1))-Math.asin(Ui(f/u,-1,1)))),o=Math.max(i,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){ir(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ir(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:r,title:i,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=F7(i,t.options.font);if(a?(e.width=this.maxWidth,e.height=LE(s)+l):(e.height=this.maxHeight,e.width=LE(s)+l),r.display&&this.ticks.length){const{first:u,last:c,widest:d,highest:f}=this._getLabelSizes(),y=2*r.padding,E=$a(this.labelRotation),I=Math.cos(E),T=Math.sin(E);a?e.height=Math.min(this.maxHeight,e.height+(r.mirror?0:T*d.width+I*f.height)+y):e.width=Math.min(this.maxWidth,e.width+(r.mirror?0:I*d.width+T*f.height)+y),this._calculatePadding(u,c,T,I)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,r,i){const{ticks:{align:s,padding:o},position:a}=this.options,l=0!==this.labelRotation,u="top"!==a&&"x"===this.axis;if(this.isHorizontal()){const c=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,y=0;l?u?(f=i*e.width,y=r*t.height):(f=r*e.height,y=i*t.width):"start"===s?y=t.width:"end"===s?f=e.width:"inner"!==s&&(f=e.width/2,y=t.width/2),this.paddingLeft=Math.max((f-c+o)*this.width/(this.width-c),0),this.paddingRight=Math.max((y-d+o)*this.width/(this.width-d),0)}else{let c=t.height/2,d=e.height/2;"start"===s?(c=0,d=e.height):"end"===s&&(c=t.height,d=0),this.paddingTop=c+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ir(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,r;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,r=e.length;t<r;t++)cn(e[t].label)&&(e.splice(t,1),r--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let r=this.ticks;t<r.length&&(r=O7(r,t)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,r){const{ctx:i,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(t/k7(t,r));let d,f,y,E,I,T,P,x,V,W,K,u=0,c=0;for(d=0;d<t;d+=l){if(E=e[d].label,I=this._resolveTickFontOptions(d),i.font=T=I.string,P=s[T]=s[T]||{data:{},gc:[]},x=I.lineHeight,V=W=0,cn(E)||fr(E)){if(fr(E))for(f=0,y=E.length;f<y;++f)K=E[f],!cn(K)&&!fr(K)&&(V=H0(i,P.data,P.gc,V,K),W+=x)}else V=H0(i,P.data,P.gc,V,E),W=x;o.push(V),a.push(W),u=Math.max(V,u),c=Math.max(W,c)}!function FNe(n,e){Mn(n,t=>{const r=t.gc,i=r.length/2;let s;if(i>e){for(s=0;s<i;++s)delete t.data[r[s]];r.splice(0,i)}})}(s,t);const Y=o.indexOf(u),U=a.indexOf(c),N=F=>({width:o[F]||0,height:a[F]||0});return{first:N(0),last:N(t-1),widest:N(Y),highest:N(U),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return function CPe(n){return Ui(n,-32768,32767)}(this._alignToPixels?Vh(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const r=t[e];return r.$context||(r.$context=function VNe(n,e,t){return Jc(n,{tick:t,index:e,type:"tick"})}(this.getContext(),e,r))}return this.$context||(this.$context=function LNe(n,e){return Jc(n,{scale:e,type:"scale"})}(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=$a(this.labelRotation),r=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*r>a*i?a/r:l/i:l*i<a*r?l/r:a/i}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,r=this.chart,i=this.options,{grid:s,position:o,border:a}=i,l=s.offset,u=this.isHorizontal(),d=this.ticks.length+(l?1:0),f=LE(s),y=[],E=a.setContext(this.getContext()),I=E.display?E.width:0,T=I/2,P=function(or){return Vh(r,or,I)};let x,V,W,K,Y,U,N,F,B,H,J,q;if("top"===o)x=P(this.bottom),U=this.bottom-f,F=x-T,H=P(e.top)+T,q=e.bottom;else if("bottom"===o)x=P(this.top),H=e.top,q=P(e.bottom)-T,U=x+T,F=this.top+f;else if("left"===o)x=P(this.right),Y=this.right-f,N=x-T,B=P(e.left)+T,J=e.right;else if("right"===o)x=P(this.left),B=e.left,J=P(e.right)-T,Y=x+T,N=this.left+f;else if("x"===t){if("center"===o)x=P((e.top+e.bottom)/2+.5);else if(Xt(o)){const or=Object.keys(o)[0];x=P(this.chart.scales[or].getPixelForValue(o[or]))}H=e.top,q=e.bottom,U=x+T,F=U+f}else if("y"===t){if("center"===o)x=P((e.left+e.right)/2);else if(Xt(o)){const or=Object.keys(o)[0];x=P(this.chart.scales[or].getPixelForValue(o[or]))}Y=x-T,N=Y-f,B=e.left,J=e.right}const nn=Rt(i.ticks.maxTicksLimit,d),Nt=Math.max(1,Math.ceil(d/nn));for(V=0;V<d;V+=Nt){const or=this.getContext(V),Kn=s.setContext(or),Xi=a.setContext(or),ci=Kn.lineWidth,Du=Kn.color,Um=Xi.dash||[],Bs=Xi.dashOffset,Hr=Kn.tickWidth,xu=Kn.tickColor,Ha=Kn.tickBorderDash||[],Ru=Kn.tickBorderDashOffset;W=ONe(this,V,l),void 0!==W&&(K=Vh(r,W,ci),u?Y=N=B=J=K:U=F=H=q=K,y.push({tx1:Y,ty1:U,tx2:N,ty2:F,x1:B,y1:H,x2:J,y2:q,width:ci,color:Du,borderDash:Um,borderDashOffset:Bs,tickWidth:Hr,tickColor:xu,tickBorderDash:Ha,tickBorderDashOffset:Ru}))}return this._ticksLength=d,this._borderValue=x,y}_computeLabelItems(e){const t=this.axis,r=this.options,{position:i,ticks:s}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:u,padding:c,mirror:d}=s,f=LE(r.grid),y=f+c,E=d?-c:y,I=-$a(this.labelRotation),T=[];let P,x,V,W,K,Y,U,N,F,B,H,J,q="middle";if("top"===i)Y=this.bottom-E,U=this._getXAxisLabelAlignment();else if("bottom"===i)Y=this.top+E,U=this._getXAxisLabelAlignment();else if("left"===i){const Nt=this._getYAxisLabelAlignment(f);U=Nt.textAlign,K=Nt.x}else if("right"===i){const Nt=this._getYAxisLabelAlignment(f);U=Nt.textAlign,K=Nt.x}else if("x"===t){if("center"===i)Y=(e.top+e.bottom)/2+y;else if(Xt(i)){const Nt=Object.keys(i)[0];Y=this.chart.scales[Nt].getPixelForValue(i[Nt])+y}U=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===i)K=(e.left+e.right)/2-y;else if(Xt(i)){const Nt=Object.keys(i)[0];K=this.chart.scales[Nt].getPixelForValue(i[Nt])}U=this._getYAxisLabelAlignment(f).textAlign}"y"===t&&("start"===l?q="top":"end"===l&&(q="bottom"));const nn=this._getLabelSizes();for(P=0,x=a.length;P<x;++P){V=a[P],W=V.label;const Nt=s.setContext(this.getContext(P));N=this.getPixelForTick(P)+s.labelOffset,F=this._resolveTickFontOptions(P),B=F.lineHeight,H=fr(W)?W.length:1;const or=H/2,Kn=Nt.color,Xi=Nt.textStrokeColor,ci=Nt.textStrokeWidth;let Um,Du=U;if(o?(K=N,"inner"===U&&(Du=P===x-1?this.options.reverse?"left":"right":0===P?this.options.reverse?"right":"left":"center"),J="top"===i?"near"===u||0!==I?-H*B+B/2:"center"===u?-nn.highest.height/2-or*B+B:B/2-nn.highest.height:"near"===u||0!==I?B/2:"center"===u?nn.highest.height/2-or*B:nn.highest.height-H*B,d&&(J*=-1),0!==I&&!Nt.showLabelBackdrop&&(K+=B/2*Math.sin(I))):(Y=N,J=(1-H)*B/2),Nt.showLabelBackdrop){const Bs=hs(Nt.backdropPadding),Hr=nn.heights[P],xu=nn.widths[P];let Ha=J-Bs.top,Ru=0-Bs.left;switch(q){case"middle":Ha-=Hr/2;break;case"bottom":Ha-=Hr}switch(U){case"center":Ru-=xu/2;break;case"right":Ru-=xu;break;case"inner":P===x-1?Ru-=xu:P>0&&(Ru-=xu/2)}Um={left:Ru,top:Ha,width:xu+Bs.width,height:Hr+Bs.height,color:Nt.backdropColor}}T.push({label:W,font:F,textOffset:J,options:{rotation:I,color:Kn,strokeColor:Xi,strokeWidth:ci,textAlign:Du,textBaseline:q,translation:[K,Y],backdrop:Um}})}return T}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-$a(this.labelRotation))return"top"===e?"left":"right";let i="center";return"start"===t.align?i="left":"end"===t.align?i="right":"inner"===t.align&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,a=e+s,l=this._getLabelSizes().widest.width;let u,c;return"left"===t?i?(c=this.right+s,"near"===r?u="left":"center"===r?(u="center",c+=l/2):(u="right",c+=l)):(c=this.right-a,"near"===r?u="right":"center"===r?(u="center",c-=l/2):(u="left",c=this.left)):"right"===t?i?(c=this.left+s,"near"===r?u="right":"center"===r?(u="center",c-=l/2):(u="left",c-=l)):(c=this.left+a,"near"===r?u="left":"center"===r?(u="center",c+=l/2):(u="right",c=this.right)):u="right",{textAlign:u,x:c}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:r,top:i,width:s,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(r,i,s,o),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const i=this.ticks.findIndex(s=>s.value===e);return i>=0?t.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const t=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,u,c)=>{!c.width||!c.color||(r.save(),r.lineWidth=c.width,r.strokeStyle=c.color,r.setLineDash(c.borderDash||[]),r.lineDashOffset=c.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(u.x,u.y),r.stroke(),r.restore())};if(t.display)for(s=0,o=i.length;s<o;++s){const l=i[s];t.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),t.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),o=r.display?s.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let u,c,d,f;this.isHorizontal()?(u=Vh(e,this.left,o)-o/2,c=Vh(e,this.right,a)+a/2,d=f=l):(d=Vh(e,this.top,o)-o/2,f=Vh(e,this.bottom,a)+a/2,u=c=l),t.save(),t.lineWidth=s.width,t.strokeStyle=s.color,t.beginPath(),t.moveTo(u,d),t.lineTo(c,f),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&z0(r,i);const s=this.getLabelItems(e);for(const o of s)Uh(r,o.label,0,o.textOffset,o.font,o.options);i&&W0(r)}drawTitle(){const{ctx:e,options:{position:t,title:r,reverse:i}}=this;if(!r.display)return;const s=bi(r.font),o=hs(r.padding),a=r.align;let l=s.lineHeight/2;"bottom"===t||"center"===t||Xt(t)?(l+=o.bottom,fr(r.text)&&(l+=s.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:u,titleY:c,maxWidth:d,rotation:f}=function BNe(n,e,t,r){const{top:i,left:s,bottom:o,right:a,chart:l}=n,{chartArea:u,scales:c}=l;let f,y,E,d=0;const I=o-i,T=a-s;if(n.isHorizontal()){if(y=ds(r,s,a),Xt(t)){const P=Object.keys(t)[0];E=c[P].getPixelForValue(t[P])+I-e}else E="center"===t?(u.bottom+u.top)/2+I-e:N7(n,t,e);f=a-s}else{if(Xt(t)){const P=Object.keys(t)[0];y=c[P].getPixelForValue(t[P])-T+e}else y="center"===t?(u.left+u.right)/2-T+e:N7(n,t,e);E=ds(r,o,i),d="left"===t?-Xr:Xr}return{titleX:y,titleY:E,maxWidth:f,rotation:d}}(this,l,t,a);Uh(e,r.text,0,0,s,{color:r.color,maxWidth:d,rotation:f,textAlign:UNe(a,t,i),textBaseline:"middle",translation:[u,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,r=Rt(e.grid&&e.grid.z,-1),i=Rt(e.border&&e.border.z,0);return this._isVisible()&&this.draw===Gh.prototype.draw?[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:t,draw:s=>{this.drawLabels(s)}}]:[{z:t,draw:s=>{this.draw(s)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,o;for(s=0,o=t.length;s<o;++s){const a=t[s];a[r]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){return bi(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Z0{constructor(e,t,r){this.type=e,this.scope=t,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let r;(function zNe(n){return"id"in n&&"defaults"in n})(t)&&(r=this.register(t));const i=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,function $Ne(n,e,t){const r=CE(Object.create(null),[t?Cr.get(t):{},Cr.get(e),n.defaults]);Cr.set(e,r),n.defaultRoutes&&function HNe(n,e){Object.keys(e).forEach(t=>{const r=t.split("."),i=r.pop(),s=[n].concat(r).join("."),o=e[t].split("."),a=o.pop(),l=o.join(".");Cr.route(s,i,l,a)})}(e,n.defaultRoutes),n.descriptors&&Cr.describe(e,n.descriptors)}(e,o,r),this.override&&Cr.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const t=this.items,r=e.id,i=this.scope;r in t&&delete t[r],i&&r in Cr[i]&&(delete Cr[i][r],this.override&&delete Lh[r])}}class WNe{constructor(){this.controllers=new Z0(Xc,"datasets",!0),this.elements=new Z0(_u,"elements"),this.plugins=new Z0(Object,"plugins"),this.scales=new Z0(Gh,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,r){[...t].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):Mn(i,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,t,r){const i=FO(e);ir(r["before"+i],[],r),t[e](r),ir(r["after"+i],[],r)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const r=this._typedRegistries[t];if(r.isForType(e))return r}return this.plugins}_get(e,t,r){const i=t.get(e);if(void 0===i)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var Dl=new WNe;class GNe{constructor(){this._init=[]}notify(e,t,r,i){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(s,e,t,r);return"afterDestroy"===t&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,t,r,i){i=i||{};for(const s of e){const o=s.plugin;if(!1===ir(o[r],[t,i,s.options],o)&&i.cancelable)return!1}return!0}invalidate(){cn(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const r=e&&e.config,i=Rt(r.options&&r.options.plugins,{}),s=function qNe(n){const e={},t=[],r=Object.keys(Dl.plugins.items);for(let s=0;s<r.length;s++)t.push(Dl.getPlugin(r[s]));const i=n.plugins||[];for(let s=0;s<i.length;s++){const o=i[s];-1===t.indexOf(o)&&(t.push(o),e[o.id]=!0)}return{plugins:t,localIds:e}}(r);return!1!==i||t?function KNe(n,{plugins:e,localIds:t},r,i){const s=[],o=n.getContext();for(const a of e){const l=a.id,u=jNe(r[l],i);null!==u&&s.push({plugin:a,options:YNe(n.config,{plugin:a,local:t[l]},u,o)})}return s}(e,s,i,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],r=this._cache,i=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(t,r),e,"stop"),this._notify(i(r,t),e,"start")}}function jNe(n,e){return e||!1!==n?!0===n?{}:n:null}function YNe(n,{plugin:e,local:t},r,i){const s=n.pluginScopeKeys(e),o=n.getOptionScopes(r,s);return t&&e.defaults&&o.push(e.defaults),n.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function l1(n,e){return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||(Cr.datasets[n]||{}).indexAxis||"x"}function L7(n){if("x"===n||"y"===n||"r"===n)return n}function XNe(n){return"top"===n||"bottom"===n?"x":"left"===n||"right"===n?"y":void 0}function u1(n,...e){if(L7(n))return n;for(const t of e){const r=t.axis||XNe(t.position)||n.length>1&&L7(n[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function V7(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function U7(n){const e=n.options||(n.options={});e.plugins=Rt(e.plugins,{}),e.scales=function eke(n,e){const t=Lh[n.type]||{scales:{}},r=e.scales||{},i=l1(n.type,e),s=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!Xt(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=u1(o,a,function ZNe(n,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(r=>r.xAxisID===n||r.yAxisID===n);if(t.length)return V7(n,"x",t[0])||V7(n,"y",t[0])}return{}}(o,n),Cr.scales[a.type]),u=function JNe(n,e){return n===e?"_index_":"_value_"}(l,i),c=t.scales||{};s[o]=IE(Object.create(null),[{axis:l},a,c[l],c[u]])}),n.data.datasets.forEach(o=>{const a=o.type||n.type,l=o.indexAxis||l1(a,e),c=(Lh[a]||{}).scales||{};Object.keys(c).forEach(d=>{const f=function QNe(n,e){let t=n;return"_index_"===n?t=e:"_value_"===n&&(t="x"===e?"y":"x"),t}(d,l),y=o[f+"AxisID"]||f;s[y]=s[y]||Object.create(null),IE(s[y],[{axis:f},r[y],c[d]])})}),Object.keys(s).forEach(o=>{const a=s[o];IE(a,[Cr.scales[a.type],Cr.scale])}),s}(n,e)}function B7(n){return(n=n||{}).datasets=n.datasets||[],n.labels=n.labels||[],n}const $7=new Map,H7=new Set;function eA(n,e){let t=$7.get(n);return t||(t=e(),$7.set(n,t),H7.add(t)),t}const VE=(n,e,t)=>{const r=Kc(e,t);void 0!==r&&n.add(r)};class nke{constructor(e){this._config=function tke(n){return(n=n||{}).data=B7(n.data),U7(n),n}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=B7(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),U7(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return eA(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return eA(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return eA(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id;return eA(`${this.type}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const r=this._scopeCache;let i=r.get(e);return(!i||t)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,t,r){const{options:i,type:s}=this,o=this._cachedScopes(e,r),a=o.get(t);if(a)return a;const l=new Set;t.forEach(c=>{e&&(l.add(e),c.forEach(d=>VE(l,e,d))),c.forEach(d=>VE(l,i,d)),c.forEach(d=>VE(l,Lh[s]||{},d)),c.forEach(d=>VE(l,Cr,d)),c.forEach(d=>VE(l,zO,d))});const u=Array.from(l);return 0===u.length&&u.push(Object.create(null)),H7.has(t)&&o.set(t,u),u}chartOptionScopes(){const{options:e,type:t}=this;return[e,Lh[t]||{},Cr.datasets[t]||{},{type:t},Cr,zO]}resolveNamedOptions(e,t,r,i=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=z7(this._resolverCache,e,i);let l=o;(function ike(n,e){const{isScriptable:t,isIndexable:r}=GK(n);for(const i of e){const s=t(i),o=r(i),a=(o||s)&&n[i];if(s&&(Yc(a)||rke(a))||o&&fr(a))return!0}return!1})(o,t)&&(s.$shared=!1,l=Yg(o,r=Yc(r)?r():r,this.createResolver(e,r,a)));for(const u of t)s[u]=l[u];return s}createResolver(e,t,r=[""],i){const{resolver:s}=z7(this._resolverCache,e,r);return Xt(t)?Yg(s,t,void 0,i):s}}function z7(n,e,t){let r=n.get(e);r||(r=new Map,n.set(e,r));const i=t.join();let s=r.get(i);return s||(s={resolver:jO(e,t),subPrefixes:t.filter(a=>!a.toLowerCase().includes("hover"))},r.set(i,s)),s}const rke=n=>Xt(n)&&Object.getOwnPropertyNames(n).some(e=>Yc(n[e])),oke=["top","bottom","left","right","chartArea"];function W7(n,e){return"top"===n||"bottom"===n||-1===oke.indexOf(n)&&"x"===e}function G7(n,e){return function(t,r){return t[n]===r[n]?t[e]-r[e]:t[n]-r[n]}}function q7(n){const e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),ir(t&&t.onComplete,[n],e)}function ake(n){const e=n.chart,t=e.options.animation;ir(t&&t.onProgress,[n],e)}function j7(n){return QO()&&"string"==typeof n?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const tA={},K7=n=>{const e=j7(n);return Object.values(tA).filter(t=>t.canvas===e).pop()};function lke(n,e,t){const r=Object.keys(n);for(const i of r){const s=+i;if(s>=e){const o=n[i];delete n[i],(t>0||s>e)&&(n[s+t]=o)}}}function nA(n,e,t){return n.options.clip?n[t]:e[t]}let c1=(()=>class n{static defaults=Cr;static instances=tA;static overrides=Lh;static registry=Dl;static version="4.4.7";static getChart=K7;static register(...t){Dl.add(...t),Y7()}static unregister(...t){Dl.remove(...t),Y7()}constructor(t,r){const i=this.config=new nke(r),s=j7(t),o=K7(s);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const a=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||function SNe(n){return!QO()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?pNe:ANe}(s)),this.platform.updateConfig(i);const l=this.platform.acquireContext(s,a.aspectRatio),u=l&&l.canvas,c=u&&u.height,d=u&&u.width;this.id=uPe(),this.ctx=l,this.canvas=u,this.width=d,this.height=c,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new GNe,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function bPe(n,e){let t;return function(...r){return e?(clearTimeout(t),t=setTimeout(n,e,r)):n.apply(this,r),e}}(f=>this.update(f),a.resizeDelay||0),this._dataChanges=[],tA[this.id]=this,l&&u?(mu.listen(this,"complete",q7),mu.listen(this,"progress",ake),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:r},width:i,height:s,_aspectRatio:o}=this;return cn(t)?r&&o?o:s?i/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Dl}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():ZK(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return HK(this.canvas,this.ctx),this}stop(){return mu.stop(this),this}resize(t,r){mu.running(this)?this._resizeBeforeDraw={width:t,height:r}:this._resize(t,r)}_resize(t,r){const i=this.options,a=this.platform.getMaximumSize(this.canvas,t,r,i.maintainAspectRatio&&this.aspectRatio),l=i.devicePixelRatio||this.platform.getDevicePixelRatio(),u=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,ZK(this,l,!0)&&(this.notifyPlugins("resize",{size:a}),ir(i.onResize,[this,a],this),this.attached&&this._doResize(u)&&this.render())}ensureScalesHaveIDs(){Mn(this.options.scales||{},(i,s)=>{i.id=s})}buildOrUpdateScales(){const t=this.options,r=t.scales,i=this.scales,s=Object.keys(i).reduce((a,l)=>(a[l]=!1,a),{});let o=[];r&&(o=o.concat(Object.keys(r).map(a=>{const l=r[a],u=u1(a,l),c="r"===u,d="x"===u;return{options:l,dposition:c?"chartArea":d?"bottom":"left",dtype:c?"radialLinear":d?"category":"linear"}}))),Mn(o,a=>{const l=a.options,u=l.id,c=u1(u,l),d=Rt(l.type,a.dtype);(void 0===l.position||W7(l.position,c)!==W7(a.dposition))&&(l.position=a.dposition),s[u]=!0;let f=null;u in i&&i[u].type===d?f=i[u]:(f=new(Dl.getScale(d))({id:u,type:d,ctx:this.ctx,chart:this}),i[f.id]=f),f.init(l,t)}),Mn(s,(a,l)=>{a||delete i[l]}),Mn(i,a=>{fs.configure(this,a,a.options),fs.addBox(this,a)})}_updateMetasets(){const t=this._metasets,r=this.data.datasets.length,i=t.length;if(t.sort((s,o)=>s.index-o.index),i>r){for(let s=r;s<i;++s)this._destroyDatasetMeta(s);t.splice(r,i-r)}this._sortedMetasets=t.slice(0).sort(G7("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:r}}=this;t.length>r.length&&delete this._stacks,t.forEach((i,s)=>{0===r.filter(o=>o===i._dataset).length&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const t=[],r=this.data.datasets;let i,s;for(this._removeUnreferencedMetasets(),i=0,s=r.length;i<s;i++){const o=r[i];let a=this.getDatasetMeta(i);const l=o.type||this.config.type;if(a.type&&a.type!==l&&(this._destroyDatasetMeta(i),a=this.getDatasetMeta(i)),a.type=l,a.indexAxis=o.indexAxis||l1(l,this.options),a.order=o.order||0,a.index=i,a.label=""+o.label,a.visible=this.isDatasetVisible(i),a.controller)a.controller.updateIndex(i),a.controller.linkScales();else{const u=Dl.getController(l),{datasetElementType:c,dataElementType:d}=Cr.datasets[l];Object.assign(u,{dataElementType:Dl.getElement(d),datasetElementType:c&&Dl.getElement(c)}),a.controller=new u(this,i),t.push(a.controller)}}return this._updateMetasets(),t}_resetElements(){Mn(this.data.datasets,(t,r)=>{this.getDatasetMeta(r).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const r=this.config;r.update();const i=this._options=r.createResolver(r.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0}))return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let c=0,d=this.data.datasets.length;c<d;c++){const{controller:f}=this.getDatasetMeta(c),y=!s&&-1===o.indexOf(f);f.buildOrUpdateElements(y),a=Math.max(+f.getMaxOverflow(),a)}a=this._minPadding=i.layout.autoPadding?a:0,this._updateLayout(a),s||Mn(o,c=>{c.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(G7("z","_idx"));const{_active:l,_lastEvent:u}=this;u?this._eventHandler(u,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){Mn(this.scales,t=>{fs.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,r=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!TK(r,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,r=this._getUniformDataChanges()||[];for(const{method:i,start:s,count:o}of r)lke(t,s,"_removeElements"===i?-o:o)}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const r=this.data.datasets.length,i=o=>new Set(t.filter(a=>a[0]===o).map((a,l)=>l+","+a.splice(1).join(","))),s=i(0);for(let o=1;o<r;o++)if(!TK(s,i(o)))return;return Array.from(s).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(t){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;fs.update(this,this.width,this.height,t);const r=this.chartArea,i=r.width<=0||r.height<=0;this._layers=[],Mn(this.boxes,s=>{i&&"chartArea"===s.position||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,o)=>{s._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})){for(let r=0,i=this.data.datasets.length;r<i;++r)this.getDatasetMeta(r).controller.configure();for(let r=0,i=this.data.datasets.length;r<i;++r)this._updateDataset(r,Yc(t)?t({datasetIndex:r}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,r){const i=this.getDatasetMeta(t),s={meta:i,index:t,mode:r,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",s)&&(i.controller._update(r),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(mu.has(this)?this.attached&&!mu.running(this)&&mu.start(this):(this.draw(),q7({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,s)}if(this.clear(),this.width<=0||this.height<=0||!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const r=this._layers;for(t=0;t<r.length&&r[t].z<=0;++t)r[t].draw(this.chartArea);for(this._drawDatasets();t<r.length;++t)r[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const r=this._sortedMetasets,i=[];let s,o;for(s=0,o=r.length;s<o;++s){const a=r[s];(!t||a.visible)&&i.push(a)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const t=this.getSortedVisibleDatasetMetas();for(let r=t.length-1;r>=0;--r)this._drawDataset(t[r]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const r=this.ctx,i=t._clip,s=!i.disabled,o=function cke(n,e){const{xScale:t,yScale:r}=n;return t&&r?{left:nA(t,e,"left"),right:nA(t,e,"right"),top:nA(r,e,"top"),bottom:nA(r,e,"bottom")}:e}(t,this.chartArea),a={meta:t,index:t.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",a)&&(s&&z0(r,{left:!1===i.left?0:o.left-i.left,right:!1===i.right?this.width:o.right+i.right,top:!1===i.top?0:o.top-i.top,bottom:!1===i.bottom?this.height:o.bottom+i.bottom}),t.controller.draw(),s&&W0(r),a.cancelable=!1,this.notifyPlugins("afterDatasetDraw",a))}isPointInArea(t){return gu(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,r,i,s){const o=oNe.modes[r];return"function"==typeof o?o(this,t,i,s):[]}getDatasetMeta(t){const r=this.data.datasets[t],i=this._metasets;let s=i.filter(o=>o&&o._dataset===r).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:r&&r.order||0,index:t,_dataset:r,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=Jc(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const r=this.data.datasets[t];if(!r)return!1;const i=this.getDatasetMeta(t);return"boolean"==typeof i.hidden?!i.hidden:!r.hidden}setDatasetVisibility(t,r){this.getDatasetMeta(t).hidden=!r}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,r,i){const s=i?"show":"hide",o=this.getDatasetMeta(t),a=o.controller._resolveAnimations(void 0,s);wE(r)?(o.data[r].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),a.update(o,{visible:i}),this.update(l=>l.datasetIndex===t?s:void 0))}hide(t,r){this._updateVisibility(t,r,!1)}show(t,r){this._updateVisibility(t,r,!0)}_destroyDatasetMeta(t){const r=this._metasets[t];r&&r.controller&&r.controller._destroy(),delete this._metasets[t]}_stop(){let t,r;for(this.stop(),mu.remove(this),t=0,r=this.data.datasets.length;t<r;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:r}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),HK(t,r),this.platform.releaseContext(r),this.canvas=null,this.ctx=null),delete tA[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,r=this.platform,i=(o,a)=>{r.addEventListener(this,o,a),t[o]=a},s=(o,a,l)=>{o.offsetX=a,o.offsetY=l,this._eventHandler(o)};Mn(this.options.events,o=>i(o,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,r=this.platform,i=(u,c)=>{r.addEventListener(this,u,c),t[u]=c},s=(u,c)=>{t[u]&&(r.removeEventListener(this,u,c),delete t[u])},o=(u,c)=>{this.canvas&&this.resize(u,c)};let a;const l=()=>{s("attach",l),this.attached=!0,this.resize(),i("resize",o),i("detach",a)};a=()=>{this.attached=!1,s("resize",o),this._stop(),this._resize(0,0),i("attach",l)},r.isAttached(this.canvas)?l():a()}unbindEvents(){Mn(this._listeners,(t,r)=>{this.platform.removeEventListener(this,r,t)}),this._listeners={},Mn(this._responsiveListeners,(t,r)=>{this.platform.removeEventListener(this,r,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,r,i){const s=i?"set":"remove";let o,a,l,u;for("dataset"===r&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+s+"DatasetHoverStyle"]()),l=0,u=t.length;l<u;++l){a=t[l];const c=a&&this.getDatasetMeta(a.datasetIndex).controller;c&&c[s+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const r=this._active||[],i=t.map(({datasetIndex:o,index:a})=>{const l=this.getDatasetMeta(o);if(!l)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:l.data[a],index:a}});!L0(i,r)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,r))}notifyPlugins(t,r,i){return this._plugins.notify(this,t,r,i)}isPluginEnabled(t){return 1===this._plugins._cache.filter(r=>r.plugin.id===t).length}_updateHoverStyles(t,r,i){const s=this.options.hover,o=(u,c)=>u.filter(d=>!c.some(f=>d.datasetIndex===f.datasetIndex&&d.index===f.index)),a=o(r,t),l=i?t:o(t,r);a.length&&this.updateHoverStyle(a,s.mode,!1),l.length&&s.mode&&this.updateHoverStyle(l,s.mode,!0)}_eventHandler(t,r){const i={event:t,replay:r,cancelable:!0,inChartArea:this.isPointInArea(t)},s=a=>(a.options.events||this.options.events).includes(t.native.type);if(!1===this.notifyPlugins("beforeEvent",i,s))return;const o=this._handleEvent(t,r,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(o||i.changed)&&this.render(),this}_handleEvent(t,r,i){const{_active:s=[],options:o}=this,l=this._getActiveElements(t,s,i,r),u=function gPe(n){return"mouseup"===n.type||"click"===n.type||"contextmenu"===n.type}(t),c=function uke(n,e,t,r){return t&&"mouseout"!==n.type?r?e:n:null}(t,this._lastEvent,i,u);i&&(this._lastEvent=null,ir(o.onHover,[t,l,this],this),u&&ir(o.onClick,[t,l,this],this));const d=!L0(l,s);return(d||r)&&(this._active=l,this._updateHoverStyles(l,s,r)),this._lastEvent=c,d}_getActiveElements(t,r,i,s){if("mouseout"===t.type)return[];if(!i)return r;const o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,s)}})();function Y7(){return Mn(c1.instances,n=>n._plugins.invalidate())}function Xg(n,e,t,r){return{x:t+n*Math.cos(e),y:r+n*Math.sin(e)}}function rA(n,e,t,r,i,s){const{x:o,y:a,startAngle:l,pixelMargin:u,innerRadius:c}=e,d=Math.max(e.outerRadius+r+t-u,0),f=c>0?c+r+t+u:0;let y=0;const E=i-l;if(r){const Kn=((c>0?c-r:0)+(d>0?d-r:0))/2;y=(E-(0!==Kn?E*Kn/(Kn+r):E))/2}const T=(E-Math.max(.001,E*d-t/pr)/d)/2,P=l+T+y,x=i-T-y,{outerStart:V,outerEnd:W,innerStart:K,innerEnd:Y}=function fke(n,e,t,r){const i=function hke(n){return qO(n,["outerStart","outerEnd","innerStart","innerEnd"])}(n.options.borderRadius),s=(t-e)/2,o=Math.min(s,r*e/2),a=l=>{const u=(t-Math.min(s,l))*r/2;return Ui(l,0,Math.min(s,u))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:Ui(i.innerStart,0,o),innerEnd:Ui(i.innerEnd,0,o)}}(e,f,d,x-P),U=d-V,N=d-W,F=P+V/U,B=x-W/N,H=f+K,J=f+Y,q=P+K/H,nn=x-Y/J;if(n.beginPath(),s){const Nt=(F+B)/2;if(n.arc(o,a,d,F,Nt),n.arc(o,a,d,Nt,B),W>0){const ci=Xg(N,B,o,a);n.arc(ci.x,ci.y,W,B,x+Xr)}const or=Xg(J,x,o,a);if(n.lineTo(or.x,or.y),Y>0){const ci=Xg(J,nn,o,a);n.arc(ci.x,ci.y,Y,x+Xr,nn+Math.PI)}const Kn=(x-Y/f+(P+K/f))/2;if(n.arc(o,a,f,x-Y/f,Kn,!0),n.arc(o,a,f,Kn,P+K/f,!0),K>0){const ci=Xg(H,q,o,a);n.arc(ci.x,ci.y,K,q+Math.PI,P-Xr)}const Xi=Xg(U,P,o,a);if(n.lineTo(Xi.x,Xi.y),V>0){const ci=Xg(U,F,o,a);n.arc(ci.x,ci.y,V,P-Xr,F)}}else{n.moveTo(o,a);const Nt=Math.cos(F)*d+o,or=Math.sin(F)*d+a;n.lineTo(Nt,or);const Kn=Math.cos(B)*d+o,Xi=Math.sin(B)*d+a;n.lineTo(Kn,Xi)}n.closePath()}function Q7(n,e,t=e){n.lineCap=Rt(t.borderCapStyle,e.borderCapStyle),n.setLineDash(Rt(t.borderDash,e.borderDash)),n.lineDashOffset=Rt(t.borderDashOffset,e.borderDashOffset),n.lineJoin=Rt(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=Rt(t.borderWidth,e.borderWidth),n.strokeStyle=Rt(t.borderColor,e.borderColor)}function _ke(n,e,t){n.lineTo(t.x,t.y)}function J7(n,e,t={}){const r=n.length,{start:i=0,end:s=r-1}=t,{start:o,end:a}=e,l=Math.max(i,o),u=Math.min(s,a);return{count:r,start:l,loop:e.loop,ilen:u<l&&!(i<o&&s<o||i>a&&s>a)?r+u-l:u-l}}function vke(n,e,t,r){const{points:i,options:s}=e,{count:o,start:a,loop:l,ilen:u}=J7(i,t,r),c=function yke(n){return n.stepped?LPe:n.tension||"monotone"===n.cubicInterpolationMode?VPe:_ke}(s);let y,E,I,{move:d=!0,reverse:f}=r||{};for(y=0;y<=u;++y)E=i[(a+(f?u-y:y))%o],!E.skip&&(d?(n.moveTo(E.x,E.y),d=!1):c(n,I,E,f,s.stepped),I=E);return l&&(E=i[(a+(f?u:0))%o],c(n,I,E,f,s.stepped)),!!l}function Eke(n,e,t,r){const i=e.points,{count:s,start:o,ilen:a}=J7(i,t,r),{move:l=!0,reverse:u}=r||{};let f,y,E,I,T,P,c=0,d=0;const x=W=>(o+(u?a-W:W))%s,V=()=>{I!==T&&(n.lineTo(c,T),n.lineTo(c,I),n.lineTo(c,P))};for(l&&(y=i[x(0)],n.moveTo(y.x,y.y)),f=0;f<=a;++f){if(y=i[x(f)],y.skip)continue;const W=y.x,K=y.y,Y=0|W;Y===E?(K<I?I=K:K>T&&(T=K),c=(d*c+W)/++d):(V(),n.lineTo(W,K),E=Y,d=0,I=T=K),P=K}V()}function d1(n){const e=n.options;return n._decimated||n._loop||e.tension||"monotone"===e.cubicInterpolationMode||e.stepped||e.borderDash&&e.borderDash.length?vke:Eke}const Tke="function"==typeof Path2D;let iA=(()=>class n extends _u{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t&&"fill"!==t};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,r){const i=this.options;!i.tension&&"monotone"!==i.cubicInterpolationMode||i.stepped||this._pointsUpdated||(lMe(this._points,i,t,i.spanGaps?this._loop:this._fullLoop,r),this._pointsUpdated=!0)}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function wMe(n,e){const t=n.points,r=n.options.spanGaps,i=t.length;if(!i)return[];const s=!!n._loop,{start:o,end:a}=function CMe(n,e,t,r){let i=0,s=e-1;if(t&&!r)for(;i<e&&!n[i].skip;)i++;for(;i<e&&n[i].skip;)i++;for(i%=e,t&&(s+=i);s>i&&n[s%e].skip;)s--;return s%=e,{start:i,end:s}}(t,i,s,r);return function a7(n,e,t,r){return r&&r.setContext&&t?function TMe(n,e,t,r){const i=n._chart.getContext(),s=l7(n.options),{_datasetIndex:o,options:{spanGaps:a}}=n,l=t.length,u=[];let c=s,d=e[0].start,f=d;function y(E,I,T,P){const x=a?-1:1;if(E!==I){for(E+=l;t[E%l].skip;)E-=x;for(;t[I%l].skip;)I+=x;E%l!=I%l&&(u.push({start:E%l,end:I%l,loop:T,style:P}),c=P,d=I%l)}}for(const E of e){d=a?d:E.start;let T,I=t[d%l];for(f=d+1;f<=E.end;f++){const P=t[f%l];T=l7(r.setContext(Jc(i,{type:"segment",p0:I,p1:P,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:o}))),bMe(T,c)&&y(d,f-1,E.loop,c),I=P,c=T}d<f-1&&y(d,f-1,E.loop,c)}return u}(n,e,t,r):e}(n,!0===r?[{start:o,end:a,loop:s}]:function IMe(n,e,t,r){const i=n.length,s=[];let l,o=e,a=n[e];for(l=e+1;l<=t;++l){const u=n[l%i];u.skip||u.stop?a.skip||(s.push({start:e%i,end:(l-1)%i,loop:r=!1}),e=o=u.stop?l:null):(o=l,a.skip&&(e=l)),a=u}return null!==o&&s.push({start:e%i,end:o%i,loop:r}),s}(t,o,a<o?a+i:a,!!n._fullLoop&&0===o&&a===i-1),t,e)}(this,this.options.segment))}first(){const t=this.segments;return t.length&&this.points[t[0].start]}last(){const t=this.segments,i=t.length;return i&&this.points[t[i-1].end]}interpolate(t,r){const i=this.options,s=t[r],o=this.points,a=o7(this,{property:r,start:s,end:s});if(!a.length)return;const l=[],u=function Cke(n){return n.stepped?mMe:n.tension||"monotone"===n.cubicInterpolationMode?_Me:zh}(i);let c,d;for(c=0,d=a.length;c<d;++c){const{start:f,end:y}=a[c],E=o[f],I=o[y];if(E===I){l.push(E);continue}const P=u(E,I,Math.abs((s-E[r])/(I[r]-E[r])),i.stepped);P[r]=t[r],l.push(P)}return 1===l.length?l[0]:l}pathSegment(t,r,i){return d1(this)(t,this,r,i)}path(t,r,i){const s=this.segments,o=d1(this);let a=this._loop;r=r||0,i=i||this.points.length-r;for(const l of s)a&=o(t,this,l,{start:r,end:r+i-1});return!!a}draw(t,r,i,s){(this.points||[]).length&&(this.options||{}).borderWidth&&(t.save(),function bke(n,e,t,r){Tke&&!e.options.segment?function Ike(n,e,t,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,t,r)&&i.closePath()),Q7(n,e.options),n.stroke(i)}(n,e,t,r):function wke(n,e,t,r){const{segments:i,options:s}=e,o=d1(e);for(const a of i)Q7(n,s,a.style),n.beginPath(),o(n,e,a,{start:t,end:t+r-1})&&n.closePath(),n.stroke()}(n,e,t,r)}(t,this,i,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}})();function X7(n,e,t,r){const i=n.options,{[t]:s}=n.getProps([t],r);return Math.abs(e-s)<i.radius+i.hitRadius}let Ake=(()=>class n extends _u{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,r,i){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],i);return Math.pow(t-o,2)+Math.pow(r-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(t,r){return X7(this,t,"x",r)}inYRange(t,r){return X7(this,t,"y",r)}getCenterPoint(t){const{x:r,y:i}=this.getProps(["x","y"],t);return{x:r,y:i}}size(t){let r=(t=t||this.options||{}).radius||0;return r=Math.max(r,r&&t.hoverRadius||0),2*(r+(r&&t.borderWidth||0))}draw(t,r){const i=this.options;this.skip||i.radius<.1||!gu(this,r,this.size(i)/2)||(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,GO(t,i,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}})();function Z7(n,e){const{x:t,y:r,base:i,width:s,height:o}=n.getProps(["x","y","base","width","height"],e);let a,l,u,c,d;return n.horizontal?(d=o/2,a=Math.min(t,i),l=Math.max(t,i),u=r-d,c=r+d):(d=s/2,a=t-d,l=t+d,u=Math.min(r,i),c=Math.max(r,i)),{left:a,top:u,right:l,bottom:c}}function Zc(n,e,t,r){return n?0:Ui(e,t,r)}function h1(n,e,t,r){const i=null===e,s=null===t,a=n&&!(i&&s)&&Z7(n,r);return a&&(i||fu(e,a.left,a.right))&&(s||fu(t,a.top,a.bottom))}function Pke(n,e){n.rect(e.x,e.y,e.w,e.h)}function f1(n,e,t={}){const r=n.x!==t.x?-e:0,i=n.y!==t.y?-e:0;return{x:n.x+r,y:n.y+i,w:n.w+((n.x+n.w!==t.x+t.w?e:0)-r),h:n.h+((n.y+n.h!==t.y+t.h?e:0)-i),radius:n.radius}}var Nke=Object.freeze({__proto__:null,ArcElement:class mke extends _u{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>"borderDash"!==e};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,r){const i=this.getProps(["x","y"],r),{angle:s,distance:o}=xK(i,{x:e,y:t}),{startAngle:a,endAngle:l,innerRadius:u,outerRadius:c,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),f=(this.options.spacing+this.options.borderWidth)/2,y=Rt(d,l-a),E=bE(s,a,l)&&a!==l,I=y>=gr||E,T=fu(o,u+f,c+f);return I&&T}getCenterPoint(e){const{x:t,y:r,startAngle:i,endAngle:s,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:l,spacing:u}=this.options,c=(i+s)/2,d=(o+a+u+l)/2;return{x:t+Math.cos(c)*d,y:r+Math.sin(c)*d}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:r}=this,i=(t.offset||0)/4,s=(t.spacing||0)/2,o=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=r>gr?Math.floor(r/gr):0,0===r||this.innerRadius<0||this.outerRadius<0)return;e.save();const a=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(a)*i,Math.sin(a)*i);const u=i*(1-Math.sin(Math.min(pr,r||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function pke(n,e,t,r,i){const{fullCircles:s,startAngle:o,circumference:a}=e;let l=e.endAngle;if(s){rA(n,e,t,r,l,i);for(let u=0;u<s;++u)n.fill();isNaN(a)||(l=o+(a%gr||gr))}rA(n,e,t,r,l,i),n.fill()}(e,this,u,s,o),function gke(n,e,t,r,i){const{fullCircles:s,startAngle:o,circumference:a,options:l}=e,{borderWidth:u,borderJoinStyle:c,borderDash:d,borderDashOffset:f}=l,y="inner"===l.borderAlign;if(!u)return;n.setLineDash(d||[]),n.lineDashOffset=f,y?(n.lineWidth=2*u,n.lineJoin=c||"round"):(n.lineWidth=u,n.lineJoin=c||"bevel");let E=e.endAngle;if(s){rA(n,e,t,r,E,i);for(let I=0;I<s;++I)n.stroke();isNaN(a)||(E=o+(a%gr||gr))}y&&function dke(n,e,t){const{startAngle:r,pixelMargin:i,x:s,y:o,outerRadius:a,innerRadius:l}=e;let u=i/a;n.beginPath(),n.arc(s,o,a,r-u,t+u),l>i?(u=i/l,n.arc(s,o,l,t+u,r-u,!0)):n.arc(s,o,i,t+Xr,r-Xr),n.closePath(),n.clip()}(n,e,E),s||(rA(n,e,t,r,E,i),n.stroke())}(e,this,u,s,o),e.restore()}},BarElement:class Mke extends _u{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:r,backgroundColor:i}}=this,{inner:s,outer:o}=function xke(n){const e=Z7(n),t=e.right-e.left,r=e.bottom-e.top,i=function Ske(n,e,t){const i=n.borderSkipped,s=WK(n.options.borderWidth);return{t:Zc(i.top,s.top,0,t),r:Zc(i.right,s.right,0,e),b:Zc(i.bottom,s.bottom,0,t),l:Zc(i.left,s.left,0,e)}}(n,t/2,r/2),s=function Dke(n,e,t){const{enableBorderRadius:r}=n.getProps(["enableBorderRadius"]),i=n.options.borderRadius,s=Bh(i),o=Math.min(e,t),a=n.borderSkipped,l=r||Xt(i);return{topLeft:Zc(!l||a.top||a.left,s.topLeft,0,o),topRight:Zc(!l||a.top||a.right,s.topRight,0,o),bottomLeft:Zc(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:Zc(!l||a.bottom||a.right,s.bottomRight,0,o)}}(n,t/2,r/2);return{outer:{x:e.left,y:e.top,w:t,h:r,radius:s},inner:{x:e.left+i.l,y:e.top+i.t,w:t-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}(this),a=function Rke(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}(o.radius)?xE:Pke;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,f1(o,t,s)),e.clip(),a(e,f1(s,-t,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),a(e,f1(s,t)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,t,r){return h1(this,e,t,r)}inXRange(e,t){return h1(this,e,null,t)}inYRange(e,t){return h1(this,null,e,t)}getCenterPoint(e){const{x:t,y:r,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(t+i)/2:t,y:s?r:(r+i)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}},LineElement:iA,PointElement:Ake});const p1=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],eY=p1.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function tY(n){return p1[n%p1.length]}function nY(n){return eY[n%eY.length]}function rY(n){let e;for(e in n)if(n[e].borderColor||n[e].backgroundColor)return!0;return!1}var Bke={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,e,t){if(!t.enabled)return;const{data:{datasets:r},options:i}=n.config,{elements:s}=i,o=rY(r)||function Vke(n){return n&&(n.borderColor||n.backgroundColor)}(i)||s&&rY(s)||function Uke(){return"rgba(0,0,0,0.1)"!==Cr.borderColor||"rgba(0,0,0,0.1)"!==Cr.backgroundColor}();if(!t.forceOverride&&o)return;const a=function Lke(n){let e=0;return(t,r)=>{const i=n.getDatasetMeta(r).controller;i instanceof n1?e=function Oke(n,e){return n.backgroundColor=n.data.map(()=>tY(e++)),e}(t,e):i instanceof C7?e=function Fke(n,e){return n.backgroundColor=n.data.map(()=>nY(e++)),e}(t,e):i&&(e=function kke(n,e){return n.borderColor=tY(e),n.backgroundColor=nY(e),++e}(t,e))}}(n);r.forEach(a)}};function iY(n){if(n._decimated){const e=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function sY(n){n.data.datasets.forEach(e=>{iY(e)})}var Wke={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,e,t)=>{if(!t.enabled)return void sY(n);const r=n.width;n.data.datasets.forEach((i,s)=>{const{_data:o,indexAxis:a}=i,l=n.getDatasetMeta(s),u=o||i.data;if("y"===RE([a,n.options.indexAxis])||!l.controller.supportsDecimation)return;const c=n.scales[l.xAxisID];if("linear"!==c.type&&"time"!==c.type||n.options.parsing)return;let E,{start:d,count:f}=function zke(n,e){const t=e.length;let i,r=0;const{iScale:s}=n,{min:o,max:a,minDefined:l,maxDefined:u}=s.getUserBounds();return l&&(r=Ui(pu(e,s.axis,o).lo,0,t-1)),i=u?Ui(pu(e,s.axis,a).hi+1,r,t)-r:t-r,{start:r,count:i}}(l,u);if(f<=(t.threshold||4*r))iY(i);else{switch(cn(o)&&(i._data=u,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(I){this._data=I}})),t.algorithm){case"lttb":E=function $ke(n,e,t,r,i){const s=i.samples||r;if(s>=t)return n.slice(e,e+t);const o=[],a=(t-2)/(s-2);let l=0;const u=e+t-1;let d,f,y,E,I,c=e;for(o[l++]=n[c],d=0;d<s-2;d++){let x,T=0,P=0;const V=Math.floor((d+1)*a)+1+e,W=Math.min(Math.floor((d+2)*a)+1,t)+e,K=W-V;for(x=V;x<W;x++)T+=n[x].x,P+=n[x].y;T/=K,P/=K;const Y=Math.floor(d*a)+1+e,U=Math.min(Math.floor((d+1)*a)+1,t)+e,{x:N,y:F}=n[c];for(y=E=-1,x=Y;x<U;x++)E=.5*Math.abs((N-T)*(n[x].y-F)-(N-n[x].x)*(P-F)),E>y&&(y=E,f=n[x],I=x);o[l++]=f,c=I}return o[l++]=n[u],o}(u,d,f,r,t);break;case"min-max":E=function Hke(n,e,t,r){let o,a,l,u,c,d,f,y,E,I,i=0,s=0;const T=[],x=n[e].x,W=n[e+t-1].x-x;for(o=e;o<e+t;++o){a=n[o],l=(a.x-x)/W*r,u=a.y;const K=0|l;if(K===c)u<E?(E=u,d=o):u>I&&(I=u,f=o),i=(s*i+a.x)/++s;else{const Y=o-1;if(!cn(d)&&!cn(f)){const U=Math.min(d,f),N=Math.max(d,f);U!==y&&U!==Y&&T.push({...n[U],x:i}),N!==y&&N!==Y&&T.push({...n[N],x:i})}o>0&&Y!==y&&T.push(n[Y]),T.push(a),c=K,s=0,E=I=u,d=f=y=o}}return T}(u,d,f,r);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}i._decimated=E}})},destroy(n){sY(n)}};function g1(n,e,t,r){if(r)return;let i=e[n],s=t[n];return"angle"===n&&(i=Lo(i),s=Lo(s)),{property:n,start:i,end:s}}function m1(n,e,t){for(;e>n;e--){const r=t[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function oY(n,e,t,r){return n&&e?r(n[t],e[t]):n?n[t]:e?e[t]:0}function aY(n,e){let t=[],r=!1;return fr(n)?(r=!0,t=n):t=function qke(n,e){const{x:t=null,y:r=null}=n||{},i=e.points,s=[];return e.segments.forEach(({start:o,end:a})=>{a=m1(o,a,i);const l=i[o],u=i[a];null!==r?(s.push({x:l.x,y:r}),s.push({x:u.x,y:r})):null!==t&&(s.push({x:t,y:l.y}),s.push({x:t,y:u.y}))}),s}(n,e),t.length?new iA({points:t,options:{tension:0},_loop:r,_fullLoop:r}):null}function lY(n){return n&&!1!==n.fill}function jke(n,e,t){let i=n[e].fill;const s=[e];let o;if(!t)return i;for(;!1!==i&&-1===s.indexOf(i);){if(!Ur(i))return i;if(o=n[i],!o)return!1;if(o.visible)return i;s.push(i),i=o.fill}return!1}function Kke(n,e,t){const r=function Xke(n){const e=n.options,t=e.fill;let r=Rt(t&&t.target,t);return void 0===r&&(r=!!e.backgroundColor),!1!==r&&null!==r&&(!0===r?"origin":r)}(n);if(Xt(r))return!isNaN(r.value)&&r;let i=parseFloat(r);return Ur(i)&&Math.floor(i)===i?function Yke(n,e,t,r){return("-"===n||"+"===n)&&(t=e+t),!(t===e||t<0||t>=r)&&t}(r[0],e,i,t):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function tOe(n,e,t){const r=[];for(let i=0;i<t.length;i++){const s=t[i],{first:o,last:a,point:l}=nOe(s,e,"x");if(!(!l||o&&a))if(o)r.unshift(l);else if(n.push(l),!a)break}n.push(...r)}function nOe(n,e,t){const r=n.interpolate(e,t);if(!r)return{};const i=r[t],s=n.segments,o=n.points;let a=!1,l=!1;for(let u=0;u<s.length;u++){const c=s[u],d=o[c.start][t],f=o[c.end][t];if(fu(i,d,f)){a=i===d,l=i===f;break}}return{first:a,last:l,point:r}}class uY{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,r){const{x:i,y:s,radius:o}=this;return e.arc(i,s,o,(t=t||{start:0,end:gr}).end,t.start,!0),!r.bounds}interpolate(e){const{x:t,y:r,radius:i}=this,s=e.angle;return{x:t+Math.cos(s)*i,y:r+Math.sin(s)*i,angle:s}}}function _1(n,e,t){const r=function rOe(n){const{chart:e,fill:t,line:r}=n;if(Ur(t))return function iOe(n,e){const t=n.getDatasetMeta(e);return t&&n.isDatasetVisible(e)?t.dataset:null}(e,t);if("stack"===t)return function Zke(n){const{scale:e,index:t,line:r}=n,i=[],s=r.segments,o=r.points,a=function eOe(n,e){const t=[],r=n.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){const s=r[i];if(s.index===e)break;s.hidden||t.unshift(s.dataset)}return t}(e,t);a.push(aY({x:null,y:e.bottom},r));for(let l=0;l<s.length;l++){const u=s[l];for(let c=u.start;c<=u.end;c++)tOe(i,o[c],a)}return new iA({points:i,options:{}})}(n);if("shape"===t)return!0;const i=function sOe(n){return(n.scale||{}).getPointPositionForValue?function aOe(n){const{scale:e,fill:t}=n,r=e.options,i=e.getLabels().length,s=r.reverse?e.max:e.min,o=function Jke(n,e,t){let r;return r="start"===n?t:"end"===n?e.options.reverse?e.min:e.max:Xt(n)?n.value:e.getBaseValue(),r}(t,e,s),a=[];if(r.grid.circular){const l=e.getPointPositionForValue(0,s);return new uY({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<i;++l)a.push(e.getPointPositionForValue(l,o));return a}(n):function oOe(n){const{scale:e={},fill:t}=n,r=function Qke(n,e){let t=null;return"start"===n?t=e.bottom:"end"===n?t=e.top:Xt(n)?t=e.getPixelForValue(n.value):e.getBasePixel&&(t=e.getBasePixel()),t}(t,e);if(Ur(r)){const i=e.isHorizontal();return{x:i?r:null,y:i?null:r}}return null}(n)}(n);return i instanceof uY?i:aY(i,r)}(e),{line:i,scale:s,axis:o}=e,a=i.options,l=a.fill,u=a.backgroundColor,{above:c=u,below:d=u}=l||{};r&&i.points.length&&(z0(n,t),function lOe(n,e){const{line:t,target:r,above:i,below:s,area:o,scale:a}=e,l=t._loop?"angle":e.axis;n.save(),"x"===l&&s!==i&&(cY(n,r,o.top),dY(n,{line:t,target:r,color:i,scale:a,property:l}),n.restore(),n.save(),cY(n,r,o.bottom)),dY(n,{line:t,target:r,color:s,scale:a,property:l}),n.restore()}(n,{line:i,target:r,above:c,below:d,area:t,scale:s,axis:o}),W0(n))}function cY(n,e,t){const{segments:r,points:i}=e;let s=!0,o=!1;n.beginPath();for(const a of r){const{start:l,end:u}=a,c=i[l],d=i[m1(l,u,i)];s?(n.moveTo(c.x,c.y),s=!1):(n.lineTo(c.x,t),n.lineTo(c.x,c.y)),o=!!e.pathSegment(n,a,{move:o}),o?n.closePath():n.lineTo(d.x,t)}n.lineTo(e.first().x,t),n.closePath(),n.clip()}function dY(n,e){const{line:t,target:r,property:i,color:s,scale:o}=e,a=function Gke(n,e,t){const r=n.segments,i=n.points,s=e.points,o=[];for(const a of r){let{start:l,end:u}=a;u=m1(l,u,i);const c=g1(t,i[l],i[u],a.loop);if(!e.segments){o.push({source:a,target:c,start:i[l],end:i[u]});continue}const d=o7(e,c);for(const f of d){const y=g1(t,s[f.start],s[f.end],f.loop),E=s7(a,i,y);for(const I of E)o.push({source:I,target:f,start:{[t]:oY(c,y,"start",Math.max)},end:{[t]:oY(c,y,"end",Math.min)}})}}return o}(t,r,i);for(const{source:l,target:u,start:c,end:d}of a){const{style:{backgroundColor:f=s}={}}=l,y=!0!==r;n.save(),n.fillStyle=f,uOe(n,o,y&&g1(i,c,d)),n.beginPath();const E=!!t.pathSegment(n,l);let I;if(y){E?n.closePath():hY(n,r,d,i);const T=!!r.pathSegment(n,u,{move:E,reverse:!0});I=E&&T,I||hY(n,r,c,i)}n.closePath(),n.fill(I?"evenodd":"nonzero"),n.restore()}}function uOe(n,e,t){const{top:r,bottom:i}=e.chart.chartArea,{property:s,start:o,end:a}=t||{};"x"===s&&(n.beginPath(),n.rect(o,r,a-o,i-r),n.clip())}function hY(n,e,t,r){const i=e.interpolate(t,r);i&&n.lineTo(i.x,i.y)}var cOe={id:"filler",afterDatasetsUpdate(n,e,t){const r=(n.data.datasets||[]).length,i=[];let s,o,a,l;for(o=0;o<r;++o)s=n.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof iA&&(l={visible:n.isDatasetVisible(o),index:o,fill:Kke(a,o,r),chart:n,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,i.push(l);for(o=0;o<r;++o)l=i[o],l&&!1!==l.fill&&(l.fill=jke(i,o,t.propagate))},beforeDraw(n,e,t){const r="beforeDraw"===t.drawTime,i=n.getSortedVisibleDatasetMetas(),s=n.chartArea;for(let o=i.length-1;o>=0;--o){const a=i[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),r&&a.fill&&_1(n.ctx,a,s))}},beforeDatasetsDraw(n,e,t){if("beforeDatasetsDraw"!==t.drawTime)return;const r=n.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){const s=r[i].$filler;lY(s)&&_1(n.ctx,s,n.chartArea)}},beforeDatasetDraw(n,e,t){const r=e.meta.$filler;!lY(r)||"beforeDatasetDraw"!==t.drawTime||_1(n.ctx,r,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const fY=(n,e)=>{let{boxHeight:t=e,boxWidth:r=e}=n;return n.usePointStyle&&(t=Math.min(t,e),r=n.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:t,itemHeight:Math.max(e,t)}};class pY extends _u{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,r){this.maxWidth=e,this.maxHeight=t,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=ir(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(r=>e.filter(r,this.chart.data))),e.sort&&(t=t.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const r=e.labels,i=bi(r.font),s=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=fY(r,s);let u,c;t.font=i.string,this.isHorizontal()?(u=this.maxWidth,c=this._fitRows(o,s,a,l)+10):(c=this.maxHeight,u=this._fitCols(o,i,a,l)+10),this.width=Math.min(u,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,t,r,i){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.lineWidths=[0],c=i+a;let d=e;s.textAlign="left",s.textBaseline="middle";let f=-1,y=-c;return this.legendItems.forEach((E,I)=>{const T=r+t/2+s.measureText(E.text).width;(0===I||u[u.length-1]+T+2*a>o)&&(d+=c,u[u.length-(I>0?0:1)]=0,y+=c,f++),l[I]={left:0,top:y,row:f,width:T,height:i},u[u.length-1]+=T+a}),d}_fitCols(e,t,r,i){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.columnSizes=[],c=o-e;let d=a,f=0,y=0,E=0,I=0;return this.legendItems.forEach((T,P)=>{const{itemWidth:x,itemHeight:V}=function hOe(n,e,t,r,i){const s=function fOe(n,e,t,r){let i=n.text;return i&&"string"!=typeof i&&(i=i.reduce((s,o)=>s.length>o.length?s:o)),e+t.size/2+r.measureText(i).width}(r,n,e,t),o=function pOe(n,e,t){let r=n;return"string"!=typeof e.text&&(r=gY(e,t)),r}(i,r,e.lineHeight);return{itemWidth:s,itemHeight:o}}(r,t,s,T,i);P>0&&y+V+2*a>c&&(d+=f+a,u.push({width:f,height:y}),E+=f+a,I++,f=y=0),l[P]={left:E,top:y,col:I,width:x,height:V},f=Math.max(f,x),y+=V+a}),d+=f,u.push({width:f,height:y}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:r,labels:{padding:i},rtl:s}}=this,o=Jg(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=ds(r,this.left+i,this.right-this.lineWidths[a]);for(const u of t)a!==u.row&&(a=u.row,l=ds(r,this.left+i,this.right-this.lineWidths[a])),u.top+=this.top+e+i,u.left=o.leftForLtr(o.x(l),u.width),l+=u.width+i}else{let a=0,l=ds(r,this.top+e+i,this.bottom-this.columnSizes[a].height);for(const u of t)u.col!==a&&(a=u.col,l=ds(r,this.top+e+i,this.bottom-this.columnSizes[a].height)),u.top=l,u.left+=this.left+i,u.left=o.leftForLtr(o.x(u.left),u.width),l+=u.height+i}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;z0(e,this),this._draw(),W0(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:r,ctx:i}=this,{align:s,labels:o}=e,a=Cr.color,l=Jg(e.rtl,this.left,this.width),u=bi(o.font),{padding:c}=o,d=u.size,f=d/2;let y;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=u.string;const{boxWidth:E,boxHeight:I,itemHeight:T}=fY(o,d),V=this.isHorizontal(),W=this._computeTitleHeight();y=V?{x:ds(s,this.left+c,this.right-r[0]),y:this.top+c+W,line:0}:{x:this.left+c,y:ds(s,this.top+W+c,this.bottom-t[0].height),line:0},t7(this.ctx,e.textDirection);const K=T+c;this.legendItems.forEach((Y,U)=>{i.strokeStyle=Y.fontColor,i.fillStyle=Y.fontColor;const N=i.measureText(Y.text).width,F=l.textAlign(Y.textAlign||(Y.textAlign=o.textAlign)),B=E+f+N;let H=y.x,J=y.y;l.setWidth(this.width),V?U>0&&H+B+c>this.right&&(J=y.y+=K,y.line++,H=y.x=ds(s,this.left+c,this.right-r[y.line])):U>0&&J+K>this.bottom&&(H=y.x=H+t[y.line].width+c,y.line++,J=y.y=ds(s,this.top+W+c,this.bottom-t[y.line].height)),function(Y,U,N){if(isNaN(E)||E<=0||isNaN(I)||I<0)return;i.save();const F=Rt(N.lineWidth,1);if(i.fillStyle=Rt(N.fillStyle,a),i.lineCap=Rt(N.lineCap,"butt"),i.lineDashOffset=Rt(N.lineDashOffset,0),i.lineJoin=Rt(N.lineJoin,"miter"),i.lineWidth=F,i.strokeStyle=Rt(N.strokeStyle,a),i.setLineDash(Rt(N.lineDash,[])),o.usePointStyle){const B={radius:I*Math.SQRT2/2,pointStyle:N.pointStyle,rotation:N.rotation,borderWidth:F},H=l.xPlus(Y,E/2);zK(i,B,H,U+f,o.pointStyleWidth&&E)}else{const B=U+Math.max((d-I)/2,0),H=l.leftForLtr(Y,E),J=Bh(N.borderRadius);i.beginPath(),Object.values(J).some(q=>0!==q)?xE(i,{x:H,y:B,w:E,h:I,radius:J}):i.rect(H,B,E,I),i.fill(),0!==F&&i.stroke()}i.restore()}(l.x(H),J,Y),H=((n,e,t,r)=>n===(r?"left":"right")?t:"center"===n?(e+t)/2:e)(F,H+E+f,V?H+B:this.right,e.rtl),function(Y,U,N){Uh(i,N.text,Y,U+T/2,u,{strikethrough:N.hidden,textAlign:l.textAlign(N.textAlign)})}(l.x(H),J,Y),V?y.x+=B+c:y.y+="string"!=typeof Y.text?gY(Y,u.lineHeight)+c:K}),n7(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,r=bi(t.font),i=hs(t.padding);if(!t.display)return;const s=Jg(e.rtl,this.left,this.width),o=this.ctx,a=t.position,u=i.top+r.size/2;let c,d=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),c=this.top+u,d=ds(e.align,d,this.right-f);else{const E=this.columnSizes.reduce((I,T)=>Math.max(I,T.height),0);c=u+ds(e.align,this.top,this.bottom-E-e.labels.padding-this._computeTitleHeight())}const y=ds(a,d,d+f);o.textAlign=s.textAlign(BO(a)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=r.string,Uh(o,t.text,y,c,r)}_computeTitleHeight(){const e=this.options.title,t=bi(e.font),r=hs(e.padding);return e.display?t.lineHeight+r.height:0}_getLegendItemAt(e,t){let r,i,s;if(fu(e,this.left,this.right)&&fu(t,this.top,this.bottom))for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],fu(e,i.left,i.left+i.width)&&fu(t,i.top,i.top+i.height))return this.legendItems[r];return null}handleEvent(e){const t=this.options;if(!function gOe(n,e){return!(("mousemove"!==n&&"mouseout"!==n||!e.onHover&&!e.onLeave)&&(!e.onClick||"click"!==n&&"mouseup"!==n))}(e.type,t))return;const r=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const i=this._hoveredItem,s=((n,e)=>null!==n&&null!==e&&n.datasetIndex===e.datasetIndex&&n.index===e.index)(i,r);i&&!s&&ir(t.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!s&&ir(t.onHover,[e,r,this],this)}else r&&ir(t.onClick,[e,r,this],this)}}function gY(n,e){return e*(n.text?n.text.length:0)}var mOe={id:"legend",_element:pY,start(n,e,t){const r=n.legend=new pY({ctx:n.ctx,options:t,chart:n});fs.configure(n,r,t),fs.addBox(n,r)},stop(n){fs.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){const r=n.legend;fs.configure(n,r,t),r.options=t},afterUpdate(n){const e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){const r=e.datasetIndex,i=t.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=n.legend.options;return n._getSortedDatasetMetas().map(l=>{const u=l.controller.getStyle(t?0:void 0),c=hs(u.borderWidth);return{text:e[l.index].label,fillStyle:u.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:u.borderColor,pointStyle:r||u.pointStyle,rotation:u.rotation,textAlign:i||u.textAlign,borderRadius:o&&(a||u.borderRadius),datasetIndex:l.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class y1 extends _u{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const r=this.options;if(this.left=0,this.top=0,!r.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const i=fr(r.text)?r.text.length:1;this._padding=hs(r.padding);const s=i*bi(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:r,bottom:i,right:s,options:o}=this,a=o.align;let u,c,d,l=0;return this.isHorizontal()?(c=ds(a,r,s),d=t+e,u=s-r):("left"===o.position?(c=r+e,d=ds(a,i,t),l=-.5*pr):(c=s-e,d=ds(a,t,i),l=.5*pr),u=i-t),{titleX:c,titleY:d,maxWidth:u,rotation:l}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const r=bi(t.font),s=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:u}=this._drawArgs(s);Uh(e,t.text,0,0,r,{color:t.color,maxWidth:l,rotation:u,textAlign:BO(t.align),textBaseline:"middle",translation:[o,a]})}}var yOe={id:"title",_element:y1,start(n,e,t){!function _Oe(n,e){const t=new y1({ctx:n.ctx,options:e,chart:n});fs.configure(n,t,e),fs.addBox(n,t),n.titleBlock=t}(n,t)},stop(n){fs.removeBox(n,n.titleBlock),delete n.titleBlock},beforeUpdate(n,e,t){const r=n.titleBlock;fs.configure(n,r,t),r.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const sA=new WeakMap;var vOe={id:"subtitle",start(n,e,t){const r=new y1({ctx:n.ctx,options:t,chart:n});fs.configure(n,r,t),fs.addBox(n,r),sA.set(n,r)},stop(n){fs.removeBox(n,sA.get(n)),sA.delete(n)},beforeUpdate(n,e,t){const r=sA.get(n);fs.configure(n,r,t),r.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const UE={average(n){if(!n.length)return!1;let e,t,r=new Set,i=0,s=0;for(e=0,t=n.length;e<t;++e){const a=n[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();r.add(l.x),i+=l.y,++s}}return 0!==s&&0!==r.size&&{x:[...r].reduce((a,l)=>a+l)/r.size,y:i/s}},nearest(n,e){if(!n.length)return!1;let s,o,a,t=e.x,r=e.y,i=Number.POSITIVE_INFINITY;for(s=0,o=n.length;s<o;++s){const l=n[s].element;if(l&&l.hasValue()){const c=VO(e,l.getCenterPoint());c<i&&(i=c,a=l)}}if(a){const l=a.tooltipPosition();t=l.x,r=l.y}return{x:t,y:r}}};function xl(n,e){return e&&(fr(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function yu(n){return("string"==typeof n||n instanceof String)&&n.indexOf("\n")>-1?n.split("\n"):n}function EOe(n,e){const{element:t,datasetIndex:r,index:i}=e,s=n.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(i);return{chart:n,label:o,parsed:s.getParsed(i),raw:n.data.datasets[r].data[i],formattedValue:a,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:t}}function mY(n,e){const t=n.chart.ctx,{body:r,footer:i,title:s}=n,{boxWidth:o,boxHeight:a}=e,l=bi(e.bodyFont),u=bi(e.titleFont),c=bi(e.footerFont),d=s.length,f=i.length,y=r.length,E=hs(e.padding);let I=E.height,T=0,P=r.reduce((W,K)=>W+K.before.length+K.lines.length+K.after.length,0);P+=n.beforeBody.length+n.afterBody.length,d&&(I+=d*u.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),P&&(I+=y*(e.displayColors?Math.max(a,l.lineHeight):l.lineHeight)+(P-y)*l.lineHeight+(P-1)*e.bodySpacing),f&&(I+=e.footerMarginTop+f*c.lineHeight+(f-1)*e.footerSpacing);let x=0;const V=function(W){T=Math.max(T,t.measureText(W).width+x)};return t.save(),t.font=u.string,Mn(n.title,V),t.font=l.string,Mn(n.beforeBody.concat(n.afterBody),V),x=e.displayColors?o+2+e.boxPadding:0,Mn(r,W=>{Mn(W.before,V),Mn(W.lines,V),Mn(W.after,V)}),x=0,t.font=c.string,Mn(n.footer,V),t.restore(),T+=E.width,{width:T,height:I}}function wOe(n,e,t,r){const{x:i,width:s}=t,{width:o,chartArea:{left:a,right:l}}=n;let u="center";return"center"===r?u=i<=(a+l)/2?"left":"right":i<=s/2?u="left":i>=o-s/2&&(u="right"),function IOe(n,e,t,r){const{x:i,width:s}=r,o=t.caretSize+t.caretPadding;if("left"===n&&i+s+o>e.width||"right"===n&&i-s-o<0)return!0}(u,n,e,t)&&(u="center"),u}function _Y(n,e,t){const r=t.yAlign||e.yAlign||function COe(n,e){const{y:t,height:r}=e;return t<r/2?"top":t>n.height-r/2?"bottom":"center"}(n,t);return{xAlign:t.xAlign||e.xAlign||wOe(n,e,t,r),yAlign:r}}function yY(n,e,t,r){const{caretSize:i,caretPadding:s,cornerRadius:o}=n,{xAlign:a,yAlign:l}=t,u=i+s,{topLeft:c,topRight:d,bottomLeft:f,bottomRight:y}=Bh(o);let E=function TOe(n,e){let{x:t,width:r}=n;return"right"===e?t-=r:"center"===e&&(t-=r/2),t}(e,a);const I=function bOe(n,e,t){let{y:r,height:i}=n;return"top"===e?r+=t:r-="bottom"===e?i+t:i/2,r}(e,l,u);return"center"===l?"left"===a?E+=u:"right"===a&&(E-=u):"left"===a?E-=Math.max(c,f)+i:"right"===a&&(E+=Math.max(d,y)+i),{x:Ui(E,0,r.width-e.width),y:Ui(I,0,r.height-e.height)}}function oA(n,e,t){const r=hs(t.padding);return"center"===e?n.x+n.width/2:"right"===e?n.x+n.width-r.right:n.x+r.left}function vY(n){return xl([],yu(n))}function EY(n,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}const CY={beforeTitle:hu,title(n){if(n.length>0){const e=n[0],t=e.chart.data.labels,r=t?t.length:0;if(this&&this.options&&"dataset"===this.options.mode)return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return t[e.dataIndex]}return""},afterTitle:hu,beforeBody:hu,beforeLabel:hu,label(n){if(this&&this.options&&"dataset"===this.options.mode)return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");const t=n.formattedValue;return cn(t)||(e+=t),e},labelColor(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:hu,afterBody:hu,beforeFooter:hu,footer:hu,afterFooter:hu};function uo(n,e,t,r){const i=n[e].call(t,r);return typeof i>"u"?CY[e].call(t,r):i}let IY=(()=>class n extends _u{static positioners=UE;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const r=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&r.options.animation&&i.animations,o=new c7(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=function AOe(n,e,t){return Jc(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,r){const{callbacks:i}=r,s=uo(i,"beforeTitle",this,t),o=uo(i,"title",this,t),a=uo(i,"afterTitle",this,t);let l=[];return l=xl(l,yu(s)),l=xl(l,yu(o)),l=xl(l,yu(a)),l}getBeforeBody(t,r){return vY(uo(r.callbacks,"beforeBody",this,t))}getBody(t,r){const{callbacks:i}=r,s=[];return Mn(t,o=>{const a={before:[],lines:[],after:[]},l=EY(i,o);xl(a.before,yu(uo(l,"beforeLabel",this,o))),xl(a.lines,uo(l,"label",this,o)),xl(a.after,yu(uo(l,"afterLabel",this,o))),s.push(a)}),s}getAfterBody(t,r){return vY(uo(r.callbacks,"afterBody",this,t))}getFooter(t,r){const{callbacks:i}=r,s=uo(i,"beforeFooter",this,t),o=uo(i,"footer",this,t),a=uo(i,"afterFooter",this,t);let l=[];return l=xl(l,yu(s)),l=xl(l,yu(o)),l=xl(l,yu(a)),l}_createItems(t){const r=this._active,i=this.chart.data,s=[],o=[],a=[];let u,c,l=[];for(u=0,c=r.length;u<c;++u)l.push(EOe(this.chart,r[u]));return t.filter&&(l=l.filter((d,f,y)=>t.filter(d,f,y,i))),t.itemSort&&(l=l.sort((d,f)=>t.itemSort(d,f,i))),Mn(l,d=>{const f=EY(t.callbacks,d);s.push(uo(f,"labelColor",this,d)),o.push(uo(f,"labelPointStyle",this,d)),a.push(uo(f,"labelTextColor",this,d))}),this.labelColors=s,this.labelPointStyles=o,this.labelTextColors=a,this.dataPoints=l,l}update(t,r){const i=this.options.setContext(this.getContext()),s=this._active;let o,a=[];if(s.length){const l=UE[i.position].call(this,s,this._eventPosition);a=this._createItems(i),this.title=this.getTitle(a,i),this.beforeBody=this.getBeforeBody(a,i),this.body=this.getBody(a,i),this.afterBody=this.getAfterBody(a,i),this.footer=this.getFooter(a,i);const u=this._size=mY(this,i),c=Object.assign({},l,u),d=_Y(this.chart,i,c),f=yY(i,c,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,o={opacity:1,x:f.x,y:f.y,width:u.width,height:u.height,caretX:l.x,caretY:l.y}}else 0!==this.opacity&&(o={opacity:0});this._tooltipItems=a,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:r})}drawCaret(t,r,i,s){const o=this.getCaretPosition(t,i,s);r.lineTo(o.x1,o.y1),r.lineTo(o.x2,o.y2),r.lineTo(o.x3,o.y3)}getCaretPosition(t,r,i){const{xAlign:s,yAlign:o}=this,{caretSize:a,cornerRadius:l}=i,{topLeft:u,topRight:c,bottomLeft:d,bottomRight:f}=Bh(l),{x:y,y:E}=t,{width:I,height:T}=r;let P,x,V,W,K,Y;return"center"===o?(K=E+T/2,"left"===s?(P=y,x=P-a,W=K+a,Y=K-a):(P=y+I,x=P+a,W=K-a,Y=K+a),V=P):(x="left"===s?y+Math.max(u,d)+a:"right"===s?y+I-Math.max(c,f)-a:this.caretX,"top"===o?(W=E,K=W-a,P=x-a,V=x+a):(W=E+T,K=W+a,P=x+a,V=x-a),Y=W),{x1:P,x2:x,x3:V,y1:W,y2:K,y3:Y}}drawTitle(t,r,i){const s=this.title,o=s.length;let a,l,u;if(o){const c=Jg(i.rtl,this.x,this.width);for(t.x=oA(this,i.titleAlign,i),r.textAlign=c.textAlign(i.titleAlign),r.textBaseline="middle",a=bi(i.titleFont),l=i.titleSpacing,r.fillStyle=i.titleColor,r.font=a.string,u=0;u<o;++u)r.fillText(s[u],c.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+l,u+1===o&&(t.y+=i.titleMarginBottom-l)}}_drawColorBox(t,r,i,s,o){const a=this.labelColors[i],l=this.labelPointStyles[i],{boxHeight:u,boxWidth:c}=o,d=bi(o.bodyFont),f=oA(this,"left",o),y=s.x(f),I=r.y+(u<d.lineHeight?(d.lineHeight-u)/2:0);if(o.usePointStyle){const T={radius:Math.min(c,u)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},P=s.leftForLtr(y,c)+c/2,x=I+u/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,GO(t,T,P,x),t.strokeStyle=a.borderColor,t.fillStyle=a.backgroundColor,GO(t,T,P,x)}else{t.lineWidth=Xt(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,t.strokeStyle=a.borderColor,t.setLineDash(a.borderDash||[]),t.lineDashOffset=a.borderDashOffset||0;const T=s.leftForLtr(y,c),P=s.leftForLtr(s.xPlus(y,1),c-2),x=Bh(a.borderRadius);Object.values(x).some(V=>0!==V)?(t.beginPath(),t.fillStyle=o.multiKeyBackground,xE(t,{x:T,y:I,w:c,h:u,radius:x}),t.fill(),t.stroke(),t.fillStyle=a.backgroundColor,t.beginPath(),xE(t,{x:P,y:I+1,w:c-2,h:u-2,radius:x}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(T,I,c,u),t.strokeRect(T,I,c,u),t.fillStyle=a.backgroundColor,t.fillRect(P,I+1,c-2,u-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,r,i){const{body:s}=this,{bodySpacing:o,bodyAlign:a,displayColors:l,boxHeight:u,boxWidth:c,boxPadding:d}=i,f=bi(i.bodyFont);let y=f.lineHeight,E=0;const I=Jg(i.rtl,this.x,this.width),T=function(F){r.fillText(F,I.x(t.x+E),t.y+y/2),t.y+=y+o},P=I.textAlign(a);let x,V,W,K,Y,U,N;for(r.textAlign=a,r.textBaseline="middle",r.font=f.string,t.x=oA(this,P,i),r.fillStyle=i.bodyColor,Mn(this.beforeBody,T),E=l&&"right"!==P?"center"===a?c/2+d:c+2+d:0,K=0,U=s.length;K<U;++K){for(x=s[K],V=this.labelTextColors[K],r.fillStyle=V,Mn(x.before,T),W=x.lines,l&&W.length&&(this._drawColorBox(r,t,K,I,i),y=Math.max(f.lineHeight,u)),Y=0,N=W.length;Y<N;++Y)T(W[Y]),y=f.lineHeight;Mn(x.after,T)}E=0,y=f.lineHeight,Mn(this.afterBody,T),t.y-=o}drawFooter(t,r,i){const s=this.footer,o=s.length;let a,l;if(o){const u=Jg(i.rtl,this.x,this.width);for(t.x=oA(this,i.footerAlign,i),t.y+=i.footerMarginTop,r.textAlign=u.textAlign(i.footerAlign),r.textBaseline="middle",a=bi(i.footerFont),r.fillStyle=i.footerColor,r.font=a.string,l=0;l<o;++l)r.fillText(s[l],u.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+i.footerSpacing}}drawBackground(t,r,i,s){const{xAlign:o,yAlign:a}=this,{x:l,y:u}=t,{width:c,height:d}=i,{topLeft:f,topRight:y,bottomLeft:E,bottomRight:I}=Bh(s.cornerRadius);r.fillStyle=s.backgroundColor,r.strokeStyle=s.borderColor,r.lineWidth=s.borderWidth,r.beginPath(),r.moveTo(l+f,u),"top"===a&&this.drawCaret(t,r,i,s),r.lineTo(l+c-y,u),r.quadraticCurveTo(l+c,u,l+c,u+y),"center"===a&&"right"===o&&this.drawCaret(t,r,i,s),r.lineTo(l+c,u+d-I),r.quadraticCurveTo(l+c,u+d,l+c-I,u+d),"bottom"===a&&this.drawCaret(t,r,i,s),r.lineTo(l+E,u+d),r.quadraticCurveTo(l,u+d,l,u+d-E),"center"===a&&"left"===o&&this.drawCaret(t,r,i,s),r.lineTo(l,u+f),r.quadraticCurveTo(l,u,l+f,u),r.closePath(),r.fill(),s.borderWidth>0&&r.stroke()}_updateAnimationTarget(t){const r=this.chart,i=this.$animations,s=i&&i.x,o=i&&i.y;if(s||o){const a=UE[t.position].call(this,this._active,this._eventPosition);if(!a)return;const l=this._size=mY(this,t),u=Object.assign({},a,this._size),c=_Y(r,t,u),d=yY(t,u,c,r);(s._to!==d.x||o._to!==d.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=l.width,this.height=l.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(t){const r=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(r);const s={width:this.width,height:this.height},o={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const a=hs(r.padding);r.enabled&&(this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length)&&(t.save(),t.globalAlpha=i,this.drawBackground(o,t,s,r),t7(t,r.textDirection),o.y+=a.top,this.drawTitle(o,t,r),this.drawBody(o,t,r),this.drawFooter(o,t,r),n7(t,r.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,r){const i=this._active,s=t.map(({datasetIndex:l,index:u})=>{const c=this.chart.getDatasetMeta(l);if(!c)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:c.data[u],index:u}}),o=!L0(i,s),a=this._positionChanged(s,r);(o||a)&&(this._active=s,this._eventPosition=r,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,r,i=!0){if(r&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,o=this._active||[],a=this._getActiveElements(t,o,r,i),l=this._positionChanged(a,t),u=r||!L0(a,o)||l;return u&&(this._active=a,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,r))),u}_getActiveElements(t,r,i,s){const o=this.options;if("mouseout"===t.type)return[];if(!s)return r.filter(l=>this.chart.data.datasets[l.datasetIndex]&&void 0!==this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index));const a=this.chart.getElementsAtEventForMode(t,o.mode,o,i);return o.reverse&&a.reverse(),a}_positionChanged(t,r){const{caretX:i,caretY:s,options:o}=this,a=UE[o.position].call(this,t,r);return!1!==a&&(i!==a.x||s!==a.y)}})();var SOe={id:"tooltip",_element:IY,positioners:UE,afterInit(n,e,t){t&&(n.tooltip=new IY({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){const e=n.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(!1===n.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0}))return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){n.tooltip&&n.tooltip.handleEvent(e.event,e.replay,e.inChartArea)&&(e.changed=!0)},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:CY},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>"filter"!==n&&"itemSort"!==n&&"external"!==n,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},DOe=Object.freeze({__proto__:null,Colors:Bke,Decimation:Wke,Filler:cOe,Legend:mOe,SubTitle:vOe,Title:yOe,Tooltip:SOe});function wY(n){const e=this.getLabels();return n>=0&&n<e.length?e[n]:n}let MOe=(()=>class n extends Gh{static id="category";static defaults={ticks:{callback:wY}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const r=this._addedLabels;if(r.length){const i=this.getLabels();for(const{index:s,label:o}of r)i[s]===o&&i.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,r){if(cn(t))return null;const i=this.getLabels();return((n,e)=>null===n?null:Ui(Math.round(n),0,e))(r=isFinite(r)&&i[r]===t?r:function ROe(n,e,t,r){const i=n.indexOf(e);return-1===i?((n,e,t,r)=>("string"==typeof e?(t=n.push(e)-1,r.unshift({index:t,label:e})):isNaN(e)&&(t=null),t))(n,e,t,r):i!==n.lastIndexOf(e)?t:i}(i,t,Rt(r,t),this._addedLabels),i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this.getMinMax(!0);"ticks"===this.options.bounds&&(t||(i=0),r||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){const t=this.min,r=this.max,i=this.options.offset,s=[];let o=this.getLabels();o=0===t&&r===o.length-1?o:o.slice(t,r+1),this._valueRange=Math.max(o.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let a=t;a<=r;a++)s.push({value:a});return s}getLabelForValue(t){return wY.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return"number"!=typeof t&&(t=this.parse(t)),null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const r=this.ticks;return t<0||t>r.length-1?null:this.getPixelForValue(r[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}})();function TY(n,e,{horizontal:t,minRotation:r}){const i=$a(r),s=(t?Math.sin(i):Math.cos(i))||.001;return Math.min(e/s,.75*e*(""+n).length)}class aA extends Gh{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return cn(e)||("number"==typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const o=l=>i=t?i:l,a=l=>s=r?s:l;if(e){const l=Sl(i),u=Sl(s);l<0&&u<0?a(0):l>0&&u>0&&o(0)}if(i===s){let l=0===s?1:Math.abs(.05*s);a(s+l),e||o(i-l)}this.min=i,this.max=s}getTickLimit(){const e=this.options.ticks;let i,{maxTicksLimit:t,stepSize:r}=e;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),t=t||11),t&&(i=Math.min(t,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const o=function NOe(n,e){const t=[],{bounds:i,step:s,min:o,max:a,precision:l,count:u,maxTicks:c,maxDigits:d,includeBounds:f}=n,y=s||1,E=c-1,{min:I,max:T}=e,P=!cn(o),x=!cn(a),V=!cn(u),W=(T-I)/(d+1);let Y,U,N,F,K=AK((T-I)/E/y)*y;if(K<1e-14&&!P&&!x)return[{value:I},{value:T}];F=Math.ceil(T/K)-Math.floor(I/K),F>E&&(K=AK(F*K/E/y)*y),cn(l)||(Y=Math.pow(10,l),K=Math.ceil(K*Y)/Y),"ticks"===i?(U=Math.floor(I/K)*K,N=Math.ceil(T/K)*K):(U=I,N=T),P&&x&&s&&function vPe(n,e){const t=Math.round(n);return t-e<=n&&t+e>=n}((a-o)/s,K/1e3)?(F=Math.round(Math.min((a-o)/K,c)),K=(a-o)/F,U=o,N=a):V?(U=P?o:U,N=x?a:N,F=u-1,K=(N-U)/F):(F=(N-U)/K,F=TE(F,Math.round(F),K/1e3)?Math.round(F):Math.ceil(F));const B=Math.max(DK(K),DK(U));Y=Math.pow(10,cn(l)?B:l),U=Math.round(U*Y)/Y,N=Math.round(N*Y)/Y;let H=0;for(P&&(f&&U!==o?(t.push({value:o}),U<o&&H++,TE(Math.round((U+H*K)*Y)/Y,o,TY(o,W,n))&&H++):U<o&&H++);H<F;++H){const J=Math.round((U+H*K)*Y)/Y;if(x&&J>a)break;t.push({value:J})}return x&&f&&N!==a?t.length&&TE(t[t.length-1].value,a,TY(a,W,n))?t[t.length-1].value=a:t.push({value:a}):(!x||N===a)&&t.push({value:N}),t}({maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&SK(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let t=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-t)/Math.max(e.length-1,1)/2;t-=i,r+=i}this._startValue=t,this._endValue=r,this._valueRange=r-t}getLabelForValue(e){return SE(e,this.chart.options.locale,this.options.ticks.format)}}const BE=n=>Math.floor(Qc(n)),qh=(n,e)=>Math.pow(10,BE(n)+e);function bY(n){return n/Math.pow(10,BE(n))==1}function AY(n,e,t){const r=Math.pow(10,t),i=Math.floor(n/r);return Math.ceil(e/r)-i}function v1(n){const e=n.ticks;if(e.display&&n.display){const t=hs(e.backdropPadding);return Rt(e.font&&e.font.size,Cr.font.size)+t.height}return 0}function VOe(n,e,t){return t=fr(t)?t:[t],{w:FPe(n,e.string,t),h:t.length*e.lineHeight}}function SY(n,e,t,r,i){return n===r||n===i?{start:e-t/2,end:e+t/2}:n<r||n>i?{start:e-t,end:e}:{start:e,end:e+t}}function BOe(n,e,t,r,i){const s=Math.abs(Math.sin(t)),o=Math.abs(Math.cos(t));let a=0,l=0;r.start<e.l?(a=(e.l-r.start)/s,n.l=Math.min(n.l,e.l-a)):r.end>e.r&&(a=(r.end-e.r)/s,n.r=Math.max(n.r,e.r+a)),i.start<e.t?(l=(e.t-i.start)/o,n.t=Math.min(n.t,e.t-l)):i.end>e.b&&(l=(i.end-e.b)/o,n.b=Math.max(n.b,e.b+l))}function $Oe(n,e,t){const r=n.drawingArea,{extra:i,additionalAngle:s,padding:o,size:a}=t,l=n.getPointPosition(e,r+i+o,s),u=Math.round(LO(Lo(l.angle+Xr))),c=function qOe(n,e,t){return 90===t||270===t?n-=e/2:(t>270||t<90)&&(n-=e),n}(l.y,a.h,u),d=function WOe(n){return 0===n||180===n?"center":n<180?"left":"right"}(u),f=function GOe(n,e,t){return"right"===t?n-=e:"center"===t&&(n-=e/2),n}(l.x,a.w,d);return{visible:!0,x:l.x,y:c,textAlign:d,left:f,top:c,right:f+a.w,bottom:c+a.h}}function HOe(n,e){if(!e)return!0;const{left:t,top:r,right:i,bottom:s}=n;return!(gu({x:t,y:r},e)||gu({x:t,y:s},e)||gu({x:i,y:r},e)||gu({x:i,y:s},e))}function jOe(n,e,t){const{left:r,top:i,right:s,bottom:o}=t,{backdropColor:a}=e;if(!cn(a)){const l=Bh(e.borderRadius),u=hs(e.backdropPadding);n.fillStyle=a;const c=r-u.left,d=i-u.top,f=s-r+u.width,y=o-i+u.height;Object.values(l).some(E=>0!==E)?(n.beginPath(),xE(n,{x:c,y:d,w:f,h:y,radius:l}),n.fill()):n.fillRect(c,d,f,y)}}function DY(n,e,t,r){const{ctx:i}=n;if(t)i.arc(n.xCenter,n.yCenter,e,0,gr);else{let s=n.getPointPosition(0,e);i.moveTo(s.x,s.y);for(let o=1;o<r;o++)s=n.getPointPosition(o,e),i.lineTo(s.x,s.y)}}const lA={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},co=Object.keys(lA);function xY(n,e){return n-e}function RY(n,e){if(cn(e))return null;const t=n._adapter,{parser:r,round:i,isoWeekday:s}=n._parseOpts;let o=e;return"function"==typeof r&&(o=r(o)),Ur(o)||(o="string"==typeof r?t.parse(o,r):t.parse(o)),null===o?null:(i&&(o="week"!==i||!Kg(s)&&!0!==s?t.startOf(o,i):t.startOf(o,"isoWeek",s)),+o)}function PY(n,e,t,r){const i=co.length;for(let s=co.indexOf(n);s<i-1;++s){const o=lA[co[s]];if(o.common&&Math.ceil((t-e)/((o.steps?o.steps:Number.MAX_SAFE_INTEGER)*o.size))<=r)return co[s]}return co[i-1]}function MY(n,e,t){if(t){if(t.length){const{lo:r,hi:i}=UO(t,e);n[t[r]>=e?t[r]:t[i]]=!0}}else n[e]=!0}function NY(n,e,t){const r=[],i={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],i[a]=o,r.push({value:a,major:!1});return 0!==s&&t?function e1e(n,e,t,r){const i=n._adapter,s=+i.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+i.add(a,1,r))l=t[a],l>=0&&(e[l].major=!0);return e}(n,r,i,t):r}let E1=(()=>class n extends Gh{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,r={}){const i=t.time||(t.time={}),s=this._adapter=new tNe__date(t.adapters.date);s.init(r),IE(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=r.normalized}parse(t,r){return void 0===t?null:RY(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,r=this._adapter,i=t.time.unit||"day";let{min:s,max:o,minDefined:a,maxDefined:l}=this.getUserBounds();function u(c){!a&&!isNaN(c.min)&&(s=Math.min(s,c.min)),!l&&!isNaN(c.max)&&(o=Math.max(o,c.max))}(!a||!l)&&(u(this._getLabelBounds()),("ticks"!==t.bounds||"labels"!==t.ticks.source)&&u(this.getMinMax(!1))),s=Ur(s)&&!isNaN(s)?s:+r.startOf(Date.now(),i),o=Ur(o)&&!isNaN(o)?o:+r.endOf(Date.now(),i)+1,this.min=Math.min(s,o-1),this.max=Math.max(s+1,o)}_getLabelBounds(){const t=this.getLabelTimestamps();let r=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(r=t[0],i=t[t.length-1]),{min:r,max:i}}buildTicks(){const t=this.options,r=t.time,i=t.ticks,s="labels"===i.source?this.getLabelTimestamps():this._generate();"ticks"===t.bounds&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const o=this.min,l=function wPe(n,e,t){let r=0,i=n.length;for(;r<i&&n[r]<e;)r++;for(;i>r&&n[i-1]>t;)i--;return r>0||i<n.length?n.slice(r,i):n}(s,o,this.max);return this._unit=r.unit||(i.autoSkip?PY(r.minUnit,this.min,this.max,this._getLabelCapacity(o)):function XOe(n,e,t,r,i){for(let s=co.length-1;s>=co.indexOf(t);s--){const o=co[s];if(lA[o].common&&n._adapter.diff(i,r,o)>=e-1)return o}return co[t?co.indexOf(t):0]}(this,l.length,r.minUnit,this.min,this.max)),this._majorUnit=i.major.enabled&&"year"!==this._unit?function ZOe(n){for(let e=co.indexOf(n)+1,t=co.length;e<t;++e)if(lA[co[e]].common)return co[e]}(this._unit):void 0,this.initOffsets(s),t.reverse&&l.reverse(),NY(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let s,o,r=0,i=0;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),r=1===t.length?1-s:(this.getDecimalForValue(t[1])-s)/2,o=this.getDecimalForValue(t[t.length-1]),i=1===t.length?o:(o-this.getDecimalForValue(t[t.length-2]))/2);const a=t.length<3?.5:.25;r=Ui(r,0,a),i=Ui(i,0,a),this._offsets={start:r,end:i,factor:1/(r+1+i)}}_generate(){const t=this._adapter,r=this.min,i=this.max,s=this.options,o=s.time,a=o.unit||PY(o.minUnit,r,i,this._getLabelCapacity(r)),l=Rt(s.ticks.stepSize,1),u="week"===a&&o.isoWeekday,c=Kg(u)||!0===u,d={};let y,E,f=r;if(c&&(f=+t.startOf(f,"isoWeek",u)),f=+t.startOf(f,c?"day":a),t.diff(i,r,a)>1e5*l)throw new Error(r+" and "+i+" are too far apart with stepSize of "+l+" "+a);const I="data"===s.ticks.source&&this.getDataTimestamps();for(y=f,E=0;y<i;y=+t.add(y,l,a),E++)MY(d,y,I);return(y===i||"ticks"===s.bounds||1===E)&&MY(d,y,I),Object.keys(d).sort(xY).map(T=>+T)}getLabelForValue(t){const i=this.options.time;return this._adapter.format(t,i.tooltipFormat?i.tooltipFormat:i.displayFormats.datetime)}format(t,r){return this._adapter.format(t,r||this.options.time.displayFormats[this._unit])}_tickFormatFunction(t,r,i,s){const o=this.options,a=o.ticks.callback;if(a)return ir(a,[t,r,i],this);const l=o.time.displayFormats,u=this._unit,c=this._majorUnit,f=c&&l[c],y=i[r];return this._adapter.format(t,s||(c&&f&&y&&y.major?f:u&&l[u]))}generateTickLabels(t){let r,i,s;for(r=0,i=t.length;r<i;++r)s=t[r],s.label=this._tickFormatFunction(s.value,r,t)}getDecimalForValue(t){return null===t?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const r=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((r.start+i)*r.factor)}getValueForPixel(t){const r=this._offsets,i=this.getDecimalForPixel(t)/r.factor-r.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const r=this.options.ticks,i=this.ctx.measureText(t).width,s=$a(this.isHorizontal()?r.maxRotation:r.minRotation),o=Math.cos(s),a=Math.sin(s),l=this._resolveTickFontOptions(0).size;return{w:i*o+l*a,h:i*a+l*o}}_getLabelCapacity(t){const r=this.options.time,i=r.displayFormats,s=i[r.unit]||i.millisecond,o=this._tickFormatFunction(t,0,NY(this,[t],this._majorUnit),s),a=this._getLabelSize(o),l=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return l>0?l:1}getDataTimestamps(){let r,i,t=this._cache.data||[];if(t.length)return t;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(r=0,i=s.length;r<i;++r)t=t.concat(s[r].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let r,i;if(t.length)return t;const s=this.getLabels();for(r=0,i=s.length;r<i;++r)t.push(RY(this,s[r]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return MK(t.sort(xY))}})();function uA(n,e,t){let s,o,a,l,r=0,i=n.length-1;t?(e>=n[r].pos&&e<=n[i].pos&&({lo:r,hi:i}=pu(n,"pos",e)),({pos:s,time:a}=n[r]),({pos:o,time:l}=n[i])):(e>=n[r].time&&e<=n[i].time&&({lo:r,hi:i}=pu(n,"time",e)),({time:s,pos:a}=n[r]),({time:o,pos:l}=n[i]));const u=o-s;return u?a+(l-a)*(e-s)/u:a}var n1e=Object.freeze({__proto__:null,CategoryScale:MOe,LinearScale:class kOe extends aA{static id="linear";static defaults={ticks:{callback:$0.formatters.numeric}};determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Ur(e)?e:0,this.max=Ur(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,r=$a(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}},LogarithmicScale:class LOe extends Gh{static id="logarithmic";static defaults={ticks:{callback:$0.formatters.logarithmic,major:{enabled:!0}}};constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const r=aA.prototype.parse.apply(this,[e,t]);if(0!==r)return Ur(r)&&r>0?r:null;this._zero=!0}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Ur(e)?Math.max(0,e):null,this.max=Ur(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Ur(this._userMin)&&(this.min=e===qh(this.min,0)?qh(this.min,-1):qh(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let r=this.min,i=this.max;const s=a=>r=e?r:a,o=a=>i=t?i:a;r===i&&(r<=0?(s(1),o(10)):(s(qh(r,-1)),o(qh(i,1)))),r<=0&&s(qh(i,-1)),i<=0&&o(qh(r,1)),this.min=r,this.max=i}buildTicks(){const e=this.options,r=function FOe(n,{min:e,max:t}){e=Fo(n.min,e);const r=[],i=BE(e);let s=function OOe(n,e){let r=BE(e-n);for(;AY(n,e,r)>10;)r++;for(;AY(n,e,r)<10;)r--;return Math.min(r,BE(n))}(e,t),o=s<0?Math.pow(10,Math.abs(s)):1;const a=Math.pow(10,s),l=i>s?Math.pow(10,i):0,u=Math.round((e-l)*o)/o,c=Math.floor((e-l)/a/10)*a*10;let d=Math.floor((u-c)/Math.pow(10,s)),f=Fo(n.min,Math.round((l+c+d*Math.pow(10,s))*o)/o);for(;f<t;)r.push({value:f,major:bY(f),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(s++,d=2,o=s>=0?1:o),f=Math.round((l+c+d*Math.pow(10,s))*o)/o;const y=Fo(n.max,f);return r.push({value:y,major:bY(y),significand:d}),r}({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&SK(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}getLabelForValue(e){return void 0===e?"0":SE(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Qc(e),this._valueRange=Qc(this.max)-Qc(e)}getPixelForValue(e){return(void 0===e||0===e)&&(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Qc(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}},RadialLinearScale:class JOe extends aA{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:$0.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=hs(v1(this.options)/2),t=this.width=this.maxWidth-e.width,r=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+r/2+e.top),this.drawingArea=Math.floor(Math.min(t,r)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=Ur(e)&&!isNaN(e)?e:0,this.max=Ur(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/v1(this.options))}generateTickLabels(e){aA.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,r)=>{const i=ir(this.options.pointLabels.callback,[t,r],this);return i||0===i?i:""}).filter((t,r)=>this.chart.getDataVisibility(r))}fit(){const e=this.options;e.display&&e.pointLabels.display?function UOe(n){const e={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},t=Object.assign({},e),r=[],i=[],s=n._pointLabels.length,o=n.options.pointLabels,a=o.centerPointLabels?pr/s:0;for(let l=0;l<s;l++){const u=o.setContext(n.getPointLabelContext(l));i[l]=u.padding;const c=n.getPointPosition(l,n.drawingArea+i[l],a),d=bi(u.font),f=VOe(n.ctx,d,n._pointLabels[l]);r[l]=f;const y=Lo(n.getIndexAngle(l)+a),E=Math.round(LO(y));BOe(t,e,y,SY(E,c.x,f.w,0,180),SY(E,c.y,f.h,90,270))}n.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),n._pointLabelItems=function zOe(n,e,t){const r=[],i=n._pointLabels.length,s=n.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:v1(s)/2,additionalAngle:o?pr/i:0};let u;for(let c=0;c<i;c++){l.padding=t[c],l.size=e[c];const d=$Oe(n,c,l);r.push(d),"auto"===a&&(d.visible=HOe(d,u),d.visible&&(u=d))}return r}(n,r,i)}(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,r,i){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((r-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,r,i))}getIndexAngle(e){return Lo(e*(gr/(this._pointLabels.length||1))+$a(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(cn(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(cn(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const r=t[e];return function QOe(n,e,t){return Jc(n,{label:t,index:e,type:"pointLabel"})}(this.getContext(),e,r)}}getPointPosition(e,t,r=0){const i=this.getIndexAngle(e)-Xr+r;return{x:Math.cos(i)*t+this.xCenter,y:Math.sin(i)*t+this.yCenter,angle:i}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:r,right:i,bottom:s}=this._pointLabelItems[e];return{left:t,top:r,right:i,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const r=this.ctx;r.save(),r.beginPath(),DY(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),r.closePath(),r.fillStyle=e,r.fill(),r.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:r,grid:i,border:s}=t,o=this._pointLabels.length;let a,l,u;if(t.pointLabels.display&&function KOe(n,e){const{ctx:t,options:{pointLabels:r}}=n;for(let i=e-1;i>=0;i--){const s=n._pointLabelItems[i];if(!s.visible)continue;const o=r.setContext(n.getPointLabelContext(i));jOe(t,o,s);const a=bi(o.font),{x:l,y:u,textAlign:c}=s;Uh(t,n._pointLabels[i],l,u+a.lineHeight/2,a,{color:o.color,textAlign:c,textBaseline:"middle"})}}(this,o),i.display&&this.ticks.forEach((c,d)=>{if(0!==d||0===d&&this.min<0){l=this.getDistanceFromCenterForValue(c.value);const f=this.getContext(d),y=i.setContext(f),E=s.setContext(f);!function YOe(n,e,t,r,i){const s=n.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!r||!a||!l||t<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(i.dash||[]),s.lineDashOffset=i.dashOffset,s.beginPath(),DY(n,t,o,r),s.closePath(),s.stroke(),s.restore())}(this,y,l,o,E)}}),r.display){for(e.save(),a=o-1;a>=0;a--){const c=r.setContext(this.getPointLabelContext(a)),{color:d,lineWidth:f}=c;!f||!d||(e.lineWidth=f,e.strokeStyle=d,e.setLineDash(c.borderDash),e.lineDashOffset=c.borderDashOffset,l=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),u=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(u.x,u.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,r=t.ticks;if(!r.display)return;const i=this.getIndexAngle(0);let s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(0===l&&this.min>=0&&!t.reverse)return;const u=r.setContext(this.getContext(l)),c=bi(u.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),u.showLabelBackdrop){e.font=c.string,o=e.measureText(a.label).width,e.fillStyle=u.backdropColor;const d=hs(u.backdropPadding);e.fillRect(-o/2-d.left,-s-c.size/2-d.top,o+d.width,c.size+d.height)}Uh(e,a.label,0,-s,c,{color:u.color,strokeColor:u.textStrokeColor,strokeWidth:u.textStrokeWidth})}),e.restore()}drawTitle(){}},TimeScale:E1,TimeSeriesScale:class t1e extends E1{static id="timeseries";static defaults=E1.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=uA(t,this.min),this._tableRange=uA(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:r}=this,i=[],s=[];let o,a,l,u,c;for(o=0,a=e.length;o<a;++o)u=e[o],u>=t&&u<=r&&i.push(u);if(i.length<2)return[{time:t,pos:0},{time:r,pos:1}];for(o=0,a=i.length;o<a;++o)c=i[o+1],l=i[o-1],u=i[o],Math.round((c+l)/2)!==u&&s.push({time:u,pos:o/(a-1)});return s}_generate(){const e=this.min,t=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(t)||1===r.length)&&r.push(t),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),r=this.getLabelTimestamps();return e=t.length&&r.length?this.normalize(t.concat(r)):t.length?t:r,e=this._cache.all=e,e}getDecimalForValue(e){return(uA(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,r=this.getDecimalForPixel(e)/t.factor-t.end;return uA(this._table,r*this._tableRange+this._minPos,!0)}}});c1.register(eNe,Nke,DOe,n1e);const i1e=["mychart"];let kY=(()=>{class n{constructor(){this.diners=[],this.pieChartData=[],this.dataValues=[],this.dataLabels=[]}ngAfterViewInit(){this.createChart()}createChart(){const r=this.chartCanvas.nativeElement.getContext("2d");this.dataLabels=this.diners?.map(i=>i.name),this.dataValues=this.diners?.map(i=>i.amount),this.myPieChart=new c1(r,{type:"pie",data:{labels:this.dataLabels,datasets:[{label:"Amount",data:this.dataValues,borderWidth:1}]},options:{}})}updateChart(t){this.diners=t,this.myPieChart.data.labels=this.diners?.map(r=>r.name),this.myPieChart.data.datasets[0].data=this.diners?.map(r=>r.amount),this.myPieChart.update()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Ds({type:n,selectors:[["app-piechart"]],viewQuery:function(r,i){if(1&r&&NR(i1e,5),2&r){let s;Gw(s=qw())&&(i.chartCanvas=s.first)}},inputs:{diners:"diners"},standalone:!0,features:[Aa],decls:5,vars:0,consts:[["mychart",""],[1,"d-flex","justify-content-center"],[1,"ml-20",2,"height","40em","width","40em"]],template:function(r,i){1&r&&(Ye(0,"div")(1,"div",1)(2,"div",2),yi(3,"canvas",null,0),je()()())},styles:[".chart-container[_ngcontent-%COMP%]{width:40em;height:40em;background-color:#fff;border-radius:10px;box-shadow:0 4px 8px #0000001a;padding:20px;justify-content:right;align-items:right;color:red}canvas[_ngcontent-%COMP%]{display:block;color:purple}"]})}}return n})(),s1e=(()=>{class n{constructor(t){this.dinersService=t,this.diners=[],this.totalAmount=0}ngOnInit(){this.dinersService.getDefaultDiners().subscribe(t=>this.diners=t),this.dinersService.setRandomNames(this.diners),this.totalAmount=this.dinersService.getTotal(this.diners)}onUpdateChart(){this.pieChartComponentChild?.updateChart(this.diners),this.totalAmount=this.dinersService.getTotal(this.diners)}onDivideAmount(t){this.dinersService.divideAmount(this.diners,t),this.pieChartComponentChild?.updateChart(this.diners)}onGenerateRandomNames(){this.dinersService.setRandomNames(this.diners),this.pieChartComponentChild?.updateChart(this.diners)}onInsertDiner(){this.diners.push({key:Math.floor(100*Math.random()),name:this.dinersService.getRandomName(),amount:0,order:1,locked:!1});const t=this.dinersService.getTotal(this.diners);this.dinersService.divideAmount(this.diners,t),this.pieChartComponentChild.updateChart(this.diners),this.totalAmount=this.dinersService.getTotal(this.diners)}onRemoveDiner(t){const r=this.dinersService.getTotal(this.diners);this.diners=this.diners?.filter(i=>i.name!==t),this.dinersService.divideAmount(this.diners,r),this.pieChartComponentChild.updateChart(this.diners)}static{this.\u0275fac=function(r){return new(r||n)(Ce(fK))}}static{this.\u0275cmp=Ds({type:n,selectors:[["app-main"]],viewQuery:function(r,i){if(1&r&&NR(kY,5),2&r){let s;Gw(s=qw())&&(i.pieChartComponentChild=s.first)}},standalone:!0,features:[Aa],decls:8,vars:3,consts:[[1,"container-fluid","text-center"],[2,"margin","auto"],[3,"diners"],[1,"p-8"],[3,"updatechart","removediner","insertdiner","divideamount","generateRandomNames","diners","totalAmount"]],template:function(r,i){1&r&&(Ye(0,"div",0)(1,"h2"),hn(2,"Meal Bill Splitter"),je(),Ye(3,"div",1),yi(4,"app-piechart",2),je(),Ye(5,"div",3)(6,"app-dynamic-form",4),yn("updatechart",function(){return i.onUpdateChart()})("removediner",function(o){return i.onRemoveDiner(o)})("insertdiner",function(){return i.onInsertDiner()})("divideamount",function(o){return i.onDivideAmount(o)})("generateRandomNames",function(){return i.onGenerateRandomNames()}),je()(),yi(7,"div"),je()),2&r&&(Kt(4),Dr("diners",i.diners),Kt(2),Dr("diners",i.diners)("totalAmount",i.totalAmount))},dependencies:[kY,BRe],encapsulation:2})}}return n})(),o1e=(()=>{class n{constructor(t){this.db=t,this.dbPath="/API_KEY_DEEPSEEK",this.docs=t.list(this.dbPath)}getAll(){return this.docs.snapshotChanges().subscribe(t=>this.data=t)}static{this.\u0275fac=function(r){return new(r||n)(xe(R5))}}static{this.\u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),OY=(()=>{class n{constructor(t){this.firebaseService=t,this.ai=new c6({apiKey:"AIzaSyDwoRM82oUXz85ML2Qs-hywfFjOxgIncs0"}),this.openai=new Tt({baseURL:"https://api.deepseek.com",dangerouslyAllowBrowser:!0,apiKey:mh_apiKeyDeepSeek}),this.docs=this.firebaseService.getAll(),console.log(this.docs.query)}getGeminiChatPromise(t,r,i){var s=this;return(0,b.A)(function*(){const o=s.ai.chats.create({model:"gemini-2.0-flash",history:[{role:"user",parts:r},{role:"model",parts:i}]});return s.response=yield o.sendMessage({message:t}),s.response.text})()}getGeminiChat(t,r,i,s){return s?(setTimeout(()=>{console.log("Waited 3 seconds!")},3e3),Pn(["### header 3 text ### Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."])):Pn(this.getGeminiChatPromise(t,r,i))}formatGeminiContent(t){return t.replace("\n","<br>"),t.replace(/(#{1,6})\s*(.*?)(#{1,6})\s\n/g,(r,i,s)=>{const o=i.length;return`<h${o}>${s}</h${o}>\n`})}getDeepSeekResponsePromise(t,r){var i=this;return(0,b.A)(function*(){return r.push({role:"user",content:t}),console.log(r),(yield i.openai.chat.completions.create({model:"deepseek-chat",messages:r})).choices[0].message.content})()}getDeepseekResponse(t,r,i){return Pn(i?["Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."]:this.getDeepSeekResponsePromise(t,r))}getContactData(){return rt([{aiName:"Gemini",aiImage:"assets/images/gemini.png",aiOnlineStatus:"online"},{aiName:"Deepseek",aiImage:"assets/images/deepseek.png",aiOnlineStatus:"online"}])}getMessages(){return rt([])}static{this.\u0275fac=function(r){return new(r||n)(xe(o1e))}}static{this.\u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const a1e=()=>({"background-color":"#ECEFF5"});function l1e(n,e){if(1&n){const t=DR();Ye(0,"div",3),yn("click",function(){const i=ec(t).$implicit;return tc(Jl().setSelectedContact(i.aiName))}),Ye(1,"div",4),yi(2,"img",5)(3,"div"),je(),Ye(4,"div",6),hn(5),je(),Ye(6,"div",7),hn(7),je()()}if(2&n){const t=e.$implicit,r=Jl();Dr("ngStyle",t.aiName==r.selectedAI?function Ez(n,e,t){const r=ki()+n,i=de();return i[r]===At?al(i,r,t?e.call(t):e()):function yy(n,e){return n[e]}(i,r)}(7,a1e):null),Kt(2),Ww("src",t.aiImage,sw),Kt(),CR("status ",t.aiOnlineStatus,""),Kt(2),Xl(t.aiName),Kt(2),Xl(t.aiOnlineStatus)}}let u1e=(()=>{class n{constructor(t){this.chatAiService=t,this.selectedAI="",this.setSelectedAi=new xn,this.aiList=[]}ngOnInit(){this.getContactData()}getContactData(){this.chatAiService.getContactData().subscribe(t=>this.aiList=t),console.log(this.aiList)}setSelectedContact(t){this.setSelectedAi.emit(t)}static{this.\u0275fac=function(r){return new(r||n)(Ce(OY))}}static{this.\u0275cmp=Ds({type:n,selectors:[["app-chat-contacts"]],inputs:{selectedAI:"selectedAI"},outputs:{setSelectedAi:"setSelectedAi"},standalone:!0,features:[Aa],decls:5,vars:1,consts:[["tabindex","5000",1,"col-inside-lg","decor-default","chat",2,"overflow","hidden","outline","none"],[1,"chat-users"],["class","user rounded","aria-live","polite",3,"ngStyle","click",4,"ngFor","ngForOf"],["aria-live","polite",1,"user","rounded",3,"click","ngStyle"],[1,"avatar"],["alt","User name",3,"src"],[1,"name"],[1,"mood"]],template:function(r,i){1&r&&(Ye(0,"div",0)(1,"div",1)(2,"h6"),hn(3,"Contacts"),je(),wa(4,l1e,8,8,"div",2),je()()),2&r&&(Kt(4),Dr("ngForOf",i.aiList))},dependencies:[ah,_P,iG],styles:['dy[_ngcontent-%COMP%]{margin-top:20px;background:#eee}.row.row-broken[_ngcontent-%COMP%]{padding-bottom:0}.col-inside-lg[_ngcontent-%COMP%]{padding:20px}.chat[_ngcontent-%COMP%]{height:calc(100vh - 180px)}.decor-default[_ngcontent-%COMP%]{background-color:#fff}.chat-users[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:20px;margin:0 0 20px}.chat-users[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{position:relative;padding:0 0 0 50px;display:block;cursor:pointer;margin:0 0 20px}.chat-users[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{top:0;left:0}.chat[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]   .status.off[_ngcontent-%COMP%]{border:1px solid #5a5a5a;background:#fff}.chat[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]   .status.online[_ngcontent-%COMP%]{background:#4caf50}.chat[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]   .status.busy[_ngcontent-%COMP%]{background:#ffc107}.chat[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]   .status.offline[_ngcontent-%COMP%]{background:#ed4e6e}.chat-users[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{bottom:0;left:28px}.chat[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:5px;position:absolute}.chat-users[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:14px;font-weight:700;line-height:20px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.chat-users[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   .mood[_ngcontent-%COMP%]{font:200 14px/20px Raleway,sans-serif;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.chat-body[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:20px;margin:0 0 20px}.chat-body[_ngcontent-%COMP%]   .answer.left[_ngcontent-%COMP%]{padding:0 0 0 58px;text-align:left;float:left}.chat-body[_ngcontent-%COMP%]   .answer[_ngcontent-%COMP%]{position:relative;max-width:600px;overflow:hidden;clear:both}.chat-body[_ngcontent-%COMP%]   .answer.left[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{left:0}.chat-body[_ngcontent-%COMP%]   .answer[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{bottom:36px}.chat[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:40px;height:40px;position:absolute}.chat[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;border-radius:20px;height:100%}.chat-body[_ngcontent-%COMP%]   .answer[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:14px;line-height:36px}.chat-body[_ngcontent-%COMP%]   .answer.left[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{right:4px}.chat-body[_ngcontent-%COMP%]   .answer[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{bottom:0}.chat-body[_ngcontent-%COMP%]   .answer.left[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{background:#ebebeb;color:#333;border-radius:8px 8px 8px 0}.chat-body[_ngcontent-%COMP%]   .answer[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{padding:12px;font-size:16px;line-height:26px;position:relative}.chat-body[_ngcontent-%COMP%]   .answer.left[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]:before{left:-30px;border-right-color:#ebebeb;border-right-width:12px}.chat-body[_ngcontent-%COMP%]   .answer[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]:before{content:"";display:block;position:absolute;bottom:0;border:18px solid transparent;border-bottom-width:0}.chat-body[_ngcontent-%COMP%]   .answer.left[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{padding-left:12px;color:#333}.chat-body[_ngcontent-%COMP%]   .answer[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{font-size:16px;line-height:36px;position:relative;padding-bottom:1px}.chat-body[_ngcontent-%COMP%]   .answer.right[_ngcontent-%COMP%]{padding:0 58px 0 0;text-align:right;float:right}.chat-body[_ngcontent-%COMP%]   .answer.right[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{right:0}.chat-body[_ngcontent-%COMP%]   .answer.right[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{left:4px}.chat-body[_ngcontent-%COMP%]   .answer.right[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{background:#7266ba;color:#fff;border-radius:8px 8px 0}.chat-body[_ngcontent-%COMP%]   .answer.right[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]:before{right:-30px;border-left-color:#7266ba;border-left-width:12px}.chat-body[_ngcontent-%COMP%]   .answer.right[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{padding-right:12px;color:#333}.chat-body[_ngcontent-%COMP%]   .answer-add[_ngcontent-%COMP%]{clear:both;position:relative;margin:20px -20px -20px;padding:20px;background:#46be8a}.chat-body[_ngcontent-%COMP%]   .answer-add[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;background:none;display:block;width:100%;font-size:16px;line-height:20px;padding:0;color:#fff}.chat-body[_ngcontent-%COMP%]   .answer-add[_ngcontent-%COMP%]   .answer-btn-1[_ngcontent-%COMP%]{background:url(http://91.234.35.26/iwiki-admin/v1.0.0/admin/img/icon-40.png) 50% 50% no-repeat;right:56px}.chat-body[_ngcontent-%COMP%]   .answer-add[_ngcontent-%COMP%]   .answer-btn[_ngcontent-%COMP%]{display:block;cursor:pointer;width:36px;height:36px;position:absolute;top:50%;margin-top:-18px}.chat-body[_ngcontent-%COMP%]   .answer-add[_ngcontent-%COMP%]   .answer-btn-2[_ngcontent-%COMP%]{background:url(http://91.234.35.26/iwiki-admin/v1.0.0/admin/img/icon-41.png) 50% 50% no-repeat;right:20px}.chat[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#fff}.chat[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-moz-placeholder{color:#fff}.chat[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:#fff}.chat[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-ms-input-placeholder{color:#fff}.chat[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{-webkit-appearance:none;border-radius:0}']})}}return n})();class C1{}class vu{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),s=i.toLowerCase(),o=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof vu?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new vu;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof vu?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class c1e{encodeKey(e){return FY(e)}encodeValue(e){return FY(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const h1e=/%(\d[a-f0-9])/gi,f1e={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function FY(n){return encodeURIComponent(n).replace(h1e,(e,t)=>f1e[t]??e)}function cA(n){return`${n}`}class ed{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new c1e,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function d1e(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[o,a]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],l=t.get(o)||[];l.push(a),t.set(o,l)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(cA):[cA(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new ed({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(cA(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(cA(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class p1e{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function LY(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function VY(n){return typeof Blob<"u"&&n instanceof Blob}function UY(n){return typeof FormData<"u"&&n instanceof FormData}class $E{constructor(e,t,r,i){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function g1e(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new vu,this.context??=new p1e,this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new ed,this.urlWithParams=t}serializeBody(){return null===this.body?null:"string"==typeof this.body||LY(this.body)||VY(this.body)||UY(this.body)||function m1e(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)?this.body:this.body instanceof ed?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||UY(this.body)?null:VY(this.body)?this.body.type||null:LY(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ed?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=void 0!==e.body?e.body:this.body,a=e.withCredentials??this.withCredentials,l=e.reportProgress??this.reportProgress;let u=e.headers||this.headers,c=e.params||this.params;const d=e.context??this.context;return void 0!==e.setHeaders&&(u=Object.keys(e.setHeaders).reduce((f,y)=>f.set(y,e.setHeaders[y]),u)),e.setParams&&(c=Object.keys(e.setParams).reduce((f,y)=>f.set(y,e.setParams[y]),c)),new $E(t,r,o,{params:c,headers:u,context:d,reportProgress:l,responseType:i,withCredentials:a,transferCache:s})}}var w1=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(w1||{});class T1{constructor(e,t=$Y.Ok,r="OK"){this.headers=e.headers||new vu,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class HE extends T1{constructor(e={}){super(e),this.type=w1.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new HE({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}var $Y=function(n){return n[n.Continue=100]="Continue",n[n.SwitchingProtocols=101]="SwitchingProtocols",n[n.Processing=102]="Processing",n[n.EarlyHints=103]="EarlyHints",n[n.Ok=200]="Ok",n[n.Created=201]="Created",n[n.Accepted=202]="Accepted",n[n.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",n[n.NoContent=204]="NoContent",n[n.ResetContent=205]="ResetContent",n[n.PartialContent=206]="PartialContent",n[n.MultiStatus=207]="MultiStatus",n[n.AlreadyReported=208]="AlreadyReported",n[n.ImUsed=226]="ImUsed",n[n.MultipleChoices=300]="MultipleChoices",n[n.MovedPermanently=301]="MovedPermanently",n[n.Found=302]="Found",n[n.SeeOther=303]="SeeOther",n[n.NotModified=304]="NotModified",n[n.UseProxy=305]="UseProxy",n[n.Unused=306]="Unused",n[n.TemporaryRedirect=307]="TemporaryRedirect",n[n.PermanentRedirect=308]="PermanentRedirect",n[n.BadRequest=400]="BadRequest",n[n.Unauthorized=401]="Unauthorized",n[n.PaymentRequired=402]="PaymentRequired",n[n.Forbidden=403]="Forbidden",n[n.NotFound=404]="NotFound",n[n.MethodNotAllowed=405]="MethodNotAllowed",n[n.NotAcceptable=406]="NotAcceptable",n[n.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",n[n.RequestTimeout=408]="RequestTimeout",n[n.Conflict=409]="Conflict",n[n.Gone=410]="Gone",n[n.LengthRequired=411]="LengthRequired",n[n.PreconditionFailed=412]="PreconditionFailed",n[n.PayloadTooLarge=413]="PayloadTooLarge",n[n.UriTooLong=414]="UriTooLong",n[n.UnsupportedMediaType=415]="UnsupportedMediaType",n[n.RangeNotSatisfiable=416]="RangeNotSatisfiable",n[n.ExpectationFailed=417]="ExpectationFailed",n[n.ImATeapot=418]="ImATeapot",n[n.MisdirectedRequest=421]="MisdirectedRequest",n[n.UnprocessableEntity=422]="UnprocessableEntity",n[n.Locked=423]="Locked",n[n.FailedDependency=424]="FailedDependency",n[n.TooEarly=425]="TooEarly",n[n.UpgradeRequired=426]="UpgradeRequired",n[n.PreconditionRequired=428]="PreconditionRequired",n[n.TooManyRequests=429]="TooManyRequests",n[n.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",n[n.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",n[n.InternalServerError=500]="InternalServerError",n[n.NotImplemented=501]="NotImplemented",n[n.BadGateway=502]="BadGateway",n[n.ServiceUnavailable=503]="ServiceUnavailable",n[n.GatewayTimeout=504]="GatewayTimeout",n[n.HttpVersionNotSupported=505]="HttpVersionNotSupported",n[n.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",n[n.InsufficientStorage=507]="InsufficientStorage",n[n.LoopDetected=508]="LoopDetected",n[n.NotExtended=510]="NotExtended",n[n.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",n}($Y||{});function b1(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}let HY=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof $E)s=t;else{let l,u;l=i.headers instanceof vu?i.headers:new vu(i.headers),i.params&&(u=i.params instanceof ed?i.params:new ed({fromObject:i.params})),s=new $E(t,r,void 0!==i.body?i.body:null,{headers:l,context:i.context,params:u,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}const o=rt(s).pipe(Yp(l=>this.handler.handle(l)));if(t instanceof $E||"events"===i.observe)return o;const a=o.pipe(dl(l=>l instanceof HE));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(we(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(we(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(we(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(we(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new ed).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,b1(i,r))}post(t,r,i={}){return this.request("POST",t,b1(i,r))}put(t,r,i={}){return this.request("PUT",t,b1(i,r))}static{this.\u0275fac=function(r){return new(r||n)(xe(C1))}}static{this.\u0275prov=Ve({token:n,factory:n.\u0275fac})}}return n})();const V1e=(n,e)=>({left:n,right:e});function U1e(n,e){if(1&n&&(Ye(0,"div",14)(1,"div",15)(2,"div",16),yi(3,"img",17)(4,"div"),je(),Ye(5,"div",18),hn(6),je(),Ye(7,"div",19),hn(8),je(),Ye(9,"div",20),hn(10),je()()()),2&n){const t=e.$implicit;Kt(),Dr("ngClass",Cz(8,V1e,"assistant"==t.userType,"user"==t.userType)),Kt(2),Ww("src",t.userImage,sw),Kt(),CR("status ",t.userStatus,""),Kt(2),Xl(t.userName),Kt(2),Xl(t.messageDetail),Kt(2),Xl(t.messageTimeText)}}function B1e(n,e){1&n&&(Ye(0,"div",23),yi(1,"span",24)(2,"span",24)(3,"span",24),je())}function $1e(n,e){if(1&n&&(Ye(0,"div",21),wa(1,B1e,4,0,"div",22),je()),2&n){const t=Jl();Kt(),Dr("ngIf",t.isChatLoading)}}let H1e=(()=>{class n{constructor(t){this.chatAiService=t,this.chatPrompt="",this.showInProgress=!1,this.aiList=[],this.displayMessages=[],this.chatContent=[],this.isChatLoading=!1}ngOnInit(){this.chatAiService.getContactData().subscribe(t=>this.aiList=t),this.selectedAI=this.aiList.find(t=>"Gemini"==t.aiName),this.chatContent=[{aiName:"Gemini",messageDetail:[]},{aiName:"Deepseek",messageDetail:[]}]}ngAfterViewChecked(){let t=document.getElementById("chatBody");t.scrollTop=t.scrollHeight-100}sendMessage(){let t="";this.isChatLoading=!0,console.log(this.isChatLoading);const r=[{userId:1,userName:"Conor",userImage:"assets/images/avatar1.png",userStatus:"online",userType:"user",messageDetail:this.chatPrompt,messageTime:new Date,messageTimeText:(new Date).toLocaleString("en-GB")}];if(this.displayMessages=[...this.displayMessages,...r],"Gemini"==this.selectedAI?.aiName){const i=this.displayMessages.filter(o=>"user"==o.userType).map(o=>({text:o.messageDetail})),s=this.displayMessages.filter(o=>"assistant"==o.userType).map(o=>({text:o.messageDetail}));this.chatAiService.getGeminiChat(this.chatPrompt,i,s,!0).pipe(uh(()=>{const o=[{userId:2,userName:this.selectedAI.aiName,userImage:this.selectedAI.aiImage,userStatus:"online",userType:"assistant",messageDetail:`${t}`,messageTime:new Date,messageTimeText:(new Date).toLocaleString("en-GB")}];this.displayMessages=[...this.displayMessages,...o],this.chatContent.filter(a=>a.aiName==this.selectedAI.aiName)[0].messageDetail=this.displayMessages,this.isChatLoading=!1})).subscribe(o=>t=o)}else if("Deepseek"==this.selectedAI?.aiName){const i=this.displayMessages.map(({userType:s,messageDetail:o})=>({role:s,content:o}));console.log(),this.chatAiService.getDeepseekResponse(this.chatPrompt,i).pipe(Ci(s=>console.log(s)),uh(()=>{const s=[{userId:2,userName:this.selectedAI.aiName,userImage:this.selectedAI.aiImage,userStatus:"online",userType:"assistant",messageDetail:`${t}`,messageTime:new Date,messageTimeText:(new Date).toLocaleString("en-GB")}];this.displayMessages=[...this.displayMessages,...s],this.chatContent.filter(o=>o.aiName==this.selectedAI.aiName)[0].messageDetail=this.displayMessages,this.isChatLoading=!1})).subscribe(s=>t=s)}}setSelectedAi(t){this.selectedAI.aiName!=t&&(this.displayMessages=this.chatContent.filter(r=>r.aiName==t).flatMap(r=>r.messageDetail)),this.selectedAI=this.aiList.filter(r=>r.aiName==t)[0],this.chatPrompt=""}static{this.\u0275fac=function(r){return new(r||n)(Ce(OY))}}static{this.\u0275cmp=Ds({type:n,selectors:[["app-chat-ai"]],standalone:!0,features:[Ln([HY]),Aa],decls:16,vars:5,consts:[[1,"container"],[1,"content","container-fluid","bootstrap","snippets","bootdey"],[1,"row","row-broken"],[1,"col-sm-3","col-xs-12"],[3,"setSelectedAi","selectedAI"],["tabindex","5001",1,"col-sm-9","col-xs-12","chat",2,"overflow","display","outline","none"],[1,"col-inside-lg","decor-default"],["id","chatBody",1,"chat-body","rounded"],["class","user",4,"ngFor","ngForOf"],["class","answer","role","status",4,"ngIf"],[1,"input-group","mb-3"],["type","text","placeholder","Write a message","aria-label","Recipient's username","aria-describedby","sendMessageButton",1,"form-control",3,"ngModelChange","keydown.enter","ngModel"],["type","button","id","sendMessageButton",1,"btn","btn-outline-secondary",3,"click","disabled"],[1,"bi","bi-send"],[1,"user"],[1,"answer",3,"ngClass"],[1,"avatar"],["alt","",3,"src"],[1,"name"],[1,"text"],[1,"time"],["role","status",1,"answer"],["class","spinner-grow","role","status",4,"ngIf"],["role","status",1,"spinner-grow"],[1,"sr-only"]],template:function(r,i){1&r&&(Ye(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"app-chat-contacts",4),yn("setSelectedAi",function(o){return i.setSelectedAi(o)}),je()(),Ye(5,"div",5)(6,"div",6)(7,"div",7)(8,"h6"),hn(9,"Chat"),je(),wa(10,U1e,11,11,"div",8)(11,$1e,2,1,"div",9),je(),Ye(12,"div",10)(13,"input",11),hc("ngModelChange",function(o){return ih(i.chatPrompt,o)||(i.chatPrompt=o),o}),yn("keydown.enter",function(){return i.sendMessage()}),je(),Ye(14,"button",12),yn("click",function(){return i.sendMessage()}),yi(15,"i",13),je()()()()()()()),2&r&&(Kt(4),Dr("selectedAI",i.selectedAI.aiName),Kt(6),Dr("ngForOf",i.displayMessages),Kt(),Dr("ngIf",i.isChatLoading),Kt(2),dc("ngModel",i.chatPrompt),Kt(),Dr("disabled",i.isChatLoading))},dependencies:[ah,ZW,_P,yP,gg,fh,ov,pg,u1e],styles:['dy[_ngcontent-%COMP%]{margin-top:20px;background:#eee}.row.row-broken[_ngcontent-%COMP%]{padding-bottom:0}.col-inside-lg[_ngcontent-%COMP%]{padding:20px}.chat[_ngcontent-%COMP%]{height:calc(100vh - 180px)}.decor-default[_ngcontent-%COMP%]{background-color:#fff}.chat-users[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:20px;margin:0 0 20px}.chat-users[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{position:relative;padding:0 0 0 50px;display:block;cursor:pointer;margin:0 0 20px}.chat-users[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{top:0;left:0}.chat[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]   .status.off[_ngcontent-%COMP%]{border:1px solid #5a5a5a;background:#fff}.chat[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]   .status.online[_ngcontent-%COMP%]{background:#4caf50}.chat[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]   .status.busy[_ngcontent-%COMP%]{background:#ffc107}.chat[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]   .status.offline[_ngcontent-%COMP%]{background:#ed4e6e}.chat-users[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{bottom:0;left:28px}.chat[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:5px;position:absolute}.chat-users[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:14px;font-weight:700;line-height:20px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.chat-users[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   .mood[_ngcontent-%COMP%]{font:200 14px/20px Raleway,sans-serif;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.chat-body[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:20px;margin:0 0 20px}.chat-body[_ngcontent-%COMP%]   .answer.left[_ngcontent-%COMP%]{padding:0 0 0 58px;text-align:left;float:left}.chat-body[_ngcontent-%COMP%]   .answer[_ngcontent-%COMP%]{position:relative;max-width:600px;overflow:hidden;clear:both}.chat-body[_ngcontent-%COMP%]   .answer.left[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{left:0}.chat-body[_ngcontent-%COMP%]   .answer[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{bottom:36px}.chat[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:40px;height:40px;position:absolute}.chat[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;border-radius:20px;height:100%}.chat-body[_ngcontent-%COMP%]{width:100%;height:800px;overflow:auto;border:1px solid black;padding:10px;background-color:#e9f1fa;border-width:2px;border-color:#eceff5}.chat-body[_ngcontent-%COMP%]   .answer[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:14px;line-height:36px}.chat-body[_ngcontent-%COMP%]   .answer.left[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{right:4px}.chat-body[_ngcontent-%COMP%]   .answer[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{bottom:0}.chat-body[_ngcontent-%COMP%]   .answer.left[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{background:#fdffff;color:#333;border-radius:8px 8px 8px 0}.chat-body[_ngcontent-%COMP%]   .answer[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{padding:12px;font-size:16px;line-height:26px;position:relative}.chat-body[_ngcontent-%COMP%]   .answer.left[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]:before{left:-29px;border-right-color:#fdffff;border-right-width:12px}.chat-body[_ngcontent-%COMP%]   .answer[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]:before{content:"";display:block;position:absolute;bottom:0;border:18px solid transparent;border-bottom-width:0}.chat-body[_ngcontent-%COMP%]   .answer.left[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{padding-left:12px;color:#333}.chat-body[_ngcontent-%COMP%]   .answer[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{font-size:16px;line-height:36px;position:relative;padding-bottom:1px}.chat-body[_ngcontent-%COMP%]   .answer.right[_ngcontent-%COMP%]{padding:0 58px 0 0;text-align:right;float:right}.chat-body[_ngcontent-%COMP%]   .answer.right[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{right:0}.chat-body[_ngcontent-%COMP%]   .answer.right[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{left:4px}.chat-body[_ngcontent-%COMP%]   .answer.right[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{background:#7266ba;color:#fff;border-radius:8px 8px 0}.chat-body[_ngcontent-%COMP%]   .answer.right[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]:before{right:-29px;border-left-color:#7266ba;border-left-width:12px}.chat-body[_ngcontent-%COMP%]   .answer.right[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{padding-right:12px;color:#333}.chat-body[_ngcontent-%COMP%]   .answer-add[_ngcontent-%COMP%]{clear:both;position:relative;margin:20px -20px -20px;padding:20px;background:#46be8a}.chat-body[_ngcontent-%COMP%]   .answer-add[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;background:none;display:block;width:100%;font-size:16px;line-height:20px;padding:0;color:#fff}.chat-body[_ngcontent-%COMP%]   .answer-add[_ngcontent-%COMP%]   .answer-btn-1[_ngcontent-%COMP%]{background:url(http://91.234.35.26/iwiki-admin/v1.0.0/admin/img/icon-40.png) 50% 50% no-repeat;right:56px}.chat-body[_ngcontent-%COMP%]   .answer-add[_ngcontent-%COMP%]   .answer-btn[_ngcontent-%COMP%]{display:block;cursor:pointer;width:36px;height:36px;position:absolute;top:50%;margin-top:-18px}.chat-body[_ngcontent-%COMP%]   .answer-add[_ngcontent-%COMP%]   .answer-btn-2[_ngcontent-%COMP%]{background:url(http://91.234.35.26/iwiki-admin/v1.0.0/admin/img/icon-41.png) 50% 50% no-repeat;right:20px}.chat[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#fff}.chat[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-moz-placeholder{color:#fff}.chat[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:#fff}.chat[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-ms-input-placeholder{color:#fff}.chat[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{-webkit-appearance:none;border-radius:0}']})}}return n})();class Zg{constructor(e){return e}}class fA{constructor(){return(0,Gn.getApps)()}}const D1=new be("angularfire2._apps"),W1e={provide:Zg,useFactory:function z1e(n){return n&&1===n.length?n[0]:new Zg((0,Gn.getApp)())},deps:[[new Gr,D1]]},G1e={provide:fA,deps:[[new Gr,D1]]};function q1e(n){return(e,t)=>{const r=t.get(Ao);(0,Gn.registerVersion)("angularfire",vc.full,"core"),(0,Gn.registerVersion)("angularfire",vc.full,"app"),(0,Gn.registerVersion)("angular",Hz.full,r.toString());const i=e.runOutsideAngular(()=>n(t));return new Zg(i)}}const K1e=zT(Gn.initializeApp,!0);var Y1e=st(443);class x1{constructor(e){return e}}class iQ{constructor(){return fM("auth")}}const R1=new be("angularfire2.auth-instances");function J1e(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new x1(r)}}const X1e={provide:iQ,deps:[[new Gr,R1]]},Z1e={provide:x1,useFactory:function Q1e(n,e){const t=hM("auth",n,e);return t&&new x1(t)},deps:[[new Gr,R1],Zg]},tFe=zT(Y1e.o,!0),P1=new Map,sQ={activated:!1,tokenObservers:[]},nFe={initialized:!1,enabled:!1};function Br(n){return P1.get(n)||Object.assign({},sQ)}function pA(){return nFe}const M1="https://content-firebaseappcheck.googleapis.com/v1",oFe="exchangeDebugToken",oQ={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class lFe{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,b.A)(function*(){t.stop();try{t.pending=new L.cY,t.pending.promise.catch(r=>{}),yield function uFe(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new L.cY,t.pending.promise.catch(r=>{}),yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ki=new L.FA("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function gA(n=!1){var e;return n?null===(e=self.grecaptcha)||void 0===e?void 0:e.enterprise:self.grecaptcha}function N1(n){if(!Br(n).activated)throw Ki.create("use-before-activation",{appName:n.name})}function k1(n){const e=Math.round(n/1e3),t=Math.floor(e/86400),r=Math.floor((e-3600*t*24)/3600),i=Math.floor((e-3600*t*24-3600*r)/60),s=e-3600*t*24-3600*r-60*i;let o="";return t&&(o+=mA(t)+"d:"),r&&(o+=mA(r)+"h:"),o+=mA(i)+"m:"+mA(s)+"s",o}function mA(n){return 0===n?"00":n>=10?n.toString():"0"+n}function _A(n,e){return O1.apply(this,arguments)}function O1(){return O1=(0,b.A)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const d=yield i.getHeartbeatsHeader();d&&(r["X-Firebase-Client"]=d)}const s={method:"POST",body:JSON.stringify(e),headers:r};let o,a;try{o=yield fetch(n,s)}catch(d){throw Ki.create("fetch-network-error",{originalErrorMessage:d?.message})}if(200!==o.status)throw Ki.create("fetch-status-error",{httpStatus:o.status});try{a=yield o.json()}catch(d){throw Ki.create("fetch-parse-error",{originalErrorMessage:d?.message})}const l=a.ttl.match(/^([\d.]+)(s)$/);if(!l||!l[2]||isNaN(Number(l[1])))throw Ki.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const u=1e3*Number(l[1]),c=Date.now();return{token:a.token,expireTimeMillis:c+u,issuedAtTimeMillis:c}}),O1.apply(this,arguments)}function aQ(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${M1}/projects/${t}/apps/${r}:${oFe}?key=${i}`,body:{debug_token:e}}}const fFe="firebase-app-check-database",pFe=1,zE="firebase-app-check-store",lQ="debug-token";let yA=null;function uQ(){return yA||(yA=new Promise((n,e)=>{try{const t=indexedDB.open(fFe,pFe);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Ki.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(zE,{keyPath:"compositeKey"})}}catch(t){e(Ki.create("storage-open",{originalErrorMessage:t?.message}))}}),yA)}function cQ(n,e){return F1.apply(this,arguments)}function F1(){return F1=(0,b.A)(function*(n,e){const r=(yield uQ()).transaction(zE,"readwrite"),s=r.objectStore(zE).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=l=>{o()},r.onerror=l=>{var u;a(Ki.create("storage-set",{originalErrorMessage:null===(u=l.target.error)||void 0===u?void 0:u.message}))}})}),F1.apply(this,arguments)}function dQ(n){return L1.apply(this,arguments)}function L1(){return L1=(0,b.A)(function*(n){const t=(yield uQ()).transaction(zE,"readonly"),i=t.objectStore(zE).get(n);return new Promise((s,o)=>{i.onsuccess=a=>{const l=a.target.result;s(l?l.value:void 0)},t.onerror=a=>{var l;o(Ki.create("storage-get",{originalErrorMessage:null===(l=a.target.error)||void 0===l?void 0:l.message}))}})}),L1.apply(this,arguments)}function hQ(n){return`${n.options.appId}-${n.name}`}const WE=new ro.Vy("@firebase/app-check");function V1(){return V1=(0,b.A)(function*(n){if((0,L.zW)()){let e;try{e=yield function gFe(n){return dQ(hQ(n))}(n)}catch(t){WE.warn(`Failed to read token from IndexedDB. Error: ${t}`)}return e}}),V1.apply(this,arguments)}function U1(n,e){return(0,L.zW)()?function mFe(n,e){return cQ(hQ(n),e)}(n,e).catch(t=>{WE.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function B1(){return B1=(0,b.A)(function*(){let n;try{n=yield function yFe(){return dQ(lQ)}()}catch{}if(n)return n;{const e=(0,L.gZ)();return function _Fe(n){return cQ(lQ,n)}(e).catch(t=>WE.warn(`Failed to persist debug token to IndexedDB. Error: ${t}`)),e}}),B1.apply(this,arguments)}function $1(){return pA().enabled}function H1(){return z1.apply(this,arguments)}function z1(){return z1=(0,b.A)(function*(){const n=pA();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),z1.apply(this,arguments)}const IFe={error:"UNKNOWN_ERROR"};function wFe(n){return L.K3.encodeString(JSON.stringify(n),!1)}function vA(n){return W1.apply(this,arguments)}function W1(){return W1=(0,b.A)(function*(n,e=!1){const t=n.app;N1(t);const r=Br(t);let s,i=r.token;if(i&&!em(i)&&(r.token=void 0,i=void 0),!i){const l=yield r.cachedTokenPromise;l&&(em(l)?i=l:yield U1(t,void 0))}if(!e&&i&&em(i))return{token:i.token};let a,o=!1;if($1()){r.exchangeTokenPromise||(r.exchangeTokenPromise=_A(aQ(t,yield H1()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const l=yield r.exchangeTokenPromise;return yield U1(t,l),r.token=l,{token:l.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=yield Br(t).exchangeTokenPromise}catch(l){"appCheck/throttled"===l.code?WE.warn(l.message):WE.error(l),s=l}return i?s?a=em(i)?{token:i.token,internalError:s}:mQ(s):(a={token:i.token},r.token=i,yield U1(t,i)):a=mQ(s),o&&gQ(t,a),a}),W1.apply(this,arguments)}function G1(){return G1=(0,b.A)(function*(n){const e=n.app;N1(e);const{provider:t}=Br(e);if($1()){const r=yield H1(),{token:i}=yield _A(aQ(e,r),n.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield t.getToken();return{token:r}}}),G1.apply(this,arguments)}function q1(n,e,t,r){const{app:i}=n,s=Br(i);if(s.tokenObservers=[...s.tokenObservers,{next:t,error:r,type:e}],s.token&&em(s.token)){const a=s.token;Promise.resolve().then(()=>{t({token:a.token}),pQ(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>pQ(n))}function j1(n,e){const t=Br(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function pQ(n){const{app:e}=n,t=Br(e);let r=t.tokenRefresher;r||(r=function TFe(n){const{app:e}=n;return new lFe((0,b.A)(function*(){let r;if(r=Br(e).token?yield vA(n,!0):yield vA(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Br(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},oQ.RETRIAL_MIN_WAIT,oQ.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function gQ(n,e){const t=Br(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function em(n){return n.expireTimeMillis-Date.now()>0}function mQ(n){return{token:wFe(IFe),error:n}}class bFe{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Br(this.app);for(const t of e)j1(this.app,t.next);return Promise.resolve()}}function NFe(n,e){const t=new L.cY;Br(n).reCAPTCHAState={initialized:t};const i=function _Q(n){const e=`fire_app_check_${n.name}`,t=document.createElement("div");return t.id=e,t.style.display="none",document.body.appendChild(t),e}(n),s=gA(!0);return s?EA(n,e,s,i,t):function FFe(n){const e=document.createElement("script");e.src="https://www.google.com/recaptcha/enterprise.js",e.onload=n,document.head.appendChild(e)}(()=>{const o=gA(!0);if(!o)throw new Error("no recaptcha");EA(n,e,o,i,t)}),t.promise}function EA(n,e,t,r,i){t.ready(()=>{(function kFe(n,e,t,r){const i=t.render(r,{sitekey:e,size:"invisible",callback:()=>{Br(n).reCAPTCHAState.succeeded=!0},"error-callback":()=>{Br(n).reCAPTCHAState.succeeded=!1}}),s=Br(n);s.reCAPTCHAState=Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})})(n,e,t,r),i.resolve(t)})}function K1(){return K1=(0,b.A)(function*(n){N1(n);const t=yield Br(n).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=Br(n).reCAPTCHAState;t.ready(()=>{r(t.execute(s.widgetId,{action:"fire_app_check"}))})})}),K1.apply(this,arguments)}class Y1{constructor(e){this._siteKey=e,this._throttleData=null}getToken(){var e=this;return(0,b.A)(function*(){var t,r,i;!function IQ(n){if(n&&Date.now()-n.allowRequestsAfter<=0)throw Ki.create("throttled",{time:k1(n.allowRequestsAfter-Date.now()),httpStatus:n.httpStatus})}(e._throttleData);const s=yield function yQ(n){return K1.apply(this,arguments)}(e._app).catch(a=>{throw Ki.create("recaptcha-error")});if(null===(t=Br(e._app).reCAPTCHAState)||void 0===t||!t.succeeded)throw Ki.create("recaptcha-error");let o;try{o=yield _A(function hFe(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${M1}/projects/${t}/apps/${r}:exchangeRecaptchaEnterpriseToken?key=${i}`,body:{recaptcha_enterprise_token:e}}}(e._app,s),e._heartbeatServiceProvider)}catch(a){throw null!==(r=a.code)&&void 0!==r&&r.includes("fetch-status-error")?(e._throttleData=function CQ(n,e){if(404===n||403===n)return{backoffCount:1,allowRequestsAfter:Date.now()+864e5,httpStatus:n};{const t=e?e.backoffCount:0,r=(0,L.p9)(t,1e3,2);return{backoffCount:t+1,allowRequestsAfter:Date.now()+r,httpStatus:n}}}(Number(null===(i=a.customData)||void 0===i?void 0:i.httpStatus),e._throttleData),Ki.create("throttled",{time:k1(e._throttleData.allowRequestsAfter-Date.now()),httpStatus:e._throttleData.httpStatus})):a}return e._throttleData=null,o})()}initialize(e){this._app=e,this._heartbeatServiceProvider=(0,Gn._getProvider)(e,"heartbeat"),NFe(e,this._siteKey).catch(()=>{})}isEqual(e){return e instanceof Y1&&this._siteKey===e._siteKey}}function LFe(n=(0,Gn.getApp)(),e){n=(0,L.Ku)(n);const t=(0,Gn._getProvider)(n,"app-check");if(pA().initialized||function CFe(){const n=(0,L.mS)(),e=pA();if(e.initialized=!0,"string"!=typeof n.FIREBASE_APPCHECK_DEBUG_TOKEN&&!0!==n.FIREBASE_APPCHECK_DEBUG_TOKEN)return;e.enabled=!0;const t=new L.cY;e.token=t,t.resolve("string"==typeof n.FIREBASE_APPCHECK_DEBUG_TOKEN?n.FIREBASE_APPCHECK_DEBUG_TOKEN:function EFe(){return B1.apply(this,arguments)}())}(),$1()&&H1().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(s.isTokenAutoRefreshEnabled===e.isTokenAutoRefreshEnabled&&s.provider.isEqual(e.provider))return i;throw Ki.create("already-initialized",{appName:n.name})}const r=t.initialize({options:e});return function VFe(n,e,t){const r=function rFe(n,e){return P1.set(n,e),P1.get(n)}(n,Object.assign({},sQ));r.activated=!0,r.provider=e,r.cachedTokenPromise=function vFe(n){return V1.apply(this,arguments)}(n).then(i=>(i&&em(i)&&(r.token=i,gQ(n,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=void 0===t?n.automaticDataCollectionEnabled:t,r.provider.initialize(n)}(n,e.provider,e.isTokenAutoRefreshEnabled),Br(n).isTokenAutoRefreshEnabled&&q1(r,"INTERNAL",()=>{}),r}const wQ="app-check-internal";!function BFe(){(0,Gn._registerComponent)(new _l.uA("app-check",n=>function AFe(n,e){return new bFe(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(wQ).initialize()})),(0,Gn._registerComponent)(new _l.uA(wQ,n=>function SFe(n){return{getToken:e=>vA(n,e),getLimitedUseToken:()=>function fQ(n){return G1.apply(this,arguments)}(n),addTokenListener:e=>q1(n,"INTERNAL",e),removeTokenListener:e=>j1(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Gn.registerVersion)("@firebase/app-check","0.8.8")}();class J1{constructor(e){return e}}const X1=new be("angularfire2.app-check-instances"),HFe=typeof window<"u"&&["localhost","0.0.0.0","127.0.0.1"].includes(window.location.hostname);function zFe(n){return(e,t,r)=>{!ET(r)&&HFe&&(globalThis.FIREBASE_APPCHECK_DEBUG_TOKEN??=!0);const i=e.runOutsideAngular(()=>n(t));return new J1(i)}}const WFe={provide:sv,deps:[[new Gr,X1]]},GFe={provide:J1,useFactory:function $Fe(n,e){const t=hM(Yq,n,e);return t&&new J1(t)},deps:[[new Gr,X1],Zg,Ao]},jFe=zT(LFe,!0);var Kh,TQ=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},bQ={};(function(){var n;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i(U,N,F){F||(F=0);var B=Array(16);if("string"==typeof N)for(var H=0;16>H;++H)B[H]=N.charCodeAt(F++)|N.charCodeAt(F++)<<8|N.charCodeAt(F++)<<16|N.charCodeAt(F++)<<24;else for(H=0;16>H;++H)B[H]=N[F++]|N[F++]<<8|N[F++]<<16|N[F++]<<24;var J=U.g[3],q=(N=U.g[0])+(J^(F=U.g[1])&((H=U.g[2])^J))+B[0]+3614090360&4294967295;q=(F=(H=(J=(N=(F=(H=(J=(N=(F=(H=(J=(N=(F=(H=(J=(N=(F=(H=(J=(N=(F=(H=(J=(N=(F=(H=(J=(N=(F=(H=(J=(N=(F=(H=(J=(N=(F=(H=(J=(N=(F=(H=(J=(N=(F=(H=(J=(N=(F=(H=(J=(N=(F=(H=(J=(N=(F=(H=(J=(N=F+(q<<7&4294967295|q>>>25))+((q=J+(H^N&(F^H))+B[1]+3905402710&4294967295)<<12&4294967295|q>>>20))+((q=H+(F^J&(N^F))+B[2]+606105819&4294967295)<<17&4294967295|q>>>15))+((q=F+(N^H&(J^N))+B[3]+3250441966&4294967295)<<22&4294967295|q>>>10))+((q=N+(J^F&(H^J))+B[4]+4118548399&4294967295)<<7&4294967295|q>>>25))+((q=J+(H^N&(F^H))+B[5]+1200080426&4294967295)<<12&4294967295|q>>>20))+((q=H+(F^J&(N^F))+B[6]+2821735955&4294967295)<<17&4294967295|q>>>15))+((q=F+(N^H&(J^N))+B[7]+4249261313&4294967295)<<22&4294967295|q>>>10))+((q=N+(J^F&(H^J))+B[8]+1770035416&4294967295)<<7&4294967295|q>>>25))+((q=J+(H^N&(F^H))+B[9]+2336552879&4294967295)<<12&4294967295|q>>>20))+((q=H+(F^J&(N^F))+B[10]+4294925233&4294967295)<<17&4294967295|q>>>15))+((q=F+(N^H&(J^N))+B[11]+2304563134&4294967295)<<22&4294967295|q>>>10))+((q=N+(J^F&(H^J))+B[12]+1804603682&4294967295)<<7&4294967295|q>>>25))+((q=J+(H^N&(F^H))+B[13]+4254626195&4294967295)<<12&4294967295|q>>>20))+((q=H+(F^J&(N^F))+B[14]+2792965006&4294967295)<<17&4294967295|q>>>15))+((q=F+(N^H&(J^N))+B[15]+1236535329&4294967295)<<22&4294967295|q>>>10))+((q=N+(H^J&(F^H))+B[1]+4129170786&4294967295)<<5&4294967295|q>>>27))+((q=J+(F^H&(N^F))+B[6]+3225465664&4294967295)<<9&4294967295|q>>>23))+((q=H+(N^F&(J^N))+B[11]+643717713&4294967295)<<14&4294967295|q>>>18))+((q=F+(J^N&(H^J))+B[0]+3921069994&4294967295)<<20&4294967295|q>>>12))+((q=N+(H^J&(F^H))+B[5]+3593408605&4294967295)<<5&4294967295|q>>>27))+((q=J+(F^H&(N^F))+B[10]+38016083&4294967295)<<9&4294967295|q>>>23))+((q=H+(N^F&(J^N))+B[15]+3634488961&4294967295)<<14&4294967295|q>>>18))+((q=F+(J^N&(H^J))+B[4]+3889429448&4294967295)<<20&4294967295|q>>>12))+((q=N+(H^J&(F^H))+B[9]+568446438&4294967295)<<5&4294967295|q>>>27))+((q=J+(F^H&(N^F))+B[14]+3275163606&4294967295)<<9&4294967295|q>>>23))+((q=H+(N^F&(J^N))+B[3]+4107603335&4294967295)<<14&4294967295|q>>>18))+((q=F+(J^N&(H^J))+B[8]+1163531501&4294967295)<<20&4294967295|q>>>12))+((q=N+(H^J&(F^H))+B[13]+2850285829&4294967295)<<5&4294967295|q>>>27))+((q=J+(F^H&(N^F))+B[2]+4243563512&4294967295)<<9&4294967295|q>>>23))+((q=H+(N^F&(J^N))+B[7]+1735328473&4294967295)<<14&4294967295|q>>>18))+((q=F+(J^N&(H^J))+B[12]+2368359562&4294967295)<<20&4294967295|q>>>12))+((q=N+(F^H^J)+B[5]+4294588738&4294967295)<<4&4294967295|q>>>28))+((q=J+(N^F^H)+B[8]+2272392833&4294967295)<<11&4294967295|q>>>21))+((q=H+(J^N^F)+B[11]+1839030562&4294967295)<<16&4294967295|q>>>16))+((q=F+(H^J^N)+B[14]+4259657740&4294967295)<<23&4294967295|q>>>9))+((q=N+(F^H^J)+B[1]+2763975236&4294967295)<<4&4294967295|q>>>28))+((q=J+(N^F^H)+B[4]+1272893353&4294967295)<<11&4294967295|q>>>21))+((q=H+(J^N^F)+B[7]+4139469664&4294967295)<<16&4294967295|q>>>16))+((q=F+(H^J^N)+B[10]+3200236656&4294967295)<<23&4294967295|q>>>9))+((q=N+(F^H^J)+B[13]+681279174&4294967295)<<4&4294967295|q>>>28))+((q=J+(N^F^H)+B[0]+3936430074&4294967295)<<11&4294967295|q>>>21))+((q=H+(J^N^F)+B[3]+3572445317&4294967295)<<16&4294967295|q>>>16))+((q=F+(H^J^N)+B[6]+76029189&4294967295)<<23&4294967295|q>>>9))+((q=N+(F^H^J)+B[9]+3654602809&4294967295)<<4&4294967295|q>>>28))+((q=J+(N^F^H)+B[12]+3873151461&4294967295)<<11&4294967295|q>>>21))+((q=H+(J^N^F)+B[15]+530742520&4294967295)<<16&4294967295|q>>>16))+((q=F+(H^J^N)+B[2]+3299628645&4294967295)<<23&4294967295|q>>>9))+((q=N+(H^(F|~J))+B[0]+4096336452&4294967295)<<6&4294967295|q>>>26))+((q=J+(F^(N|~H))+B[7]+1126891415&4294967295)<<10&4294967295|q>>>22))+((q=H+(N^(J|~F))+B[14]+2878612391&4294967295)<<15&4294967295|q>>>17))+((q=F+(J^(H|~N))+B[5]+4237533241&4294967295)<<21&4294967295|q>>>11))+((q=N+(H^(F|~J))+B[12]+1700485571&4294967295)<<6&4294967295|q>>>26))+((q=J+(F^(N|~H))+B[3]+2399980690&4294967295)<<10&4294967295|q>>>22))+((q=H+(N^(J|~F))+B[10]+4293915773&4294967295)<<15&4294967295|q>>>17))+((q=F+(J^(H|~N))+B[1]+2240044497&4294967295)<<21&4294967295|q>>>11))+((q=N+(H^(F|~J))+B[8]+1873313359&4294967295)<<6&4294967295|q>>>26))+((q=J+(F^(N|~H))+B[15]+4264355552&4294967295)<<10&4294967295|q>>>22))+((q=H+(N^(J|~F))+B[6]+2734768916&4294967295)<<15&4294967295|q>>>17))+((q=F+(J^(H|~N))+B[13]+1309151649&4294967295)<<21&4294967295|q>>>11))+((J=(N=F+((q=N+(H^(F|~J))+B[4]+4149444226&4294967295)<<6&4294967295|q>>>26))+((q=J+(F^(N|~H))+B[11]+3174756917&4294967295)<<10&4294967295|q>>>22))^((H=J+((q=H+(N^(J|~F))+B[2]+718787259&4294967295)<<15&4294967295|q>>>17))|~N))+B[9]+3951481745&4294967295,U.g[0]=U.g[0]+N&4294967295,U.g[1]=U.g[1]+(H+(q<<21&4294967295|q>>>11))&4294967295,U.g[2]=U.g[2]+H&4294967295,U.g[3]=U.g[3]+J&4294967295}function o(U,N){this.h=N;for(var F=[],B=!0,H=U.length-1;0<=H;H--){var J=0|U[H];B&&J==N||(F[H]=J,B=!1)}this.g=F}(function e(U,N){function F(){}F.prototype=N.prototype,U.D=N.prototype,U.prototype=new F,U.prototype.constructor=U,U.C=function(B,H,J){for(var q=Array(arguments.length-2),nn=2;nn<arguments.length;nn++)q[nn-2]=arguments[nn];return N.prototype[H].apply(B,q)}})(r,function t(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function(U,N){void 0===N&&(N=U.length);for(var F=N-this.blockSize,B=this.B,H=this.h,J=0;J<N;){if(0==H)for(;J<=F;)i(this,U,J),J+=this.blockSize;if("string"==typeof U){for(;J<N;)if(B[H++]=U.charCodeAt(J++),H==this.blockSize){i(this,B),H=0;break}}else for(;J<N;)if(B[H++]=U[J++],H==this.blockSize){i(this,B),H=0;break}}this.h=H,this.o+=N},r.prototype.v=function(){var U=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);U[0]=128;for(var N=1;N<U.length-8;++N)U[N]=0;var F=8*this.o;for(N=U.length-8;N<U.length;++N)U[N]=255&F,F/=256;for(this.u(U),U=Array(16),N=F=0;4>N;++N)for(var B=0;32>B;B+=8)U[F++]=this.g[N]>>>B&255;return U};var a={};function l(U){return-128<=U&&128>U?function s(U,N){var F=a;return Object.prototype.hasOwnProperty.call(F,U)?F[U]:F[U]=N(U)}(U,function(N){return new o([0|N],0>N?-1:0)}):new o([0|U],0>U?-1:0)}function u(U){if(isNaN(U)||!isFinite(U))return d;if(0>U)return T(u(-U));for(var N=[],F=1,B=0;U>=F;B++)N[B]=U/F|0,F*=4294967296;return new o(N,0)}var d=l(0),f=l(1),y=l(16777216);function E(U){if(0!=U.h)return!1;for(var N=0;N<U.g.length;N++)if(0!=U.g[N])return!1;return!0}function I(U){return-1==U.h}function T(U){for(var N=U.g.length,F=[],B=0;B<N;B++)F[B]=~U.g[B];return new o(F,~U.h).add(f)}function P(U,N){return U.add(T(N))}function x(U,N){for(;(65535&U[N])!=U[N];)U[N+1]+=U[N]>>>16,U[N]&=65535,N++}function V(U,N){this.g=U,this.h=N}function W(U,N){if(E(N))throw Error("division by zero");if(E(U))return new V(d,d);if(I(U))return N=W(T(U),N),new V(T(N.g),T(N.h));if(I(N))return N=W(U,T(N)),new V(T(N.g),N.h);if(30<U.g.length){if(I(U)||I(N))throw Error("slowDivide_ only works with positive integers.");for(var F=f,B=N;0>=B.l(U);)F=K(F),B=K(B);var H=Y(F,1),J=Y(B,1);for(B=Y(B,2),F=Y(F,2);!E(B);){var q=J.add(B);0>=q.l(U)&&(H=H.add(F),J=q),B=Y(B,1),F=Y(F,1)}return N=P(U,H.j(N)),new V(H,N)}for(H=d;0<=U.l(N);){for(F=Math.max(1,Math.floor(U.m()/N.m())),B=48>=(B=Math.ceil(Math.log(F)/Math.LN2))?1:Math.pow(2,B-48),q=(J=u(F)).j(N);I(q)||0<q.l(U);)q=(J=u(F-=B)).j(N);E(J)&&(J=f),H=H.add(J),U=P(U,q)}return new V(H,U)}function K(U){for(var N=U.g.length+1,F=[],B=0;B<N;B++)F[B]=U.i(B)<<1|U.i(B-1)>>>31;return new o(F,U.h)}function Y(U,N){var F=N>>5;N%=32;for(var B=U.g.length-F,H=[],J=0;J<B;J++)H[J]=0<N?U.i(J+F)>>>N|U.i(J+F+1)<<32-N:U.i(J+F);return new o(H,U.h)}(n=o.prototype).m=function(){if(I(this))return-T(this).m();for(var U=0,N=1,F=0;F<this.g.length;F++){var B=this.i(F);U+=(0<=B?B:4294967296+B)*N,N*=4294967296}return U},n.toString=function(U){if(2>(U=U||10)||36<U)throw Error("radix out of range: "+U);if(E(this))return"0";if(I(this))return"-"+T(this).toString(U);for(var N=u(Math.pow(U,6)),F=this,B="";;){var H=W(F,N).g,J=((0<(F=P(F,H.j(N))).g.length?F.g[0]:F.h)>>>0).toString(U);if(E(F=H))return J+B;for(;6>J.length;)J="0"+J;B=J+B}},n.i=function(U){return 0>U?0:U<this.g.length?this.g[U]:this.h},n.l=function(U){return I(U=P(this,U))?-1:E(U)?0:1},n.abs=function(){return I(this)?T(this):this},n.add=function(U){for(var N=Math.max(this.g.length,U.g.length),F=[],B=0,H=0;H<=N;H++){var J=B+(65535&this.i(H))+(65535&U.i(H)),q=(J>>>16)+(this.i(H)>>>16)+(U.i(H)>>>16);B=q>>>16,F[H]=(q&=65535)<<16|(J&=65535)}return new o(F,-2147483648&F[F.length-1]?-1:0)},n.j=function(U){if(E(this)||E(U))return d;if(I(this))return I(U)?T(this).j(T(U)):T(T(this).j(U));if(I(U))return T(this.j(T(U)));if(0>this.l(y)&&0>U.l(y))return u(this.m()*U.m());for(var N=this.g.length+U.g.length,F=[],B=0;B<2*N;B++)F[B]=0;for(B=0;B<this.g.length;B++)for(var H=0;H<U.g.length;H++){var J=this.i(B)>>>16,q=65535&this.i(B),nn=U.i(H)>>>16,Nt=65535&U.i(H);F[2*B+2*H]+=q*Nt,x(F,2*B+2*H),F[2*B+2*H+1]+=J*Nt,x(F,2*B+2*H+1),F[2*B+2*H+1]+=q*nn,x(F,2*B+2*H+1),F[2*B+2*H+2]+=J*nn,x(F,2*B+2*H+2)}for(B=0;B<N;B++)F[B]=F[2*B+1]<<16|F[2*B];for(B=N;B<2*N;B++)F[B]=0;return new o(F,0)},n.A=function(U){return W(this,U).h},n.and=function(U){for(var N=Math.max(this.g.length,U.g.length),F=[],B=0;B<N;B++)F[B]=this.i(B)&U.i(B);return new o(F,this.h&U.h)},n.or=function(U){for(var N=Math.max(this.g.length,U.g.length),F=[],B=0;B<N;B++)F[B]=this.i(B)|U.i(B);return new o(F,this.h|U.h)},n.xor=function(U){for(var N=Math.max(this.g.length,U.g.length),F=[],B=0;B<N;B++)F[B]=this.i(B)^U.i(B);return new o(F,this.h^U.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,bQ.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=function c(U,N){if(0==U.length)throw Error("number format error: empty string");if(2>(N=N||10)||36<N)throw Error("radix out of range: "+N);if("-"==U.charAt(0))return T(c(U.substring(1),N));if(0<=U.indexOf("-"))throw Error('number format error: interior "-" character');for(var F=u(Math.pow(N,8)),B=d,H=0;H<U.length;H+=8){var J=Math.min(8,U.length-H),q=parseInt(U.substring(H,H+J),N);8>J?(J=u(Math.pow(N,J)),B=B.j(J).add(u(q))):B=(B=B.j(F)).add(u(q))}return B},Kh=bQ.Integer=o}).apply(typeof TQ<"u"?TQ:typeof self<"u"?self:typeof window<"u"?window:{});var CA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Eu={};(function(){var n,e="function"==typeof Object.defineProperties?Object.defineProperty:function(m,w,A){return m==Array.prototype||m==Object.prototype||(m[w]=A.value),m},r=function t(m){m=["object"==typeof globalThis&&globalThis,m,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof CA&&CA];for(var w=0;w<m.length;++w){var A=m[w];if(A&&A.Math==Math)return A}throw Error("Cannot find global object")}(this);!function i(m,w){if(w)e:{var A=r;m=m.split(".");for(var O=0;O<m.length-1;O++){var Z=m[O];if(!(Z in A))break e;A=A[Z]}(w=w(O=A[m=m[m.length-1]]))!=O&&null!=w&&e(A,m,{configurable:!0,writable:!0,value:w})}}("Array.prototype.values",function(m){return m||function(){return function s(m,w){m instanceof String&&(m+="");var A=0,O=!1,Z={next:function(){if(!O&&A<m.length){var ue=A++;return{value:w(ue,m[ue]),done:!1}}return O=!0,{done:!0,value:void 0}}};return Z[Symbol.iterator]=function(){return Z},Z}(this,function(w,A){return A})}});var o=o||{},a=this||self;function l(m){var w=typeof m;return"array"==(w="object"!=w?w:m?Array.isArray(m)?"array":w:"null")||"object"==w&&"number"==typeof m.length}function u(m){var w=typeof m;return"object"==w&&null!=m||"function"==w}function c(m,w,A){return m.call.apply(m.bind,arguments)}function d(m,w,A){if(!m)throw Error();if(2<arguments.length){var O=Array.prototype.slice.call(arguments,2);return function(){var Z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Z,O),m.apply(w,Z)}}return function(){return m.apply(w,arguments)}}function f(m,w,A){return(f=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?c:d).apply(null,arguments)}function y(m,w){var A=Array.prototype.slice.call(arguments,1);return function(){var O=A.slice();return O.push.apply(O,arguments),m.apply(this,O)}}function E(m,w){function A(){}A.prototype=w.prototype,m.aa=w.prototype,m.prototype=new A,m.prototype.constructor=m,m.Qb=function(O,Z,ue){for(var Pe=Array(arguments.length-2),Yn=2;Yn<arguments.length;Yn++)Pe[Yn-2]=arguments[Yn];return w.prototype[Z].apply(O,Pe)}}function I(m){const w=m.length;if(0<w){const A=Array(w);for(let O=0;O<w;O++)A[O]=m[O];return A}return[]}function T(m,w){for(let A=1;A<arguments.length;A++){const O=arguments[A];if(l(O)){const Z=m.length||0,ue=O.length||0;m.length=Z+ue;for(let Pe=0;Pe<ue;Pe++)m[Z+Pe]=O[Pe]}else m.push(O)}}function x(m){return/^[\s\xa0]*$/.test(m)}function V(){var m=a.navigator;return m&&(m=m.userAgent)?m:""}function W(m){return W[" "](m),m}W[" "]=function(){};var K=!(-1==V().indexOf("Gecko")||-1!=V().toLowerCase().indexOf("webkit")&&-1==V().indexOf("Edge")||-1!=V().indexOf("Trident")||-1!=V().indexOf("MSIE")||-1!=V().indexOf("Edge"));function Y(m,w,A){for(const O in m)w.call(A,m[O],O,m)}function N(m){const w={};for(const A in m)w[A]=m[A];return w}const F="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function B(m,w){let A,O;for(let Z=1;Z<arguments.length;Z++){for(A in O=arguments[Z],O)m[A]=O[A];for(let ue=0;ue<F.length;ue++)A=F[ue],Object.prototype.hasOwnProperty.call(O,A)&&(m[A]=O[A])}}function H(m){var w=1;m=m.split(":");const A=[];for(;0<w&&m.length;)A.push(m.shift()),w--;return m.length&&A.push(m.join(":")),A}function J(m){a.setTimeout(()=>{throw m},0)}function q(){var m=ci;let w=null;return m.g&&(w=m.g,m.g=m.g.next,m.g||(m.h=null),w.next=null),w}var Nt=new class P{constructor(w,A){this.i=w,this.j=A,this.h=0,this.g=null}get(){let w;return 0<this.h?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}(()=>new or,m=>m.reset());class or{constructor(){this.next=this.g=this.h=null}set(w,A){this.h=w,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let Kn,Xi=!1,ci=new class nn{constructor(){this.h=this.g=null}add(w,A){const O=Nt.get();O.set(w,A),this.h?this.h.next=O:this.g=O,this.h=O}},Du=()=>{const m=a.Promise.resolve(void 0);Kn=()=>{m.then(Um)}};var Um=()=>{for(var m;m=q();){try{m.h.call(m.g)}catch(A){J(A)}var w=Nt;w.j(m),100>w.h&&(w.h++,m.next=w.g,w.g=m)}Xi=!1};function Bs(){this.s=this.s,this.C=this.C}function Hr(m,w){this.type=m,this.g=this.target=w,this.defaultPrevented=!1}Bs.prototype.s=!1,Bs.prototype.ma=function(){this.s||(this.s=!0,this.N())},Bs.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},Hr.prototype.h=function(){this.defaultPrevented=!0};var xu=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var m=!1,w=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const A=()=>{};a.addEventListener("test",A,w),a.removeEventListener("test",A,w)}catch{}return m}();function Ha(m,w){if(Hr.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var A=this.type=m.type,O=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=w,w=m.relatedTarget){if(K){e:{try{W(w.nodeName);var Z=!0;break e}catch{}Z=!1}Z||(w=null)}}else"mouseover"==A?w=m.fromElement:"mouseout"==A&&(w=m.toElement);this.relatedTarget=w,O?(this.clientX=void 0!==O.clientX?O.clientX:O.pageX,this.clientY=void 0!==O.clientY?O.clientY:O.pageY,this.screenX=O.screenX||0,this.screenY=O.screenY||0):(this.clientX=void 0!==m.clientX?m.clientX:m.pageX,this.clientY=void 0!==m.clientY?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType="string"==typeof m.pointerType?m.pointerType:Ru[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&Ha.aa.h.call(this)}}E(Ha,Hr);var Ru={2:"touch",3:"pen",4:"mouse"};Ha.prototype.h=function(){Ha.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var RC="closure_listenable_"+(1e6*Math.random()|0),PUe=0;function MUe(m,w,A,O,Z){this.listener=m,this.proxy=null,this.src=w,this.type=A,this.capture=!!O,this.ha=Z,this.key=++PUe,this.da=this.fa=!1}function CS(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function IS(m){this.src=m,this.g={},this.h=0}function EV(m,w){var A=w.type;if(A in m.g){var ue,O=m.g[A],Z=Array.prototype.indexOf.call(O,w,void 0);(ue=0<=Z)&&Array.prototype.splice.call(O,Z,1),ue&&(CS(w),0==m.g[A].length&&(delete m.g[A],m.h--))}}function CV(m,w,A,O){for(var Z=0;Z<m.length;++Z){var ue=m[Z];if(!ue.da&&ue.listener==w&&ue.capture==!!A&&ue.ha==O)return Z}return-1}IS.prototype.add=function(m,w,A,O,Z){var ue=m.toString();(m=this.g[ue])||(m=this.g[ue]=[],this.h++);var Pe=CV(m,w,O,Z);return-1<Pe?(w=m[Pe],A||(w.fa=!1)):((w=new MUe(w,this.src,ue,!!O,Z)).fa=A,m.push(w)),w};var IV="closure_lm_"+(1e6*Math.random()|0),wV={};function iee(m,w,A,O,Z){if(O&&O.once)return oee(m,w,A,O,Z);if(Array.isArray(w)){for(var ue=0;ue<w.length;ue++)iee(m,w[ue],A,O,Z);return null}return A=SV(A),m&&m[RC]?m.K(w,A,u(O)?!!O.capture:!!O,Z):see(m,w,A,!1,O,Z)}function see(m,w,A,O,Z,ue){if(!w)throw Error("Invalid event type");var Pe=u(Z)?!!Z.capture:!!Z,Yn=bV(m);if(Yn||(m[IV]=Yn=new IS(m)),(A=Yn.add(w,A,O,Pe,ue)).proxy)return A;if(O=function NUe(){const w=kUe;return function m(A){return w.call(m.src,m.listener,A)}}(),A.proxy=O,O.src=m,O.listener=A,m.addEventListener)xu||(Z=Pe),void 0===Z&&(Z=!1),m.addEventListener(w.toString(),O,Z);else if(m.attachEvent)m.attachEvent(lee(w.toString()),O);else{if(!m.addListener||!m.removeListener)throw Error("addEventListener and attachEvent are unavailable.");m.addListener(O)}return A}function oee(m,w,A,O,Z){if(Array.isArray(w)){for(var ue=0;ue<w.length;ue++)oee(m,w[ue],A,O,Z);return null}return A=SV(A),m&&m[RC]?m.L(w,A,u(O)?!!O.capture:!!O,Z):see(m,w,A,!0,O,Z)}function aee(m,w,A,O,Z){if(Array.isArray(w))for(var ue=0;ue<w.length;ue++)aee(m,w[ue],A,O,Z);else O=u(O)?!!O.capture:!!O,A=SV(A),m&&m[RC]?(m=m.i,(w=String(w).toString())in m.g&&-1<(A=CV(ue=m.g[w],A,O,Z))&&(CS(ue[A]),Array.prototype.splice.call(ue,A,1),0==ue.length&&(delete m.g[w],m.h--))):m&&(m=bV(m))&&(w=m.g[w.toString()],m=-1,w&&(m=CV(w,A,O,Z)),(A=-1<m?w[m]:null)&&TV(A))}function TV(m){if("number"!=typeof m&&m&&!m.da){var w=m.src;if(w&&w[RC])EV(w.i,m);else{var A=m.type,O=m.proxy;w.removeEventListener?w.removeEventListener(A,O,m.capture):w.detachEvent?w.detachEvent(lee(A),O):w.addListener&&w.removeListener&&w.removeListener(O),(A=bV(w))?(EV(A,m),0==A.h&&(A.src=null,w[IV]=null)):CS(m)}}}function lee(m){return m in wV?wV[m]:wV[m]="on"+m}function kUe(m,w){if(m.da)m=!0;else{w=new Ha(w,this);var A=m.listener,O=m.ha||m.src;m.fa&&TV(m),m=A.call(O,w)}return m}function bV(m){return(m=m[IV])instanceof IS?m:null}var AV="__closure_events_fn_"+(1e9*Math.random()>>>0);function SV(m){return"function"==typeof m?m:(m[AV]||(m[AV]=function(w){return m.handleEvent(w)}),m[AV])}function ys(){Bs.call(this),this.i=new IS(this),this.M=this,this.F=null}function $s(m,w){var A,O=m.F;if(O)for(A=[];O;O=O.F)A.push(O);if(m=m.M,O=w.type||w,"string"==typeof w)w=new Hr(w,m);else if(w instanceof Hr)w.target=w.target||m;else{var Z=w;B(w=new Hr(O,m),Z)}if(Z=!0,A)for(var ue=A.length-1;0<=ue;ue--){var Pe=w.g=A[ue];Z=wS(Pe,O,!0,w)&&Z}if(Z=wS(Pe=w.g=m,O,!0,w)&&Z,Z=wS(Pe,O,!1,w)&&Z,A)for(ue=0;ue<A.length;ue++)Z=wS(Pe=w.g=A[ue],O,!1,w)&&Z}function wS(m,w,A,O){if(!(w=m.i.g[String(w)]))return!0;w=w.concat();for(var Z=!0,ue=0;ue<w.length;++ue){var Pe=w[ue];if(Pe&&!Pe.da&&Pe.capture==A){var Yn=Pe.listener,Zi=Pe.ha||Pe.src;Pe.fa&&EV(m.i,Pe),Z=!1!==Yn.call(Zi,O)&&Z}}return Z&&!O.defaultPrevented}function uee(m,w,A){if("function"==typeof m)A&&(m=f(m,A));else{if(!m||"function"!=typeof m.handleEvent)throw Error("Invalid listener argument");m=f(m.handleEvent,m)}return 2147483647<Number(w)?-1:a.setTimeout(m,w||0)}function cee(m){m.g=uee(()=>{m.g=null,m.i&&(m.i=!1,cee(m))},m.l);const w=m.h;m.h=null,m.m.apply(null,w)}E(ys,Bs),ys.prototype[RC]=!0,ys.prototype.removeEventListener=function(m,w,A,O){aee(this,m,w,A,O)},ys.prototype.N=function(){if(ys.aa.N.call(this),this.i){var w,m=this.i;for(w in m.g){for(var A=m.g[w],O=0;O<A.length;O++)CS(A[O]);delete m.g[w],m.h--}}this.F=null},ys.prototype.K=function(m,w,A,O){return this.i.add(String(m),w,!1,A,O)},ys.prototype.L=function(m,w,A,O){return this.i.add(String(m),w,!0,A,O)};class OUe extends Bs{constructor(w,A){super(),this.m=w,this.l=A,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:cee(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function PC(m){Bs.call(this),this.h=m,this.g={}}E(PC,Bs);var dee=[];function hee(m){Y(m.g,function(w,A){this.g.hasOwnProperty(A)&&TV(w)},m),m.g={}}PC.prototype.N=function(){PC.aa.N.call(this),hee(this)},PC.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var DV=a.JSON.stringify,FUe=a.JSON.parse,LUe=class{stringify(m){return a.JSON.stringify(m,void 0)}parse(m){return a.JSON.parse(m,void 0)}};function xV(){}function pee(){}xV.prototype.h=null;var MC={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function RV(){Hr.call(this,"d")}function PV(){Hr.call(this,"c")}E(RV,Hr),E(PV,Hr);var _f={},gee=null;function TS(){return gee=gee||new ys}function mee(m){Hr.call(this,_f.La,m)}function NC(m){const w=TS();$s(w,new mee(w))}function _ee(m,w){Hr.call(this,_f.STAT_EVENT,m),this.stat=w}function Hs(m){const w=TS();$s(w,new _ee(w,m))}function yee(m,w){Hr.call(this,_f.Ma,m),this.size=w}function kC(m,w){if("function"!=typeof m)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){m()},w)}function OC(){this.g=!0}function Bm(m,w,A,O){m.info(function(){return"XMLHTTP TEXT ("+w+"): "+function $Ue(m,w){if(!m.g)return w;if(!w)return null;try{var A=JSON.parse(w);if(A)for(m=0;m<A.length;m++)if(Array.isArray(A[m])){var O=A[m];if(!(2>O.length)){var Z=O[1];if(Array.isArray(Z)&&!(1>Z.length)){var ue=Z[0];if("noop"!=ue&&"stop"!=ue&&"close"!=ue)for(var Pe=1;Pe<Z.length;Pe++)Z[Pe]=""}}}return DV(A)}catch{return w}}(m,A)+(O?" "+O:"")})}_f.La="serverreachability",E(mee,Hr),_f.STAT_EVENT="statevent",E(_ee,Hr),_f.Ma="timingevent",E(yee,Hr),OC.prototype.xa=function(){this.g=!1},OC.prototype.info=function(){};var MV,bS={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},vee={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function AS(){}function yd(m,w,A,O){this.j=m,this.i=w,this.l=A,this.R=O||1,this.U=new PC(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Eee}function Eee(){this.i=null,this.g="",this.h=!1}E(AS,xV),AS.prototype.g=function(){return new XMLHttpRequest},AS.prototype.i=function(){return{}},MV=new AS;var Cee={},NV={};function kV(m,w,A){m.L=1,m.v=RS(Pu(w)),m.m=A,m.P=!0,Iee(m,null)}function Iee(m,w){m.F=Date.now(),SS(m),m.A=Pu(m.v);var A=m.A,O=m.R;Array.isArray(O)||(O=[String(O)]),Fee(A.i,"t",O),m.C=0,A=m.j.J,m.h=new Eee,m.g=ete(m.j,A?w:null,!m.m),0<m.O&&(m.M=new OUe(f(m.Y,m,m.g),m.O)),w=m.U,A=m.g,O=m.ca;var Z="readystatechange";Array.isArray(Z)||(Z&&(dee[0]=Z.toString()),Z=dee);for(var ue=0;ue<Z.length;ue++){var Pe=iee(A,Z[ue],O||w.handleEvent,!1,w.h||w);if(!Pe)break;w.g[Pe.key]=Pe}w=m.H?N(m.H):{},m.m?(m.u||(m.u="POST"),w["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,w)):(m.u="GET",m.g.ea(m.A,m.u,null,w)),NC(),function VUe(m,w,A,O,Z,ue){m.info(function(){if(m.g)if(ue)for(var Pe="",Yn=ue.split("&"),Zi=0;Zi<Yn.length;Zi++){var pn=Yn[Zi].split("=");if(1<pn.length){var vs=pn[0];pn=pn[1];var Es=vs.split("_");Pe=2<=Es.length&&"type"==Es[1]?Pe+(vs+"=")+pn+"&":Pe+(vs+"=redacted&")}}else Pe=null;else Pe=ue;return"XMLHTTP REQ ("+O+") [attempt "+Z+"]: "+w+"\n"+A+"\n"+Pe})}(m.i,m.u,m.A,m.l,m.R,m.m)}function wee(m){return!!m.g&&"GET"==m.u&&2!=m.L&&m.j.Ca}function HUe(m,w){var A=m.C,O=w.indexOf("\n",A);return-1==O?NV:(A=Number(w.substring(A,O)),isNaN(A)?Cee:(O+=1)+A>w.length?NV:(w=w.slice(O,O+A),m.C=O+A,w))}function SS(m){m.S=Date.now()+m.I,Tee(m,m.I)}function Tee(m,w){if(null!=m.B)throw Error("WatchDog timer not null");m.B=kC(f(m.ba,m),w)}function OV(m){m.B&&(a.clearTimeout(m.B),m.B=null)}function FC(m){0==m.j.G||m.J||Qee(m.j,m)}function yf(m){OV(m);var w=m.M;w&&"function"==typeof w.ma&&w.ma(),m.M=null,hee(m.U),m.g&&(w=m.g,m.g=null,w.abort(),w.ma())}function FV(m,w){try{var A=m.j;if(0!=A.G&&(A.g==m||LV(A.h,m)))if(!m.K&&LV(A.h,m)&&3==A.G){try{var O=A.Da.g.parse(w)}catch{O=null}if(Array.isArray(O)&&3==O.length){var Z=O;if(0==Z[0]){e:if(!A.u){if(A.g){if(!(A.g.F+3e3<m.F))break e;OS(A),NS(A)}$V(A),Hs(18)}}else A.za=Z[1],0<A.za-A.T&&37500>Z[2]&&A.F&&0==A.v&&!A.C&&(A.C=kC(f(A.Za,A),6e3));if(1>=See(A.h)&&A.ca){try{A.ca()}catch{}A.ca=void 0}}else Ef(A,11)}else if((m.K||A.g==m)&&OS(A),!x(w))for(Z=A.Da.g.parse(w),w=0;w<Z.length;w++){let pn=Z[w];if(A.T=pn[0],pn=pn[1],2==A.G)if("c"==pn[0]){A.K=pn[1],A.ia=pn[2];const vs=pn[3];null!=vs&&(A.la=vs,A.j.info("VER="+A.la));const Es=pn[4];null!=Es&&(A.Aa=Es,A.j.info("SVER="+A.Aa));const zm=pn[5];null!=zm&&"number"==typeof zm&&0<zm&&(A.L=O=1.5*zm,A.j.info("backChannelRequestTimeoutMs_="+O)),O=A;const za=m.g;if(za){const LS=za.g?za.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(LS){var ue=O.h;ue.g||-1==LS.indexOf("spdy")&&-1==LS.indexOf("quic")&&-1==LS.indexOf("h2")||(ue.j=ue.l,ue.g=new Set,ue.h&&(VV(ue,ue.h),ue.h=null))}if(O.D){const zV=za.g?za.g.getResponseHeader("X-HTTP-Session-Id"):null;zV&&(O.ya=zV,_r(O.I,O.D,zV))}}A.G=3,A.l&&A.l.ua(),A.ba&&(A.R=Date.now()-m.F,A.j.info("Handshake RTT: "+A.R+"ms"));var Pe=m;if((O=A).qa=Zee(O,O.J?O.ia:null,O.W),Pe.K){Dee(O.h,Pe);var Yn=Pe,Zi=O.L;Zi&&(Yn.I=Zi),Yn.B&&(OV(Yn),SS(Yn)),O.g=Pe}else Kee(O);0<A.i.length&&kS(A)}else"stop"!=pn[0]&&"close"!=pn[0]||Ef(A,7);else 3==A.G&&("stop"==pn[0]||"close"==pn[0]?"stop"==pn[0]?Ef(A,7):BV(A):"noop"!=pn[0]&&A.l&&A.l.ta(pn),A.v=0)}NC()}catch{}}yd.prototype.ca=function(m){m=m.target;const w=this.M;w&&3==Mu(m)?w.j():this.Y(m)},yd.prototype.Y=function(m){try{if(m==this.g)e:{const Es=Mu(this.g);var w=this.g.Ba();if(this.g.Z(),!(3>Es)&&(3!=Es||this.g&&(this.h.h||this.g.oa()||zee(this.g)))){this.J||4!=Es||7==w||NC(),OV(this);var A=this.g.Z();this.X=A;t:if(wee(this)){var O=zee(this.g);m="";var Z=O.length,ue=4==Mu(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){yf(this),FC(this);var Pe="";break t}this.h.i=new a.TextDecoder}for(w=0;w<Z;w++)this.h.h=!0,m+=this.h.i.decode(O[w],{stream:!(ue&&w==Z-1)});O.length=0,this.h.g+=m,this.C=0,Pe=this.h.g}else Pe=this.g.oa();if(this.o=200==A,function UUe(m,w,A,O,Z,ue,Pe){m.info(function(){return"XMLHTTP RESP ("+O+") [ attempt "+Z+"]: "+w+"\n"+A+"\n"+ue+" "+Pe})}(this.i,this.u,this.A,this.l,this.R,Es,A),this.o){if(this.T&&!this.K){t:{if(this.g){var Yn,Zi=this.g;if((Yn=Zi.g?Zi.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(Yn)){var pn=Yn;break t}}pn=null}if(!(A=pn)){this.o=!1,this.s=3,Hs(12),yf(this),FC(this);break e}Bm(this.i,this.l,A,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,FV(this,A)}if(this.P){let za;for(A=!0;!this.J&&this.C<Pe.length;){if(za=HUe(this,Pe),za==NV){4==Es&&(this.s=4,Hs(14),A=!1),Bm(this.i,this.l,null,"[Incomplete Response]");break}if(za==Cee){this.s=4,Hs(15),Bm(this.i,this.l,Pe,"[Invalid Chunk]"),A=!1;break}Bm(this.i,this.l,za,null),FV(this,za)}if(wee(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=Es||0!=Pe.length||this.h.h||(this.s=1,Hs(16),A=!1),this.o=this.o&&A,A){if(0<Pe.length&&!this.W){this.W=!0;var vs=this.j;vs.g==this&&vs.ba&&!vs.M&&(vs.j.info("Great, no buffering proxy detected. Bytes received: "+Pe.length),HV(vs),vs.M=!0,Hs(11))}}else Bm(this.i,this.l,Pe,"[Invalid Chunked Response]"),yf(this),FC(this)}else Bm(this.i,this.l,Pe,null),FV(this,Pe);4==Es&&yf(this),this.o&&!this.J&&(4==Es?Qee(this.j,this):(this.o=!1,SS(this)))}else(function sBe(m){const w={};m=(m.g&&2<=Mu(m)&&m.g.getAllResponseHeaders()||"").split("\r\n");for(let O=0;O<m.length;O++){if(x(m[O]))continue;var A=H(m[O]);const Z=A[0];if("string"!=typeof(A=A[1]))continue;A=A.trim();const ue=w[Z]||[];w[Z]=ue,ue.push(A)}!function U(m,w){for(const A in m)w.call(void 0,m[A],A,m)}(w,function(O){return O.join(", ")})})(this.g),400==A&&0<Pe.indexOf("Unknown SID")?(this.s=3,Hs(12)):(this.s=0,Hs(13)),yf(this),FC(this)}}}catch{}},yd.prototype.cancel=function(){this.J=!0,yf(this)},yd.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(function BUe(m,w){m.info(function(){return"TIMEOUT: "+w})}(this.i,this.A),2!=this.L&&(NC(),Hs(17)),yf(this),this.s=2,FC(this)):Tee(this,this.S-m)};var zUe=class{constructor(m,w){this.g=m,this.map=w}};function bee(m){this.l=m||10,m=a.PerformanceNavigationTiming?0<(m=a.performance.getEntriesByType("navigation")).length&&("hq"==m[0].nextHopProtocol||"h2"==m[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Aee(m){return!!m.h||!!m.g&&m.g.size>=m.j}function See(m){return m.h?1:m.g?m.g.size:0}function LV(m,w){return m.h?m.h==w:!!m.g&&m.g.has(w)}function VV(m,w){m.g?m.g.add(w):m.h=w}function Dee(m,w){m.h&&m.h==w?m.h=null:m.g&&m.g.has(w)&&m.g.delete(w)}function xee(m){if(null!=m.h)return m.i.concat(m.h.D);if(null!=m.g&&0!==m.g.size){let w=m.i;for(const A of m.g.values())w=w.concat(A.D);return w}return I(m.i)}function Ree(m,w){if(m.forEach&&"function"==typeof m.forEach)m.forEach(w,void 0);else if(l(m)||"string"==typeof m)Array.prototype.forEach.call(m,w,void 0);else for(var A=function GUe(m){if(m.na&&"function"==typeof m.na)return m.na();if(!m.V||"function"!=typeof m.V){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(l(m)||"string"==typeof m){var w=[];m=m.length;for(var A=0;A<m;A++)w.push(A);return w}w=[],A=0;for(const O in m)w[A++]=O;return w}}}(m),O=function WUe(m){if(m.V&&"function"==typeof m.V)return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if("string"==typeof m)return m.split("");if(l(m)){for(var w=[],A=m.length,O=0;O<A;O++)w.push(m[O]);return w}for(O in w=[],A=0,m)w[A++]=m[O];return w}(m),Z=O.length,ue=0;ue<Z;ue++)w.call(void 0,O[ue],A&&A[ue],m)}bee.prototype.cancel=function(){if(this.i=xee(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const m of this.g.values())m.cancel();this.g.clear()}};var Pee=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vf(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof vf){this.h=m.h,DS(this,m.j),this.o=m.o,this.g=m.g,xS(this,m.s),this.l=m.l;var w=m.i,A=new UC;A.i=w.i,w.g&&(A.g=new Map(w.g),A.h=w.h),Mee(this,A),this.m=m.m}else m&&(w=String(m).match(Pee))?(this.h=!1,DS(this,w[1]||"",!0),this.o=LC(w[2]||""),this.g=LC(w[3]||"",!0),xS(this,w[4]),this.l=LC(w[5]||"",!0),Mee(this,w[6]||"",!0),this.m=LC(w[7]||"")):(this.h=!1,this.i=new UC(null,this.h))}function Pu(m){return new vf(m)}function DS(m,w,A){m.j=A?LC(w,!0):w,m.j&&(m.j=m.j.replace(/:$/,""))}function xS(m,w){if(w){if(w=Number(w),isNaN(w)||0>w)throw Error("Bad port number "+w);m.s=w}else m.s=null}function Mee(m,w,A){w instanceof UC?(m.i=w,function XUe(m,w){w&&!m.j&&(vd(m),m.i=null,m.g.forEach(function(A,O){var Z=O.toLowerCase();O!=Z&&(kee(this,O),Fee(this,Z,A))},m)),m.j=w}(m.i,m.h)):(A||(w=VC(w,QUe)),m.i=new UC(w,m.h))}function _r(m,w,A){m.i.set(w,A)}function RS(m){return _r(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function LC(m,w){return m?w?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function VC(m,w,A){return"string"==typeof m?(m=encodeURI(m).replace(w,jUe),A&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function jUe(m){return"%"+((m=m.charCodeAt(0))>>4&15).toString(16)+(15&m).toString(16)}vf.prototype.toString=function(){var m=[],w=this.j;w&&m.push(VC(w,Nee,!0),":");var A=this.g;return(A||"file"==w)&&(m.push("//"),(w=this.o)&&m.push(VC(w,Nee,!0),"@"),m.push(encodeURIComponent(String(A)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(A=this.s)&&m.push(":",String(A))),(A=this.l)&&(this.g&&"/"!=A.charAt(0)&&m.push("/"),m.push(VC(A,"/"==A.charAt(0)?YUe:KUe,!0))),(A=this.i.toString())&&m.push("?",A),(A=this.m)&&m.push("#",VC(A,JUe)),m.join("")};var Nee=/[#\/\?@]/g,KUe=/[#\?:]/g,YUe=/[#\?]/g,QUe=/[#\?@]/g,JUe=/#/g;function UC(m,w){this.h=this.g=null,this.i=m||null,this.j=!!w}function vd(m){m.g||(m.g=new Map,m.h=0,m.i&&function qUe(m,w){if(m){m=m.split("&");for(var A=0;A<m.length;A++){var O=m[A].indexOf("="),Z=null;if(0<=O){var ue=m[A].substring(0,O);Z=m[A].substring(O+1)}else ue=m[A];w(ue,Z?decodeURIComponent(Z.replace(/\+/g," ")):"")}}}(m.i,function(w,A){m.add(decodeURIComponent(w.replace(/\+/g," ")),A)}))}function kee(m,w){vd(m),w=$m(m,w),m.g.has(w)&&(m.i=null,m.h-=m.g.get(w).length,m.g.delete(w))}function Oee(m,w){return vd(m),w=$m(m,w),m.g.has(w)}function Fee(m,w,A){kee(m,w),0<A.length&&(m.i=null,m.g.set($m(m,w),I(A)),m.h+=A.length)}function $m(m,w){return w=String(w),m.j&&(w=w.toLowerCase()),w}function Ed(m,w,A,O,Z){try{Z&&(Z.onload=null,Z.onerror=null,Z.onabort=null,Z.ontimeout=null),O(A)}catch{}}function tBe(){this.g=new LUe}function nBe(m,w,A){const O=A||"";try{Ree(m,function(Z,ue){let Pe=Z;u(Z)&&(Pe=DV(Z)),w.push(O+ue+"="+encodeURIComponent(Pe))})}catch(Z){throw w.push(O+"type="+encodeURIComponent("_badmap")),Z}}function BC(m){this.l=m.Ub||null,this.j=m.eb||!1}function PS(m,w){ys.call(this),this.D=m,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Lee(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}function $C(m){m.readyState=4,m.l=null,m.j=null,m.v=null,HC(m)}function HC(m){m.onreadystatechange&&m.onreadystatechange.call(m)}function Vee(m){let w="";return Y(m,function(A,O){w+=O,w+=":",w+=A,w+="\r\n"}),w}function UV(m,w,A){e:{for(O in A){var O=!1;break e}O=!0}O||(A=Vee(A),"string"==typeof m?null!=A&&encodeURIComponent(String(A)):_r(m,w,A))}function zr(m){ys.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(n=UC.prototype).add=function(m,w){vd(this),this.i=null,m=$m(this,m);var A=this.g.get(m);return A||this.g.set(m,A=[]),A.push(w),this.h+=1,this},n.forEach=function(m,w){vd(this),this.g.forEach(function(A,O){A.forEach(function(Z){m.call(w,Z,O,this)},this)},this)},n.na=function(){vd(this);const m=Array.from(this.g.values()),w=Array.from(this.g.keys()),A=[];for(let O=0;O<w.length;O++){const Z=m[O];for(let ue=0;ue<Z.length;ue++)A.push(w[O])}return A},n.V=function(m){vd(this);let w=[];if("string"==typeof m)Oee(this,m)&&(w=w.concat(this.g.get($m(this,m))));else{m=Array.from(this.g.values());for(let A=0;A<m.length;A++)w=w.concat(m[A])}return w},n.set=function(m,w){return vd(this),this.i=null,Oee(this,m=$m(this,m))&&(this.h-=this.g.get(m).length),this.g.set(m,[w]),this.h+=1,this},n.get=function(m,w){return m&&0<(m=this.V(m)).length?String(m[0]):w},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],w=Array.from(this.g.keys());for(var A=0;A<w.length;A++){var O=w[A];const ue=encodeURIComponent(String(O)),Pe=this.V(O);for(O=0;O<Pe.length;O++){var Z=ue;""!==Pe[O]&&(Z+="="+encodeURIComponent(String(Pe[O]))),m.push(Z)}}return this.i=m.join("&")},E(BC,xV),BC.prototype.g=function(){return new PS(this.l,this.j)},BC.prototype.i=function(m){return function(){return m}}({}),E(PS,ys),(n=PS.prototype).open=function(m,w){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=w,this.readyState=1,HC(this)},n.send=function(m){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const w={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(w.body=m),(this.D||a).fetch(new Request(this.A,w)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,$C(this)),this.readyState=0},n.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,HC(this)),this.g&&(this.readyState=3,HC(this),this.g)))if("arraybuffer"===this.responseType)m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Lee(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))},n.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var w=m.value?m.value:new Uint8Array(0);(w=this.v.decode(w,{stream:!m.done}))&&(this.response=this.responseText+=w)}m.done?$C(this):HC(this),3==this.readyState&&Lee(this)}},n.Ra=function(m){this.g&&(this.response=this.responseText=m,$C(this))},n.Qa=function(m){this.g&&(this.response=m,$C(this))},n.ga=function(){this.g&&$C(this)},n.setRequestHeader=function(m,w){this.u.append(m,w)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],w=this.h.entries();for(var A=w.next();!A.done;)m.push((A=A.value)[0]+": "+A[1]),A=w.next();return m.join("\r\n")},Object.defineProperty(PS.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(m){this.m=m?"include":"same-origin"}}),E(zr,ys);var rBe=/^https?$/i,iBe=["POST","PUT"];function Uee(m,w){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=w,m.m=5,Bee(m),MS(m)}function Bee(m){m.A||(m.A=!0,$s(m,"complete"),$s(m,"error"))}function $ee(m){if(m.h&&typeof o<"u"&&(!m.v[1]||4!=Mu(m)||2!=m.Z()))if(m.u&&4==Mu(m))uee(m.Ea,0,m);else if($s(m,"readystatechange"),4==Mu(m)){m.h=!1;try{const Pe=m.Z();e:switch(Pe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var A;if(!(A=w)){var O;if(O=0===Pe){var Z=String(m.D).match(Pee)[1]||null;!Z&&a.self&&a.self.location&&(Z=a.self.location.protocol.slice(0,-1)),O=!rBe.test(Z?Z.toLowerCase():"")}A=O}if(A)$s(m,"complete"),$s(m,"success");else{m.m=6;try{var ue=2<Mu(m)?m.g.statusText:""}catch{ue=""}m.l=ue+" ["+m.Z()+"]",Bee(m)}}finally{MS(m)}}}function MS(m,w){if(m.g){Hee(m);const A=m.g,O=m.v[0]?()=>{}:null;m.g=null,m.v=null,w||$s(m,"ready");try{A.onreadystatechange=O}catch{}}}function Hee(m){m.I&&(a.clearTimeout(m.I),m.I=null)}function Mu(m){return m.g?m.g.readyState:0}function zee(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function zC(m,w,A){return A&&A.internalChannelParams&&A.internalChannelParams[m]||w}function Wee(m){this.Aa=0,this.i=[],this.j=new OC,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=zC("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=zC("baseRetryDelayMs",5e3,m),this.cb=zC("retryDelaySeedMs",1e4,m),this.Wa=zC("forwardChannelMaxRetries",2,m),this.wa=zC("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new bee(m&&m.concurrentRequestLimit),this.Da=new tBe,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function BV(m){if(Gee(m),3==m.G){var w=m.U++,A=Pu(m.I);if(_r(A,"SID",m.K),_r(A,"RID",w),_r(A,"TYPE","terminate"),WC(m,A),(w=new yd(m,m.j,w)).L=2,w.v=RS(Pu(A)),A=!1,a.navigator&&a.navigator.sendBeacon)try{A=a.navigator.sendBeacon(w.v.toString(),"")}catch{}!A&&a.Image&&((new Image).src=w.v,A=!0),A||(w.g=ete(w.j,null),w.g.ea(w.v)),w.F=Date.now(),SS(w)}Xee(m)}function NS(m){m.g&&(HV(m),m.g.cancel(),m.g=null)}function Gee(m){NS(m),m.u&&(a.clearTimeout(m.u),m.u=null),OS(m),m.h.cancel(),m.s&&("number"==typeof m.s&&a.clearTimeout(m.s),m.s=null)}function kS(m){if(!Aee(m.h)&&!m.s){m.s=!0;var w=m.Ga;Kn||Du(),Xi||(Kn(),Xi=!0),ci.add(w,m),m.B=0}}function qee(m,w){var A;A=w?w.l:m.U++;const O=Pu(m.I);_r(O,"SID",m.K),_r(O,"RID",A),_r(O,"AID",m.T),WC(m,O),m.m&&m.o&&UV(O,m.m,m.o),A=new yd(m,m.j,A,m.B+1),null===m.m&&(A.H=m.o),w&&(m.i=w.D.concat(m.i)),w=jee(m,A,1e3),A.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),VV(m.h,A),kV(A,O,w)}function WC(m,w){m.H&&Y(m.H,function(A,O){_r(w,O,A)}),m.l&&Ree({},function(A,O){_r(w,O,A)})}function jee(m,w,A){A=Math.min(m.i.length,A);var O=m.l?f(m.l.Na,m.l,m):null;e:{var Z=m.i;let ue=-1;for(;;){const Pe=["count="+A];-1==ue?0<A?(ue=Z[0].g,Pe.push("ofs="+ue)):ue=0:Pe.push("ofs="+ue);let Yn=!0;for(let Zi=0;Zi<A;Zi++){let pn=Z[Zi].g;const vs=Z[Zi].map;if(pn-=ue,0>pn)ue=Math.max(0,Z[Zi].g-100),Yn=!1;else try{nBe(vs,Pe,"req"+pn+"_")}catch{O&&O(vs)}}if(Yn){O=Pe.join("&");break e}}}return m=m.i.splice(0,A),w.D=m,O}function Kee(m){if(!m.g&&!m.u){m.Y=1;var w=m.Fa;Kn||Du(),Xi||(Kn(),Xi=!0),ci.add(w,m),m.v=0}}function $V(m){return!(m.g||m.u||3<=m.v||(m.Y++,m.u=kC(f(m.Fa,m),Jee(m,m.v)),m.v++,0))}function HV(m){null!=m.A&&(a.clearTimeout(m.A),m.A=null)}function Yee(m){m.g=new yd(m,m.j,"rpc",m.Y),null===m.m&&(m.g.H=m.o),m.g.O=0;var w=Pu(m.qa);_r(w,"RID","rpc"),_r(w,"SID",m.K),_r(w,"AID",m.T),_r(w,"CI",m.F?"0":"1"),!m.F&&m.ja&&_r(w,"TO",m.ja),_r(w,"TYPE","xmlhttp"),WC(m,w),m.m&&m.o&&UV(w,m.m,m.o),m.L&&(m.g.I=m.L);var A=m.g;m=m.ia,A.L=1,A.v=RS(Pu(w)),A.m=null,A.P=!0,Iee(A,m)}function OS(m){null!=m.C&&(a.clearTimeout(m.C),m.C=null)}function Qee(m,w){var A=null;if(m.g==w){OS(m),HV(m),m.g=null;var O=2}else{if(!LV(m.h,w))return;A=w.D,Dee(m.h,w),O=1}if(0!=m.G)if(w.o)if(1==O){A=w.m?w.m.length:0,w=Date.now()-w.F;var Z=m.B;$s(O=TS(),new yee(O,A)),kS(m)}else Kee(m);else if(3==(Z=w.s)||0==Z&&0<w.X||!(1==O&&function oBe(m,w){return!(See(m.h)>=m.h.j-(m.s?1:0)||(m.s?(m.i=w.D.concat(m.i),0):1==m.G||2==m.G||m.B>=(m.Va?0:m.Wa)||(m.s=kC(f(m.Ga,m,w),Jee(m,m.B)),m.B++,0)))}(m,w)||2==O&&$V(m)))switch(A&&0<A.length&&(w=m.h,w.i=w.i.concat(A)),Z){case 1:Ef(m,5);break;case 4:Ef(m,10);break;case 3:Ef(m,6);break;default:Ef(m,2)}}function Jee(m,w){let A=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(A*=2),A*w}function Ef(m,w){if(m.j.info("Error code "+w),2==w){var A=f(m.fb,m),O=m.Xa;const Z=!O;O=new vf(O||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||DS(O,"https"),RS(O),Z?function ZUe(m,w){const A=new OC;if(a.Image){const O=new Image;O.onload=y(Ed,A,"TestLoadImage: loaded",!0,w,O),O.onerror=y(Ed,A,"TestLoadImage: error",!1,w,O),O.onabort=y(Ed,A,"TestLoadImage: abort",!1,w,O),O.ontimeout=y(Ed,A,"TestLoadImage: timeout",!1,w,O),a.setTimeout(function(){O.ontimeout&&O.ontimeout()},1e4),O.src=m}else w(!1)}(O.toString(),A):function eBe(m,w){new OC;const O=new AbortController,Z=setTimeout(()=>{O.abort(),Ed(0,0,!1,w)},1e4);fetch(m,{signal:O.signal}).then(ue=>{clearTimeout(Z),Ed(0,0,!!ue.ok,w)}).catch(()=>{clearTimeout(Z),Ed(0,0,!1,w)})}(O.toString(),A)}else Hs(2);m.G=0,m.l&&m.l.sa(w),Xee(m),Gee(m)}function Xee(m){if(m.G=0,m.ka=[],m.l){const w=xee(m.h);(0!=w.length||0!=m.i.length)&&(T(m.ka,w),T(m.ka,m.i),m.h.i.length=0,I(m.i),m.i.length=0),m.l.ra()}}function Zee(m,w,A){var O=A instanceof vf?Pu(A):new vf(A);if(""!=O.g)w&&(O.g=w+"."+O.g),xS(O,O.s);else{var Z=a.location;O=Z.protocol,w=w?w+"."+Z.hostname:Z.hostname,Z=+Z.port;var ue=new vf(null);O&&DS(ue,O),w&&(ue.g=w),Z&&xS(ue,Z),A&&(ue.l=A),O=ue}return w=m.ya,(A=m.D)&&w&&_r(O,A,w),_r(O,"VER",m.la),WC(m,O),O}function ete(m,w,A){if(w&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return(w=new zr(m.Ca&&!m.pa?new BC({eb:A}):m.pa)).Ha(m.J),w}function tte(){}function FS(){}function Bo(m,w){ys.call(this),this.g=new Wee(w),this.l=m,this.h=w&&w.messageUrlParams||null,m=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(m?m["X-WebChannel-Content-Type"]=w.messageContentType:m={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.va&&(m?m["X-WebChannel-Client-Profile"]=w.va:m={"X-WebChannel-Client-Profile":w.va}),this.g.S=m,(m=w&&w.Sb)&&!x(m)&&(this.g.m=m),this.v=w&&w.supportsCrossDomainXhr||!1,this.u=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!x(w)&&(this.g.D=w,null!==(m=this.h)&&w in m&&w in(m=this.h)&&delete m[w]),this.j=new Hm(this)}function nte(m){RV.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var w=m.__sm__;if(w){e:{for(const A in w){m=A;break e}m=void 0}(this.i=m)&&(m=this.i,w=null!==w&&m in w?w[m]:void 0),this.data=w}else this.data=m}function rte(){PV.call(this),this.status=1}function Hm(m){this.g=m}(n=zr.prototype).Ha=function(m){this.J=m},n.ea=function(m,w,A,O){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);w=w?w.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():MV.g(),this.v=function fee(m){return m.h||(m.h=m.i())}(this.o?this.o:MV),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(w,String(m),!0),this.B=!1}catch(ue){return void Uee(this,ue)}if(m=A||"",A=new Map(this.headers),O)if(Object.getPrototypeOf(O)===Object.prototype)for(var Z in O)A.set(Z,O[Z]);else{if("function"!=typeof O.keys||"function"!=typeof O.get)throw Error("Unknown input type for opt_headers: "+String(O));for(const ue of O.keys())A.set(ue,O.get(ue))}O=Array.from(A.keys()).find(ue=>"content-type"==ue.toLowerCase()),Z=a.FormData&&m instanceof a.FormData,!(0<=Array.prototype.indexOf.call(iBe,w,void 0))||O||Z||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ue,Pe]of A)this.g.setRequestHeader(ue,Pe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Hee(this),this.u=!0,this.g.send(m),this.u=!1}catch(ue){Uee(this,ue)}},n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,$s(this,"complete"),$s(this,"abort"),MS(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),MS(this,!0)),zr.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?$ee(this):this.bb())},n.bb=function(){$ee(this)},n.isActive=function(){return!!this.g},n.Z=function(){try{return 2<Mu(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(m){if(this.g){var w=this.g.responseText;return m&&0==w.indexOf(m)&&(w=w.substring(m.length)),FUe(w)}},n.Ba=function(){return this.m},n.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(n=Wee.prototype).la=8,n.G=1,n.connect=function(m,w,A,O){Hs(0),this.W=m,this.H=w||{},A&&void 0!==O&&(this.H.OSID=A,this.H.OAID=O),this.F=this.X,this.I=Zee(this,null,this.W),kS(this)},n.Ga=function(m){if(this.s)if(this.s=null,1==this.G){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const Z=new yd(this,this.j,m);let ue=this.o;if(this.S&&(ue?(ue=N(ue),B(ue,this.S)):ue=this.S),null!==this.m||this.O||(Z.H=ue,ue=null),this.P)e:{for(var w=0,A=0;A<this.i.length;A++){var O=this.i[A];if(void 0===(O="__data__"in O.map&&"string"==typeof(O=O.map.__data__)?O.length:void 0))break;if(4096<(w+=O)){w=A;break e}if(4096===w||A===this.i.length-1){w=A+1;break e}}w=1e3}else w=1e3;w=jee(this,Z,w),_r(A=Pu(this.I),"RID",m),_r(A,"CVER",22),this.D&&_r(A,"X-HTTP-Session-Id",this.D),WC(this,A),ue&&(this.O?w="headers="+encodeURIComponent(String(Vee(ue)))+"&"+w:this.m&&UV(A,this.m,ue)),VV(this.h,Z),this.Ua&&_r(A,"TYPE","init"),this.P?(_r(A,"$req",w),_r(A,"SID","null"),Z.T=!0,kV(Z,A,null)):kV(Z,A,w),this.G=2}}else 3==this.G&&(m?qee(this,m):0==this.i.length||Aee(this.h)||qee(this))},n.Fa=function(){if(this.u=null,Yee(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=kC(f(this.ab,this),m)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Hs(10),NS(this),Yee(this))},n.Za=function(){null!=this.C&&(this.C=null,NS(this),$V(this),Hs(19))},n.fb=function(m){m?(this.j.info("Successfully pinged google.com"),Hs(2)):(this.j.info("Failed to ping google.com"),Hs(1))},n.isActive=function(){return!!this.l&&this.l.isActive(this)},(n=tte.prototype).ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){},FS.prototype.g=function(m,w){return new Bo(m,w)},E(Bo,ys),Bo.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Bo.prototype.close=function(){BV(this.g)},Bo.prototype.o=function(m){var w=this.g;if("string"==typeof m){var A={};A.__data__=m,m=A}else this.u&&((A={}).__data__=DV(m),m=A);w.i.push(new zUe(w.Ya++,m)),3==w.G&&kS(w)},Bo.prototype.N=function(){this.g.l=null,delete this.j,BV(this.g),delete this.g,Bo.aa.N.call(this)},E(nte,RV),E(rte,PV),E(Hm,tte),Hm.prototype.ua=function(){$s(this.g,"a")},Hm.prototype.ta=function(m){$s(this.g,new nte(m))},Hm.prototype.sa=function(m){$s(this.g,new rte)},Hm.prototype.ra=function(){$s(this.g,"b")},FS.prototype.createWebChannel=FS.prototype.g,Bo.prototype.send=Bo.prototype.o,Bo.prototype.open=Bo.prototype.m,Bo.prototype.close=Bo.prototype.close,Eu.createWebChannelTransport=function(){return new FS},Eu.getStatEventTarget=function(){return TS()},Eu.Event=_f,Eu.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},bS.NO_ERROR=0,bS.TIMEOUT=8,bS.HTTP_ERROR=6,Eu.ErrorCode=bS,vee.COMPLETE="complete",Eu.EventType=vee,pee.EventType=MC,MC.OPEN="a",MC.CLOSE="b",MC.ERROR="c",MC.MESSAGE="d",ys.prototype.listen=ys.prototype.K,Eu.WebChannel=pee,Eu.FetchXmlHttpFactory=BC,zr.prototype.listenOnce=zr.prototype.L,zr.prototype.getLastError=zr.prototype.Ka,zr.prototype.getLastErrorCode=zr.prototype.Ba,zr.prototype.getStatus=zr.prototype.Z,zr.prototype.getResponseJson=zr.prototype.Oa,zr.prototype.getResponseText=zr.prototype.oa,zr.prototype.send=zr.prototype.ea,zr.prototype.setWithCredentials=zr.prototype.Ha,Eu.XhrIo=zr}).apply(typeof CA<"u"?CA:typeof self<"u"?self:typeof window<"u"?window:{});const MQ="@firebase/firestore";class Bi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Bi.UNAUTHENTICATED=new Bi(null),Bi.GOOGLE_CREDENTIALS=new Bi("google-credentials-uid"),Bi.FIRST_PARTY=new Bi("first-party-uid"),Bi.MOCK_USER=new Bi("mock-user");let tm="10.14.0";const nd=new ro.Vy("@firebase/firestore");function ye(n,...e){if(nd.logLevel<=ro.$b.DEBUG){const t=e.map(eF);nd.debug(`Firestore (${tm}): ${n}`,...t)}}function Zr(n,...e){if(nd.logLevel<=ro.$b.ERROR){const t=e.map(eF);nd.error(`Firestore (${tm}): ${n}`,...t)}}function eF(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Ue(n="Unexpected state"){const e=`FIRESTORE (${tm}) INTERNAL ASSERTION FAILED: `+n;throw Zr(e),new Error(e)}function We(n,e){n||Ue()}const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _e extends L.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class $i{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class NQ{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class YFe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Bi.UNAUTHENTICATED))}shutdown(){}}class QFe{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class JFe{constructor(e){this.t=e,this.currentUser=Bi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;We(void 0===this.o);let i=this.i;const s=u=>this.i!==i?(i=this.i,t(u)):Promise.resolve();let o=new $i;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new $i,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=o;e.enqueueRetryable((0,b.A)(function*(){yield u.promise,yield s(r.currentUser)}))},l=u=>{ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new $i)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(We("string"==typeof r.accessToken),new NQ(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return We(null===e||"string"==typeof e),new Bi(e)}}class XFe{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Bi.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class ZFe{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new XFe(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Bi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class kQ{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class eLe{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){We(void 0===this.o);const r=s=>{null!=s.error&&ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,ye("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(We("string"==typeof t.token),this.R=t.token,new kQ(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Et(n,e){return n<e?-1:n>e?1:0}class qE{constructor(e,t,r){void 0===t?t=0:t>e.length&&Ue(),void 0===r?r=e.length-t:r>e.length-t&&Ue(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===qE.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof qE?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Zt extends qE{construct(e,t,r){return new Zt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new _e(oe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Zt(t)}static emptyPath(){return new Zt([])}}class Ne{constructor(e){this.path=e}static fromPath(e){return new Ne(Zt.fromString(e))}static fromName(e){return new Ne(Zt.fromString(e).popFirst(5))}static empty(){return new Ne(Zt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Zt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Zt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ne(new Zt(e.slice()))}}class sr{constructor(e,t){this.comparator=e,this.root=t||Yi.EMPTY}insert(e,t){return new sr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Yi.BLACK,null,null))}remove(e){return new sr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new bA(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new bA(this.root,e,this.comparator,!1)}getReverseIterator(){return new bA(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new bA(this.root,e,this.comparator,!0)}}class bA{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Yi{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Yi.RED,this.left=i??Yi.EMPTY,this.right=s??Yi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Yi(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Yi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Yi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Yi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Yi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ue();const e=this.left.check();if(e!==this.right.check())throw Ue();return e+(this.isRed()?0:1)}}Yi.EMPTY=null,Yi.RED=!0,Yi.BLACK=!1,Yi.EMPTY=new class{constructor(){this.size=0}get key(){throw Ue()}get value(){throw Ue()}get color(){throw Ue()}get left(){throw Ue()}get right(){throw Ue()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Yi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Bn{constructor(e){this.comparator=e,this.data=new sr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ZQ(this.data.getIterator())}getIteratorFrom(e){return new ZQ(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Bn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Bn(this.comparator);return t.data=e,t}}class ZQ{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class eJ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class $r{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new eJ("Invalid base64 string: "+s):s}}(e);return new $r(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new $r(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Et(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}$r.EMPTY_BYTE_STRING=new $r("");const DLe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function wr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}class Xh{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Xh("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Xh&&e.projectId===this.projectId&&e.database===this.database}}var ui,on,vL,dZ;new sr(Ne.comparator),new sr(Ne.comparator),new sr(Ne.comparator),new Bn(Ne.comparator),new Bn(Et),(on=ui||(ui={}))[on.OK=0]="OK",on[on.CANCELLED=1]="CANCELLED",on[on.UNKNOWN=2]="UNKNOWN",on[on.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",on[on.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",on[on.NOT_FOUND=5]="NOT_FOUND",on[on.ALREADY_EXISTS=6]="ALREADY_EXISTS",on[on.PERMISSION_DENIED=7]="PERMISSION_DENIED",on[on.UNAUTHENTICATED=16]="UNAUTHENTICATED",on[on.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",on[on.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",on[on.ABORTED=10]="ABORTED",on[on.OUT_OF_RANGE=11]="OUT_OF_RANGE",on[on.UNIMPLEMENTED=12]="UNIMPLEMENTED",on[on.INTERNAL=13]="INTERNAL",on[on.UNAVAILABLE=14]="UNAVAILABLE",on[on.DATA_LOSS=15]="DATA_LOSS",new Kh([4294967295,4294967295],0),Error;class lf{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(wr(e.integerValue));else if("doubleValue"in e){const r=wr(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),function YE(n){return 0===n&&1/n==-1/0}(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),"string"==typeof r&&(r=function Cu(n){if(We(!!n),"string"==typeof n){let e=0;const t=DLe.exec(n);if(We(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:wr(n.seconds),nanos:wr(n.nanos)}}(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(function Iu(n){return"string"==typeof n?$r.fromBase64String(n):$r.fromUint8Array(n)}(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?function sJ(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}(e)?this.dt(t,Number.MAX_SAFE_INTEGER):function PA(n){var e,t;return"__vector__"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Ue()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const r=e.fields||{};this.dt(t,55);for(const i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;const s=e.fields||{};this.dt(t,53);const o="value",a=(null===(i=null===(r=s[o].arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.length)||0;this.dt(t,15),t.At(wr(a)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){const r=e.values||[];this.dt(t,50);for(const i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),Ne.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}lf.vt=new lf,new Uint8Array(0);class ms{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ms(e,ms.DEFAULT_COLLECTION_PERCENTILE,ms.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function tS(){return typeof document<"u"?document:null}ms.DEFAULT_COLLECTION_PERCENTILE=10,ms.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ms.DEFAULT=new ms(41943040,ms.DEFAULT_COLLECTION_PERCENTILE,ms.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ms.DISABLED=new ms(-1,0,0);class YF{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&ye("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class fL{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new $i,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new fL(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new _e(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}(dZ=vL||(vL={})).ea="default",dZ.Cache="cache";const PZ=new Map;function Jt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new _e(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=function lS(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":Ue()}(n);throw new _e(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}class OZ{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new _e(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new _e(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function Y2e(n,e,t,r){if(!0===e&&!0===r)throw new _e(oe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=function RZ(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new _e(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new _e(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new _e(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class IC{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new OZ({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new _e(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new _e(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new OZ(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new YFe;switch(r.type){case"firstParty":return new ZFe(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new _e(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){var e=this;return(0,b.A)(function*(){"notTerminated"===e._terminateTask?yield e._terminate():e._terminateTask="notTerminated"})()}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=PZ.get(t);r&&(ye("ComponentProvider","Removing Datastore"),PZ.delete(t),r.terminate())}(this),Promise.resolve()}}class LZ{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new YF(this,"async_queue_retry"),this.Vu=()=>{const r=tS();r&&ye("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const t=tS();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=tS();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new $i;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){var e=this;return(0,b.A)(function*(){if(0!==e.Pu.length){try{yield e.Pu[0](),e.Pu.shift(),e.t_.reset()}catch(t){if(!function id(n){return"IndexedDbTransactionError"===n.name}(t))throw t;ye("AsyncQueue","Operation failed with retryable error: "+t)}e.Pu.length>0&&e.t_.Go(()=>e.pu())}})()}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(r=>{throw this.Eu=r,this.du=!1,Zr("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const i=fL.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&Ue()}verifyOperationInProgress(){}wu(){var e=this;return(0,b.A)(function*(){let t;do{t=e.mu,yield t}while(t!==e.mu)})()}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}class jn extends IC{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new LZ,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){var e=this;return(0,b.A)(function*(){if(e._firestoreClient){const t=e._firestoreClient.terminate();e._queue=new LZ(t),e._firestoreClient=void 0,yield t}})()}}function Z2e(n,e){const t="object"==typeof n?n:(0,Gn.getApp)(),r="string"==typeof n?n:e||"(default)",i=(0,Gn._getProvider)(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=(0,L.yU)("firestore");s&&function Q2e(n,e,t,r={}){var i;const s=(n=Jt(n,IC))._getSettings(),o=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&function sa(n,...e){if(nd.logLevel<=ro.$b.WARN){const t=e.map(eF);nd.warn(`Firestore (${tm}): ${n}`,...t)}}("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if("string"==typeof r.mockUserToken)a=r.mockUserToken,l=Bi.MOCK_USER;else{a=(0,L.Fy)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new _e(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Bi(u)}n._authCredentials=new QFe(new NQ(a,l))}}(i,...s)}return i}new RegExp("[~\\*/\\[\\]]"),function(e,t=!0){tm=Gn.SDK_VERSION,(0,Gn._registerComponent)(new _l.uA("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new jn(new JFe(r.getProvider("auth-internal")),new eLe(r.getProvider("app-check-internal")),function(u,c){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new _e(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xh(u.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,Gn.registerVersion)(MQ,"4.7.3",e),(0,Gn.registerVersion)(MQ,"4.7.3","esm2017")}();class yV{constructor(e){return e}}const vV=new be("angularfire2.firestore-instances");function wUe(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new yV(r)}}const TUe={provide:class CUe{constructor(){return fM("firestore")}},deps:[[new Gr,vV]]},bUe={provide:yV,useFactory:function IUe(n,e){const t=hM("firestore",n,e);return t&&new yV(t)},deps:[[new Gr,vV],Zg]},SUe=zT(Z2e,!0),DUe=[{path:"ai",title:"AI Prompt",component:ORe},{path:"billsplitter",title:"Bill Splitter",component:s1e},{path:"chat",title:"AI Chat",component:H1e},{path:"",redirectTo:"/billsplitter",pathMatch:"full"}],xUe={providers:[uI(jCe),function rme(n,...e){return ma([{provide:ug,multi:!0,useValue:n},[],{provide:ig,useFactory:Bq,deps:[Pa]},{provide:Xw,multi:!0,useFactory:$q},e.map(t=>t.\u0275providers)])}(DUe),function j1e(n,...e){return ma([W1e,G1e,{provide:D1,useFactory:q1e(n),multi:!0,deps:[Yt,mi,dg,...e]}])}(()=>K1e({projectId:"cl-angular-training",appId:"1:807616859621:web:cdbc4a6fe34825a494f30c",databaseURL:"https://cl-angular-training-default-rtdb.europe-west1.firebasedatabase.app",storageBucket:"cl-angular-training.firebasestorage.app",apiKey:"AIzaSyBdgIkui4VLwWui6bdimqyyIcKAx-nt3mE",authDomain:"cl-angular-training.firebaseapp.com",messagingSenderId:"807616859621",measurementId:"G-FDJWF6YG6C"})),function eFe(n,...e){return(0,Gn.registerVersion)("angularfire",vc.full,"auth"),ma([Z1e,X1e,{provide:R1,useFactory:J1e(n),multi:!0,deps:[Yt,mi,dg,fA,[new Gr,sv],...e]}])}(()=>tFe()),function qFe(n,...e){return(0,Gn.registerVersion)("angularfire",vc.full,"app-check"),ma([GFe,WFe,{provide:X1,useFactory:zFe(n),multi:!0,deps:[Yt,mi,Ao,dg,fA,...e]}])}(()=>{const n=new Y1("6LdUf1orAAAAABGZnIRCF3Q11ReAa7XLREFFKpoe");return jFe(void 0,{provider:n,isTokenAutoRefreshEnabled:!0})}),function AUe(n,...e){return(0,Gn.registerVersion)("angularfire",vc.full,"fst"),ma([bUe,TUe,{provide:vV,useFactory:wUe(n),multi:!0,deps:[Yt,mi,dg,fA,[new Gr,iQ],[new Gr,sv],...e]}])}(()=>SUe())]};let RUe=(()=>{class n{toggleDarkMode(){"dark"==document.documentElement.getAttribute("data-bs-theme")?document.documentElement.setAttribute("data-bs-theme","light"):document.documentElement.setAttribute("data-bs-theme","dark")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Ds({type:n,selectors:[["app-header"]],standalone:!0,features:[Aa],decls:19,vars:0,consts:[[1,"navbar","navbar-expand-lg","navbar-light","text-light","justify-content-between",2,"background-color","#6f42c1"],[1,"navbar-nav","mr-auto","text-light"],[1,"nav-item"],["routerLink","/billsplitter",1,"nav-link","text-light"],["routerLink","/ai",1,"nav-link","text-light"],["routerLink","/chat",1,"nav-link","text-light"],["role","group","aria-label","Basic radio toggle button group",1,"btn-group","justify-content-b"],["type","radio","name","btnradio","id","btnradio1","autocomplete","off","checked","",1,"btn-check",3,"click"],["for","btnradio1",1,"btn","btn-outline-light","text-light"],[1,"bi-sun",2,"color","black"],["type","radio","name","btnradio","id","btnradio2","autocomplete","off",1,"btn-check",3,"click"],["for","btnradio2",1,"btn","btn-outline-dark","text-light"],[1,"bi-moon",2,"color","white"]],template:function(r,i){1&r&&(Ye(0,"nav",0)(1,"div")(2,"ul",1)(3,"li",2)(4,"a",3),hn(5,"Bill Spillter"),je()(),Ye(6,"li",2)(7,"a",4),hn(8,"AI Prompt"),je()(),Ye(9,"li",2)(10,"a",5),hn(11,"AI Chat"),je()()()(),Ye(12,"div",6)(13,"input",7),yn("click",function(){return i.toggleDarkMode()}),je(),Ye(14,"label",8),yi(15,"i",9),je(),Ye(16,"input",10),yn("click",function(){return i.toggleDarkMode()}),je(),Ye(17,"label",11),yi(18,"i",12),je()()())},dependencies:[$T]})}}return n})();(function afe(n,e){return Ece({rootComponent:n,...bG(e)})})((()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Ds({type:n,selectors:[["app-root"]],standalone:!0,features:[Ln([]),Aa],decls:2,vars:0,template:function(r,i){1&r&&yi(0,"app-header")(1,"router-outlet")},dependencies:[dme,ZP,RUe]})}}return n})(),xUe).catch(n=>console.error(n))},574:($o,ni,st)=>{st.d(ni,{A:()=>Nr});var b=st(401),De=st(779),$=st(979),$e=st(398);class Qn{constructor(Ct,It){this._delegate=Ct,this.firebase=It,(0,$._addComponent)(Ct,new De.uA("app-compat",()=>this,"PUBLIC")),this.container=Ct.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ct){this._delegate.automaticDataCollectionEnabled=Ct}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ct=>{this._delegate.checkDestroyed(),Ct()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,$.deleteApp)(this._delegate)))}_getService(Ct,It=$._DEFAULT_ENTRY_NAME){var kr;this._delegate.checkDestroyed();const ar=this._delegate.container.getProvider(Ct);return!ar.isInitialized()&&"EXPLICIT"===(null===(kr=ar.getComponent())||void 0===kr?void 0:kr.instantiationMode)&&ar.initialize(),ar.getImmediate({identifier:It})}_removeServiceInstance(Ct,It=$._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ct).clearInstance(It)}_addComponent(Ct){(0,$._addComponent)(this._delegate,Ct)}_addOrOverwriteComponent(Ct){(0,$._addOrOverwriteComponent)(this._delegate,Ct)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ke=new b.FA("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),fe=function mn(){const zt=function bn(zt){const Ct={},It={__esModule:!0,initializeApp:function kt(pt,lr={}){const pe=$.initializeApp(pt,lr);if((0,b.gR)(Ct,pe.name))return Ct[pe.name];const Jn=new zt(pe,It);return Ct[pe.name]=Jn,Jn},app:ar,registerVersion:$.registerVersion,setLogLevel:$.setLogLevel,onLog:$.onLog,apps:null,SDK_VERSION:$.SDK_VERSION,INTERNAL:{registerComponent:function di(pt){const lr=pt.name,pe=lr.replace("-compat","");if($._registerComponent(pt)&&"PUBLIC"===pt.type){const Jn=($n=ar())=>{if("function"!=typeof $n[pe])throw Ke.create("invalid-app-argument",{appName:lr});return $n[pe]()};void 0!==pt.serviceProps&&(0,b.zw)(Jn,pt.serviceProps),It[pe]=Jn,zt.prototype[pe]=function(...$n){return this._getService.bind(this,lr).apply(this,pt.multipleInstances?$n:[])}}return"PUBLIC"===pt.type?It[pe]:null},removeApp:function kr(pt){delete Ct[pt]},useAsService:function rn(pt,lr){return"serverAuth"===lr?null:lr},modularAPIs:$}};function ar(pt){if(!(0,b.gR)(Ct,pt=pt||$._DEFAULT_ENTRY_NAME))throw Ke.create("no-app",{appName:pt});return Ct[pt]}return It.default=It,Object.defineProperty(It,"apps",{get:function dn(){return Object.keys(Ct).map(pt=>Ct[pt])}}),ar.App=zt,It}(Qn);return zt.INTERNAL=Object.assign(Object.assign({},zt.INTERNAL),{createFirebaseNamespace:mn,extendNamespace:function Ct(It){(0,b.zw)(zt,It)},createSubscribe:b.tD,ErrorFactory:b.FA,deepExtend:b.zw}),zt}(),ve=new $e.Vy("@firebase/app-compat");try{const zt=(0,b.mS)();if(void 0!==zt.firebase){ve.warn("\n      Warning: Firebase is already defined in the global scope. Please make sure\n      Firebase library is only loaded once.\n    ");const Ct=zt.firebase.SDK_VERSION;Ct&&Ct.indexOf("LITE")>=0&&ve.warn("\n        Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n        ")}}catch{}const Nr=fe;!function Gt(zt){(0,$.registerVersion)("@firebase/app-compat","0.2.43",zt)}()},979:($o,ni,st)=>{st.r(ni),st.d(ni,{FirebaseError:()=>$e.g,SDK_VERSION:()=>Ga,_DEFAULT_ENTRY_NAME:()=>zi,_addComponent:()=>la,_addOrOverwriteComponent:()=>mo,_apps:()=>Wr,_clearComponents:()=>ua,_components:()=>Ar,_getProvider:()=>Is,_isFirebaseApp:()=>sn,_isFirebaseServerApp:()=>ns,_registerComponent:()=>ts,_removeServiceInstance:()=>Ws,_serverApps:()=>yr,deleteApp:()=>Wo,getApp:()=>da,getApps:()=>Nu,initializeApp:()=>_o,initializeServerApp:()=>an,onLog:()=>D,registerVersion:()=>M,setLogLevel:()=>R});var b=st(467),De=st(779),$=st(398),$e=st(401);const Qn=(se,X)=>X.some(he=>se instanceof he);let gn,Ke;const fe=new WeakMap,ve=new WeakMap,Ge=new WeakMap,bt=new WeakMap,Gt=new WeakMap;let Ct={get(se,X,he){if(se instanceof IDBTransaction){if("done"===X)return ve.get(se);if("objectStoreNames"===X)return se.objectStoreNames||Ge.get(se);if("store"===X)return he.objectStoreNames[1]?void 0:he.objectStore(he.objectStoreNames[0])}return kt(se[X])},set:(se,X,he)=>(se[X]=he,!0),has:(se,X)=>se instanceof IDBTransaction&&("done"===X||"store"===X)||X in se};function ar(se){return"function"==typeof se?function kr(se){return se!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function mn(){return Ke||(Ke=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(se)?function(...X){return se.apply(dn(this),X),kt(fe.get(this))}:function(...X){return kt(se.apply(dn(this),X))}:function(X,...he){const ke=se.call(dn(this),X,...he);return Ge.set(ke,X.sort?X.sort():[X]),kt(ke)}}(se):(se instanceof IDBTransaction&&function zt(se){if(ve.has(se))return;const X=new Promise((he,ke)=>{const Me=()=>{se.removeEventListener("complete",gt),se.removeEventListener("error",Ft),se.removeEventListener("abort",Ft)},gt=()=>{he(),Me()},Ft=()=>{ke(se.error||new DOMException("AbortError","AbortError")),Me()};se.addEventListener("complete",gt),se.addEventListener("error",Ft),se.addEventListener("abort",Ft)});ve.set(se,X)}(se),Qn(se,function bn(){return gn||(gn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(se,Ct):se)}function kt(se){if(se instanceof IDBRequest)return function Nr(se){const X=new Promise((he,ke)=>{const Me=()=>{se.removeEventListener("success",gt),se.removeEventListener("error",Ft)},gt=()=>{he(kt(se.result)),Me()},Ft=()=>{ke(se.error),Me()};se.addEventListener("success",gt),se.addEventListener("error",Ft)});return X.then(he=>{he instanceof IDBCursor&&fe.set(he,se)}).catch(()=>{}),Gt.set(X,se),X}(se);if(bt.has(se))return bt.get(se);const X=ar(se);return X!==se&&(bt.set(se,X),Gt.set(X,se)),X}const dn=se=>Gt.get(se),pt=["get","getKey","getAll","getAllKeys","count"],lr=["put","add","delete","clear"],pe=new Map;function Jn(se,X){if(!(se instanceof IDBDatabase)||X in se||"string"!=typeof X)return;if(pe.get(X))return pe.get(X);const he=X.replace(/FromIndex$/,""),ke=X!==he,Me=lr.includes(he);if(!(he in(ke?IDBIndex:IDBObjectStore).prototype)||!Me&&!pt.includes(he))return;const gt=function(){var Ft=(0,b.A)(function*(it,...Xn){const nt=this.transaction(it,Me?"readwrite":"readonly");let Go=nt.store;return ke&&(Go=Go.index(Xn.shift())),(yield Promise.all([Go[he](...Xn),Me&&nt.done]))[0]});return function(Xn){return Ft.apply(this,arguments)}}();return pe.set(X,gt),gt}!function It(se){Ct=se(Ct)}(se=>({...se,get:(X,he,ke)=>Jn(X,he)||se.get(X,he,ke),has:(X,he)=>!!Jn(X,he)||se.has(X,he)}));class $n{constructor(X){this.container=X}getPlatformInfoString(){return this.container.getProviders().map(he=>{if(function Si(se){const X=se.getComponent();return"VERSION"===X?.type}(he)){const ke=he.getImmediate();return`${ke.library}/${ke.version}`}return null}).filter(he=>he).join(" ")}}const es="@firebase/app",po="0.10.13",Or=new $.Vy("@firebase/app"),zi="[DEFAULT]",Wa={[es]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/data-connect":"fire-data-connect","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},Wr=new Map,yr=new Map,Ar=new Map;function la(se,X){try{se.container.addComponent(X)}catch(he){Or.debug(`Component ${X.name} failed to register with FirebaseApp ${se.name}`,he)}}function mo(se,X){se.container.addOrOverwriteComponent(X)}function ts(se){const X=se.name;if(Ar.has(X))return Or.debug(`There were multiple attempts to register component ${X}.`),!1;Ar.set(X,se);for(const he of Wr.values())la(he,se);for(const he of yr.values())la(he,se);return!0}function Is(se,X){const he=se.container.getProvider("heartbeat").getImmediate({optional:!0});return he&&he.triggerHeartbeat(),se.container.getProvider(X)}function Ws(se,X,he=zi){Is(se,X).clearInstance(he)}function sn(se){return void 0!==se.options}function ns(se){return void 0!==se.settings}function ua(){Ar.clear()}const Cn=new $e.FA("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class ii{constructor(X,he,ke){this._isDeleted=!1,this._options=Object.assign({},X),this._config=Object.assign({},he),this._name=he.name,this._automaticDataCollectionEnabled=he.automaticDataCollectionEnabled,this._container=ke,this.container.addComponent(new De.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(X){this.checkDestroyed(),this._automaticDataCollectionEnabled=X}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(X){this._isDeleted=X}checkDestroyed(){if(this.isDeleted)throw Cn.create("app-deleted",{appName:this._name})}}class si extends ii{constructor(X,he,ke,Me){const gt=void 0!==he.automaticDataCollectionEnabled&&he.automaticDataCollectionEnabled,Ft={name:ke,automaticDataCollectionEnabled:gt};super(void 0!==X.apiKey?X:X.options,Ft,Me),this._serverConfig=Object.assign({automaticDataCollectionEnabled:gt},he),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,he.releaseOnDeref=void 0,M(es,po,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(X){this.isDeleted||(this._refCount++,void 0!==X&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(X,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Wo(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Cn.create("server-app-deleted")}}const Ga="10.14.1";function _o(se,X={}){let he=se;"object"!=typeof X&&(X={name:X});const ke=Object.assign({name:zi,automaticDataCollectionEnabled:!1},X),Me=ke.name;if("string"!=typeof Me||!Me)throw Cn.create("bad-app-name",{appName:String(Me)});if(he||(he=(0,$e.T9)()),!he)throw Cn.create("no-options");const gt=Wr.get(Me);if(gt){if((0,$e.bD)(he,gt.options)&&(0,$e.bD)(ke,gt.config))return gt;throw Cn.create("duplicate-app",{appName:Me})}const Ft=new De.h1(Me);for(const Xn of Ar.values())Ft.addComponent(Xn);const it=new ii(he,ke,Ft);return Wr.set(Me,it),it}function an(se,X){if((0,$e.Bd)()&&!(0,$e.p7)())throw Cn.create("invalid-server-app-environment");let he;void 0===X.automaticDataCollectionEnabled&&(X.automaticDataCollectionEnabled=!1),he=sn(se)?se.options:se;const ke=Object.assign(Object.assign({},X),he);if(void 0!==ke.releaseOnDeref&&delete ke.releaseOnDeref,void 0!==X.releaseOnDeref&&typeof FinalizationRegistry>"u")throw Cn.create("finalization-registry-not-supported",{});const gt=""+(nt=JSON.stringify(ke),[...nt].reduce((Go,Ou)=>Math.imul(31,Go)+Ou.charCodeAt(0)|0,0)),Ft=yr.get(gt);var nt;if(Ft)return Ft.incRefCount(X.releaseOnDeref),Ft;const it=new De.h1(gt);for(const nt of Ar.values())it.addComponent(nt);const Xn=new si(he,X,gt,it);return yr.set(gt,Xn),Xn}function da(se=zi){const X=Wr.get(se);if(!X&&se===zi&&(0,$e.T9)())return _o();if(!X)throw Cn.create("no-app",{appName:se});return X}function Nu(){return Array.from(Wr.values())}function Wo(se){return ha.apply(this,arguments)}function ha(){return(ha=(0,b.A)(function*(se){let X=!1;const he=se.name;Wr.has(he)?(X=!0,Wr.delete(he)):yr.has(he)&&se.decRefCount()<=0&&(yr.delete(he),X=!0),X&&(yield Promise.all(se.container.getProviders().map(ke=>ke.delete())),se.isDeleted=!0)})).apply(this,arguments)}function M(se,X,he){var ke;let Me=null!==(ke=Wa[se])&&void 0!==ke?ke:se;he&&(Me+=`-${he}`);const gt=Me.match(/\s|\//),Ft=X.match(/\s|\//);if(gt||Ft){const it=[`Unable to register library "${Me}" with version "${X}":`];return gt&&it.push(`library name "${Me}" contains illegal characters (whitespace or "/")`),gt&&Ft&&it.push("and"),Ft&&it.push(`version name "${X}" contains illegal characters (whitespace or "/")`),void Or.warn(it.join(" "))}ts(new De.uA(`${Me}-version`,()=>({library:Me,version:X}),"VERSION"))}function D(se,X){if(null!==se&&"function"!=typeof se)throw Cn.create("invalid-log-argument");(0,$.Ey)(se,X)}function R(se){(0,$.He)(se)}const j="firebase-heartbeat-database",G=1,le="firebase-heartbeat-store";let Oe=null;function we(){return Oe||(Oe=function di(se,X,{blocked:he,upgrade:ke,blocking:Me,terminated:gt}={}){const Ft=indexedDB.open(se,X),it=kt(Ft);return ke&&Ft.addEventListener("upgradeneeded",Xn=>{ke(kt(Ft.result),Xn.oldVersion,Xn.newVersion,kt(Ft.transaction),Xn)}),he&&Ft.addEventListener("blocked",Xn=>he(Xn.oldVersion,Xn.newVersion,Xn)),it.then(Xn=>{gt&&Xn.addEventListener("close",()=>gt()),Me&&Xn.addEventListener("versionchange",nt=>Me(nt.oldVersion,nt.newVersion,nt))}).catch(()=>{}),it}(j,G,{upgrade:(se,X)=>{if(0===X)try{se.createObjectStore(le)}catch(he){console.warn(he)}}}).catch(se=>{throw Cn.create("idb-open",{originalErrorMessage:se.message})})),Oe}function Vt(){return(Vt=(0,b.A)(function*(se){try{const he=(yield we()).transaction(le),ke=yield he.objectStore(le).get(Sn(se));return yield he.done,ke}catch(X){if(X instanceof $e.g)Or.warn(X.message);else{const he=Cn.create("idb-get",{originalErrorMessage:X?.message});Or.warn(he.message)}}})).apply(this,arguments)}function ce(se,X){return Le.apply(this,arguments)}function Le(){return(Le=(0,b.A)(function*(se,X){try{const ke=(yield we()).transaction(le,"readwrite");yield ke.objectStore(le).put(X,Sn(se)),yield ke.done}catch(he){if(he instanceof $e.g)Or.warn(he.message);else{const ke=Cn.create("idb-set",{originalErrorMessage:he?.message});Or.warn(ke.message)}}})).apply(this,arguments)}function Sn(se){return`${se.name}!${se.options.appId}`}class Cf{constructor(X){this.container=X,this._heartbeatsCache=null;const he=this.container.getProvider("app").getImmediate();this._storage=new yo(he),this._heartbeatsCachePromise=this._storage.read().then(ke=>(this._heartbeatsCache=ke,ke))}triggerHeartbeat(){var X=this;return(0,b.A)(function*(){var he,ke;try{const gt=X.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ft=ku();return null==(null===(he=X._heartbeatsCache)||void 0===he?void 0:he.heartbeats)&&(X._heartbeatsCache=yield X._heartbeatsCachePromise,null==(null===(ke=X._heartbeatsCache)||void 0===ke?void 0:ke.heartbeats))||X._heartbeatsCache.lastSentHeartbeatDate===Ft||X._heartbeatsCache.heartbeats.some(it=>it.date===Ft)?void 0:(X._heartbeatsCache.heartbeats.push({date:Ft,agent:gt}),X._heartbeatsCache.heartbeats=X._heartbeatsCache.heartbeats.filter(it=>{const Xn=new Date(it.date).valueOf();return Date.now()-Xn<=2592e6}),X._storage.overwrite(X._heartbeatsCache))}catch(Me){Or.warn(Me)}})()}getHeartbeatsHeader(){var X=this;return(0,b.A)(function*(){var he;try{if(null===X._heartbeatsCache&&(yield X._heartbeatsCachePromise),null==(null===(he=X._heartbeatsCache)||void 0===he?void 0:he.heartbeats)||0===X._heartbeatsCache.heartbeats.length)return"";const ke=ku(),{heartbeatsToSend:Me,unsentEntries:gt}=function Gs(se,X=1024){const he=[];let ke=se.slice();for(const Me of se){const gt=he.find(Ft=>Ft.agent===Me.agent);if(gt){if(gt.dates.push(Me.date),fa(he)>X){gt.dates.pop();break}}else if(he.push({agent:Me.agent,dates:[Me.date]}),fa(he)>X){he.pop();break}ke=ke.slice(1)}return{heartbeatsToSend:he,unsentEntries:ke}}(X._heartbeatsCache.heartbeats),Ft=(0,$e.Uj)(JSON.stringify({version:2,heartbeats:Me}));return X._heartbeatsCache.lastSentHeartbeatDate=ke,gt.length>0?(X._heartbeatsCache.heartbeats=gt,yield X._storage.overwrite(X._heartbeatsCache)):(X._heartbeatsCache.heartbeats=[],X._storage.overwrite(X._heartbeatsCache)),Ft}catch(ke){return Or.warn(ke),""}})()}}function ku(){return(new Date).toISOString().substring(0,10)}class yo{constructor(X){this.app=X,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,b.A)(function*(){return!!(0,$e.zW)()&&(0,$e.eX)().then(()=>!0).catch(()=>!1)})()}read(){var X=this;return(0,b.A)(function*(){if(yield X._canUseIndexedDBPromise){const ke=yield function qt(se){return Vt.apply(this,arguments)}(X.app);return ke?.heartbeats?ke:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(X){var he=this;return(0,b.A)(function*(){var ke;if(yield he._canUseIndexedDBPromise){const gt=yield he.read();return ce(he.app,{lastSentHeartbeatDate:null!==(ke=X.lastSentHeartbeatDate)&&void 0!==ke?ke:gt.lastSentHeartbeatDate,heartbeats:X.heartbeats})}})()}add(X){var he=this;return(0,b.A)(function*(){var ke;if(yield he._canUseIndexedDBPromise){const gt=yield he.read();return ce(he.app,{lastSentHeartbeatDate:null!==(ke=X.lastSentHeartbeatDate)&&void 0!==ke?ke:gt.lastSentHeartbeatDate,heartbeats:[...gt.heartbeats,...X.heartbeats]})}})()}}function fa(se){return(0,$e.Uj)(JSON.stringify({version:2,heartbeats:se})).length}!function qa(se){ts(new De.uA("platform-logger",X=>new $n(X),"PRIVATE")),ts(new De.uA("heartbeat",X=>new Cf(X),"PRIVATE")),M(es,po,se),M(es,po,"esm2017"),M("fire-js","")}("")},779:($o,ni,st)=>{st.d(ni,{Kq:()=>Qn,h1:()=>bn,uA:()=>$});var b=st(467),De=st(401);class ${constructor(fe,ve,Ge){this.name=fe,this.instanceFactory=ve,this.type=Ge,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(fe){return this.instantiationMode=fe,this}setMultipleInstances(fe){return this.multipleInstances=fe,this}setServiceProps(fe){return this.serviceProps=fe,this}setInstanceCreatedCallback(fe){return this.onInstanceCreated=fe,this}}const $e="[DEFAULT]";class Qn{constructor(fe,ve){this.name=fe,this.container=ve,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(fe){const ve=this.normalizeInstanceIdentifier(fe);if(!this.instancesDeferred.has(ve)){const Ge=new De.cY;if(this.instancesDeferred.set(ve,Ge),this.isInitialized(ve)||this.shouldAutoInitialize())try{const bt=this.getOrInitializeService({instanceIdentifier:ve});bt&&Ge.resolve(bt)}catch{}}return this.instancesDeferred.get(ve).promise}getImmediate(fe){var ve;const Ge=this.normalizeInstanceIdentifier(fe?.identifier),bt=null!==(ve=fe?.optional)&&void 0!==ve&&ve;if(!this.isInitialized(Ge)&&!this.shouldAutoInitialize()){if(bt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Ge})}catch(Gt){if(bt)return null;throw Gt}}getComponent(){return this.component}setComponent(fe){if(fe.name!==this.name)throw Error(`Mismatching Component ${fe.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=fe,this.shouldAutoInitialize()){if(function Ke(mn){return"EAGER"===mn.instantiationMode}(fe))try{this.getOrInitializeService({instanceIdentifier:$e})}catch{}for(const[ve,Ge]of this.instancesDeferred.entries()){const bt=this.normalizeInstanceIdentifier(ve);try{const Gt=this.getOrInitializeService({instanceIdentifier:bt});Ge.resolve(Gt)}catch{}}}}clearInstance(fe=$e){this.instancesDeferred.delete(fe),this.instancesOptions.delete(fe),this.instances.delete(fe)}delete(){var fe=this;return(0,b.A)(function*(){const ve=Array.from(fe.instances.values());yield Promise.all([...ve.filter(Ge=>"INTERNAL"in Ge).map(Ge=>Ge.INTERNAL.delete()),...ve.filter(Ge=>"_delete"in Ge).map(Ge=>Ge._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(fe=$e){return this.instances.has(fe)}getOptions(fe=$e){return this.instancesOptions.get(fe)||{}}initialize(fe={}){const{options:ve={}}=fe,Ge=this.normalizeInstanceIdentifier(fe.instanceIdentifier);if(this.isInitialized(Ge))throw Error(`${this.name}(${Ge}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const bt=this.getOrInitializeService({instanceIdentifier:Ge,options:ve});for(const[Gt,Nr]of this.instancesDeferred.entries())Ge===this.normalizeInstanceIdentifier(Gt)&&Nr.resolve(bt);return bt}onInit(fe,ve){var Ge;const bt=this.normalizeInstanceIdentifier(ve),Gt=null!==(Ge=this.onInitCallbacks.get(bt))&&void 0!==Ge?Ge:new Set;Gt.add(fe),this.onInitCallbacks.set(bt,Gt);const Nr=this.instances.get(bt);return Nr&&fe(Nr,bt),()=>{Gt.delete(fe)}}invokeOnInitCallbacks(fe,ve){const Ge=this.onInitCallbacks.get(ve);if(Ge)for(const bt of Ge)try{bt(fe,ve)}catch{}}getOrInitializeService({instanceIdentifier:fe,options:ve={}}){let Ge=this.instances.get(fe);if(!Ge&&this.component&&(Ge=this.component.instanceFactory(this.container,{instanceIdentifier:(mn=fe,mn===$e?void 0:mn),options:ve}),this.instances.set(fe,Ge),this.instancesOptions.set(fe,ve),this.invokeOnInitCallbacks(Ge,fe),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,fe,Ge)}catch{}var mn;return Ge||null}normalizeInstanceIdentifier(fe=$e){return this.component?this.component.multipleInstances?fe:$e:fe}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class bn{constructor(fe){this.name=fe,this.providers=new Map}addComponent(fe){const ve=this.getProvider(fe.name);if(ve.isComponentSet())throw new Error(`Component ${fe.name} has already been registered with ${this.name}`);ve.setComponent(fe)}addOrOverwriteComponent(fe){this.getProvider(fe.name).isComponentSet()&&this.providers.delete(fe.name),this.addComponent(fe)}getProvider(fe){if(this.providers.has(fe))return this.providers.get(fe);const ve=new Qn(fe,this);return this.providers.set(fe,ve),ve}getProviders(){return Array.from(this.providers.values())}}},398:($o,ni,st)=>{st.d(ni,{$b:()=>De,Ey:()=>mn,He:()=>bn,Vy:()=>Ke});const b=[];var De=function(fe){return fe[fe.DEBUG=0]="DEBUG",fe[fe.VERBOSE=1]="VERBOSE",fe[fe.INFO=2]="INFO",fe[fe.WARN=3]="WARN",fe[fe.ERROR=4]="ERROR",fe[fe.SILENT=5]="SILENT",fe}(De||{});const $={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},$e=De.INFO,Qn={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},gn=(fe,ve,...Ge)=>{if(ve<fe.logLevel)return;const bt=(new Date).toISOString(),Gt=Qn[ve];if(!Gt)throw new Error(`Attempted to log a message with an invalid logType (value: ${ve})`);console[Gt](`[${bt}]  ${fe.name}:`,...Ge)};class Ke{constructor(ve){this.name=ve,this._logLevel=$e,this._logHandler=gn,this._userLogHandler=null,b.push(this)}get logLevel(){return this._logLevel}set logLevel(ve){if(!(ve in De))throw new TypeError(`Invalid value "${ve}" assigned to \`logLevel\``);this._logLevel=ve}setLogLevel(ve){this._logLevel="string"==typeof ve?$[ve]:ve}get logHandler(){return this._logHandler}set logHandler(ve){if("function"!=typeof ve)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ve}get userLogHandler(){return this._userLogHandler}set userLogHandler(ve){this._userLogHandler=ve}debug(...ve){this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...ve),this._logHandler(this,De.DEBUG,...ve)}log(...ve){this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...ve),this._logHandler(this,De.VERBOSE,...ve)}info(...ve){this._userLogHandler&&this._userLogHandler(this,De.INFO,...ve),this._logHandler(this,De.INFO,...ve)}warn(...ve){this._userLogHandler&&this._userLogHandler(this,De.WARN,...ve),this._logHandler(this,De.WARN,...ve)}error(...ve){this._userLogHandler&&this._userLogHandler(this,De.ERROR,...ve),this._logHandler(this,De.ERROR,...ve)}}function bn(fe){b.forEach(ve=>{ve.setLogLevel(fe)})}function mn(fe,ve){for(const Ge of b){let bt=null;ve&&ve.level&&(bt=$[ve.level]),Ge.userLogHandler=null===fe?null:(Gt,Nr,...zt)=>{const Ct=zt.map(It=>{if(null==It)return null;if("string"==typeof It)return It;if("number"==typeof It||"boolean"==typeof It)return It.toString();if(It instanceof Error)return It.message;try{return JSON.stringify(It)}catch{return null}}).filter(It=>It).join(" ");Nr>=(bt??Gt.logLevel)&&fe({level:De[Nr].toLowerCase(),message:Ct,args:zt,type:Gt.name})}}}},46:($o,ni,st)=>{var b=st(467),De=st(574),$=st(443),$e=st(401),Ke=(st(979),st(398),st(779));function bn(){return window}function ve(){return ve=(0,b.A)(function*(M,D,R){var j;const{BuildInfo:G}=bn();(0,$.au)(D.sessionId,"AuthEvent did not contain a session ID");const le=yield function It(M){return kr.apply(this,arguments)}(D.sessionId),Oe={};return(0,$.av)()?Oe.ibi=G.packageName:(0,$.aw)()?Oe.apn=G.packageName:(0,$.ax)(M,"operation-not-supported-in-this-environment"),G.displayName&&(Oe.appDisplayName=G.displayName),Oe.sessionId=le,(0,$.ay)(M,R,D.type,void 0,null!==(j=D.eventId)&&void 0!==j?j:void 0,Oe)}),ve.apply(this,arguments)}function bt(){return(bt=(0,b.A)(function*(M){const{BuildInfo:D}=bn(),R={};(0,$.av)()?R.iosBundleId=D.packageName:(0,$.aw)()?R.androidPackageName=D.packageName:(0,$.ax)(M,"operation-not-supported-in-this-environment"),yield(0,$.az)(M,R)})).apply(this,arguments)}function zt(){return(zt=(0,b.A)(function*(M,D,R){const{cordova:j}=bn();let G=()=>{};try{yield new Promise((le,Oe)=>{let we=null;function qt(){var Le;le();const Sn=null===(Le=j.plugins.browsertab)||void 0===Le?void 0:Le.close;"function"==typeof Sn&&Sn(),"function"==typeof R?.close&&R.close()}function Vt(){we||(we=window.setTimeout(()=>{Oe((0,$.aB)(M,"redirect-cancelled-by-user"))},2e3))}function ce(){"visible"===document?.visibilityState&&Vt()}D.addPassiveListener(qt),document.addEventListener("resume",Vt,!1),(0,$.aw)()&&document.addEventListener("visibilitychange",ce,!1),G=()=>{D.removePassiveListener(qt),document.removeEventListener("resume",Vt,!1),document.removeEventListener("visibilitychange",ce,!1),we&&window.clearTimeout(we)}})}finally{G()}})).apply(this,arguments)}function kr(){return(kr=(0,b.A)(function*(M){const D=function ar(M){if((0,$.au)(/[0-9a-zA-Z]+/.test(M),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(M);const D=new ArrayBuffer(M.length),R=new Uint8Array(D);for(let j=0;j<M.length;j++)R[j]=M.charCodeAt(j);return R}(M),R=yield crypto.subtle.digest("SHA-256",D);return Array.from(new Uint8Array(R)).map(G=>G.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class dn extends $.aD{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(D=>{this.resolveInitialized=D})}addPassiveListener(D){this.passiveListeners.add(D)}removePassiveListener(D){this.passiveListeners.delete(D)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(D){return this.resolveInitialized(),this.passiveListeners.forEach(R=>R(D)),super.onEvent(D)}initialized(){var D=this;return(0,b.A)(function*(){yield D.initPromise})()}}function pt(M){return lr.apply(this,arguments)}function lr(){return(lr=(0,b.A)(function*(M){const D=yield $n()._get(Si(M));return D&&(yield $n()._remove(Si(M))),D})).apply(this,arguments)}function Jn(){const M=[];for(let R=0;R<20;R++){const j=Math.floor(62*Math.random());M.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(j))}return M.join("")}function $n(){return(0,$.aE)($.b)}function Si(M){return(0,$.aF)("authEvent",M.config.apiKey,M.name)}function Or(M){if(!M?.includes("?"))return{};const[D,...R]=M.split("?");return(0,$e.I9)(R.join("?"))}const Cs=class zs{constructor(){this._redirectPersistence=$.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=$.aG,this._overrideRedirectResult=$.aH}_initialize(D){var R=this;return(0,b.A)(function*(){const j=D._key();let G=R.eventManagers.get(j);return G||(G=new dn(D),R.eventManagers.set(j,G),R.attachCallbackListeners(D,G)),G})()}_openPopup(D){(0,$.ax)(D,"operation-not-supported-in-this-environment")}_openRedirect(D,R,j,G){var le=this;return(0,b.A)(function*(){!function Ct(M){var D,R,j,G,le,Oe,we,qt,Vt,ce;const Le=bn();(0,$.aC)("function"==typeof(null===(D=Le?.universalLinks)||void 0===D?void 0:D.subscribe),M,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,$.aC)(typeof(null===(R=Le?.BuildInfo)||void 0===R?void 0:R.packageName)<"u",M,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,$.aC)("function"==typeof(null===(le=null===(G=null===(j=Le?.cordova)||void 0===j?void 0:j.plugins)||void 0===G?void 0:G.browsertab)||void 0===le?void 0:le.openUrl),M,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,$.aC)("function"==typeof(null===(qt=null===(we=null===(Oe=Le?.cordova)||void 0===Oe?void 0:Oe.plugins)||void 0===we?void 0:we.browsertab)||void 0===qt?void 0:qt.isAvailable),M,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,$.aC)("function"==typeof(null===(ce=null===(Vt=Le?.cordova)||void 0===Vt?void 0:Vt.InAppBrowser)||void 0===ce?void 0:ce.open),M,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(D);const Oe=yield le._initialize(D);yield Oe.initialized(),Oe.resetRedirect(),(0,$.aI)(),yield le._originValidation(D);const we=function di(M,D,R=null){return{type:D,eventId:R,urlResponse:null,sessionId:Jn(),postBody:null,tenantId:M.tenantId,error:(0,$.aB)(M,"no-auth-event")}}(D,j,G);yield function rn(M,D){return $n()._set(Si(M),D)}(D,we);const qt=yield function fe(M,D,R){return ve.apply(this,arguments)}(D,we,R),Vt=yield function Gt(M){const{cordova:D}=bn();return new Promise(R=>{D.plugins.browsertab.isAvailable(j=>{let G=null;j?D.plugins.browsertab.openUrl(M):G=D.InAppBrowser.open(M,(0,$.aA)()?"_blank":"_system","location=yes"),R(G)})})}(qt);return function Nr(M,D,R){return zt.apply(this,arguments)}(D,Oe,Vt)})()}_isIframeWebStorageSupported(D,R){throw new Error("Method not implemented.")}_originValidation(D){const R=D._key();return this.originValidationPromises[R]||(this.originValidationPromises[R]=function Ge(M){return bt.apply(this,arguments)}(D)),this.originValidationPromises[R]}attachCallbackListeners(D,R){const{universalLinks:j,handleOpenURL:G,BuildInfo:le}=bn(),Oe=setTimeout((0,b.A)(function*(){yield pt(D),R.onEvent(oa())}),500),we=function(){var ce=(0,b.A)(function*(Le){clearTimeout(Oe);const Sn=yield pt(D);let ws=null;Sn&&Le?.url&&(ws=function pe(M,D){var R,j;const G=function po(M){const D=Or(M),R=D.link?decodeURIComponent(D.link):void 0,j=Or(R).link,G=D.deep_link_id?decodeURIComponent(D.deep_link_id):void 0;return Or(G).link||G||j||R||M}(D);if(G.includes("/__/auth/callback")){const le=Or(G),Oe=le.firebaseError?function es(M){try{return JSON.parse(M)}catch{return null}}(decodeURIComponent(le.firebaseError)):null,we=null===(j=null===(R=Oe?.code)||void 0===R?void 0:R.split("auth/"))||void 0===j?void 0:j[1],qt=we?(0,$.aB)(we):null;return qt?{type:M.type,eventId:M.eventId,tenantId:M.tenantId,error:qt,urlResponse:null,sessionId:null,postBody:null}:{type:M.type,eventId:M.eventId,tenantId:M.tenantId,sessionId:M.sessionId,urlResponse:G,postBody:null}}return null}(Sn,Le.url)),R.onEvent(ws||oa())});return function(Sn){return ce.apply(this,arguments)}}();typeof j<"u"&&"function"==typeof j.subscribe&&j.subscribe(null,we);const qt=G,Vt=`${le.packageName.toLowerCase()}://`;bn().handleOpenURL=function(){var ce=(0,b.A)(function*(Le){if(Le.toLowerCase().startsWith(Vt)&&we({url:Le}),"function"==typeof qt)try{qt(Le)}catch(Sn){console.error(Sn)}});return function(Le){return ce.apply(this,arguments)}}()}};function oa(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,$.aB)("no-auth-event")}}function me(){var M;return(null===(M=self?.location)||void 0===M?void 0:M.protocol)||null}function qe(M=(0,$e.ZQ)()){return!("file:"!==me()&&"ionic:"!==me()&&"capacitor:"!==me()||!M.toLowerCase().match(/iphone|ipad|ipod|android/))}function kn(){try{const M=self.localStorage,D=$.aN();if(M)return M.setItem(D,"1"),M.removeItem(D),!function Qe(M=(0,$e.ZQ)()){return function An(){return(0,$e.lT)()&&11===document?.documentMode}()||function at(M=(0,$e.ZQ)()){return/Edge\/\d+/.test(M)}(M)}()||(0,$e.zW)()}catch{return Fr()&&(0,$e.zW)()}return!1}function Fr(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ot(){return(function Ee(){return"http:"===me()||"https:"===me()}()||(0,$e.sr)()||qe())&&!function wt(){return(0,$e.lV)()||(0,$e.Ll)()}()&&kn()&&!Fr()}function Lt(){return qe()&&typeof document<"u"}function Lr(){return(Lr=(0,b.A)(function*(){return!!Lt()&&new Promise(M=>{const D=setTimeout(()=>{M(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(D),M(!0)})})})).apply(this,arguments)}const On={LOCAL:"local",NONE:"none",SESSION:"session"},hi=$.aC,zo="persistence";function aa(M){return zi.apply(this,arguments)}function zi(){return(zi=(0,b.A)(function*(M){yield M._initializationPromise;const D=Wr(),R=$.aF(zo,M.config.apiKey,M.name);D&&D.setItem(R,M._getPersistence())})).apply(this,arguments)}function Wr(){var M;try{return(null===(M=function ri(){return typeof window<"u"?window:null}())||void 0===M?void 0:M.sessionStorage)||null}catch{return null}}const yr=$.aC;class Ar{constructor(){this.browserResolver=$.aE($.k),this.cordovaResolver=$.aE(Cs),this.underlyingResolver=null,this._redirectPersistence=$.a,this._completeRedirectFn=$.aG,this._overrideRedirectResult=$.aH}_initialize(D){var R=this;return(0,b.A)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._initialize(D)})()}_openPopup(D,R,j,G){var le=this;return(0,b.A)(function*(){return yield le.selectUnderlyingResolver(),le.assertedUnderlyingResolver._openPopup(D,R,j,G)})()}_openRedirect(D,R,j,G){var le=this;return(0,b.A)(function*(){return yield le.selectUnderlyingResolver(),le.assertedUnderlyingResolver._openRedirect(D,R,j,G)})()}_isIframeWebStorageSupported(D,R){this.assertedUnderlyingResolver._isIframeWebStorageSupported(D,R)}_originValidation(D){return this.assertedUnderlyingResolver._originValidation(D)}get _shouldInitProactively(){return Lt()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return yr(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var D=this;return(0,b.A)(function*(){if(D.underlyingResolver)return;const R=yield function br(){return Lr.apply(this,arguments)}();D.underlyingResolver=R?D.cordovaResolver:D.browserResolver})()}}function la(M){return M.unwrap()}function ts(M){return Ws(M)}function Ws(M){const{_tokenResponse:D}=M instanceof $e.g?M.customData:M;if(!D)return null;if(!(M instanceof $e.g)&&"temporaryProof"in D&&"phoneNumber"in D)return $.P.credentialFromResult(M);const R=D.providerId;if(!R||R===$.p.PASSWORD)return null;let j;switch(R){case $.p.GOOGLE:j=$.X;break;case $.p.FACEBOOK:j=$.W;break;case $.p.GITHUB:j=$.Y;break;case $.p.TWITTER:j=$.$;break;default:const{oauthIdToken:G,oauthAccessToken:le,oauthTokenSecret:Oe,pendingToken:we,nonce:qt}=D;return le||Oe||G||we?we?R.startsWith("saml.")?$.aQ._create(R,we):$.N._fromParams({providerId:R,signInMethod:R,pendingToken:we,idToken:G,accessToken:le}):new $.Z(R).credential({idToken:G,accessToken:le,rawNonce:qt}):null}return M instanceof $e.g?j.credentialFromError(M):j.credentialFromResult(M)}function sn(M,D){return D.catch(R=>{throw R instanceof $e.g&&function Is(M,D){var R;const j=null===(R=D.customData)||void 0===R?void 0:R._tokenResponse;if("auth/multi-factor-auth-required"===D?.code)D.resolver=new ca(M,$.as(M,D));else if(j){const G=Ws(D),le=D;G&&(le.credential=G,le.tenantId=j.tenantId||void 0,le.email=j.email||void 0,le.phoneNumber=j.phoneNumber||void 0)}}(M,R),R}).then(R=>{const G=R.user;return{operationType:R.operationType,credential:ts(R),additionalUserInfo:$.aq(R),user:Cn.getOrCreate(G)}})}function ns(M,D){return ua.apply(this,arguments)}function ua(){return(ua=(0,b.A)(function*(M,D){const R=yield D;return{verificationId:R.verificationId,confirm:j=>sn(M,R.confirm(j))}})).apply(this,arguments)}class ca{constructor(D,R){this.resolver=R,this.auth=function mo(M){return M.wrapped()}(D)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(D){return sn(la(this.auth),this.resolver.resolveSignIn(D))}}class Cn{constructor(D){this._delegate=D,this.multiFactor=$.at(D)}static getOrCreate(D){return Cn.USER_MAP.has(D)||Cn.USER_MAP.set(D,new Cn(D)),Cn.USER_MAP.get(D)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(D){return this._delegate.getIdTokenResult(D)}getIdToken(D){return this._delegate.getIdToken(D)}linkAndRetrieveDataWithCredential(D){return this.linkWithCredential(D)}linkWithCredential(D){var R=this;return(0,b.A)(function*(){return sn(R.auth,$.a2(R._delegate,D))})()}linkWithPhoneNumber(D,R){var j=this;return(0,b.A)(function*(){return ns(j.auth,$.l(j._delegate,D,R))})()}linkWithPopup(D){var R=this;return(0,b.A)(function*(){return sn(R.auth,$.d(R._delegate,D,Ar))})()}linkWithRedirect(D){var R=this;return(0,b.A)(function*(){return yield aa($.aJ(R.auth)),$.g(R._delegate,D,Ar)})()}reauthenticateAndRetrieveDataWithCredential(D){return this.reauthenticateWithCredential(D)}reauthenticateWithCredential(D){var R=this;return(0,b.A)(function*(){return sn(R.auth,$.a3(R._delegate,D))})()}reauthenticateWithPhoneNumber(D,R){return ns(this.auth,$.r(this._delegate,D,R))}reauthenticateWithPopup(D){return sn(this.auth,$.e(this._delegate,D,Ar))}reauthenticateWithRedirect(D){var R=this;return(0,b.A)(function*(){return yield aa($.aJ(R.auth)),$.h(R._delegate,D,Ar)})()}sendEmailVerification(D){return $.ag(this._delegate,D)}unlink(D){var R=this;return(0,b.A)(function*(){return yield $.ap(R._delegate,D),R})()}updateEmail(D){return $.al(this._delegate,D)}updatePassword(D){return $.am(this._delegate,D)}updatePhoneNumber(D){return $.u(this._delegate,D)}updateProfile(D){return $.ak(this._delegate,D)}verifyBeforeUpdateEmail(D,R){return $.ah(this._delegate,D,R)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Cn.USER_MAP=new WeakMap;const ii=$.aC;let si=(()=>{class M{constructor(R,j){if(this.app=R,j.isInitialized())return this._delegate=j.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:G}=R.options;ii(G,"invalid-api-key",{appName:R.name}),ii(G,"invalid-api-key",{appName:R.name});const le=typeof window<"u"?Ar:void 0;this._delegate=j.initialize({options:{persistence:_o(G,R.name),popupRedirectResolver:le}}),this._delegate._updateErrorMap($.G),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Cn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(R){this._delegate.languageCode=R}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(R){this._delegate.tenantId=R}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(R,j){$.K(this._delegate,R,j)}applyActionCode(R){return $.a7(this._delegate,R)}checkActionCode(R){return $.a8(this._delegate,R)}confirmPasswordReset(R,j){return $.a6(this._delegate,R,j)}createUserWithEmailAndPassword(R,j){var G=this;return(0,b.A)(function*(){return sn(G._delegate,$.aa(G._delegate,R,j))})()}fetchProvidersForEmail(R){return this.fetchSignInMethodsForEmail(R)}fetchSignInMethodsForEmail(R){return $.af(this._delegate,R)}isSignInWithEmailLink(R){return $.ad(this._delegate,R)}getRedirectResult(){var R=this;return(0,b.A)(function*(){ii(Ot(),R._delegate,"operation-not-supported-in-this-environment");const j=yield $.j(R._delegate,Ar);return j?sn(R._delegate,Promise.resolve(j)):{credential:null,user:null}})()}addFrameworkForLogging(R){!function ie(M,D){(0,$.aJ)(M)._logFramework(D)}(this._delegate,R)}onAuthStateChanged(R,j,G){const{next:le,error:Oe,complete:we}=Ga(R,j,G);return this._delegate.onAuthStateChanged(le,Oe,we)}onIdTokenChanged(R,j,G){const{next:le,error:Oe,complete:we}=Ga(R,j,G);return this._delegate.onIdTokenChanged(le,Oe,we)}sendSignInLinkToEmail(R,j){return $.ac(this._delegate,R,j)}sendPasswordResetEmail(R,j){return $.a5(this._delegate,R,j||void 0)}setPersistence(R){var j=this;return(0,b.A)(function*(){let G;switch(function go(M,D){hi(Object.values(On).includes(D),M,"invalid-persistence-type"),(0,$e.lV)()?hi(D!==On.SESSION,M,"unsupported-persistence-type"):(0,$e.Ll)()?hi(D===On.NONE,M,"unsupported-persistence-type"):Fr()?hi(D===On.NONE||D===On.LOCAL&&(0,$e.zW)(),M,"unsupported-persistence-type"):hi(D===On.NONE||kn(),M,"unsupported-persistence-type")}(j._delegate,R),R){case On.SESSION:G=$.a;break;case On.LOCAL:G=(yield $.aE($.i)._isAvailable())?$.i:$.b;break;case On.NONE:G=$.U;break;default:return $.ax("argument-error",{appName:j._delegate.name})}return j._delegate.setPersistence(G)})()}signInAndRetrieveDataWithCredential(R){return this.signInWithCredential(R)}signInAnonymously(){return sn(this._delegate,$.a0(this._delegate))}signInWithCredential(R){return sn(this._delegate,$.a1(this._delegate,R))}signInWithCustomToken(R){return sn(this._delegate,$.a4(this._delegate,R))}signInWithEmailAndPassword(R,j){return sn(this._delegate,$.ab(this._delegate,R,j))}signInWithEmailLink(R,j){return sn(this._delegate,$.ae(this._delegate,R,j))}signInWithPhoneNumber(R,j){return ns(this._delegate,$.s(this._delegate,R,j))}signInWithPopup(R){var j=this;return(0,b.A)(function*(){return ii(Ot(),j._delegate,"operation-not-supported-in-this-environment"),sn(j._delegate,$.c(j._delegate,R,Ar))})()}signInWithRedirect(R){var j=this;return(0,b.A)(function*(){return ii(Ot(),j._delegate,"operation-not-supported-in-this-environment"),yield aa(j._delegate),$.f(j._delegate,R,Ar)})()}updateCurrentUser(R){return this._delegate.updateCurrentUser(R)}verifyPasswordResetCode(R){return $.a9(this._delegate,R)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return M.Persistence=On,M})();function Ga(M,D,R){let j=M;"function"!=typeof M&&({next:j,error:D,complete:R}=M);const G=j;return{next:Oe=>G(Oe&&Cn.getOrCreate(Oe)),error:D,complete:R}}function _o(M,D){const R=function Wa(M,D){const R=Wr();if(!R)return[];const j=$.aF(zo,M,D);switch(R.getItem(j)){case On.NONE:return[$.U];case On.LOCAL:return[$.i,$.a];case On.SESSION:return[$.a];default:return[]}}(M,D);if(typeof self<"u"&&!R.includes($.i)&&R.push($.i),typeof window<"u")for(const j of[$.b,$.a])R.includes(j)||R.push(j);return R.includes($.U)||R.push($.U),R}class an{constructor(){this.providerId="phone",this._delegate=new $.P(la(De.A.auth()))}static credential(D,R){return $.P.credential(D,R)}verifyPhoneNumber(D,R){return this._delegate.verifyPhoneNumber(D,R)}unwrap(){return this._delegate}}an.PHONE_SIGN_IN_METHOD=$.P.PHONE_SIGN_IN_METHOD,an.PROVIDER_ID=$.P.PROVIDER_ID;const da=$.aC;class Nu{constructor(D,R,j=De.A.app()){var G;da(null===(G=j.options)||void 0===G?void 0:G.apiKey,"invalid-api-key",{appName:j.name}),this._delegate=new $.R(j.auth(),D,R),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function ha(M){M.INTERNAL.registerComponent(new Ke.uA("auth-compat",D=>{const R=D.getProvider("app-compat").getImmediate(),j=D.getProvider("auth");return new si(R,j)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:$.A.EMAIL_SIGNIN,PASSWORD_RESET:$.A.PASSWORD_RESET,RECOVER_EMAIL:$.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:$.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:$.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:$.A.VERIFY_EMAIL}},EmailAuthProvider:$.V,FacebookAuthProvider:$.W,GithubAuthProvider:$.Y,GoogleAuthProvider:$.X,OAuthProvider:$.Z,SAMLAuthProvider:$._,PhoneAuthProvider:an,PhoneMultiFactorGenerator:$.m,RecaptchaVerifier:Nu,TwitterAuthProvider:$.$,Auth:si,AuthCredential:$.L,Error:$e.g}).setInstantiationMode("LAZY").setMultipleInstances(!1)),M.registerVersion("@firebase/auth-compat","0.5.14")}(De.A)},467:($o,ni,st)=>{function b($,$e,Qn,gn,Ke,bn,mn){try{var fe=$[bn](mn),ve=fe.value}catch(Ge){return void Qn(Ge)}fe.done?$e(ve):Promise.resolve(ve).then(gn,Ke)}function De($){return function(){var $e=this,Qn=arguments;return new Promise(function(gn,Ke){var bn=$.apply($e,Qn);function mn(ve){b(bn,gn,Ke,mn,fe,"next",ve)}function fe(ve){b(bn,gn,Ke,mn,fe,"throw",ve)}mn(void 0)})}}st.d(ni,{A:()=>De})},635:($o,ni,st)=>{function $e(ie,ae){var te={};for(var ne in ie)Object.prototype.hasOwnProperty.call(ie,ne)&&ae.indexOf(ne)<0&&(te[ne]=ie[ne]);if(null!=ie&&"function"==typeof Object.getOwnPropertySymbols){var me=0;for(ne=Object.getOwnPropertySymbols(ie);me<ne.length;me++)ae.indexOf(ne[me])<0&&Object.prototype.propertyIsEnumerable.call(ie,ne[me])&&(te[ne[me]]=ie[ne[me]])}return te}function Ge(ie,ae,te,ne){return new(te||(te=Promise))(function(Ee,qe){function wt(Qe){try{at(ne.next(Qe))}catch(kn){qe(kn)}}function An(Qe){try{at(ne.throw(Qe))}catch(kn){qe(kn)}}function at(Qe){Qe.done?Ee(Qe.value):function me(Ee){return Ee instanceof te?Ee:new te(function(qe){qe(Ee)})}(Qe.value).then(wt,An)}at((ne=ne.apply(ie,ae||[])).next())})}function kt(ie){return this instanceof kt?(this.v=ie,this):new kt(ie)}function dn(ie,ae,te){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var me,ne=te.apply(ie,ae||[]),Ee=[];return me=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),wt("next"),wt("throw"),wt("return",function qe(Ot){return function(Lt){return Promise.resolve(Lt).then(Ot,kn)}}),me[Symbol.asyncIterator]=function(){return this},me;function wt(Ot,Lt){ne[Ot]&&(me[Ot]=function(br){return new Promise(function(Lr,ri){Ee.push([Ot,br,Lr,ri])>1||An(Ot,br)})},Lt&&(me[Ot]=Lt(me[Ot])))}function An(Ot,Lt){try{!function at(Ot){Ot.value instanceof kt?Promise.resolve(Ot.value.v).then(Qe,kn):Fr(Ee[0][2],Ot)}(ne[Ot](Lt))}catch(br){Fr(Ee[0][3],br)}}function Qe(Ot){An("next",Ot)}function kn(Ot){An("throw",Ot)}function Fr(Ot,Lt){Ot(Lt),Ee.shift(),Ee.length&&An(Ee[0][0],Ee[0][1])}}function rn(ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var te,ae=ie[Symbol.asyncIterator];return ae?ae.call(ie):(ie=function zt(ie){var ae="function"==typeof Symbol&&Symbol.iterator,te=ae&&ie[ae],ne=0;if(te)return te.call(ie);if(ie&&"number"==typeof ie.length)return{next:function(){return ie&&ne>=ie.length&&(ie=void 0),{value:ie&&ie[ne++],done:!ie}}};throw new TypeError(ae?"Object is not iterable.":"Symbol.iterator is not defined.")}(ie),te={},ne("next"),ne("throw"),ne("return"),te[Symbol.asyncIterator]=function(){return this},te);function ne(Ee){te[Ee]=ie[Ee]&&function(qe){return new Promise(function(wt,An){!function me(Ee,qe,wt,An){Promise.resolve(An).then(function(at){Ee({value:at,done:wt})},qe)}(wt,An,(qe=ie[Ee](qe)).done,qe.value)})}}}st.d(ni,{AQ:()=>dn,N3:()=>kt,Tt:()=>$e,sH:()=>Ge,xN:()=>rn}),"function"==typeof SuppressedError&&SuppressedError}},$o=>{$o($o.s=333)}]);